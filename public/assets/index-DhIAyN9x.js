(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var ag={exports:{}},Ku={},lg={exports:{}},Le={};var DE;function _x(){if(DE)return Le;DE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,F={};function D(M,J,Ce){this.props=M,this.context=J,this.refs=F,this.updater=Ce||C}D.prototype.isReactComponent={},D.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},D.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Q(){}Q.prototype=D.prototype;function se(M,J,Ce){this.props=M,this.context=J,this.refs=F,this.updater=Ce||C}var ie=se.prototype=new Q;ie.constructor=se,k(ie,D.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray,ve=Object.prototype.hasOwnProperty,K={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(M,J,Ce){var Pe,Oe={},Ue=null,Je=null;if(J!=null)for(Pe in J.ref!==void 0&&(Je=J.ref),J.key!==void 0&&(Ue=""+J.key),J)ve.call(J,Pe)&&!b.hasOwnProperty(Pe)&&(Oe[Pe]=J[Pe]);var We=arguments.length-2;if(We===1)Oe.children=Ce;else if(1<We){for(var tt=Array(We),gn=0;gn<We;gn++)tt[gn]=arguments[gn+2];Oe.children=tt}if(M&&M.defaultProps)for(Pe in We=M.defaultProps,We)Oe[Pe]===void 0&&(Oe[Pe]=We[Pe]);return{$$typeof:n,type:M,key:Ue,ref:Je,props:Oe,_owner:K.current}}function x(M,J){return{$$typeof:n,type:M.type,key:J,ref:M.ref,props:M.props,_owner:M._owner}}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function V(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Ce){return J[Ce]})}var j=/\/+/g;function P(M,J){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):J.toString(36)}function je(M,J,Ce,Pe,Oe){var Ue=typeof M;(Ue==="undefined"||Ue==="boolean")&&(M=null);var Je=!1;if(M===null)Je=!0;else switch(Ue){case"string":case"number":Je=!0;break;case"object":switch(M.$$typeof){case n:case e:Je=!0}}if(Je)return Je=M,Oe=Oe(Je),M=Pe===""?"."+P(Je,0):Pe,pe(Oe)?(Ce="",M!=null&&(Ce=M.replace(j,"$&/")+"/"),je(Oe,J,Ce,"",function(gn){return gn})):Oe!=null&&(O(Oe)&&(Oe=x(Oe,Ce+(!Oe.key||Je&&Je.key===Oe.key?"":(""+Oe.key).replace(j,"$&/")+"/")+M)),J.push(Oe)),1;if(Je=0,Pe=Pe===""?".":Pe+":",pe(M))for(var We=0;We<M.length;We++){Ue=M[We];var tt=Pe+P(Ue,We);Je+=je(Ue,J,Ce,tt,Oe)}else if(tt=I(M),typeof tt=="function")for(M=tt.call(M),We=0;!(Ue=M.next()).done;)Ue=Ue.value,tt=Pe+P(Ue,We++),Je+=je(Ue,J,Ce,tt,Oe);else if(Ue==="object")throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Je}function gt(M,J,Ce){if(M==null)return M;var Pe=[],Oe=0;return je(M,Pe,"","",function(Ue){return J.call(Ce,Ue,Oe++)}),Pe}function Re(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(Ce){(M._status===0||M._status===-1)&&(M._status=1,M._result=Ce)},function(Ce){(M._status===0||M._status===-1)&&(M._status=2,M._result=Ce)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var ce={current:null},re={transition:null},Ie={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:re,ReactCurrentOwner:K};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:gt,forEach:function(M,J,Ce){gt(M,function(){J.apply(this,arguments)},Ce)},count:function(M){var J=0;return gt(M,function(){J++}),J},toArray:function(M){return gt(M,function(J){return J})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Le.Component=D,Le.Fragment=t,Le.Profiler=s,Le.PureComponent=se,Le.StrictMode=r,Le.Suspense=f,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,Le.act=fe,Le.cloneElement=function(M,J,Ce){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Pe=k({},M.props),Oe=M.key,Ue=M.ref,Je=M._owner;if(J!=null){if(J.ref!==void 0&&(Ue=J.ref,Je=K.current),J.key!==void 0&&(Oe=""+J.key),M.type&&M.type.defaultProps)var We=M.type.defaultProps;for(tt in J)ve.call(J,tt)&&!b.hasOwnProperty(tt)&&(Pe[tt]=J[tt]===void 0&&We!==void 0?We[tt]:J[tt])}var tt=arguments.length-2;if(tt===1)Pe.children=Ce;else if(1<tt){We=Array(tt);for(var gn=0;gn<tt;gn++)We[gn]=arguments[gn+2];Pe.children=We}return{$$typeof:n,type:M.type,key:Oe,ref:Ue,props:Pe,_owner:Je}},Le.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Le.createElement=A,Le.createFactory=function(M){var J=A.bind(null,M);return J.type=M,J},Le.createRef=function(){return{current:null}},Le.forwardRef=function(M){return{$$typeof:h,render:M}},Le.isValidElement=O,Le.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:Re}},Le.memo=function(M,J){return{$$typeof:p,type:M,compare:J===void 0?null:J}},Le.startTransition=function(M){var J=re.transition;re.transition={};try{M()}finally{re.transition=J}},Le.unstable_act=fe,Le.useCallback=function(M,J){return ce.current.useCallback(M,J)},Le.useContext=function(M){return ce.current.useContext(M)},Le.useDebugValue=function(){},Le.useDeferredValue=function(M){return ce.current.useDeferredValue(M)},Le.useEffect=function(M,J){return ce.current.useEffect(M,J)},Le.useId=function(){return ce.current.useId()},Le.useImperativeHandle=function(M,J,Ce){return ce.current.useImperativeHandle(M,J,Ce)},Le.useInsertionEffect=function(M,J){return ce.current.useInsertionEffect(M,J)},Le.useLayoutEffect=function(M,J){return ce.current.useLayoutEffect(M,J)},Le.useMemo=function(M,J){return ce.current.useMemo(M,J)},Le.useReducer=function(M,J,Ce){return ce.current.useReducer(M,J,Ce)},Le.useRef=function(M){return ce.current.useRef(M)},Le.useState=function(M){return ce.current.useState(M)},Le.useSyncExternalStore=function(M,J,Ce){return ce.current.useSyncExternalStore(M,J,Ce)},Le.useTransition=function(){return ce.current.useTransition()},Le.version="18.3.1",Le}var VE;function by(){return VE||(VE=1,lg.exports=_x()),lg.exports}var OE;function vx(){if(OE)return Ku;OE=1;var n=by(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var g,w={},I=null,C=null;p!==void 0&&(I=""+p),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(w[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)w[g]===void 0&&(w[g]=f[g]);return{$$typeof:e,type:h,key:I,ref:C,props:w,_owner:s.current}}return Ku.Fragment=t,Ku.jsx=l,Ku.jsxs=l,Ku}var LE;function wx(){return LE||(LE=1,ag.exports=vx()),ag.exports}var T=wx(),be=by(),Fd={},ug={exports:{}},xn={},cg={exports:{}},hg={};var ME;function Ex(){return ME||(ME=1,(function(n){function e(re,Ie){var fe=re.length;re.push(Ie);e:for(;0<fe;){var M=fe-1>>>1,J=re[M];if(0<s(J,Ie))re[M]=Ie,re[fe]=J,fe=M;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var Ie=re[0],fe=re.pop();if(fe!==Ie){re[0]=fe;e:for(var M=0,J=re.length,Ce=J>>>1;M<Ce;){var Pe=2*(M+1)-1,Oe=re[Pe],Ue=Pe+1,Je=re[Ue];if(0>s(Oe,fe))Ue<J&&0>s(Je,Oe)?(re[M]=Je,re[Ue]=fe,M=Ue):(re[M]=Oe,re[Pe]=fe,M=Pe);else if(Ue<J&&0>s(Je,fe))re[M]=Je,re[Ue]=fe,M=Ue;else break e}}return Ie}function s(re,Ie){var fe=re.sortIndex-Ie.sortIndex;return fe!==0?fe:re.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],g=1,w=null,I=3,C=!1,k=!1,F=!1,D=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(re){for(var Ie=t(p);Ie!==null;){if(Ie.callback===null)r(p);else if(Ie.startTime<=re)r(p),Ie.sortIndex=Ie.expirationTime,e(f,Ie);else break;Ie=t(p)}}function pe(re){if(F=!1,ie(re),!k)if(t(f)!==null)k=!0,Re(ve);else{var Ie=t(p);Ie!==null&&ce(pe,Ie.startTime-re)}}function ve(re,Ie){k=!1,F&&(F=!1,Q(A),A=-1),C=!0;var fe=I;try{for(ie(Ie),w=t(f);w!==null&&(!(w.expirationTime>Ie)||re&&!V());){var M=w.callback;if(typeof M=="function"){w.callback=null,I=w.priorityLevel;var J=M(w.expirationTime<=Ie);Ie=n.unstable_now(),typeof J=="function"?w.callback=J:w===t(f)&&r(f),ie(Ie)}else r(f);w=t(f)}if(w!==null)var Ce=!0;else{var Pe=t(p);Pe!==null&&ce(pe,Pe.startTime-Ie),Ce=!1}return Ce}finally{w=null,I=fe,C=!1}}var K=!1,b=null,A=-1,x=5,O=-1;function V(){return!(n.unstable_now()-O<x)}function j(){if(b!==null){var re=n.unstable_now();O=re;var Ie=!0;try{Ie=b(!0,re)}finally{Ie?P():(K=!1,b=null)}}else K=!1}var P;if(typeof se=="function")P=function(){se(j)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,gt=je.port2;je.port1.onmessage=j,P=function(){gt.postMessage(null)}}else P=function(){D(j,0)};function Re(re){b=re,K||(K=!0,P())}function ce(re,Ie){A=D(function(){re(n.unstable_now())},Ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){k||C||(k=!0,Re(ve))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var Ie=3;break;default:Ie=I}var fe=I;I=Ie;try{return re()}finally{I=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,Ie){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var fe=I;I=re;try{return Ie()}finally{I=fe}},n.unstable_scheduleCallback=function(re,Ie,fe){var M=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?M+fe:M):fe=M,re){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=fe+J,re={id:g++,callback:Ie,priorityLevel:re,startTime:fe,expirationTime:J,sortIndex:-1},fe>M?(re.sortIndex=fe,e(p,re),t(f)===null&&re===t(p)&&(F?(Q(A),A=-1):F=!0,ce(pe,fe-M))):(re.sortIndex=J,e(f,re),k||C||(k=!0,Re(ve))),re},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(re){var Ie=I;return function(){var fe=I;I=Ie;try{return re.apply(this,arguments)}finally{I=fe}}}})(hg)),hg}var FE;function Ix(){return FE||(FE=1,cg.exports=Ex()),cg.exports}var jE;function Tx(){if(jE)return xn;jE=1;var n=by(),e=Ix();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function I(i){return f.call(w,i)?!0:f.call(g,i)?!1:p.test(i)?w[i]=!0:(g[i]=!0,!1)}function C(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,d){if(o===null||typeof o>"u"||C(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function F(i,o,u,d,m,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){D[i]=new F(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];D[o]=new F(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){D[i]=new F(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){D[i]=new F(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){D[i]=new F(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){D[i]=new F(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){D[i]=new F(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){D[i]=new F(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){D[i]=new F(i,5,!1,i.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function se(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Q,se);D[o]=new F(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Q,se);D[o]=new F(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Q,se);D[o]=new F(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){D[i]=new F(i,1,!1,i.toLowerCase(),null,!1,!1)}),D.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){D[i]=new F(i,1,!1,i.toLowerCase(),null,!0,!0)});function ie(i,o,u,d){var m=D.hasOwnProperty(o)?D[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,m,d)&&(u=null),d||m===null?I(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var pe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),K=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),re=Symbol.iterator;function Ie(i){return i===null||typeof i!="object"?null:(i=re&&i[re]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,M;function J(i){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+i}var Ce=!1;function Pe(i,o){if(!i||Ce)return"";Ce=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch($){var d=$}Reflect.construct(i,[],o)}else{try{o.call()}catch($){d=$}i.call(o.prototype)}else{try{throw Error()}catch($){d=$}i()}}catch($){if($&&d&&typeof $.stack=="string"){for(var m=$.stack.split(`
`),y=d.stack.split(`
`),E=m.length-1,R=y.length-1;1<=E&&0<=R&&m[E]!==y[R];)R--;for(;1<=E&&0<=R;E--,R--)if(m[E]!==y[R]){if(E!==1||R!==1)do if(E--,R--,0>R||m[E]!==y[R]){var N=`
`+m[E].replace(" at new "," at ");return i.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",i.displayName)),N}while(1<=E&&0<=R);break}}}finally{Ce=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?J(i):""}function Oe(i){switch(i.tag){case 5:return J(i.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return i=Pe(i.type,!1),i;case 11:return i=Pe(i.type.render,!1),i;case 1:return i=Pe(i.type,!0),i;default:return""}}function Ue(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case K:return"Portal";case x:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case je:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case O:return(i._context.displayName||"Context")+".Provider";case j:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case gt:return o=i.displayName||null,o!==null?o:Ue(i.type)||"Memo";case Re:o=i._payload,i=i._init;try{return Ue(i(o))}catch{}}return null}function Je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function We(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function tt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function gn(i){var o=tt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function aa(i){i._valueTracker||(i._valueTracker=gn(i))}function eu(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=tt(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function Us(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function la(i,o){var u=o.checked;return fe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Th(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=We(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ua(i,o){o=o.checked,o!=null&&ie(i,"checked",o,!1)}function Qi(i,o){ua(i,o);var u=We(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Dt(i,o.type,u):o.hasOwnProperty("defaultValue")&&Dt(i,o.type,We(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function tu(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Dt(i,o,u){(o!=="number"||Us(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Rt=Array.isArray;function hr(i,o,u,d){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&d&&(i[u].defaultSelected=!0)}else{for(u=""+We(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function nu(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function ru(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Rt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:We(u)}}function Sh(i,o){var u=We(o.value),d=We(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function Bs(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function su(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?su(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var zs,Ah=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ji(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rh=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(i){Rh.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),qs[o]=qs[i]})});function $s(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||qs.hasOwnProperty(i)&&qs[i]?(""+o).trim():o+"px"}function ha(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=$s(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,m):i[u]=m}}var iu=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dr(i,o){if(o){if(iu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function da(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ws=null;function fa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ls=null,us=null,Et=null;function ou(i){if(i=Du(i)){if(typeof ls!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Zh(o),ls(i.stateNode,i.type,o))}}function Hs(i){us?Et?Et.push(i):Et=[i]:us=i}function Gs(){if(us){var i=us,o=Et;if(Et=us=null,ou(i),o)for(i=0;i<o.length;i++)ou(o[i])}}function Ph(i,o){return i(o)}function xh(){}var Pr=!1;function bh(i,o,u){if(Pr)return i(o,u);Pr=!0;try{return Ph(i,o,u)}finally{Pr=!1,(us!==null||Et!==null)&&(xh(),Gs())}}function Yi(i,o){var u=i.stateNode;if(u===null)return null;var d=Zh(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ks=!1;if(h)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){Ks=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{Ks=!1}function Ch(i,o,u,d,m,y,E,R,N){var $=Array.prototype.slice.call(arguments,3);try{o.apply(u,$)}catch(ee){this.onError(ee)}}var cs=!1,xr=null,pa=!1,Xn=null,kh={onError:function(i){cs=!0,xr=i}};function Nh(i,o,u,d,m,y,E,R,N){cs=!1,xr=null,Ch.apply(kh,arguments)}function au(i,o,u,d,m,y,E,R,N){if(Nh.apply(this,arguments),cs){if(cs){var $=xr;cs=!1,xr=null}else throw Error(t(198));pa||(pa=!0,Xn=$)}}function fr(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function lu(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Dh(i){if(fr(i)!==i)throw Error(t(188))}function Vh(i){var o=i.alternate;if(!o){if(o=fr(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return Dh(m),i;if(y===d)return Dh(m),o;y=y.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=y;else{for(var E=!1,R=m.child;R;){if(R===u){E=!0,u=m,d=y;break}if(R===d){E=!0,d=m,u=y;break}R=R.sibling}if(!E){for(R=y.child;R;){if(R===u){E=!0,u=y,d=m;break}if(R===d){E=!0,d=y,u=m;break}R=R.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Oh(i){return i=Vh(i),i!==null?Xi(i):null}function Xi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Xi(i);if(o!==null)return o;i=i.sibling}return null}var uu=e.unstable_scheduleCallback,ma=e.unstable_cancelCallback,Zi=e.unstable_shouldYield,hs=e.unstable_requestPaint,ot=e.unstable_now,Fp=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,cu=e.unstable_UserBlockingPriority,eo=e.unstable_NormalPriority,hu=e.unstable_LowPriority,ya=e.unstable_IdlePriority,to=null,Mn=null;function Lh(i){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(to,i,void 0,(i.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:no,br=Math.log,Zn=Math.LN2;function no(i){return i>>>=0,i===0?32:31-(br(i)/Zn|0)|0}var Cr=64,Js=4194304;function Qe(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ds(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,y=i.pingedLanes,E=u&268435455;if(E!==0){var R=E&~m;R!==0?d=Qe(R):(y&=E,y!==0&&(d=Qe(y)))}else E=u&~m,E!==0?d=Qe(E):y!==0&&(d=Qe(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-Fn(o),m=1<<u,d|=i[u],o&=~m;return d}function ro(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function so(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes;0<y;){var E=31-Fn(y),R=1<<E,N=m[E];N===-1?((R&u)===0||(R&d)!==0)&&(m[E]=ro(R,o)):N<=o&&(i.expiredLanes|=R),y&=~R}}function du(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function fu(){var i=Cr;return Cr<<=1,(Cr&4194240)===0&&(Cr=64),i}function pu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function io(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Fn(o),i[o]=u}function jp(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-Fn(u),y=1<<m;o[m]=0,d[m]=-1,i[m]=-1,u&=~y}}function mu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-Fn(u),m=1<<d;m&o|i[d]&o&&(i[d]|=o),u&=~m}}var ze=0;function kr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var gu,_a,yu,_u,vu,Nr=!1,va=[],Dr=null,Vr=null,Jt=null,oo=new Map,fs=new Map,jn=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ys(i,o){switch(i){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":oo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fs.delete(o.pointerId)}}function pr(i,o,u,d,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Du(o),o!==null&&_a(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function Fh(i,o,u,d,m){switch(o){case"focusin":return Dr=pr(Dr,i,o,u,d,m),!0;case"dragenter":return Vr=pr(Vr,i,o,u,d,m),!0;case"mouseover":return Jt=pr(Jt,i,o,u,d,m),!0;case"pointerover":var y=m.pointerId;return oo.set(y,pr(oo.get(y)||null,i,o,u,d,m)),!0;case"gotpointercapture":return y=m.pointerId,fs.set(y,pr(fs.get(y)||null,i,o,u,d,m)),!0}return!1}function wa(i){var o=co(i.target);if(o!==null){var u=fr(o);if(u!==null){if(o=u.tag,o===13){if(o=lu(u),o!==null){i.blockedOn=o,vu(i.priority,function(){yu(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nt(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ea(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Ws=d,u.target.dispatchEvent(d),Ws=null}else return o=Du(u),o!==null&&_a(o),i.blockedOn=u,!1;o.shift()}return!0}function jh(i,o,u){nt(i)&&u.delete(o)}function Up(){Nr=!1,Dr!==null&&nt(Dr)&&(Dr=null),Vr!==null&&nt(Vr)&&(Vr=null),Jt!==null&&nt(Jt)&&(Jt=null),oo.forEach(jh),fs.forEach(jh)}function Xs(i,o){i.blockedOn===o&&(i.blockedOn=null,Nr||(Nr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Up)))}function Zs(i){function o(m){return Xs(m,i)}if(0<va.length){Xs(va[0],i);for(var u=1;u<va.length;u++){var d=va[u];d.blockedOn===i&&(d.blockedOn=null)}}for(Dr!==null&&Xs(Dr,i),Vr!==null&&Xs(Vr,i),Jt!==null&&Xs(Jt,i),oo.forEach(o),fs.forEach(o),u=0;u<jn.length;u++)d=jn[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<jn.length&&(u=jn[0],u.blockedOn===null);)wa(u),u.blockedOn===null&&jn.shift()}var ps=pe.ReactCurrentBatchConfig,ms=!0;function Or(i,o,u,d){var m=ze,y=ps.transition;ps.transition=null;try{ze=1,wu(i,o,u,d)}finally{ze=m,ps.transition=y}}function Uh(i,o,u,d){var m=ze,y=ps.transition;ps.transition=null;try{ze=4,wu(i,o,u,d)}finally{ze=m,ps.transition=y}}function wu(i,o,u,d){if(ms){var m=Ea(i,o,u,d);if(m===null)Yp(i,o,d,Lr,u),Ys(i,d);else if(Fh(m,i,o,u,d))d.stopPropagation();else if(Ys(i,d),o&4&&-1<Mh.indexOf(i)){for(;m!==null;){var y=Du(m);if(y!==null&&gu(y),y=Ea(i,o,u,d),y===null&&Yp(i,o,d,Lr,u),y===m)break;m=y}m!==null&&d.stopPropagation()}else Yp(i,o,d,null,u)}}var Lr=null;function Ea(i,o,u,d){if(Lr=null,i=fa(d),i=co(i),i!==null)if(o=fr(i),o===null)i=null;else if(u=o.tag,u===13){if(i=lu(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Lr=i,null}function Ia(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fp()){case ga:return 1;case cu:return 4;case eo:case hu:return 16;case ya:return 536870912;default:return 16}default:return 16}}var Un=null,Ta=null,gs=null;function Bh(){if(gs)return gs;var i,o=Ta,u=o.length,d,m="value"in Un?Un.value:Un.textContent,y=m.length;for(i=0;i<u&&o[i]===m[i];i++);var E=u-i;for(d=1;d<=E&&o[u-d]===m[y-d];d++);return gs=m.slice(i,1<d?1-d:void 0)}function ao(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Mr(){return!0}function Eu(){return!1}function sn(i){function o(u,d,m,y,E){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(u=i[R],this[R]=u?u(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mr:Eu,this.isPropagationStopped=Eu,this}return fe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lo=sn(Fr),ei=fe({},Fr,{view:0,detail:0}),Sa=sn(ei),Aa,Ra,Bn,uo=fe({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bn&&(Bn&&i.type==="mousemove"?(Aa=i.screenX-Bn.screenX,Ra=i.screenY-Bn.screenY):Ra=Aa=0,Bn=i),Aa)},movementY:function(i){return"movementY"in i?i.movementY:Ra}}),Iu=sn(uo),zh=fe({},uo,{dataTransfer:0}),qh=sn(zh),Pa=fe({},ei,{relatedTarget:0}),Yt=sn(Pa),$h=fe({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wh=sn($h),ti=fe({},Fr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),c=sn(ti),_=fe({},Fr,{data:0}),v=sn(_),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ae(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=H[i])?!!o[i]:!1}function Ne(){return ae}var Pt=fe({},ei,{key:function(i){if(i.key){var o=S[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ao(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?z[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(i){return i.type==="keypress"?ao(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ao(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xe=sn(Pt),Vt=fe({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=sn(Vt),ys=fe({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),jr=sn(ys),Ur=fe({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xa=sn(Ur),Tu=fe({},uo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),dP=sn(Tu),fP=[9,13,27,32],Bp=h&&"CompositionEvent"in window,Su=null;h&&"documentMode"in document&&(Su=document.documentMode);var pP=h&&"TextEvent"in window&&!Su,Av=h&&(!Bp||Su&&8<Su&&11>=Su),Rv=" ",Pv=!1;function xv(i,o){switch(i){case"keyup":return fP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ba=!1;function mP(i,o){switch(i){case"compositionend":return bv(o);case"keypress":return o.which!==32?null:(Pv=!0,Rv);case"textInput":return i=o.data,i===Rv&&Pv?null:i;default:return null}}function gP(i,o){if(ba)return i==="compositionend"||!Bp&&xv(i,o)?(i=Bh(),gs=Ta=Un=null,ba=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Av&&o.locale!=="ko"?null:o.data;default:return null}}var yP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!yP[i.type]:o==="textarea"}function kv(i,o,u,d){Hs(d),o=Jh(o,"onChange"),0<o.length&&(u=new lo("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Au=null,Ru=null;function _P(i){Qv(i,0)}function Hh(i){var o=Va(i);if(eu(o))return i}function vP(i,o){if(i==="change")return o}var Nv=!1;if(h){var zp;if(h){var qp="oninput"in document;if(!qp){var Dv=document.createElement("div");Dv.setAttribute("oninput","return;"),qp=typeof Dv.oninput=="function"}zp=qp}else zp=!1;Nv=zp&&(!document.documentMode||9<document.documentMode)}function Vv(){Au&&(Au.detachEvent("onpropertychange",Ov),Ru=Au=null)}function Ov(i){if(i.propertyName==="value"&&Hh(Ru)){var o=[];kv(o,Ru,i,fa(i)),bh(_P,o)}}function wP(i,o,u){i==="focusin"?(Vv(),Au=o,Ru=u,Au.attachEvent("onpropertychange",Ov)):i==="focusout"&&Vv()}function EP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hh(Ru)}function IP(i,o){if(i==="click")return Hh(o)}function TP(i,o){if(i==="input"||i==="change")return Hh(o)}function SP(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var mr=typeof Object.is=="function"?Object.is:SP;function Pu(i,o){if(mr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!mr(i[m],o[m]))return!1}return!0}function Lv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Mv(i,o){var u=Lv(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Lv(u)}}function Fv(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Fv(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function jv(){for(var i=window,o=Us();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Us(i.document)}return o}function $p(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function AP(i){var o=jv(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Fv(u.ownerDocument.documentElement,u)){if(d!==null&&$p(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!i.extend&&y>d&&(m=d,d=y,y=m),m=Mv(u,y);var E=Mv(u,d);m&&E&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==E.node||i.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),y>d?(i.addRange(o),i.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var RP=h&&"documentMode"in document&&11>=document.documentMode,Ca=null,Wp=null,xu=null,Hp=!1;function Uv(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hp||Ca==null||Ca!==Us(d)||(d=Ca,"selectionStart"in d&&$p(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xu&&Pu(xu,d)||(xu=d,d=Jh(Wp,"onSelect"),0<d.length&&(o=new lo("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=Ca)))}function Gh(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ka={animationend:Gh("Animation","AnimationEnd"),animationiteration:Gh("Animation","AnimationIteration"),animationstart:Gh("Animation","AnimationStart"),transitionend:Gh("Transition","TransitionEnd")},Gp={},Bv={};h&&(Bv=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Kh(i){if(Gp[i])return Gp[i];if(!ka[i])return i;var o=ka[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Bv)return Gp[i]=o[u];return i}var zv=Kh("animationend"),qv=Kh("animationiteration"),$v=Kh("animationstart"),Wv=Kh("transitionend"),Hv=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(i,o){Hv.set(i,o),a(o,[i])}for(var Kp=0;Kp<Gv.length;Kp++){var Qp=Gv[Kp],PP=Qp.toLowerCase(),xP=Qp[0].toUpperCase()+Qp.slice(1);ni(PP,"on"+xP)}ni(zv,"onAnimationEnd"),ni(qv,"onAnimationIteration"),ni($v,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(Wv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bP=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function Kv(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,au(d,o,void 0,i),i.currentTarget=null}function Qv(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],m=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var R=d[E],N=R.instance,$=R.currentTarget;if(R=R.listener,N!==y&&m.isPropagationStopped())break e;Kv(m,R,$),y=N}else for(E=0;E<d.length;E++){if(R=d[E],N=R.instance,$=R.currentTarget,R=R.listener,N!==y&&m.isPropagationStopped())break e;Kv(m,R,$),y=N}}}if(pa)throw i=Xn,pa=!1,Xn=null,i}function at(i,o){var u=o[rm];u===void 0&&(u=o[rm]=new Set);var d=i+"__bubble";u.has(d)||(Jv(o,i,2,!1),u.add(d))}function Jp(i,o,u){var d=0;o&&(d|=4),Jv(u,i,d,o)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Cu(i){if(!i[Qh]){i[Qh]=!0,r.forEach(function(u){u!=="selectionchange"&&(bP.has(u)||Jp(u,!1,i),Jp(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Qh]||(o[Qh]=!0,Jp("selectionchange",!1,o))}}function Jv(i,o,u,d){switch(Ia(o)){case 1:var m=Or;break;case 4:m=Uh;break;default:m=wu}u=m.bind(null,o,u,i),m=void 0,!Ks||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function Yp(i,o,u,d,m){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var R=d.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(E===4)for(E=d.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===m||N.nodeType===8&&N.parentNode===m))return;E=E.return}for(;R!==null;){if(E=co(R),E===null)return;if(N=E.tag,N===5||N===6){d=y=E;continue e}R=R.parentNode}}d=d.return}bh(function(){var $=y,ee=fa(u),ne=[];e:{var X=Hv.get(i);if(X!==void 0){var de=lo,ge=i;switch(i){case"keypress":if(ao(u)===0)break e;case"keydown":case"keyup":de=Xe;break;case"focusin":ge="focus",de=Yt;break;case"focusout":ge="blur",de=Yt;break;case"beforeblur":case"afterblur":de=Yt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=jr;break;case zv:case qv:case $v:de=Wh;break;case Wv:de=xa;break;case"scroll":de=Sa;break;case"wheel":de=dP;break;case"copy":case"cut":case"paste":de=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=zn}var _e=(o&4)!==0,xt=!_e&&i==="scroll",B=_e?X!==null?X+"Capture":null:X;_e=[];for(var L=$,q;L!==null;){q=L;var oe=q.stateNode;if(q.tag===5&&oe!==null&&(q=oe,B!==null&&(oe=Yi(L,B),oe!=null&&_e.push(ku(L,oe,q)))),xt)break;L=L.return}0<_e.length&&(X=new de(X,ge,null,u,ee),ne.push({event:X,listeners:_e}))}}if((o&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",X&&u!==Ws&&(ge=u.relatedTarget||u.fromElement)&&(co(ge)||ge[_s]))break e;if((de||X)&&(X=ee.window===ee?ee:(X=ee.ownerDocument)?X.defaultView||X.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=$,ge=ge?co(ge):null,ge!==null&&(xt=fr(ge),ge!==xt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=$),de!==ge)){if(_e=Iu,oe="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(_e=zn,oe="onPointerLeave",B="onPointerEnter",L="pointer"),xt=de==null?X:Va(de),q=ge==null?X:Va(ge),X=new _e(oe,L+"leave",de,u,ee),X.target=xt,X.relatedTarget=q,oe=null,co(ee)===$&&(_e=new _e(B,L+"enter",ge,u,ee),_e.target=q,_e.relatedTarget=xt,oe=_e),xt=oe,de&&ge)t:{for(_e=de,B=ge,L=0,q=_e;q;q=Na(q))L++;for(q=0,oe=B;oe;oe=Na(oe))q++;for(;0<L-q;)_e=Na(_e),L--;for(;0<q-L;)B=Na(B),q--;for(;L--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=Na(_e),B=Na(B)}_e=null}else _e=null;de!==null&&Yv(ne,X,de,_e,!1),ge!==null&&xt!==null&&Yv(ne,xt,ge,_e,!0)}}e:{if(X=$?Va($):window,de=X.nodeName&&X.nodeName.toLowerCase(),de==="select"||de==="input"&&X.type==="file")var we=vP;else if(Cv(X))if(Nv)we=TP;else{we=EP;var Se=wP}else(de=X.nodeName)&&de.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(we=IP);if(we&&(we=we(i,$))){kv(ne,we,u,ee);break e}Se&&Se(i,X,$),i==="focusout"&&(Se=X._wrapperState)&&Se.controlled&&X.type==="number"&&Dt(X,"number",X.value)}switch(Se=$?Va($):window,i){case"focusin":(Cv(Se)||Se.contentEditable==="true")&&(Ca=Se,Wp=$,xu=null);break;case"focusout":xu=Wp=Ca=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Uv(ne,u,ee);break;case"selectionchange":if(RP)break;case"keydown":case"keyup":Uv(ne,u,ee)}var Ae;if(Bp)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else ba?xv(i,u)&&(xe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xe="onCompositionStart");xe&&(Av&&u.locale!=="ko"&&(ba||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&ba&&(Ae=Bh()):(Un=ee,Ta="value"in Un?Un.value:Un.textContent,ba=!0)),Se=Jh($,xe),0<Se.length&&(xe=new v(xe,i,null,u,ee),ne.push({event:xe,listeners:Se}),Ae?xe.data=Ae:(Ae=bv(u),Ae!==null&&(xe.data=Ae)))),(Ae=pP?mP(i,u):gP(i,u))&&($=Jh($,"onBeforeInput"),0<$.length&&(ee=new v("onBeforeInput","beforeinput",null,u,ee),ne.push({event:ee,listeners:$}),ee.data=Ae))}Qv(ne,o)})}function ku(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Jh(i,o){for(var u=o+"Capture",d=[];i!==null;){var m=i,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Yi(i,u),y!=null&&d.unshift(ku(i,y,m)),y=Yi(i,o),y!=null&&d.push(ku(i,y,m))),i=i.return}return d}function Na(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Yv(i,o,u,d,m){for(var y=o._reactName,E=[];u!==null&&u!==d;){var R=u,N=R.alternate,$=R.stateNode;if(N!==null&&N===d)break;R.tag===5&&$!==null&&(R=$,m?(N=Yi(u,y),N!=null&&E.unshift(ku(u,N,R))):m||(N=Yi(u,y),N!=null&&E.push(ku(u,N,R)))),u=u.return}E.length!==0&&i.push({event:o,listeners:E})}var CP=/\r\n?/g,kP=/\u0000|\uFFFD/g;function Xv(i){return(typeof i=="string"?i:""+i).replace(CP,`
`).replace(kP,"")}function Yh(i,o,u){if(o=Xv(o),Xv(i)!==o&&u)throw Error(t(425))}function Xh(){}var Xp=null,Zp=null;function em(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,NP=typeof clearTimeout=="function"?clearTimeout:void 0,Zv=typeof Promise=="function"?Promise:void 0,DP=typeof queueMicrotask=="function"?queueMicrotask:typeof Zv<"u"?function(i){return Zv.resolve(null).then(i).catch(VP)}:tm;function VP(i){setTimeout(function(){throw i})}function nm(i,o){var u=o,d=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){i.removeChild(m),Zs(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Zs(o)}function ri(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function ew(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Br="__reactFiber$"+Da,Nu="__reactProps$"+Da,_s="__reactContainer$"+Da,rm="__reactEvents$"+Da,OP="__reactListeners$"+Da,LP="__reactHandles$"+Da;function co(i){var o=i[Br];if(o)return o;for(var u=i.parentNode;u;){if(o=u[_s]||u[Br]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=ew(i);i!==null;){if(u=i[Br])return u;i=ew(i)}return o}i=u,u=i.parentNode}return null}function Du(i){return i=i[Br]||i[_s],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Va(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Zh(i){return i[Nu]||null}var sm=[],Oa=-1;function si(i){return{current:i}}function lt(i){0>Oa||(i.current=sm[Oa],sm[Oa]=null,Oa--)}function rt(i,o){Oa++,sm[Oa]=i.current,i.current=o}var ii={},on=si(ii),Tn=si(!1),ho=ii;function La(i,o){var u=i.type.contextTypes;if(!u)return ii;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=o[y];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(i){return i=i.childContextTypes,i!=null}function ed(){lt(Tn),lt(on)}function tw(i,o,u){if(on.current!==ii)throw Error(t(168));rt(on,o),rt(Tn,u)}function nw(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,Je(i)||"Unknown",m));return fe({},u,d)}function td(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ii,ho=on.current,rt(on,i),rt(Tn,Tn.current),!0}function rw(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=nw(i,o,ho),d.__reactInternalMemoizedMergedChildContext=i,lt(Tn),lt(on),rt(on,i)):lt(Tn),rt(Tn,u)}var vs=null,nd=!1,im=!1;function sw(i){vs===null?vs=[i]:vs.push(i)}function MP(i){nd=!0,sw(i)}function oi(){if(!im&&vs!==null){im=!0;var i=0,o=ze;try{var u=vs;for(ze=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}vs=null,nd=!1}catch(m){throw vs!==null&&(vs=vs.slice(i+1)),uu(ga,oi),m}finally{ze=o,im=!1}}return null}var Ma=[],Fa=0,rd=null,sd=0,er=[],tr=0,fo=null,ws=1,Es="";function po(i,o){Ma[Fa++]=sd,Ma[Fa++]=rd,rd=i,sd=o}function iw(i,o,u){er[tr++]=ws,er[tr++]=Es,er[tr++]=fo,fo=i;var d=ws;i=Es;var m=32-Fn(d)-1;d&=~(1<<m),u+=1;var y=32-Fn(o)+m;if(30<y){var E=m-m%5;y=(d&(1<<E)-1).toString(32),d>>=E,m-=E,ws=1<<32-Fn(o)+m|u<<m|d,Es=y+i}else ws=1<<y|u<<m|d,Es=i}function om(i){i.return!==null&&(po(i,1),iw(i,1,0))}function am(i){for(;i===rd;)rd=Ma[--Fa],Ma[Fa]=null,sd=Ma[--Fa],Ma[Fa]=null;for(;i===fo;)fo=er[--tr],er[tr]=null,Es=er[--tr],er[tr]=null,ws=er[--tr],er[tr]=null}var qn=null,$n=null,dt=!1,gr=null;function ow(i,o){var u=ir(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function aw(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,qn=i,$n=ri(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,qn=i,$n=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=fo!==null?{id:ws,overflow:Es}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=ir(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,qn=i,$n=null,!0):!1;default:return!1}}function lm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function um(i){if(dt){var o=$n;if(o){var u=o;if(!aw(i,o)){if(lm(i))throw Error(t(418));o=ri(u.nextSibling);var d=qn;o&&aw(i,o)?ow(d,u):(i.flags=i.flags&-4097|2,dt=!1,qn=i)}}else{if(lm(i))throw Error(t(418));i.flags=i.flags&-4097|2,dt=!1,qn=i}}}function lw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;qn=i}function id(i){if(i!==qn)return!1;if(!dt)return lw(i),dt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!em(i.type,i.memoizedProps)),o&&(o=$n)){if(lm(i))throw uw(),Error(t(418));for(;o;)ow(i,o),o=ri(o.nextSibling)}if(lw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){$n=ri(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}$n=null}}else $n=qn?ri(i.stateNode.nextSibling):null;return!0}function uw(){for(var i=$n;i;)i=ri(i.nextSibling)}function ja(){$n=qn=null,dt=!1}function cm(i){gr===null?gr=[i]:gr.push(i)}var FP=pe.ReactCurrentBatchConfig;function Vu(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var m=d,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var R=m.refs;E===null?delete R[y]:R[y]=E},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function od(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function cw(i){var o=i._init;return o(i._payload)}function hw(i){function o(B,L){if(i){var q=B.deletions;q===null?(B.deletions=[L],B.flags|=16):q.push(L)}}function u(B,L){if(!i)return null;for(;L!==null;)o(B,L),L=L.sibling;return null}function d(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function m(B,L){return B=pi(B,L),B.index=0,B.sibling=null,B}function y(B,L,q){return B.index=q,i?(q=B.alternate,q!==null?(q=q.index,q<L?(B.flags|=2,L):q):(B.flags|=2,L)):(B.flags|=1048576,L)}function E(B){return i&&B.alternate===null&&(B.flags|=2),B}function R(B,L,q,oe){return L===null||L.tag!==6?(L=tg(q,B.mode,oe),L.return=B,L):(L=m(L,q),L.return=B,L)}function N(B,L,q,oe){var we=q.type;return we===b?ee(B,L,q.props.children,oe,q.key):L!==null&&(L.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Re&&cw(we)===L.type)?(oe=m(L,q.props),oe.ref=Vu(B,L,q),oe.return=B,oe):(oe=Cd(q.type,q.key,q.props,null,B.mode,oe),oe.ref=Vu(B,L,q),oe.return=B,oe)}function $(B,L,q,oe){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=ng(q,B.mode,oe),L.return=B,L):(L=m(L,q.children||[]),L.return=B,L)}function ee(B,L,q,oe,we){return L===null||L.tag!==7?(L=Io(q,B.mode,oe,we),L.return=B,L):(L=m(L,q),L.return=B,L)}function ne(B,L,q){if(typeof L=="string"&&L!==""||typeof L=="number")return L=tg(""+L,B.mode,q),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ve:return q=Cd(L.type,L.key,L.props,null,B.mode,q),q.ref=Vu(B,null,L),q.return=B,q;case K:return L=ng(L,B.mode,q),L.return=B,L;case Re:var oe=L._init;return ne(B,oe(L._payload),q)}if(Rt(L)||Ie(L))return L=Io(L,B.mode,q,null),L.return=B,L;od(B,L)}return null}function X(B,L,q,oe){var we=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return we!==null?null:R(B,L,""+q,oe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case ve:return q.key===we?N(B,L,q,oe):null;case K:return q.key===we?$(B,L,q,oe):null;case Re:return we=q._init,X(B,L,we(q._payload),oe)}if(Rt(q)||Ie(q))return we!==null?null:ee(B,L,q,oe,null);od(B,q)}return null}function de(B,L,q,oe,we){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return B=B.get(q)||null,R(L,B,""+oe,we);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case ve:return B=B.get(oe.key===null?q:oe.key)||null,N(L,B,oe,we);case K:return B=B.get(oe.key===null?q:oe.key)||null,$(L,B,oe,we);case Re:var Se=oe._init;return de(B,L,q,Se(oe._payload),we)}if(Rt(oe)||Ie(oe))return B=B.get(q)||null,ee(L,B,oe,we,null);od(L,oe)}return null}function ge(B,L,q,oe){for(var we=null,Se=null,Ae=L,xe=L=0,Wt=null;Ae!==null&&xe<q.length;xe++){Ae.index>xe?(Wt=Ae,Ae=null):Wt=Ae.sibling;var Ge=X(B,Ae,q[xe],oe);if(Ge===null){Ae===null&&(Ae=Wt);break}i&&Ae&&Ge.alternate===null&&o(B,Ae),L=y(Ge,L,xe),Se===null?we=Ge:Se.sibling=Ge,Se=Ge,Ae=Wt}if(xe===q.length)return u(B,Ae),dt&&po(B,xe),we;if(Ae===null){for(;xe<q.length;xe++)Ae=ne(B,q[xe],oe),Ae!==null&&(L=y(Ae,L,xe),Se===null?we=Ae:Se.sibling=Ae,Se=Ae);return dt&&po(B,xe),we}for(Ae=d(B,Ae);xe<q.length;xe++)Wt=de(Ae,B,xe,q[xe],oe),Wt!==null&&(i&&Wt.alternate!==null&&Ae.delete(Wt.key===null?xe:Wt.key),L=y(Wt,L,xe),Se===null?we=Wt:Se.sibling=Wt,Se=Wt);return i&&Ae.forEach(function(mi){return o(B,mi)}),dt&&po(B,xe),we}function _e(B,L,q,oe){var we=Ie(q);if(typeof we!="function")throw Error(t(150));if(q=we.call(q),q==null)throw Error(t(151));for(var Se=we=null,Ae=L,xe=L=0,Wt=null,Ge=q.next();Ae!==null&&!Ge.done;xe++,Ge=q.next()){Ae.index>xe?(Wt=Ae,Ae=null):Wt=Ae.sibling;var mi=X(B,Ae,Ge.value,oe);if(mi===null){Ae===null&&(Ae=Wt);break}i&&Ae&&mi.alternate===null&&o(B,Ae),L=y(mi,L,xe),Se===null?we=mi:Se.sibling=mi,Se=mi,Ae=Wt}if(Ge.done)return u(B,Ae),dt&&po(B,xe),we;if(Ae===null){for(;!Ge.done;xe++,Ge=q.next())Ge=ne(B,Ge.value,oe),Ge!==null&&(L=y(Ge,L,xe),Se===null?we=Ge:Se.sibling=Ge,Se=Ge);return dt&&po(B,xe),we}for(Ae=d(B,Ae);!Ge.done;xe++,Ge=q.next())Ge=de(Ae,B,xe,Ge.value,oe),Ge!==null&&(i&&Ge.alternate!==null&&Ae.delete(Ge.key===null?xe:Ge.key),L=y(Ge,L,xe),Se===null?we=Ge:Se.sibling=Ge,Se=Ge);return i&&Ae.forEach(function(yx){return o(B,yx)}),dt&&po(B,xe),we}function xt(B,L,q,oe){if(typeof q=="object"&&q!==null&&q.type===b&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case ve:e:{for(var we=q.key,Se=L;Se!==null;){if(Se.key===we){if(we=q.type,we===b){if(Se.tag===7){u(B,Se.sibling),L=m(Se,q.props.children),L.return=B,B=L;break e}}else if(Se.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Re&&cw(we)===Se.type){u(B,Se.sibling),L=m(Se,q.props),L.ref=Vu(B,Se,q),L.return=B,B=L;break e}u(B,Se);break}else o(B,Se);Se=Se.sibling}q.type===b?(L=Io(q.props.children,B.mode,oe,q.key),L.return=B,B=L):(oe=Cd(q.type,q.key,q.props,null,B.mode,oe),oe.ref=Vu(B,L,q),oe.return=B,B=oe)}return E(B);case K:e:{for(Se=q.key;L!==null;){if(L.key===Se)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){u(B,L.sibling),L=m(L,q.children||[]),L.return=B,B=L;break e}else{u(B,L);break}else o(B,L);L=L.sibling}L=ng(q,B.mode,oe),L.return=B,B=L}return E(B);case Re:return Se=q._init,xt(B,L,Se(q._payload),oe)}if(Rt(q))return ge(B,L,q,oe);if(Ie(q))return _e(B,L,q,oe);od(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,L!==null&&L.tag===6?(u(B,L.sibling),L=m(L,q),L.return=B,B=L):(u(B,L),L=tg(q,B.mode,oe),L.return=B,B=L),E(B)):u(B,L)}return xt}var Ua=hw(!0),dw=hw(!1),ad=si(null),ld=null,Ba=null,hm=null;function dm(){hm=Ba=ld=null}function fm(i){var o=ad.current;lt(ad),i._currentValue=o}function pm(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function za(i,o){ld=i,hm=Ba=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(An=!0),i.firstContext=null)}function nr(i){var o=i._currentValue;if(hm!==i)if(i={context:i,memoizedValue:o,next:null},Ba===null){if(ld===null)throw Error(t(308));Ba=i,ld.dependencies={lanes:0,firstContext:i}}else Ba=Ba.next=i;return o}var mo=null;function mm(i){mo===null?mo=[i]:mo.push(i)}function fw(i,o,u,d){var m=o.interleaved;return m===null?(u.next=u,mm(o)):(u.next=m.next,m.next=u),o.interleaved=u,Is(i,d)}function Is(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var ai=!1;function gm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pw(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Ts(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function li(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(He&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Is(i,u)}return m=d.interleaved,m===null?(o.next=o,mm(d)):(o.next=m.next,m.next=o),d.interleaved=o,Is(i,u)}function ud(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,mu(i,u)}}function mw(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?m=y=o:y=y.next=o}else m=y=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function cd(i,o,u,d){var m=i.updateQueue;ai=!1;var y=m.firstBaseUpdate,E=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var N=R,$=N.next;N.next=null,E===null?y=$:E.next=$,E=N;var ee=i.alternate;ee!==null&&(ee=ee.updateQueue,R=ee.lastBaseUpdate,R!==E&&(R===null?ee.firstBaseUpdate=$:R.next=$,ee.lastBaseUpdate=N))}if(y!==null){var ne=m.baseState;E=0,ee=$=N=null,R=y;do{var X=R.lane,de=R.eventTime;if((d&X)===X){ee!==null&&(ee=ee.next={eventTime:de,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var ge=i,_e=R;switch(X=o,de=u,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){ne=ge.call(de,ne,X);break e}ne=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,X=typeof ge=="function"?ge.call(de,ne,X):ge,X==null)break e;ne=fe({},ne,X);break e;case 2:ai=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,X=m.effects,X===null?m.effects=[R]:X.push(R))}else de={eventTime:de,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ee===null?($=ee=de,N=ne):ee=ee.next=de,E|=X;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;X=R,R=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);if(ee===null&&(N=ne),m.baseState=N,m.firstBaseUpdate=$,m.lastBaseUpdate=ee,o=m.shared.interleaved,o!==null){m=o;do E|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);_o|=E,i.lanes=E,i.memoizedState=ne}}function gw(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Ou={},zr=si(Ou),Lu=si(Ou),Mu=si(Ou);function go(i){if(i===Ou)throw Error(t(174));return i}function ym(i,o){switch(rt(Mu,o),rt(Lu,i),rt(zr,Ou),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ca(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=ca(o,i)}lt(zr),rt(zr,o)}function qa(){lt(zr),lt(Lu),lt(Mu)}function yw(i){go(Mu.current);var o=go(zr.current),u=ca(o,i.type);o!==u&&(rt(Lu,i),rt(zr,u))}function _m(i){Lu.current===i&&(lt(zr),lt(Lu))}var yt=si(0);function hd(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var vm=[];function wm(){for(var i=0;i<vm.length;i++)vm[i]._workInProgressVersionPrimary=null;vm.length=0}var dd=pe.ReactCurrentDispatcher,Em=pe.ReactCurrentBatchConfig,yo=0,_t=null,jt=null,qt=null,fd=!1,Fu=!1,ju=0,jP=0;function an(){throw Error(t(321))}function Im(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!mr(i[u],o[u]))return!1;return!0}function Tm(i,o,u,d,m,y){if(yo=y,_t=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,dd.current=i===null||i.memoizedState===null?qP:$P,i=u(d,m),Fu){y=0;do{if(Fu=!1,ju=0,25<=y)throw Error(t(301));y+=1,qt=jt=null,o.updateQueue=null,dd.current=WP,i=u(d,m)}while(Fu)}if(dd.current=gd,o=jt!==null&&jt.next!==null,yo=0,qt=jt=_t=null,fd=!1,o)throw Error(t(300));return i}function Sm(){var i=ju!==0;return ju=0,i}function qr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?_t.memoizedState=qt=i:qt=qt.next=i,qt}function rr(){if(jt===null){var i=_t.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var o=qt===null?_t.memoizedState:qt.next;if(o!==null)qt=o,jt=i;else{if(i===null)throw Error(t(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},qt===null?_t.memoizedState=qt=i:qt=qt.next=i}return qt}function Uu(i,o){return typeof o=="function"?o(i):o}function Am(i){var o=rr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=jt,m=d.baseQueue,y=u.pending;if(y!==null){if(m!==null){var E=m.next;m.next=y.next,y.next=E}d.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,d=d.baseState;var R=E=null,N=null,$=y;do{var ee=$.lane;if((yo&ee)===ee)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:i(d,$.action);else{var ne={lane:ee,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(R=N=ne,E=d):N=N.next=ne,_t.lanes|=ee,_o|=ee}$=$.next}while($!==null&&$!==y);N===null?E=d:N.next=R,mr(d,o.memoizedState)||(An=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=N,u.lastRenderedState=d}if(i=u.interleaved,i!==null){m=i;do y=m.lane,_t.lanes|=y,_o|=y,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Rm(i){var o=rr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,m=u.pending,y=o.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do y=i(y,E.action),E=E.next;while(E!==m);mr(y,o.memoizedState)||(An=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,d]}function _w(){}function vw(i,o){var u=_t,d=rr(),m=o(),y=!mr(d.memoizedState,m);if(y&&(d.memoizedState=m,An=!0),d=d.queue,Pm(Iw.bind(null,u,d,i),[i]),d.getSnapshot!==o||y||qt!==null&&qt.memoizedState.tag&1){if(u.flags|=2048,Bu(9,Ew.bind(null,u,d,m,o),void 0,null),$t===null)throw Error(t(349));(yo&30)!==0||ww(u,o,m)}return m}function ww(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Ew(i,o,u,d){o.value=u,o.getSnapshot=d,Tw(o)&&Sw(i)}function Iw(i,o,u){return u(function(){Tw(o)&&Sw(i)})}function Tw(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!mr(i,u)}catch{return!0}}function Sw(i){var o=Is(i,1);o!==null&&wr(o,i,1,-1)}function Aw(i){var o=qr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:i},o.queue=i,i=i.dispatch=zP.bind(null,_t,i),[o.memoizedState,i]}function Bu(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function Rw(){return rr().memoizedState}function pd(i,o,u,d){var m=qr();_t.flags|=i,m.memoizedState=Bu(1|o,u,void 0,d===void 0?null:d)}function md(i,o,u,d){var m=rr();d=d===void 0?null:d;var y=void 0;if(jt!==null){var E=jt.memoizedState;if(y=E.destroy,d!==null&&Im(d,E.deps)){m.memoizedState=Bu(o,u,y,d);return}}_t.flags|=i,m.memoizedState=Bu(1|o,u,y,d)}function Pw(i,o){return pd(8390656,8,i,o)}function Pm(i,o){return md(2048,8,i,o)}function xw(i,o){return md(4,2,i,o)}function bw(i,o){return md(4,4,i,o)}function Cw(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function kw(i,o,u){return u=u!=null?u.concat([i]):null,md(4,4,Cw.bind(null,o,i),u)}function xm(){}function Nw(i,o){var u=rr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Im(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function Dw(i,o){var u=rr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Im(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function Vw(i,o,u){return(yo&21)===0?(i.baseState&&(i.baseState=!1,An=!0),i.memoizedState=u):(mr(u,o)||(u=fu(),_t.lanes|=u,_o|=u,i.baseState=!0),o)}function UP(i,o){var u=ze;ze=u!==0&&4>u?u:4,i(!0);var d=Em.transition;Em.transition={};try{i(!1),o()}finally{ze=u,Em.transition=d}}function Ow(){return rr().memoizedState}function BP(i,o,u){var d=di(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Lw(i))Mw(o,u);else if(u=fw(i,o,u,d),u!==null){var m=_n();wr(u,i,d,m),Fw(u,o,d)}}function zP(i,o,u){var d=di(i),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Lw(i))Mw(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,R=y(E,u);if(m.hasEagerState=!0,m.eagerState=R,mr(R,E)){var N=o.interleaved;N===null?(m.next=m,mm(o)):(m.next=N.next,N.next=m),o.interleaved=m;return}}catch{}u=fw(i,o,m,d),u!==null&&(m=_n(),wr(u,i,d,m),Fw(u,o,d))}}function Lw(i){var o=i.alternate;return i===_t||o!==null&&o===_t}function Mw(i,o){Fu=fd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Fw(i,o,u){if((u&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,mu(i,u)}}var gd={readContext:nr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},qP={readContext:nr,useCallback:function(i,o){return qr().memoizedState=[i,o===void 0?null:o],i},useContext:nr,useEffect:Pw,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,pd(4194308,4,Cw.bind(null,o,i),u)},useLayoutEffect:function(i,o){return pd(4194308,4,i,o)},useInsertionEffect:function(i,o){return pd(4,2,i,o)},useMemo:function(i,o){var u=qr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=qr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=BP.bind(null,_t,i),[d.memoizedState,i]},useRef:function(i){var o=qr();return i={current:i},o.memoizedState=i},useState:Aw,useDebugValue:xm,useDeferredValue:function(i){return qr().memoizedState=i},useTransition:function(){var i=Aw(!1),o=i[0];return i=UP.bind(null,i[1]),qr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=_t,m=qr();if(dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),$t===null)throw Error(t(349));(yo&30)!==0||ww(d,o,u)}m.memoizedState=u;var y={value:u,getSnapshot:o};return m.queue=y,Pw(Iw.bind(null,d,y,i),[i]),d.flags|=2048,Bu(9,Ew.bind(null,d,y,u,o),void 0,null),u},useId:function(){var i=qr(),o=$t.identifierPrefix;if(dt){var u=Es,d=ws;u=(d&~(1<<32-Fn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=ju++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=jP++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},$P={readContext:nr,useCallback:Nw,useContext:nr,useEffect:Pm,useImperativeHandle:kw,useInsertionEffect:xw,useLayoutEffect:bw,useMemo:Dw,useReducer:Am,useRef:Rw,useState:function(){return Am(Uu)},useDebugValue:xm,useDeferredValue:function(i){var o=rr();return Vw(o,jt.memoizedState,i)},useTransition:function(){var i=Am(Uu)[0],o=rr().memoizedState;return[i,o]},useMutableSource:_w,useSyncExternalStore:vw,useId:Ow,unstable_isNewReconciler:!1},WP={readContext:nr,useCallback:Nw,useContext:nr,useEffect:Pm,useImperativeHandle:kw,useInsertionEffect:xw,useLayoutEffect:bw,useMemo:Dw,useReducer:Rm,useRef:Rw,useState:function(){return Rm(Uu)},useDebugValue:xm,useDeferredValue:function(i){var o=rr();return jt===null?o.memoizedState=i:Vw(o,jt.memoizedState,i)},useTransition:function(){var i=Rm(Uu)[0],o=rr().memoizedState;return[i,o]},useMutableSource:_w,useSyncExternalStore:vw,useId:Ow,unstable_isNewReconciler:!1};function yr(i,o){if(i&&i.defaultProps){o=fe({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function bm(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:fe({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var yd={isMounted:function(i){return(i=i._reactInternals)?fr(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=_n(),m=di(i),y=Ts(d,m);y.payload=o,u!=null&&(y.callback=u),o=li(i,y,m),o!==null&&(wr(o,i,m,d),ud(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=_n(),m=di(i),y=Ts(d,m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=li(i,y,m),o!==null&&(wr(o,i,m,d),ud(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=_n(),d=di(i),m=Ts(u,d);m.tag=2,o!=null&&(m.callback=o),o=li(i,m,d),o!==null&&(wr(o,i,d,u),ud(o,i,d))}};function jw(i,o,u,d,m,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Pu(u,d)||!Pu(m,y):!0}function Uw(i,o,u){var d=!1,m=ii,y=o.contextType;return typeof y=="object"&&y!==null?y=nr(y):(m=Sn(o)?ho:on.current,d=o.contextTypes,y=(d=d!=null)?La(i,m):ii),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=yd,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=y),o}function Bw(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&yd.enqueueReplaceState(o,o.state,null)}function Cm(i,o,u,d){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},gm(i);var y=o.contextType;typeof y=="object"&&y!==null?m.context=nr(y):(y=Sn(o)?ho:on.current,m.context=La(i,y)),m.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(bm(i,o,y,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&yd.enqueueReplaceState(m,m.state,null),cd(i,u,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function $a(i,o){try{var u="",d=o;do u+=Oe(d),d=d.return;while(d);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:m,digest:null}}function km(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Nm(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var HP=typeof WeakMap=="function"?WeakMap:Map;function zw(i,o,u){u=Ts(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Sd||(Sd=!0,Gm=d),Nm(i,o)},u}function qw(i,o,u){u=Ts(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){Nm(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Nm(i,o),typeof d!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function $w(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new HP;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),i=ox.bind(null,i,o,u),o.then(i,i))}function Ww(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Hw(i,o,u,d,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ts(-1,1),o.tag=2,li(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var GP=pe.ReactCurrentOwner,An=!1;function yn(i,o,u,d){o.child=i===null?dw(o,null,u,d):Ua(o,i.child,u,d)}function Gw(i,o,u,d,m){u=u.render;var y=o.ref;return za(o,m),d=Tm(i,o,u,d,y,m),u=Sm(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Ss(i,o,m)):(dt&&u&&om(o),o.flags|=1,yn(i,o,d,m),o.child)}function Kw(i,o,u,d,m){if(i===null){var y=u.type;return typeof y=="function"&&!eg(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Qw(i,o,y,d,m)):(i=Cd(u.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&m)===0){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:Pu,u(E,d)&&i.ref===o.ref)return Ss(i,o,m)}return o.flags|=1,i=pi(y,d),i.ref=o.ref,i.return=o,o.child=i}function Qw(i,o,u,d,m){if(i!==null){var y=i.memoizedProps;if(Pu(y,d)&&i.ref===o.ref)if(An=!1,o.pendingProps=d=y,(i.lanes&m)!==0)(i.flags&131072)!==0&&(An=!0);else return o.lanes=i.lanes,Ss(i,o,m)}return Dm(i,o,u,d,m)}function Jw(i,o,u){var d=o.pendingProps,m=d.children,y=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ha,Wn),Wn|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,rt(Ha,Wn),Wn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:u,rt(Ha,Wn),Wn|=d}else y!==null?(d=y.baseLanes|u,o.memoizedState=null):d=u,rt(Ha,Wn),Wn|=d;return yn(i,o,m,u),o.child}function Yw(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Dm(i,o,u,d,m){var y=Sn(u)?ho:on.current;return y=La(o,y),za(o,m),u=Tm(i,o,u,d,y,m),d=Sm(),i!==null&&!An?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,Ss(i,o,m)):(dt&&d&&om(o),o.flags|=1,yn(i,o,u,m),o.child)}function Xw(i,o,u,d,m){if(Sn(u)){var y=!0;td(o)}else y=!1;if(za(o,m),o.stateNode===null)vd(i,o),Uw(o,u,d),Cm(o,u,d,m),d=!0;else if(i===null){var E=o.stateNode,R=o.memoizedProps;E.props=R;var N=E.context,$=u.contextType;typeof $=="object"&&$!==null?$=nr($):($=Sn(u)?ho:on.current,$=La(o,$));var ee=u.getDerivedStateFromProps,ne=typeof ee=="function"||typeof E.getSnapshotBeforeUpdate=="function";ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==d||N!==$)&&Bw(o,E,d,$),ai=!1;var X=o.memoizedState;E.state=X,cd(o,d,E,m),N=o.memoizedState,R!==d||X!==N||Tn.current||ai?(typeof ee=="function"&&(bm(o,u,ee,d),N=o.memoizedState),(R=ai||jw(o,u,R,d,X,N,$))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=N),E.props=d,E.state=N,E.context=$,d=R):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,pw(i,o),R=o.memoizedProps,$=o.type===o.elementType?R:yr(o.type,R),E.props=$,ne=o.pendingProps,X=E.context,N=u.contextType,typeof N=="object"&&N!==null?N=nr(N):(N=Sn(u)?ho:on.current,N=La(o,N));var de=u.getDerivedStateFromProps;(ee=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ne||X!==N)&&Bw(o,E,d,N),ai=!1,X=o.memoizedState,E.state=X,cd(o,d,E,m);var ge=o.memoizedState;R!==ne||X!==ge||Tn.current||ai?(typeof de=="function"&&(bm(o,u,de,d),ge=o.memoizedState),($=ai||jw(o,u,$,d,X,ge,N)||!1)?(ee||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,ge,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,ge,N)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ge),E.props=d,E.state=ge,E.context=N,d=$):(typeof E.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(o.flags|=1024),d=!1)}return Vm(i,o,u,d,y,m)}function Vm(i,o,u,d,m,y){Yw(i,o);var E=(o.flags&128)!==0;if(!d&&!E)return m&&rw(o,u,!1),Ss(i,o,y);d=o.stateNode,GP.current=o;var R=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&E?(o.child=Ua(o,i.child,null,y),o.child=Ua(o,null,R,y)):yn(i,o,R,y),o.memoizedState=d.state,m&&rw(o,u,!0),o.child}function Zw(i){var o=i.stateNode;o.pendingContext?tw(i,o.pendingContext,o.pendingContext!==o.context):o.context&&tw(i,o.context,!1),ym(i,o.containerInfo)}function eE(i,o,u,d,m){return ja(),cm(m),o.flags|=256,yn(i,o,u,d),o.child}var Om={dehydrated:null,treeContext:null,retryLane:0};function Lm(i){return{baseLanes:i,cachePool:null,transitions:null}}function tE(i,o,u){var d=o.pendingProps,m=yt.current,y=!1,E=(o.flags&128)!==0,R;if((R=E)||(R=i!==null&&i.memoizedState===null?!1:(m&2)!==0),R?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),rt(yt,m&1),i===null)return um(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,i=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=kd(E,d,0,null),i=Io(i,d,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Lm(u),o.memoizedState=Om,i):Mm(o,E));if(m=i.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return KP(i,o,E,d,R,m,u);if(y){y=d.fallback,E=o.mode,m=i.child,R=m.sibling;var N={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=N,o.deletions=null):(d=pi(m,N),d.subtreeFlags=m.subtreeFlags&14680064),R!==null?y=pi(R,y):(y=Io(y,E,u,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=i.child.memoizedState,E=E===null?Lm(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=i.childLanes&~u,o.memoizedState=Om,d}return y=i.child,i=y.sibling,d=pi(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Mm(i,o){return o=kd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function _d(i,o,u,d){return d!==null&&cm(d),Ua(o,i.child,null,u),i=Mm(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function KP(i,o,u,d,m,y,E){if(u)return o.flags&256?(o.flags&=-257,d=km(Error(t(422))),_d(i,o,E,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=d.fallback,m=o.mode,d=kd({mode:"visible",children:d.children},m,0,null),y=Io(y,m,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&Ua(o,i.child,null,E),o.child.memoizedState=Lm(E),o.memoizedState=Om,y);if((o.mode&1)===0)return _d(i,o,E,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var R=d.dgst;return d=R,y=Error(t(419)),d=km(y,d,void 0),_d(i,o,E,d)}if(R=(E&i.childLanes)!==0,An||R){if(d=$t,d!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|E))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Is(i,m),wr(d,i,m,-1))}return Zm(),d=km(Error(t(421))),_d(i,o,E,d)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=ax.bind(null,i),m._reactRetry=o,null):(i=y.treeContext,$n=ri(m.nextSibling),qn=o,dt=!0,gr=null,i!==null&&(er[tr++]=ws,er[tr++]=Es,er[tr++]=fo,ws=i.id,Es=i.overflow,fo=o),o=Mm(o,d.children),o.flags|=4096,o)}function nE(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),pm(i.return,o,u)}function Fm(i,o,u,d,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=u,y.tailMode=m)}function rE(i,o,u){var d=o.pendingProps,m=d.revealOrder,y=d.tail;if(yn(i,o,d.children,u),d=yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nE(i,u,o);else if(i.tag===19)nE(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(rt(yt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&hd(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Fm(o,!1,m,u,y);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&hd(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Fm(o,!0,u,null,y);break;case"together":Fm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vd(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Ss(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),_o|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=pi(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=pi(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function QP(i,o,u){switch(o.tag){case 3:Zw(o),ja();break;case 5:yw(o);break;case 1:Sn(o.type)&&td(o);break;case 4:ym(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;rt(ad,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(rt(yt,yt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?tE(i,o,u):(rt(yt,yt.current&1),i=Ss(i,o,u),i!==null?i.sibling:null);rt(yt,yt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(i.flags&128)!==0){if(d)return rE(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(yt,yt.current),d)break;return null;case 22:case 23:return o.lanes=0,Jw(i,o,u)}return Ss(i,o,u)}var sE,jm,iE,oE;sE=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jm=function(){},iE=function(i,o,u,d){var m=i.memoizedProps;if(m!==d){i=o.stateNode,go(zr.current);var y=null;switch(u){case"input":m=la(i,m),d=la(i,d),y=[];break;case"select":m=fe({},m,{value:void 0}),d=fe({},d,{value:void 0}),y=[];break;case"textarea":m=nu(i,m),d=nu(i,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=Xh)}dr(u,d);var E;u=null;for($ in m)if(!d.hasOwnProperty($)&&m.hasOwnProperty($)&&m[$]!=null)if($==="style"){var R=m[$];for(E in R)R.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(s.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in d){var N=d[$];if(R=m?.[$],d.hasOwnProperty($)&&N!==R&&(N!=null||R!=null))if($==="style")if(R){for(E in R)!R.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in N)N.hasOwnProperty(E)&&R[E]!==N[E]&&(u||(u={}),u[E]=N[E])}else u||(y||(y=[]),y.push($,u)),u=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,R=R?R.__html:void 0,N!=null&&R!==N&&(y=y||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(y=y||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(s.hasOwnProperty($)?(N!=null&&$==="onScroll"&&at("scroll",i),y||R===N||(y=[])):(y=y||[]).push($,N))}u&&(y=y||[]).push("style",u);var $=y;(o.updateQueue=$)&&(o.flags|=4)}},oE=function(i,o,u,d){u!==d&&(o.flags|=4)};function zu(i,o){if(!dt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function ln(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function JP(i,o,u){var d=o.pendingProps;switch(am(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(o),null;case 1:return Sn(o.type)&&ed(),ln(o),null;case 3:return d=o.stateNode,qa(),lt(Tn),lt(on),wm(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(id(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gr!==null&&(Jm(gr),gr=null))),jm(i,o),ln(o),null;case 5:_m(o);var m=go(Mu.current);if(u=o.type,i!==null&&o.stateNode!=null)iE(i,o,u,d,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return ln(o),null}if(i=go(zr.current),id(o)){d=o.stateNode,u=o.type;var y=o.memoizedProps;switch(d[Br]=o,d[Nu]=y,i=(o.mode&1)!==0,u){case"dialog":at("cancel",d),at("close",d);break;case"iframe":case"object":case"embed":at("load",d);break;case"video":case"audio":for(m=0;m<bu.length;m++)at(bu[m],d);break;case"source":at("error",d);break;case"img":case"image":case"link":at("error",d),at("load",d);break;case"details":at("toggle",d);break;case"input":Th(d,y),at("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},at("invalid",d);break;case"textarea":ru(d,y),at("invalid",d)}dr(u,y),m=null;for(var E in y)if(y.hasOwnProperty(E)){var R=y[E];E==="children"?typeof R=="string"?d.textContent!==R&&(y.suppressHydrationWarning!==!0&&Yh(d.textContent,R,i),m=["children",R]):typeof R=="number"&&d.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&Yh(d.textContent,R,i),m=["children",""+R]):s.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&at("scroll",d)}switch(u){case"input":aa(d),tu(d,y,!0);break;case"textarea":aa(d),Bs(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Xh)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=su(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=E.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=E.createElement(u,{is:d.is}):(i=E.createElement(u),u==="select"&&(E=i,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):i=E.createElementNS(i,u),i[Br]=o,i[Nu]=d,sE(i,o,!1,!1),o.stateNode=i;e:{switch(E=da(u,d),u){case"dialog":at("cancel",i),at("close",i),m=d;break;case"iframe":case"object":case"embed":at("load",i),m=d;break;case"video":case"audio":for(m=0;m<bu.length;m++)at(bu[m],i);m=d;break;case"source":at("error",i),m=d;break;case"img":case"image":case"link":at("error",i),at("load",i),m=d;break;case"details":at("toggle",i),m=d;break;case"input":Th(i,d),m=la(i,d),at("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=fe({},d,{value:void 0}),at("invalid",i);break;case"textarea":ru(i,d),m=nu(i,d),at("invalid",i);break;default:m=d}dr(u,m),R=m;for(y in R)if(R.hasOwnProperty(y)){var N=R[y];y==="style"?ha(i,N):y==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Ah(i,N)):y==="children"?typeof N=="string"?(u!=="textarea"||N!=="")&&Ji(i,N):typeof N=="number"&&Ji(i,""+N):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?N!=null&&y==="onScroll"&&at("scroll",i):N!=null&&ie(i,y,N,E))}switch(u){case"input":aa(i),tu(i,d,!1);break;case"textarea":aa(i),Bs(i);break;case"option":d.value!=null&&i.setAttribute("value",""+We(d.value));break;case"select":i.multiple=!!d.multiple,y=d.value,y!=null?hr(i,!!d.multiple,y,!1):d.defaultValue!=null&&hr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Xh)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ln(o),null;case 6:if(i&&o.stateNode!=null)oE(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=go(Mu.current),go(zr.current),id(o)){if(d=o.stateNode,u=o.memoizedProps,d[Br]=o,(y=d.nodeValue!==u)&&(i=qn,i!==null))switch(i.tag){case 3:Yh(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Yh(d.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Br]=o,o.stateNode=d}return ln(o),null;case 13:if(lt(yt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(dt&&$n!==null&&(o.mode&1)!==0&&(o.flags&128)===0)uw(),ja(),o.flags|=98560,y=!1;else if(y=id(o),d!==null&&d.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Br]=o}else ja(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ln(o),y=!1}else gr!==null&&(Jm(gr),gr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(yt.current&1)!==0?Ut===0&&(Ut=3):Zm())),o.updateQueue!==null&&(o.flags|=4),ln(o),null);case 4:return qa(),jm(i,o),i===null&&Cu(o.stateNode.containerInfo),ln(o),null;case 10:return fm(o.type._context),ln(o),null;case 17:return Sn(o.type)&&ed(),ln(o),null;case 19:if(lt(yt),y=o.memoizedState,y===null)return ln(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)zu(y,!1);else{if(Ut!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(E=hd(i),E!==null){for(o.flags|=128,zu(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)y=u,i=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,i=E.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return rt(yt,yt.current&1|2),o.child}i=i.sibling}y.tail!==null&&ot()>Ga&&(o.flags|=128,d=!0,zu(y,!1),o.lanes=4194304)}else{if(!d)if(i=hd(E),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),zu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!dt)return ln(o),null}else 2*ot()-y.renderingStartTime>Ga&&u!==1073741824&&(o.flags|=128,d=!0,zu(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(u=y.last,u!==null?u.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ot(),o.sibling=null,u=yt.current,rt(yt,d?u&1|2:u&1),o):(ln(o),null);case 22:case 23:return Xm(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(Wn&1073741824)!==0&&(ln(o),o.subtreeFlags&6&&(o.flags|=8192)):ln(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function YP(i,o){switch(am(o),o.tag){case 1:return Sn(o.type)&&ed(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return qa(),lt(Tn),lt(on),wm(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return _m(o),null;case 13:if(lt(yt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ja()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return lt(yt),null;case 4:return qa(),null;case 10:return fm(o.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var wd=!1,un=!1,XP=typeof WeakSet=="function"?WeakSet:Set,me=null;function Wa(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){It(i,o,d)}else u.current=null}function Um(i,o,u){try{u()}catch(d){It(i,o,d)}}var aE=!1;function ZP(i,o){if(Xp=ms,i=jv(),$p(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,R=-1,N=-1,$=0,ee=0,ne=i,X=null;t:for(;;){for(var de;ne!==u||m!==0&&ne.nodeType!==3||(R=E+m),ne!==y||d!==0&&ne.nodeType!==3||(N=E+d),ne.nodeType===3&&(E+=ne.nodeValue.length),(de=ne.firstChild)!==null;)X=ne,ne=de;for(;;){if(ne===i)break t;if(X===u&&++$===m&&(R=E),X===y&&++ee===d&&(N=E),(de=ne.nextSibling)!==null)break;ne=X,X=ne.parentNode}ne=de}u=R===-1||N===-1?null:{start:R,end:N}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zp={focusedElem:i,selectionRange:u},ms=!1,me=o;me!==null;)if(o=me,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,me=i;else for(;me!==null;){o=me;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,xt=ge.memoizedState,B=o.stateNode,L=B.getSnapshotBeforeUpdate(o.elementType===o.type?_e:yr(o.type,_e),xt);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){It(o,o.return,oe)}if(i=o.sibling,i!==null){i.return=o.return,me=i;break}me=o.return}return ge=aE,aE=!1,ge}function qu(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var y=m.destroy;m.destroy=void 0,y!==void 0&&Um(o,u,y)}m=m.next}while(m!==d)}}function Ed(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Bm(i){var o=i.ref;if(o!==null){var u=i.stateNode;i.tag,i=u,typeof o=="function"?o(i):o.current=i}}function lE(i){var o=i.alternate;o!==null&&(i.alternate=null,lE(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Br],delete o[Nu],delete o[rm],delete o[OP],delete o[LP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function uE(i){return i.tag===5||i.tag===3||i.tag===4}function cE(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||uE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function zm(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Xh));else if(d!==4&&(i=i.child,i!==null))for(zm(i,o,u),i=i.sibling;i!==null;)zm(i,o,u),i=i.sibling}function qm(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(qm(i,o,u),i=i.sibling;i!==null;)qm(i,o,u),i=i.sibling}var Xt=null,_r=!1;function ui(i,o,u){for(u=u.child;u!==null;)hE(i,o,u),u=u.sibling}function hE(i,o,u){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(to,u)}catch{}switch(u.tag){case 5:un||Wa(u,o);case 6:var d=Xt,m=_r;Xt=null,ui(i,o,u),Xt=d,_r=m,Xt!==null&&(_r?(i=Xt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(_r?(i=Xt,u=u.stateNode,i.nodeType===8?nm(i.parentNode,u):i.nodeType===1&&nm(i,u),Zs(i)):nm(Xt,u.stateNode));break;case 4:d=Xt,m=_r,Xt=u.stateNode.containerInfo,_r=!0,ui(i,o,u),Xt=d,_r=m;break;case 0:case 11:case 14:case 15:if(!un&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Um(u,o,E),m=m.next}while(m!==d)}ui(i,o,u);break;case 1:if(!un&&(Wa(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(R){It(u,o,R)}ui(i,o,u);break;case 21:ui(i,o,u);break;case 22:u.mode&1?(un=(d=un)||u.memoizedState!==null,ui(i,o,u),un=d):ui(i,o,u);break;default:ui(i,o,u)}}function dE(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new XP),o.forEach(function(d){var m=lx.bind(null,i,d);u.has(d)||(u.add(d),d.then(m,m))})}}function vr(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var y=i,E=o,R=E;e:for(;R!==null;){switch(R.tag){case 5:Xt=R.stateNode,_r=!1;break e;case 3:Xt=R.stateNode.containerInfo,_r=!0;break e;case 4:Xt=R.stateNode.containerInfo,_r=!0;break e}R=R.return}if(Xt===null)throw Error(t(160));hE(y,E,m),Xt=null,_r=!1;var N=m.alternate;N!==null&&(N.return=null),m.return=null}catch($){It(m,o,$)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)fE(o,i),o=o.sibling}function fE(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(vr(o,i),$r(i),d&4){try{qu(3,i,i.return),Ed(3,i)}catch(_e){It(i,i.return,_e)}try{qu(5,i,i.return)}catch(_e){It(i,i.return,_e)}}break;case 1:vr(o,i),$r(i),d&512&&u!==null&&Wa(u,u.return);break;case 5:if(vr(o,i),$r(i),d&512&&u!==null&&Wa(u,u.return),i.flags&32){var m=i.stateNode;try{Ji(m,"")}catch(_e){It(i,i.return,_e)}}if(d&4&&(m=i.stateNode,m!=null)){var y=i.memoizedProps,E=u!==null?u.memoizedProps:y,R=i.type,N=i.updateQueue;if(i.updateQueue=null,N!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&ua(m,y),da(R,E);var $=da(R,y);for(E=0;E<N.length;E+=2){var ee=N[E],ne=N[E+1];ee==="style"?ha(m,ne):ee==="dangerouslySetInnerHTML"?Ah(m,ne):ee==="children"?Ji(m,ne):ie(m,ee,ne,$)}switch(R){case"input":Qi(m,y);break;case"textarea":Sh(m,y);break;case"select":var X=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?hr(m,!!y.multiple,de,!1):X!==!!y.multiple&&(y.defaultValue!=null?hr(m,!!y.multiple,y.defaultValue,!0):hr(m,!!y.multiple,y.multiple?[]:"",!1))}m[Nu]=y}catch(_e){It(i,i.return,_e)}}break;case 6:if(vr(o,i),$r(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,y=i.memoizedProps;try{m.nodeValue=y}catch(_e){It(i,i.return,_e)}}break;case 3:if(vr(o,i),$r(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Zs(o.containerInfo)}catch(_e){It(i,i.return,_e)}break;case 4:vr(o,i),$r(i);break;case 13:vr(o,i),$r(i),m=i.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Hm=ot())),d&4&&dE(i);break;case 22:if(ee=u!==null&&u.memoizedState!==null,i.mode&1?(un=($=un)||ee,vr(o,i),un=$):vr(o,i),$r(i),d&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!ee&&(i.mode&1)!==0)for(me=i,ee=i.child;ee!==null;){for(ne=me=ee;me!==null;){switch(X=me,de=X.child,X.tag){case 0:case 11:case 14:case 15:qu(4,X,X.return);break;case 1:Wa(X,X.return);var ge=X.stateNode;if(typeof ge.componentWillUnmount=="function"){d=X,u=X.return;try{o=d,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){It(d,u,_e)}}break;case 5:Wa(X,X.return);break;case 22:if(X.memoizedState!==null){gE(ne);continue}}de!==null?(de.return=X,me=de):gE(ne)}ee=ee.sibling}e:for(ee=null,ne=i;;){if(ne.tag===5){if(ee===null){ee=ne;try{m=ne.stateNode,$?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=ne.stateNode,N=ne.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,R.style.display=$s("display",E))}catch(_e){It(i,i.return,_e)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=$?"":ne.memoizedProps}catch(_e){It(i,i.return,_e)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:vr(o,i),$r(i),d&4&&dE(i);break;case 21:break;default:vr(o,i),$r(i)}}function $r(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(uE(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Ji(m,""),d.flags&=-33);var y=cE(i);qm(i,y,m);break;case 3:case 4:var E=d.stateNode.containerInfo,R=cE(i);zm(i,R,E);break;default:throw Error(t(161))}}catch(N){It(i,i.return,N)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ex(i,o,u){me=i,pE(i)}function pE(i,o,u){for(var d=(i.mode&1)!==0;me!==null;){var m=me,y=m.child;if(m.tag===22&&d){var E=m.memoizedState!==null||wd;if(!E){var R=m.alternate,N=R!==null&&R.memoizedState!==null||un;R=wd;var $=un;if(wd=E,(un=N)&&!$)for(me=m;me!==null;)E=me,N=E.child,E.tag===22&&E.memoizedState!==null?yE(m):N!==null?(N.return=E,me=N):yE(m);for(;y!==null;)me=y,pE(y),y=y.sibling;me=m,wd=R,un=$}mE(i)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,me=y):mE(i)}}function mE(i){for(;me!==null;){var o=me;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:un||Ed(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!un)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:yr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&gw(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}gw(o,E,u)}break;case 5:var R=o.stateNode;if(u===null&&o.flags&4){u=R;var N=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&u.focus();break;case"img":N.src&&(u.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var $=o.alternate;if($!==null){var ee=$.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Zs(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||o.flags&512&&Bm(o)}catch(X){It(o,o.return,X)}}if(o===i){me=null;break}if(u=o.sibling,u!==null){u.return=o.return,me=u;break}me=o.return}}function gE(i){for(;me!==null;){var o=me;if(o===i){me=null;break}var u=o.sibling;if(u!==null){u.return=o.return,me=u;break}me=o.return}}function yE(i){for(;me!==null;){var o=me;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ed(4,o)}catch(N){It(o,u,N)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(N){It(o,m,N)}}var y=o.return;try{Bm(o)}catch(N){It(o,y,N)}break;case 5:var E=o.return;try{Bm(o)}catch(N){It(o,E,N)}}}catch(N){It(o,o.return,N)}if(o===i){me=null;break}var R=o.sibling;if(R!==null){R.return=o.return,me=R;break}me=o.return}}var tx=Math.ceil,Id=pe.ReactCurrentDispatcher,$m=pe.ReactCurrentOwner,sr=pe.ReactCurrentBatchConfig,He=0,$t=null,Ot=null,Zt=0,Wn=0,Ha=si(0),Ut=0,$u=null,_o=0,Td=0,Wm=0,Wu=null,Rn=null,Hm=0,Ga=1/0,As=null,Sd=!1,Gm=null,ci=null,Ad=!1,hi=null,Rd=0,Hu=0,Km=null,Pd=-1,xd=0;function _n(){return(He&6)!==0?ot():Pd!==-1?Pd:Pd=ot()}function di(i){return(i.mode&1)===0?1:(He&2)!==0&&Zt!==0?Zt&-Zt:FP.transition!==null?(xd===0&&(xd=fu()),xd):(i=ze,i!==0||(i=window.event,i=i===void 0?16:Ia(i.type)),i)}function wr(i,o,u,d){if(50<Hu)throw Hu=0,Km=null,Error(t(185));io(i,u,d),((He&2)===0||i!==$t)&&(i===$t&&((He&2)===0&&(Td|=u),Ut===4&&fi(i,Zt)),Pn(i,d),u===1&&He===0&&(o.mode&1)===0&&(Ga=ot()+500,nd&&oi()))}function Pn(i,o){var u=i.callbackNode;so(i,o);var d=ds(i,i===$t?Zt:0);if(d===0)u!==null&&ma(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&ma(u),o===1)i.tag===0?MP(vE.bind(null,i)):sw(vE.bind(null,i)),DP(function(){(He&6)===0&&oi()}),u=null;else{switch(kr(d)){case 1:u=ga;break;case 4:u=cu;break;case 16:u=eo;break;case 536870912:u=ya;break;default:u=eo}u=PE(u,_E.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function _E(i,o){if(Pd=-1,xd=0,(He&6)!==0)throw Error(t(327));var u=i.callbackNode;if(Ka()&&i.callbackNode!==u)return null;var d=ds(i,i===$t?Zt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=bd(i,d);else{o=d;var m=He;He|=2;var y=EE();($t!==i||Zt!==o)&&(As=null,Ga=ot()+500,wo(i,o));do try{sx();break}catch(R){wE(i,R)}while(!0);dm(),Id.current=y,He=m,Ot!==null?o=0:($t=null,Zt=0,o=Ut)}if(o!==0){if(o===2&&(m=du(i),m!==0&&(d=m,o=Qm(i,m))),o===1)throw u=$u,wo(i,0),fi(i,d),Pn(i,ot()),u;if(o===6)fi(i,d);else{if(m=i.current.alternate,(d&30)===0&&!nx(m)&&(o=bd(i,d),o===2&&(y=du(i),y!==0&&(d=y,o=Qm(i,y))),o===1))throw u=$u,wo(i,0),fi(i,d),Pn(i,ot()),u;switch(i.finishedWork=m,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Eo(i,Rn,As);break;case 3:if(fi(i,d),(d&130023424)===d&&(o=Hm+500-ot(),10<o)){if(ds(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){_n(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=tm(Eo.bind(null,i,Rn,As),o);break}Eo(i,Rn,As);break;case 4:if(fi(i,d),(d&4194240)===d)break;for(o=i.eventTimes,m=-1;0<d;){var E=31-Fn(d);y=1<<E,E=o[E],E>m&&(m=E),d&=~y}if(d=m,d=ot()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*tx(d/1960))-d,10<d){i.timeoutHandle=tm(Eo.bind(null,i,Rn,As),d);break}Eo(i,Rn,As);break;case 5:Eo(i,Rn,As);break;default:throw Error(t(329))}}}return Pn(i,ot()),i.callbackNode===u?_E.bind(null,i):null}function Qm(i,o){var u=Wu;return i.current.memoizedState.isDehydrated&&(wo(i,o).flags|=256),i=bd(i,o),i!==2&&(o=Rn,Rn=u,o!==null&&Jm(o)),i}function Jm(i){Rn===null?Rn=i:Rn.push.apply(Rn,i)}function nx(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],y=m.getSnapshot;m=m.value;try{if(!mr(y(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fi(i,o){for(o&=~Wm,o&=~Td,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Fn(o),d=1<<u;i[u]=-1,o&=~d}}function vE(i){if((He&6)!==0)throw Error(t(327));Ka();var o=ds(i,0);if((o&1)===0)return Pn(i,ot()),null;var u=bd(i,o);if(i.tag!==0&&u===2){var d=du(i);d!==0&&(o=d,u=Qm(i,d))}if(u===1)throw u=$u,wo(i,0),fi(i,o),Pn(i,ot()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Eo(i,Rn,As),Pn(i,ot()),null}function Ym(i,o){var u=He;He|=1;try{return i(o)}finally{He=u,He===0&&(Ga=ot()+500,nd&&oi())}}function vo(i){hi!==null&&hi.tag===0&&(He&6)===0&&Ka();var o=He;He|=1;var u=sr.transition,d=ze;try{if(sr.transition=null,ze=1,i)return i()}finally{ze=d,sr.transition=u,He=o,(He&6)===0&&oi()}}function Xm(){Wn=Ha.current,lt(Ha)}function wo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,NP(u)),Ot!==null)for(u=Ot.return;u!==null;){var d=u;switch(am(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ed();break;case 3:qa(),lt(Tn),lt(on),wm();break;case 5:_m(d);break;case 4:qa();break;case 13:lt(yt);break;case 19:lt(yt);break;case 10:fm(d.type._context);break;case 22:case 23:Xm()}u=u.return}if($t=i,Ot=i=pi(i.current,null),Zt=Wn=o,Ut=0,$u=null,Wm=Td=_o=0,Rn=Wu=null,mo!==null){for(o=0;o<mo.length;o++)if(u=mo[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,y=u.pending;if(y!==null){var E=y.next;y.next=m,d.next=E}u.pending=d}mo=null}return i}function wE(i,o){do{var u=Ot;try{if(dm(),dd.current=gd,fd){for(var d=_t.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}fd=!1}if(yo=0,qt=jt=_t=null,Fu=!1,ju=0,$m.current=null,u===null||u.return===null){Ut=1,$u=o,Ot=null;break}e:{var y=i,E=u.return,R=u,N=o;if(o=Zt,R.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,ee=R,ne=ee.tag;if((ee.mode&1)===0&&(ne===0||ne===11||ne===15)){var X=ee.alternate;X?(ee.updateQueue=X.updateQueue,ee.memoizedState=X.memoizedState,ee.lanes=X.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var de=Ww(E);if(de!==null){de.flags&=-257,Hw(de,E,R,y,o),de.mode&1&&$w(y,$,o),o=de,N=$;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(N),o.updateQueue=_e}else ge.add(N);break e}else{if((o&1)===0){$w(y,$,o),Zm();break e}N=Error(t(426))}}else if(dt&&R.mode&1){var xt=Ww(E);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),Hw(xt,E,R,y,o),cm($a(N,R));break e}}y=N=$a(N,R),Ut!==4&&(Ut=2),Wu===null?Wu=[y]:Wu.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=zw(y,N,o);mw(y,B);break e;case 1:R=N;var L=y.type,q=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(ci===null||!ci.has(q)))){y.flags|=65536,o&=-o,y.lanes|=o;var oe=qw(y,R,o);mw(y,oe);break e}}y=y.return}while(y!==null)}TE(u)}catch(we){o=we,Ot===u&&u!==null&&(Ot=u=u.return);continue}break}while(!0)}function EE(){var i=Id.current;return Id.current=gd,i===null?gd:i}function Zm(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),$t===null||(_o&268435455)===0&&(Td&268435455)===0||fi($t,Zt)}function bd(i,o){var u=He;He|=2;var d=EE();($t!==i||Zt!==o)&&(As=null,wo(i,o));do try{rx();break}catch(m){wE(i,m)}while(!0);if(dm(),He=u,Id.current=d,Ot!==null)throw Error(t(261));return $t=null,Zt=0,Ut}function rx(){for(;Ot!==null;)IE(Ot)}function sx(){for(;Ot!==null&&!Zi();)IE(Ot)}function IE(i){var o=RE(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,o===null?TE(i):Ot=o,$m.current=null}function TE(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=JP(u,o,Wn),u!==null){Ot=u;return}}else{if(u=YP(u,o),u!==null){u.flags&=32767,Ot=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ut=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=i}while(o!==null);Ut===0&&(Ut=5)}function Eo(i,o,u){var d=ze,m=sr.transition;try{sr.transition=null,ze=1,ix(i,o,u,d)}finally{sr.transition=m,ze=d}return null}function ix(i,o,u,d){do Ka();while(hi!==null);if((He&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(jp(i,y),i===$t&&(Ot=$t=null,Zt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ad||(Ad=!0,PE(eo,function(){return Ka(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=sr.transition,sr.transition=null;var E=ze;ze=1;var R=He;He|=4,$m.current=null,ZP(i,u),fE(u,i),AP(Zp),ms=!!Xp,Zp=Xp=null,i.current=u,ex(u),hs(),He=R,ze=E,sr.transition=y}else i.current=u;if(Ad&&(Ad=!1,hi=i,Rd=m),y=i.pendingLanes,y===0&&(ci=null),Lh(u.stateNode),Pn(i,ot()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(Sd)throw Sd=!1,i=Gm,Gm=null,i;return(Rd&1)!==0&&i.tag!==0&&Ka(),y=i.pendingLanes,(y&1)!==0?i===Km?Hu++:(Hu=0,Km=i):Hu=0,oi(),null}function Ka(){if(hi!==null){var i=kr(Rd),o=sr.transition,u=ze;try{if(sr.transition=null,ze=16>i?16:i,hi===null)var d=!1;else{if(i=hi,hi=null,Rd=0,(He&6)!==0)throw Error(t(331));var m=He;for(He|=4,me=i.current;me!==null;){var y=me,E=y.child;if((me.flags&16)!==0){var R=y.deletions;if(R!==null){for(var N=0;N<R.length;N++){var $=R[N];for(me=$;me!==null;){var ee=me;switch(ee.tag){case 0:case 11:case 15:qu(8,ee,y)}var ne=ee.child;if(ne!==null)ne.return=ee,me=ne;else for(;me!==null;){ee=me;var X=ee.sibling,de=ee.return;if(lE(ee),ee===$){me=null;break}if(X!==null){X.return=de,me=X;break}me=de}}}var ge=y.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var xt=_e.sibling;_e.sibling=null,_e=xt}while(_e!==null)}}me=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,me=E;else e:for(;me!==null;){if(y=me,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:qu(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,me=B;break e}me=y.return}}var L=i.current;for(me=L;me!==null;){E=me;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,me=q;else e:for(E=L;me!==null;){if(R=me,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Ed(9,R)}}catch(we){It(R,R.return,we)}if(R===E){me=null;break e}var oe=R.sibling;if(oe!==null){oe.return=R.return,me=oe;break e}me=R.return}}if(He=m,oi(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(to,i)}catch{}d=!0}return d}finally{ze=u,sr.transition=o}}return!1}function SE(i,o,u){o=$a(u,o),o=zw(i,o,1),i=li(i,o,1),o=_n(),i!==null&&(io(i,1,o),Pn(i,o))}function It(i,o,u){if(i.tag===3)SE(i,i,u);else for(;o!==null;){if(o.tag===3){SE(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ci===null||!ci.has(d))){i=$a(u,i),i=qw(o,i,1),o=li(o,i,1),i=_n(),o!==null&&(io(o,1,i),Pn(o,i));break}}o=o.return}}function ox(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=_n(),i.pingedLanes|=i.suspendedLanes&u,$t===i&&(Zt&u)===u&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>ot()-Hm?wo(i,0):Wm|=u),Pn(i,o)}function AE(i,o){o===0&&((i.mode&1)===0?o=1:(o=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var u=_n();i=Is(i,o),i!==null&&(io(i,o,u),Pn(i,u))}function ax(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),AE(i,u)}function lx(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),AE(i,u)}var RE;RE=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Tn.current)An=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return An=!1,QP(i,o,u);An=(i.flags&131072)!==0}else An=!1,dt&&(o.flags&1048576)!==0&&iw(o,sd,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;vd(i,o),i=o.pendingProps;var m=La(o,on.current);za(o,u),m=Tm(null,o,d,i,m,u);var y=Sm();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(d)?(y=!0,td(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,gm(o),m.updater=yd,o.stateNode=m,m._reactInternals=o,Cm(o,d,i,u),o=Vm(null,o,d,!0,y,u)):(o.tag=0,dt&&y&&om(o),yn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(vd(i,o),i=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=cx(d),i=yr(d,i),m){case 0:o=Dm(null,o,d,i,u);break e;case 1:o=Xw(null,o,d,i,u);break e;case 11:o=Gw(null,o,d,i,u);break e;case 14:o=Kw(null,o,d,yr(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Dm(i,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Xw(i,o,d,m,u);case 3:e:{if(Zw(o),i===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,m=y.element,pw(i,o),cd(o,d,null,u);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=$a(Error(t(423)),o),o=eE(i,o,d,u,m);break e}else if(d!==m){m=$a(Error(t(424)),o),o=eE(i,o,d,u,m);break e}else for($n=ri(o.stateNode.containerInfo.firstChild),qn=o,dt=!0,gr=null,u=dw(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ja(),d===m){o=Ss(i,o,u);break e}yn(i,o,d,u)}o=o.child}return o;case 5:return yw(o),i===null&&um(o),d=o.type,m=o.pendingProps,y=i!==null?i.memoizedProps:null,E=m.children,em(d,m)?E=null:y!==null&&em(d,y)&&(o.flags|=32),Yw(i,o),yn(i,o,E,u),o.child;case 6:return i===null&&um(o),null;case 13:return tE(i,o,u);case 4:return ym(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=Ua(o,null,d,u):yn(i,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Gw(i,o,d,m,u);case 7:return yn(i,o,o.pendingProps,u),o.child;case 8:return yn(i,o,o.pendingProps.children,u),o.child;case 12:return yn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,y=o.memoizedProps,E=m.value,rt(ad,d._currentValue),d._currentValue=E,y!==null)if(mr(y.value,E)){if(y.children===m.children&&!Tn.current){o=Ss(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var R=y.dependencies;if(R!==null){E=y.child;for(var N=R.firstContext;N!==null;){if(N.context===d){if(y.tag===1){N=Ts(-1,u&-u),N.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var ee=$.pending;ee===null?N.next=N:(N.next=ee.next,ee.next=N),$.pending=N}}y.lanes|=u,N=y.alternate,N!==null&&(N.lanes|=u),pm(y.return,u,o),R.lanes|=u;break}N=N.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=u,R=E.alternate,R!==null&&(R.lanes|=u),pm(E,u,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}yn(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,za(o,u),m=nr(m),d=d(m),o.flags|=1,yn(i,o,d,u),o.child;case 14:return d=o.type,m=yr(d,o.pendingProps),m=yr(d.type,m),Kw(i,o,d,m,u);case 15:return Qw(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),vd(i,o),o.tag=1,Sn(d)?(i=!0,td(o)):i=!1,za(o,u),Uw(o,d,m),Cm(o,d,m,u),Vm(null,o,d,!0,i,u);case 19:return rE(i,o,u);case 22:return Jw(i,o,u)}throw Error(t(156,o.tag))};function PE(i,o){return uu(i,o)}function ux(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(i,o,u,d){return new ux(i,o,u,d)}function eg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cx(i){if(typeof i=="function")return eg(i)?1:0;if(i!=null){if(i=i.$$typeof,i===j)return 11;if(i===gt)return 14}return 2}function pi(i,o){var u=i.alternate;return u===null?(u=ir(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Cd(i,o,u,d,m,y){var E=2;if(d=i,typeof i=="function")eg(i)&&(E=1);else if(typeof i=="string")E=5;else e:switch(i){case b:return Io(u.children,m,y,o);case A:E=8,m|=8;break;case x:return i=ir(12,u,o,m|2),i.elementType=x,i.lanes=y,i;case P:return i=ir(13,u,o,m),i.elementType=P,i.lanes=y,i;case je:return i=ir(19,u,o,m),i.elementType=je,i.lanes=y,i;case ce:return kd(u,m,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:E=10;break e;case V:E=9;break e;case j:E=11;break e;case gt:E=14;break e;case Re:E=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=ir(E,u,o,m),o.elementType=i,o.type=d,o.lanes=y,o}function Io(i,o,u,d){return i=ir(7,i,d,o),i.lanes=u,i}function kd(i,o,u,d){return i=ir(22,i,d,o),i.elementType=ce,i.lanes=u,i.stateNode={isHidden:!1},i}function tg(i,o,u){return i=ir(6,i,null,o),i.lanes=u,i}function ng(i,o,u){return o=ir(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function hx(i,o,u,d,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function rg(i,o,u,d,m,y,E,R,N){return i=new hx(i,o,u,R,N),o===1?(o=1,y===!0&&(o|=8)):o=0,y=ir(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(y),i}function dx(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function xE(i){if(!i)return ii;i=i._reactInternals;e:{if(fr(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Sn(u))return nw(i,u,o)}return o}function bE(i,o,u,d,m,y,E,R,N){return i=rg(u,d,!0,i,m,y,E,R,N),i.context=xE(null),u=i.current,d=_n(),m=di(u),y=Ts(d,m),y.callback=o??null,li(u,y,m),i.current.lanes=m,io(i,m,d),Pn(i,d),i}function Nd(i,o,u,d){var m=o.current,y=_n(),E=di(m);return u=xE(u),o.context===null?o.context=u:o.pendingContext=u,o=Ts(y,E),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=li(m,o,E),i!==null&&(wr(i,m,E,y),ud(i,m,E)),E}function Dd(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function CE(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function sg(i,o){CE(i,o),(i=i.alternate)&&CE(i,o)}function fx(){return null}var kE=typeof reportError=="function"?reportError:function(i){console.error(i)};function ig(i){this._internalRoot=i}Vd.prototype.render=ig.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Nd(i,o,null,null)},Vd.prototype.unmount=ig.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;vo(function(){Nd(null,i,null,null)}),o[_s]=null}};function Vd(i){this._internalRoot=i}Vd.prototype.unstable_scheduleHydration=function(i){if(i){var o=_u();i={blockedOn:null,target:i,priority:o};for(var u=0;u<jn.length&&o!==0&&o<jn[u].priority;u++);jn.splice(u,0,i),u===0&&wa(i)}};function og(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Od(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function NE(){}function px(i,o,u,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var $=Dd(E);y.call($)}}var E=bE(o,d,i,0,null,!1,!1,"",NE);return i._reactRootContainer=E,i[_s]=E.current,Cu(i.nodeType===8?i.parentNode:i),vo(),E}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var R=d;d=function(){var $=Dd(N);R.call($)}}var N=rg(i,0,!1,null,null,!1,!1,"",NE);return i._reactRootContainer=N,i[_s]=N.current,Cu(i.nodeType===8?i.parentNode:i),vo(function(){Nd(o,N,u,d)}),N}function Ld(i,o,u,d,m){var y=u._reactRootContainer;if(y){var E=y;if(typeof m=="function"){var R=m;m=function(){var N=Dd(E);R.call(N)}}Nd(o,E,i,m)}else E=px(u,o,i,m,d);return Dd(E)}gu=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Qe(o.pendingLanes);u!==0&&(mu(o,u|1),Pn(o,ot()),(He&6)===0&&(Ga=ot()+500,oi()))}break;case 13:vo(function(){var d=Is(i,1);if(d!==null){var m=_n();wr(d,i,1,m)}}),sg(i,1)}},_a=function(i){if(i.tag===13){var o=Is(i,134217728);if(o!==null){var u=_n();wr(o,i,134217728,u)}sg(i,134217728)}},yu=function(i){if(i.tag===13){var o=di(i),u=Is(i,o);if(u!==null){var d=_n();wr(u,i,o,d)}sg(i,o)}},_u=function(){return ze},vu=function(i,o){var u=ze;try{return ze=i,o()}finally{ze=u}},ls=function(i,o,u){switch(o){case"input":if(Qi(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var m=Zh(d);if(!m)throw Error(t(90));eu(d),Qi(d,m)}}}break;case"textarea":Sh(i,u);break;case"select":o=u.value,o!=null&&hr(i,!!u.multiple,o,!1)}},Ph=Ym,xh=vo;var mx={usingClientEntryPoint:!1,Events:[Du,Va,Zh,Hs,Gs,Ym]},Gu={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Oh(i),i===null?null:i.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{to=Md.inject(gx),Mn=Md}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx,xn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(o))throw Error(t(200));return dx(i,o,null,u)},xn.createRoot=function(i,o){if(!og(i))throw Error(t(299));var u=!1,d="",m=kE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=rg(i,1,!1,null,null,u,!1,d,m),i[_s]=o.current,Cu(i.nodeType===8?i.parentNode:i),new ig(o)},xn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Oh(o),i=i===null?null:i.stateNode,i},xn.flushSync=function(i){return vo(i)},xn.hydrate=function(i,o,u){if(!Od(o))throw Error(t(200));return Ld(null,i,o,!0,u)},xn.hydrateRoot=function(i,o,u){if(!og(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,y="",E=kE;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=bE(o,null,i,1,u??null,m,!1,y,E),i[_s]=o.current,Cu(i),d)for(i=0;i<d.length;i++)u=d[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Vd(o)},xn.render=function(i,o,u){if(!Od(o))throw Error(t(200));return Ld(null,i,o,!1,u)},xn.unmountComponentAtNode=function(i){if(!Od(i))throw Error(t(40));return i._reactRootContainer?(vo(function(){Ld(null,null,i,!1,function(){i._reactRootContainer=null,i[_s]=null})}),!0):!1},xn.unstable_batchedUpdates=Ym,xn.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!Od(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Ld(i,o,u,!1,d)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var UE;function Sx(){if(UE)return ug.exports;UE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ug.exports=Tx(),ug.exports}var BE;function Ax(){if(BE)return Fd;BE=1;var n=Sx();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var Rx=Ax();const Px=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xx=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),zE=n=>{const e=xx(n);return e.charAt(0).toUpperCase()+e.slice(1)},T0=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),bx=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Cx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kx=be.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...h},f)=>be.createElement("svg",{ref:f,...Cx,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:T0("lucide",s),...!a&&!bx(h)&&{"aria-hidden":"true"},...h},[...l.map(([p,g])=>be.createElement(p,g)),...Array.isArray(a)?a:[a]]));const ht=(n,e)=>{const t=be.forwardRef(({className:r,...s},a)=>be.createElement(kx,{ref:a,iconNode:e,className:T0(`lucide-${Px(zE(n))}`,`lucide-${n}`,r),...s}));return t.displayName=zE(n),t};const Nx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Dx=ht("bell",Nx);const Vx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ox=ht("calendar",Vx);const Lx=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],S0=ht("camera",Lx);const Mx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fx=ht("chevron-down",Mx);const jx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ux=ht("chevron-left",jx);const Bx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zx=ht("circle-check-big",Bx);const qx=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Cy=ht("coins",qx);const $x=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Wx=ht("gift",$x);const Hx=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],A0=ht("heart",Hx);const Gx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Kx=ht("house",Gx);const Qx=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Og=ht("message-circle",Qx);const Jx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ky=ht("plus",Jx);const Yx=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Xx=ht("repeat",Yx);const Zx=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],eb=ht("search",Zx);const tb=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nb=ht("send",tb);const rb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lg=ht("settings",rb);const sb=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ib=ht("share-2",sb);const ob=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ab=ht("shopping-bag",ob);const lb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ub=ht("sparkles",lb);const cb=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hb=ht("star",cb);const db=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],fb=ht("store",db);const pb=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mb=ht("tag",pb);const gb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gf=ht("user",gb);const yb=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Hf=ht("x",yb);const _b=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vb=ht("zap",_b),wb=()=>{};var qE={};const R0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Eb=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},P0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,g=a>>2,w=(a&3)<<4|h>>4;let I=(h&15)<<2|p>>6,C=p&63;f||(C=64,l||(I=64)),r.push(t[g],t[w],t[I],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(R0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Eb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const w=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||w==null)throw new Ib;const I=a<<2|h>>4;if(r.push(I),p!==64){const C=h<<4&240|p>>2;if(r.push(C),w!==64){const k=p<<6&192|w;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ib extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tb=function(n){const e=R0(n);return P0.encodeByteArray(e,!0)},yf=function(n){return Tb(n).replace(/\./g,"")},Ny=function(n){try{return P0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _f(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Sb(t)||(n[t]=_f(n[t],e[t]));return n}function Sb(n){return n!=="__proto__"}function Dy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ab=()=>Dy().__FIREBASE_DEFAULTS__,Rb=()=>{if(typeof process>"u"||typeof qE>"u")return;const n=qE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ny(n[1]);return e&&JSON.parse(e)},Vy=()=>{try{return wb()||Ab()||Rb()||Pb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Oy=()=>Vy()?.config,xb=n=>Vy()?.[`_${n}`];class bb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Bi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ly(n){return(await fetch(n,{credentials:"include"})).ok}function Cb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yf(JSON.stringify(t)),yf(JSON.stringify(l)),""].join(".")}const fc={};function kb(){const n={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?n.emulator.push(e):n.prod.push(e);return n}function Nb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $E=!1;function My(n,e){if(typeof window>"u"||typeof document>"u"||!Bi(window.location.host)||fc[n]===e||fc[n]||$E)return;fc[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",a=kb().prod.length>0;function l(){const I=document.getElementById(r);I&&I.remove()}function h(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,C){I.setAttribute("width","24"),I.setAttribute("id",C),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{$E=!0,l()},I}function g(I,C){I.setAttribute("id",C),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=Nb(r),C=t("text"),k=document.getElementById(C)||document.createElement("span"),F=t("learnmore"),D=document.getElementById(F)||document.createElement("a"),Q=t("preprendIcon"),se=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ie=I.element;h(ie),g(D,F);const pe=p();f(se,Q),ie.append(se,k,D,pe),document.body.appendChild(ie)}a?(k.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Db(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Gf(){const n=Vy()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vb(){return typeof window<"u"||x0()}function x0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ob(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C0(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function k0(){return!Gf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function N0(){return!Gf()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xc(){try{return typeof indexedDB=="object"}catch{return!1}}function Lb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const Mb="FirebaseError";class Kt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Mb,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?Fb(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Kt(s,h,r)}}function Fb(n,e){return n.replace(jb,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jb=/\{\$([^}]+)}/g;function WE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ub(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ci(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(HE(a)&&HE(l)){if(!Ci(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function HE(n){return n!==null&&typeof n=="object"}function Ul(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function ic(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function D0(n,e){const t=new Bb(n,e);return t.subscribe.bind(t)}class Bb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zb(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=dg),s.error===void 0&&(s.error=dg),s.complete===void 0&&(s.complete=dg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dg(){}function Te(n){return n&&n._delegate?n._delegate:n}class lr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const So="[DEFAULT]";class qb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new bb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wb(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$b(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $b(n){return n===So?void 0:n}function Wb(n){return n.instantiationMode==="EAGER"}class V0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const jy=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const O0={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Hb=Me.INFO,Gb={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Kb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Gb[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=Hb,this._logHandler=Kb,this._userLogHandler=null,jy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function Qb(n){jy.forEach(e=>{e.setLogLevel(n)})}function Jb(n,e){for(const t of jy){let r=null;e&&e.level&&(r=O0[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,a,...l)=>{const h=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(r??s.logLevel)&&n({level:Me[a].toLowerCase(),message:h,args:l,type:s.name})}}}const Yb=(n,e)=>e.some(t=>n instanceof t);let GE,KE;function Xb(){return GE||(GE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zb(){return KE||(KE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L0=new WeakMap,Mg=new WeakMap,M0=new WeakMap,fg=new WeakMap,Uy=new WeakMap;function eC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ai(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&L0.set(t,n)}).catch(()=>{}),Uy.set(e,n),e}function tC(n){if(Mg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Mg.set(n,e)}let Fg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||M0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ai(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nC(n){Fg=n(Fg)}function rC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(pg(this),e,...t);return M0.set(r,e.sort?e.sort():[e]),Ai(r)}:Zb().includes(n)?function(...e){return n.apply(pg(this),e),Ai(L0.get(this))}:function(...e){return Ai(n.apply(pg(this),e))}}function sC(n){return typeof n=="function"?rC(n):(n instanceof IDBTransaction&&tC(n),Yb(n,Xb())?new Proxy(n,Fg):n)}function Ai(n){if(n instanceof IDBRequest)return eC(n);if(fg.has(n))return fg.get(n);const e=sC(n);return e!==n&&(fg.set(n,e),Uy.set(e,n)),e}const pg=n=>Uy.get(n);function iC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=Ai(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ai(l.result),f.oldVersion,f.newVersion,Ai(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const oC=["get","getKey","getAll","getAllKeys","count"],aC=["put","add","delete","clear"],mg=new Map;function QE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=aC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oC.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return mg.set(e,a),a}nC(n=>({...n,get:(e,t,r)=>QE(e,t)||n.get(e,t,r),has:(e,t)=>!!QE(e,t)||n.has(e,t)}));class lC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(uC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function uC(n){return n.getComponent()?.type==="VERSION"}const vf="@firebase/app",jg="0.14.6";const bs=new Kf("@firebase/app"),cC="@firebase/app-compat",hC="@firebase/analytics-compat",dC="@firebase/analytics",fC="@firebase/app-check-compat",pC="@firebase/app-check",mC="@firebase/auth",gC="@firebase/auth-compat",yC="@firebase/database",_C="@firebase/data-connect",vC="@firebase/database-compat",wC="@firebase/functions",EC="@firebase/functions-compat",IC="@firebase/installations",TC="@firebase/installations-compat",SC="@firebase/messaging",AC="@firebase/messaging-compat",RC="@firebase/performance",PC="@firebase/performance-compat",xC="@firebase/remote-config",bC="@firebase/remote-config-compat",CC="@firebase/storage",kC="@firebase/storage-compat",NC="@firebase/firestore",DC="@firebase/ai",VC="@firebase/firestore-compat",OC="firebase",LC="12.6.0";const ki="[DEFAULT]",MC={[vf]:"fire-core",[cC]:"fire-core-compat",[dC]:"fire-analytics",[hC]:"fire-analytics-compat",[pC]:"fire-app-check",[fC]:"fire-app-check-compat",[mC]:"fire-auth",[gC]:"fire-auth-compat",[yC]:"fire-rtdb",[_C]:"fire-data-connect",[vC]:"fire-rtdb-compat",[wC]:"fire-fn",[EC]:"fire-fn-compat",[IC]:"fire-iid",[TC]:"fire-iid-compat",[SC]:"fire-fcm",[AC]:"fire-fcm-compat",[RC]:"fire-perf",[PC]:"fire-perf-compat",[xC]:"fire-rc",[bC]:"fire-rc-compat",[CC]:"fire-gcs",[kC]:"fire-gcs-compat",[NC]:"fire-fst",[VC]:"fire-fst-compat",[DC]:"fire-vertex","fire-js":"fire-js",[OC]:"fire-js-all"};const Ni=new Map,ml=new Map,gl=new Map;function bc(n,e){try{n.container.addComponent(e)}catch(t){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function F0(n,e){n.container.addOrOverwriteComponent(e)}function Cs(n){const e=n.name;if(gl.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;gl.set(e,n);for(const t of Ni.values())bc(t,n);for(const t of ml.values())bc(t,n);return!0}function j0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function FC(n,e,t=ki){j0(n,e).clearInstance(t)}function By(n){return n.options!==void 0}function U0(n){return By(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function ct(n){return n==null?!1:n.settings!==void 0}function jC(){gl.clear()}const UC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new ta("app","Firebase",UC);let B0=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};function JE(n,e){const t=Ny(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,a=new Date().getTime();s-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class BC extends B0{constructor(e,t,r,s){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,s);else{const h=e;super(h.options,l,s)}this._serverConfig={automaticDataCollectionEnabled:a,...t},this._serverConfig.authIdToken&&JE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&JE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jn(vf,jg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){qy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Qn.create("server-app-deleted")}}const zi=LC;function zy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ki,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Qn.create("bad-app-name",{appName:String(s)});if(t||(t=Oy()),!t)throw Qn.create("no-options");const a=Ni.get(s);if(a){if(Ci(t,a.options)&&Ci(r,a.config))return a;throw Qn.create("duplicate-app",{appName:s})}const l=new V0(s);for(const f of gl.values())l.addComponent(f);const h=new B0(t,r,l);return Ni.set(s,h),h}function zC(n,e={}){if(Vb()&&!x0())throw Qn.create("invalid-server-app-environment");let t,r=e||{};if(n&&(By(n)?t=n.options:U0(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=Oy()),!t)throw Qn.create("no-options");const s={...r,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const a=g=>[...g].reduce((w,I)=>Math.imul(31,w)+I.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Qn.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(s)),h=ml.get(l);if(h)return h.incRefCount(r.releaseOnDeref),h;const f=new V0(l);for(const g of gl.values())f.addComponent(g);const p=new BC(t,r,l,f);return ml.set(l,p),p}function qC(n=ki){const e=Ni.get(n);if(!e&&n===ki&&Oy())return zy();if(!e)throw Qn.create("no-app",{appName:n});return e}function $C(){return Array.from(Ni.values())}async function qy(n){let e=!1;const t=n.name;Ni.has(t)?(e=!0,Ni.delete(t)):ml.has(t)&&n.decRefCount()<=0&&(ml.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Jn(n,e,t){let r=MC[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(l.join(" "));return}Cs(new lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function z0(n,e){if(n!==null&&typeof n!="function")throw Qn.create("invalid-log-argument");Jb(n,e)}function q0(n){Qb(n)}const WC="firebase-heartbeat-database",HC=1,Cc="firebase-heartbeat-store";let gg=null;function $0(){return gg||(gg=iC(WC,HC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qn.create("idb-open",{originalErrorMessage:n.message})})),gg}async function GC(n){try{const t=(await $0()).transaction(Cc),r=await t.objectStore(Cc).get(W0(n));return await t.done,r}catch(e){if(e instanceof Kt)bs.warn(e.message);else{const t=Qn.create("idb-get",{originalErrorMessage:e?.message});bs.warn(t.message)}}}async function YE(n,e){try{const r=(await $0()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,W0(n)),await r.done}catch(t){if(t instanceof Kt)bs.warn(t.message);else{const r=Qn.create("idb-set",{originalErrorMessage:t?.message});bs.warn(r.message)}}}function W0(n){return`${n.name}!${n.options.appId}`}const KC=1024,QC=30;class JC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=XE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>QC){const s=ZC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=XE(),{heartbeatsToSend:t,unsentEntries:r}=YC(this._heartbeatsCache.heartbeats),s=yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return bs.warn(e),""}}}function XE(){return new Date().toISOString().substring(0,10)}function YC(n,e=KC){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),ZE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ZE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class XC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xc()?Lb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return YE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ZE(n){return yf(JSON.stringify({version:2,heartbeats:n})).length}function ZC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function ek(n){Cs(new lr("platform-logger",e=>new lC(e),"PRIVATE")),Cs(new lr("heartbeat",e=>new JC(e),"PRIVATE")),Jn(vf,jg,n),Jn(vf,jg,"esm2020"),Jn("fire-js","")}ek("");const tk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:zi,_DEFAULT_ENTRY_NAME:ki,_addComponent:bc,_addOrOverwriteComponent:F0,_apps:Ni,_clearComponents:jC,_components:gl,_getProvider:j0,_isFirebaseApp:By,_isFirebaseServerApp:ct,_isFirebaseServerAppSettings:U0,_registerComponent:Cs,_removeServiceInstance:FC,_serverApps:ml,deleteApp:qy,getApp:qC,getApps:$C,initializeApp:zy,initializeServerApp:zC,onLog:z0,registerVersion:Jn,setLogLevel:q0},Symbol.toStringTag,{value:"Module"}));class nk{constructor(e,t){this._delegate=e,this.firebase=t,bc(e,new lr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),qy(this._delegate)))}_getService(e,t=ki){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=ki){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){bc(this._delegate,e)}_addOrOverwriteComponent(e){F0(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const rk={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},eI=new ta("app-compat","Firebase",rk);function sk(n){const e={},t={__esModule:!0,initializeApp:a,app:s,registerVersion:Jn,setLogLevel:q0,onLog:z0,apps:null,SDK_VERSION:zi,INTERNAL:{registerComponent:h,removeApp:r,useAsService:f,modularAPIs:tk}};t.default=t,Object.defineProperty(t,"apps",{get:l});function r(p){delete e[p]}function s(p){if(p=p||ki,!WE(e,p))throw eI.create("no-app",{appName:p});return e[p]}s.App=n;function a(p,g={}){const w=zy(p,g);if(WE(e,w.name))return e[w.name];const I=new n(w,t);return e[w.name]=I,I}function l(){return Object.keys(e).map(p=>e[p])}function h(p){const g=p.name,w=g.replace("-compat","");if(Cs(p)&&p.type==="PUBLIC"){const I=(C=s())=>{if(typeof C[w]!="function")throw eI.create("invalid-app-argument",{appName:g});return C[w]()};p.serviceProps!==void 0&&_f(I,p.serviceProps),t[w]=I,n.prototype[w]=function(...C){return this._getService.bind(this,g).apply(this,p.multipleInstances?C:[])}}return p.type==="PUBLIC"?t[w]:null}function f(p,g){return g==="serverAuth"?null:g}return t}function H0(){const n=sk(nk);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:H0,extendNamespace:e,createSubscribe:D0,ErrorFactory:ta,deepExtend:_f};function e(t){_f(n,t)}return n}const ik=H0();const tI=new Kf("@firebase/app-compat"),ok="@firebase/app-compat",ak="0.5.6";function lk(n){Jn(ok,ak,n)}try{const n=Dy();if(n.firebase!==void 0){tI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&tI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ur=ik;lk();var uk="firebase",ck="12.7.0";ur.registerVersion(uk,ck,"app-compat");const Qu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Qa={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function hk(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function G0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dk=hk,fk=G0,K0=new ta("auth","Firebase",G0());const wf=new Kf("@firebase/auth");function pk(n,...e){wf.logLevel<=Me.WARN&&wf.warn(`Auth (${zi}): ${n}`,...e)}function Jd(n,...e){wf.logLevel<=Me.ERROR&&wf.error(`Auth (${zi}): ${n}`,...e)}function rn(n,...e){throw Wy(n,...e)}function Bt(n,...e){return Wy(n,...e)}function $y(n,e,t){const r={...fk(),[e]:t};return new ta("auth","Firebase",r).create(e,{appName:n.name})}function Qt(n){return $y(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&rn(n,"argument-error"),$y(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return K0.create(n,...e)}function te(n,e,...t){if(!n)throw Wy(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jd(e),new Error(e)}function Ar(n,e){n||Zr(e)}function kc(){return typeof self<"u"&&self.location?.href||""}function Hy(){return nI()==="http:"||nI()==="https:"}function nI(){return typeof self<"u"&&self.location?.protocol||null}function mk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hy()||b0()||"connection"in navigator)?navigator.onLine:!0}function gk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile=Db()||Fy()}get(){return mk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gy(n,e){Ar(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Q0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _k=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vk=new Yc(3e4,6e4);function St(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function At(n,e,t,r,s={}){return J0(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Ul({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...a};return Ob()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Bi(n.emulatorConfig.host)&&(p.credentials="include"),Q0.fetch()(await Y0(n,n.config.apiHost,t,h),p)})}async function J0(n,e,t){n._canInitEmulator=!1;const r={...yk,...e};try{const s=new Ek(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw oc(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw oc(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw oc(n,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw $y(n,g,p);rn(n,g)}}catch(s){if(s instanceof Kt)throw s;rn(n,"network-request-failed",{message:String(s)})}}async function Vs(n,e,t,r,s={}){const a=await At(n,e,t,r,s);return"mfaPendingCredential"in a&&rn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function Y0(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Gy(n.config,s):`${n.config.apiScheme}://${s}`;return _k.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function wk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ek{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bt(this.auth,"network-request-failed")),vk.get())})}}function oc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Bt(n,e,r);return s.customData._tokenResponse=t,s}function rI(n){return n!==void 0&&n.getResponse!==void 0}function sI(n){return n!==void 0&&n.enterprise!==void 0}class X0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ik(n){return(await At(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Z0(n,e){return At(n,"GET","/v2/recaptchaConfig",St(n,e))}async function Tk(n,e){return At(n,"POST","/v1/accounts:delete",e)}async function Sk(n,e){return At(n,"POST","/v1/accounts:update",e)}async function Ef(n,e){return At(n,"POST","/v1/accounts:lookup",e)}function pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ak(n,e=!1){const t=Te(n),r=await t.getIdToken(e),s=Qf(r);te(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:pc(yg(s.auth_time)),issuedAtTime:pc(yg(s.iat)),expirationTime:pc(yg(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function yg(n){return Number(n)*1e3}function Qf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ny(t);return s?JSON.parse(s):(Jd("Failed to decode base64 JWT payload"),null)}catch(s){return Jd("Caught error parsing JWT payload as JSON",s?.toString()),null}}function iI(n){const e=Qf(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ks(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kt&&Rk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Rk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Pk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nc(n){const e=n.auth,t=await n.getIdToken(),r=await ks(n,Ef(e,{idToken:t}));te(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=s.providerUserInfo?.length?eS(s.providerUserInfo):[],l=bk(n.providerData,a),h=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!l?.length,p=h?f:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ug(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function xk(n){const e=Te(n);await Nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bk(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function eS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Ck(n,e){const t=await J0(n,{},async()=>{const r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await Y0(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Bi(n.emulatorConfig.host)&&(f.credentials="include"),Q0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kk(n,e){return At(n,"POST","/v2/accounts:revokeToken",St(n,e))}class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");const t=iI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await Ck(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new ul;return r&&(te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(te(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function gi(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ir{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Pk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ug(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ks(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ak(this,e)}reload(){return xk(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ct(this.auth.app))return Promise.reject(Qt(this.auth));const e=await this.getIdToken();return await ks(this,Tk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:w,emailVerified:I,isAnonymous:C,providerData:k,stsTokenManager:F}=t;te(w&&F,e,"internal-error");const D=ul.fromJSON(this.name,F);te(typeof w=="string",e,"internal-error"),gi(r,e.name),gi(s,e.name),te(typeof I=="boolean",e,"internal-error"),te(typeof C=="boolean",e,"internal-error"),gi(a,e.name),gi(l,e.name),gi(h,e.name),gi(f,e.name),gi(p,e.name),gi(g,e.name);const Q=new Ir({uid:w,auth:e,email:s,emailVerified:I,displayName:r,isAnonymous:C,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:D,createdAt:p,lastLoginAt:g});return k&&Array.isArray(k)&&(Q.providerData=k.map(se=>({...se}))),f&&(Q._redirectEventId=f),Q}static async _fromIdTokenResponse(e,t,r=!1){const s=new ul;s.updateFromServerResponse(t);const a=new Ir({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Nc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];te(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?eS(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,h=new ul;h.updateFromIdToken(r);const f=new Ir({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ug(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,p),f}}const oI=new Map;function Kn(n){Ar(n instanceof Function,"Expected a class definition");let e=oI.get(n);return e?(Ar(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,oI.set(n,e),e)}class tS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tS.type="NONE";const yl=tS;function Mo(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Mo(this.userKey,s.apiKey,a),this.fullPersistenceKey=Mo("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cl(Kn(yl),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||Kn(yl);const l=Mo(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const g=await p._get(l);if(g){let w;if(typeof g=="string"){const I=await Ef(e,{idToken:g}).catch(()=>{});if(!I)break;w=await Ir._fromGetAccountInfoResponse(e,I,g)}else w=Ir._fromJSON(e,g);p!==a&&(h=w),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new cl(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new cl(a,e,r))}}function aI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oS(e))return"Blackberry";if(aS(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||sS(e))&&!e.includes("edge/"))return"Chrome";if(Xc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nS(n=vt()){return/firefox\//i.test(n)}function rS(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sS(n=vt()){return/crios\//i.test(n)}function iS(n=vt()){return/iemobile/i.test(n)}function Xc(n=vt()){return/android/i.test(n)}function oS(n=vt()){return/blackberry/i.test(n)}function aS(n=vt()){return/webos/i.test(n)}function Zc(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Nk(n=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Dk(n=vt()){return Zc(n)&&!!window.navigator?.standalone}function Vk(){return C0()&&document.documentMode===10}function lS(n=vt()){return Zc(n)||Xc(n)||aS(n)||oS(n)||/windows phone/i.test(n)||iS(n)}function uS(n,e=[]){let t;switch(n){case"Browser":t=aI(vt());break;case"Worker":t=`${aI(vt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zi}/${r}`}class Ok{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Lk(n,e={}){return At(n,"GET","/v2/passwordPolicy",St(n,e))}const Mk=6;class Fk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Mk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class jk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lI(this),this.idTokenSubscription=new lI(this),this.beforeStateQueue=new Ok(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ct(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ct(this.app))return Promise.reject(Qt(this));const t=e?Te(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ct(this.app)?Promise.reject(Qt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ct(this.app)?Promise.reject(Qt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lk(this),t=new Fk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kn(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Kn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&pk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wt(n){return Te(n)}class lI{constructor(e){this.auth=e,this.observer=null,this.addObserver=D0(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uk(n){eh=n}function Ky(n){return eh.loadJS(n)}function Bk(){return eh.recaptchaV2Script}function zk(){return eh.recaptchaEnterpriseScript}function qk(){return eh.gapiScript}function cS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const $k=500,Wk=6e4,jd=1e12;class Hk{constructor(e){this.auth=e,this.counter=jd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Qk(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||jd;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||jd;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||jd;return this._widgets.get(t)?.execute(),""}}class Gk{constructor(){this.enterprise=new Kk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Kk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qk{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;te(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Jk(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Wk)},$k))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Jk(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Yk="recaptcha-enterprise",mc="NO_RECAPTCHA";class hS{constructor(e){this.type=Yk,this.auth=wt(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{Z0(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new X0(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function s(a,l,h){const f=window.grecaptcha;sI(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(mc)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gk().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&sI(window.grecaptcha))s(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=zk();f.length!==0&&(f+=h),Ky(f).then(()=>{s(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Ju(n,e,t,r=!1,s=!1){const a=new hS(n);let l;if(s)l=mc;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ri(n,e,t,r,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ju(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ju(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const a=await Ju(n,e,t);return r(n,a).catch(async l=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await Ju(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)})}else{const a=await Ju(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(s+" provider is not supported.")}async function Xk(n){const e=wt(n),t=await Z0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new X0(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new hS(e).verify()}function Zk(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Kn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function eN(n,e,t){const r=wt(n);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!t?.disableWarnings,a=dS(e),{host:l,port:h}=tN(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(Ci(p,r.config.emulator)&&Ci(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Bi(l)?(Ly(`${a}//${l}${f}`),My("Auth",!0)):s||nN()}function dS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function tN(n){const e=dS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:uI(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:uI(l)}}}function uI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function nN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class zl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function fS(n,e){return At(n,"POST","/v1/accounts:resetPassword",St(n,e))}async function rN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function sN(n,e){return At(n,"POST","/v1/accounts:signUp",e)}async function iN(n,e){return At(n,"POST","/v1/accounts:update",St(n,e))}async function oN(n,e){return Vs(n,"POST","/v1/accounts:signInWithPassword",St(n,e))}async function Jf(n,e){return At(n,"POST","/v1/accounts:sendOobCode",St(n,e))}async function aN(n,e){return Jf(n,e)}async function lN(n,e){return Jf(n,e)}async function uN(n,e){return Jf(n,e)}async function cN(n,e){return Jf(n,e)}async function hN(n,e){return Vs(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}async function dN(n,e){return Vs(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}class Dc extends zl{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Dc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Dc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ri(e,t,"signInWithPassword",oN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hN(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ri(e,r,"signUpPassword",sN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dN(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xs(n,e){return Vs(n,"POST","/v1/accounts:signInWithIdp",St(n,e))}const fN="http://localhost";class is extends zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new is(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return xs(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}buildRequest(){const e={requestUri:fN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ul(t)}return e}}async function cI(n,e){return At(n,"POST","/v1/accounts:sendVerificationCode",St(n,e))}async function pN(n,e){return Vs(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e))}async function mN(n,e){const t=await Vs(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e));if(t.temporaryProof)throw oc(n,"account-exists-with-different-credential",t);return t}const gN={USER_NOT_FOUND:"user-not-found"};async function yN(n,e){const t={...e,operation:"REAUTH"};return Vs(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,t),gN)}class Fo extends zl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Fo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Fo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return pN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return mN(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return yN(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:a}=e;return!r&&!t&&!s&&!a?null:new Fo({verificationId:t,verificationCode:r,phoneNumber:s,temporaryProof:a})}}function _N(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vN(n){const e=al(ic(n)).link,t=e?al(ic(e)).deep_link_id:null,r=al(ic(n)).deep_link_id;return(r?al(ic(r)).link:null)||r||t||e||n}class Yf{constructor(e){const t=al(ic(e)),r=t.apiKey??null,s=t.oobCode??null,a=_N(t.mode??null);te(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=vN(e);try{return new Yf(t)}catch{return null}}}class qi{constructor(){this.providerId=qi.PROVIDER_ID}static credential(e,t){return Dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Yf.parseLink(t);return te(r,"argument-error"),Dc._fromEmailAndCode(e,r.code,r.tenantId)}}qi.PROVIDER_ID="password";qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Os{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ql extends Os{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hl extends ql{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return te("providerId"in t&&"signInMethod"in t,"argument-error"),is._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),is._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return hl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:a,nonce:l,providerId:h}=e;if(!r&&!s&&!t&&!a||!h)return null;try{return new hl(h)._credential({idToken:t,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}class Qr extends ql{constructor(){super("facebook.com")}static credential(e){return is._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";class Jr extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return is._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Jr.credential(t,r)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";class Yr extends ql{constructor(){super("github.com")}static credential(e){return is._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";const wN="http://localhost";class _l extends zl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return xs(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xs(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xs(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:a}=t;return!r||!s||!a||r!==s?null:new _l(r,a)}static _create(e,t){return new _l(e,t)}buildRequest(){return{requestUri:wN,returnSecureToken:!0,pendingToken:this.pendingToken}}}const EN="saml.";class If extends Os{constructor(e){te(e.startsWith(EN),"argument-error"),super(e)}static credentialFromResult(e){return If.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return If.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=_l.fromJSON(e);return te(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return _l._create(r,t)}catch{return null}}}class Xr extends ql{constructor(){super("twitter.com")}static credential(e,t){return is._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xr.credential(t,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";async function pS(n,e){return Vs(n,"POST","/v1/accounts:signUp",St(n,e))}class cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Ir._fromIdTokenResponse(e,r,s),l=hI(r);return new cr({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=hI(r);return new cr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function hI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function IN(n){if(ct(n.app))return Promise.reject(Qt(n));const e=wt(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new cr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await pS(e,{returnSecureToken:!0}),r=await cr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Tf extends Kt{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Tf(e,t,r,s)}}function mS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Tf._fromErrorAndOperation(n,a,e,r):a})}function gS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}async function TN(n,e){const t=Te(n);await Xf(!0,t,e);const{providerUserInfo:r}=await Sk(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=gS(r||[]);return t.providerData=t.providerData.filter(a=>s.has(a.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Qy(n,e,t=!1){const r=await ks(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cr._forOperation(n,"link",r)}async function Xf(n,e,t){await Nc(e);const r=gS(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";te(r.has(t)===n,e.auth,s)}async function yS(n,e,t=!1){const{auth:r}=n;if(ct(r.app))return Promise.reject(Qt(r));const s="reauthenticate";try{const a=await ks(n,mS(r,s,e,n),t);te(a.idToken,r,"internal-error");const l=Qf(a.idToken);te(l,r,"internal-error");const{sub:h}=l;return te(n.uid===h,r,"user-mismatch"),cr._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&rn(r,"user-mismatch"),a}}async function _S(n,e,t=!1){if(ct(n.app))return Promise.reject(Qt(n));const r="signIn",s=await mS(n,r,e),a=await cr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function Zf(n,e){return _S(wt(n),e)}async function vS(n,e){const t=Te(n);return await Xf(!1,t,e.providerId),Qy(t,e)}async function wS(n,e){return yS(Te(n),e)}async function SN(n,e){return Vs(n,"POST","/v1/accounts:signInWithCustomToken",St(n,e))}async function AN(n,e){if(ct(n.app))return Promise.reject(Qt(n));const t=wt(n),r=await SN(t,{token:e,returnSecureToken:!0}),s=await cr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(s.user),s}class th{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Jy._fromServerResponse(e,t):"totpInfo"in t?Yy._fromServerResponse(e,t):rn(e,"internal-error")}}class Jy extends th{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Jy(t)}}class Yy extends th{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Yy(t)}}function ep(n,e,t){te(t.url?.length>0,n,"invalid-continue-uri"),te(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),te(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(te(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(te(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Xy(n){const e=wt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RN(n,e,t){const r=wt(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&ep(r,s,t),await Ri(r,s,"getOobCode",lN,"EMAIL_PASSWORD_PROVIDER")}async function PN(n,e,t){await fS(Te(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xy(n),r})}async function xN(n,e){await iN(Te(n),{oobCode:e})}async function ES(n,e){const t=Te(n),r=await fS(t,{oobCode:e}),s=r.requestType;switch(te(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,t,"internal-error");default:te(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=th._fromServerResponse(wt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function bN(n,e){const{data:t}=await ES(Te(n),e);return t.email}async function CN(n,e,t){if(ct(n.app))return Promise.reject(Qt(n));const r=wt(n),l=await Ri(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pS,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Xy(n),f}),h=await cr._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function kN(n,e,t){return ct(n.app)?Promise.reject(Qt(n)):Zf(Te(n),qi.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xy(n),r})}async function NN(n,e,t){const r=wt(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,h){te(h.handleCodeInApp,r,"argument-error"),h&&ep(r,l,h)}a(s,t),await Ri(r,s,"getOobCode",uN,"EMAIL_PASSWORD_PROVIDER")}function DN(n,e){return Yf.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function VN(n,e,t){if(ct(n.app))return Promise.reject(Qt(n));const r=Te(n),s=qi.credentialWithLink(e,t||kc());return te(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Zf(r,s)}async function ON(n,e){return At(n,"POST","/v1/accounts:createAuthUri",St(n,e))}async function LN(n,e){const t=Hy()?kc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:s}=await ON(Te(n),r);return s||[]}async function MN(n,e){const t=Te(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&ep(t.auth,s,e);const{email:a}=await aN(t.auth,s);a!==n.email&&await n.reload()}async function FN(n,e,t){const r=Te(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&ep(r.auth,a,t);const{email:l}=await cN(r.auth,a);l!==n.email&&await n.reload()}async function jN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function UN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Te(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await ks(r,jN(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function BN(n,e){const t=Te(n);return ct(t.auth.app)?Promise.reject(Qt(t.auth)):IS(t,e,null)}function zN(n,e){return IS(Te(n),null,e)}async function IS(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const l=await ks(n,rN(r,a));await n._updateTokensIfNecessary(l,!0)}function qN(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const s=Qf(n.idToken)?.firebase?.sign_in_provider;if(s){const a=s!=="anonymous"&&s!=="custom"?s:null;return new dl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new $N(r,t);case"github.com":return new WN(r,t);case"google.com":return new HN(r,t);case"twitter.com":return new GN(r,t,n.screenName||null);case"custom":case"anonymous":return new dl(r,null);default:return new dl(r,e,t)}}class dl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class TS extends dl{constructor(e,t,r,s){super(e,t,r),this.username=s}}class $N extends dl{constructor(e,t){super(e,"facebook.com",t)}}class WN extends TS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class HN extends dl{constructor(e,t){super(e,"google.com",t)}}class GN extends TS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function KN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:qN(t)}class No{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new No("enroll",e,t)}static _fromMfaPendingCredential(e){return new No("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return No._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return No._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Zy{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=wt(e),s=t.customData._serverResponse,a=(s.mfaInfo||[]).map(h=>th._fromServerResponse(r,h));te(s.mfaPendingCredential,r,"internal-error");const l=No._fromMfaPendingCredential(s.mfaPendingCredential);return new Zy(l,a,async h=>{const f=await h._process(r,l);delete s.mfaInfo,delete s.mfaPendingCredential;const p={...s,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const g=await cr._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(g.user),g;case"reauthenticate":return te(t.user,r,"internal-error"),cr._forOperation(t.user,t.operationType,p);default:rn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function QN(n,e){const t=Te(n),r=e;return te(e.customData.operationType,t,"argument-error"),te(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),Zy._fromError(t,r)}function dI(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:start",St(n,e))}function JN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:finalize",St(n,e))}function YN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:withdraw",St(n,e))}class e_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>th._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new e_(e)}async getSession(){return No._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,s=await this.getSession(),a=await ks(this.user,r._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const s=await ks(this.user,YN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const _g=new WeakMap;function XN(n){const e=Te(n);return _g.has(e)||_g.set(e,e_._fromUser(e)),_g.get(e)}const Sf="__sak";class SS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ZN=1e3,e2=10;class AS extends SS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Vk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e2):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AS.type="LOCAL";const t_=AS;class RS extends SS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}RS.type="SESSION";const zo=RS;function t2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new tp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await t2(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tp.receivers=[];function nh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class n2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=nh("",20);s.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(w){const I=w;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Mt(){return window}function r2(n){Mt().location.href=n}function n_(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}async function s2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i2(){return navigator?.serviceWorker?.controller||null}function o2(){return n_()?self:null}const PS="firebaseLocalStorageDb",a2=1,Af="firebaseLocalStorage",xS="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function np(n,e){return n.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function l2(){const n=indexedDB.deleteDatabase(PS);return new rh(n).toPromise()}function Bg(){const n=indexedDB.open(PS,a2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Af,{keyPath:xS})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await l2(),e(await Bg()))})})}async function fI(n,e,t){const r=np(n,!0).put({[xS]:e,value:t});return new rh(r).toPromise()}async function u2(n,e){const t=np(n,!1).get(e),r=await new rh(t).toPromise();return r===void 0?null:r.value}function pI(n,e){const t=np(n,!0).delete(e);return new rh(t).toPromise()}const c2=800,h2=3;class bS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>h2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tp._getInstance(o2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await s2(),!this.activeServiceWorker)return;this.sender=new n2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||i2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await fI(e,Sf,"1"),await pI(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>fI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>u2(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=np(s,!1).getAll();return new rh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bS.type="LOCAL";const Vc=bS;function mI(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:start",St(n,e))}function d2(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:finalize",St(n,e))}const vg=cS("rcb"),f2=new Yc(3e4,6e4);class p2{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mt().grecaptcha?.render}load(e,t=""){return te(m2(t),e,"argument-error"),this.shouldResolveImmediately(t)&&rI(Mt().grecaptcha)?Promise.resolve(Mt().grecaptcha):new Promise((r,s)=>{const a=Mt().setTimeout(()=>{s(Bt(e,"network-request-failed"))},f2.get());Mt()[vg]=()=>{Mt().clearTimeout(a),delete Mt()[vg];const h=Mt().grecaptcha;if(!h||!rI(h)){s(Bt(e,"internal-error"));return}const f=h.render;h.render=(p,g)=>{const w=f(p,g);return this.counter++,w},this.hostLanguage=t,r(h)};const l=`${Bk()}?${Ul({onload:vg,render:"explicit",hl:t})}`;Ky(l).catch(()=>{clearTimeout(a),s(Bt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Mt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function m2(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class g2{async load(e){return new Hk(e)}clearedOneInstance(){}}const gc="recaptcha",y2={theme:"light",type:"image"};let _2=class{constructor(e,t,r={...y2}){this.parameters=r,this.type=gc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;te(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new g2:new p2,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(s=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),s(l))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Mt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(Hy()&&!n_(),this.auth,"internal-error"),await v2(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Ik(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function v2(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class r_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Fo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function w2(n,e,t){if(ct(n.app))return Promise.reject(Qt(n));const r=wt(n),s=await rp(r,e,Te(t));return new r_(s,a=>Zf(r,a))}async function E2(n,e,t){const r=Te(n);await Xf(!1,r,"phone");const s=await rp(r.auth,e,Te(t));return new r_(s,a=>vS(r,a))}async function I2(n,e,t){const r=Te(n);if(ct(r.auth.app))return Promise.reject(Qt(r.auth));const s=await rp(r.auth,e,Te(t));return new r_(s,a=>wS(r,a))}async function rp(n,e,t){if(!n._getRecaptchaConfig())try{await Xk(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const s=r.session;if("phoneNumber"in r){te(s.type==="enroll",n,"internal-error");const a={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ri(n,a,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===mc){te(t?.type===gc,p,"argument-error");const w=await wg(p,g,t);return dI(p,w)}return dI(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{te(s.type==="signin",n,"internal-error");const a=r.multiFactorHint?.uid||r.multiFactorUid;te(a,n,"missing-multi-factor-info");const l={mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ri(n,l,"mfaSmsSignIn",async(g,w)=>{if(w.phoneSignInInfo.captchaResponse===mc){te(t?.type===gc,g,"argument-error");const I=await wg(g,w,t);return mI(g,I)}return mI(g,w)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ri(n,s,"sendVerificationCode",async(f,p)=>{if(p.captchaResponse===mc){te(t?.type===gc,f,"argument-error");const g=await wg(f,p,t);return cI(f,g)}return cI(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t?._reset()}}async function T2(n,e){const t=Te(n);if(ct(t.auth.app))return Promise.reject(Qt(t.auth));await Qy(t,e)}async function wg(n,e,t){te(t.type===gc,n,"argument-error");const r=await t.verify();te(typeof r=="string",n,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const a=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.captchaResponse,h=s.phoneEnrollmentInfo.clientType,f=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:l,clientType:h,recaptchaVersion:f}}),s}else if("phoneSignInInfo"in s){const a=s.phoneSignInInfo.captchaResponse,l=s.phoneSignInInfo.clientType,h=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:l,recaptchaVersion:h}}),s}else return Object.assign(s,{recaptchaToken:r}),s}let qo=class Yd{constructor(e){this.providerId=Yd.PROVIDER_ID,this.auth=wt(e)}verifyPhoneNumber(e,t){return rp(this.auth,e,Te(t))}static credential(e,t){return Fo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yd.credentialFromTaggedObject(t)}static credentialFromError(e){return Yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Fo._fromTokenResponse(t,r):null}};qo.PROVIDER_ID="phone";qo.PHONE_SIGN_IN_METHOD="phone";function na(n,e){return e?Kn(e):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class s_ extends zl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function S2(n){return _S(n.auth,new s_(n),n.bypassAuthState)}function A2(n){const{auth:e,user:t}=n;return te(t,e,"internal-error"),yS(t,new s_(n),n.bypassAuthState)}async function R2(n){const{auth:e,user:t}=n;return te(t,e,"internal-error"),Qy(t,new s_(n),n.bypassAuthState)}class CS{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S2;case"linkViaPopup":case"linkViaRedirect":return R2;case"reauthViaPopup":case"reauthViaRedirect":return A2;default:rn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const P2=new Yc(2e3,1e4);async function x2(n,e,t){if(ct(n.app))return Promise.reject(Bt(n,"operation-not-supported-in-this-environment"));const r=wt(n);Bl(n,e,Os);const s=na(r,t);return new Rs(r,"signInViaPopup",e,s).executeNotNull()}async function b2(n,e,t){const r=Te(n);if(ct(r.auth.app))return Promise.reject(Bt(r.auth,"operation-not-supported-in-this-environment"));Bl(r.auth,e,Os);const s=na(r.auth,t);return new Rs(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function C2(n,e,t){const r=Te(n);Bl(r.auth,e,Os);const s=na(r.auth,t);return new Rs(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Rs extends CS{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,P2.get())};e()}}Rs.currentPopupAction=null;const k2="pendingRedirect",yc=new Map;class N2 extends CS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yc.get(this.auth._key());if(!e){try{const r=await D2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yc.set(this.auth._key(),e)}return this.bypassAuthState||yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D2(n,e){const t=NS(e),r=kS(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function i_(n,e){return kS(n)._set(NS(e),"true")}function V2(){yc.clear()}function o_(n,e){yc.set(n._key(),e)}function kS(n){return Kn(n._redirectPersistence)}function NS(n){return Mo(k2,n.config.apiKey,n.name)}function O2(n,e,t){return L2(n,e,t)}async function L2(n,e,t){if(ct(n.app))return Promise.reject(Qt(n));const r=wt(n);Bl(n,e,Os),await r._initializationPromise;const s=na(r,t);return await i_(s,r),s._openRedirect(r,e,"signInViaRedirect")}function M2(n,e,t){return F2(n,e,t)}async function F2(n,e,t){const r=Te(n);if(Bl(r.auth,e,Os),ct(r.auth.app))return Promise.reject(Qt(r.auth));await r.auth._initializationPromise;const s=na(r.auth,t);await i_(s,r.auth);const a=await DS(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",a)}function j2(n,e,t){return U2(n,e,t)}async function U2(n,e,t){const r=Te(n);Bl(r.auth,e,Os),await r.auth._initializationPromise;const s=na(r.auth,t);await Xf(!1,r,e.providerId),await i_(s,r.auth);const a=await DS(r);return s._openRedirect(r.auth,e,"linkViaRedirect",a)}async function B2(n,e){return await wt(n)._initializationPromise,sp(n,e,!1)}async function sp(n,e,t=!1){if(ct(n.app))return Promise.reject(Qt(n));const r=wt(n),s=na(r,e),l=await new N2(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function DS(n){const e=nh(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}const z2=600*1e3;class VS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!OS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z2&&this.cachedEventUids.clear(),this.cachedEventUids.has(gI(e))}saveEventToCache(e){this.cachedEventUids.add(gI(e)),this.lastProcessedEventTime=Date.now()}}function gI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function OS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function q2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OS(n);default:return!1}}async function LS(n,e={}){return At(n,"GET","/v1/projects",e)}const $2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W2=/^https?/;async function H2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await LS(n);for(const t of e)try{if(G2(t))return}catch{}rn(n,"unauthorized-domain")}function G2(n){const e=kc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!W2.test(t))return!1;if($2.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const K2=new Yc(3e4,6e4);function yI(){const n=Mt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q2(n){return new Promise((e,t)=>{function r(){yI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yI(),t(Bt(n,"network-request-failed"))},timeout:K2.get()})}if(Mt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mt().gapi?.load)r();else{const s=cS("iframefcb");return Mt()[s]=()=>{gapi.load?r():t(Bt(n,"network-request-failed"))},Ky(`${qk()}?onload=${s}`).catch(a=>t(a))}}).catch(e=>{throw Xd=null,e})}let Xd=null;function J2(n){return Xd=Xd||Q2(n),Xd}const Y2=new Yc(5e3,15e3),X2="__/auth/iframe",Z2="emulator/auth/iframe",eD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nD(n){const e=n.config;te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Gy(e,Z2):`https://${n.config.authDomain}/${X2}`,r={apiKey:e.apiKey,appName:n.name,v:zi},s=tD.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ul(r).slice(1)}`}async function rD(n){const e=await J2(n),t=Mt().gapi;return te(t,n,"internal-error"),e.open({where:document.body,url:nD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eD,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=Bt(n,"network-request-failed"),h=Mt().setTimeout(()=>{a(l)},Y2.get());function f(){Mt().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iD=500,oD=600,aD="_blank",lD="http://localhost";class _I{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uD(n,e,t,r=iD,s=oD){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...sD,width:r.toString(),height:s.toString(),top:a,left:l},p=vt().toLowerCase();t&&(h=sS(p)?aD:t),nS(p)&&(e=e||lD,f.scrollbars="yes");const g=Object.entries(f).reduce((I,[C,k])=>`${I}${C}=${k},`,"");if(Dk(p)&&h!=="_self")return cD(e||"",h),new _I(null);const w=window.open(e||"",h,g);te(w,n,"popup-blocked");try{w.focus()}catch{}return new _I(w)}function cD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const hD="__/auth/handler",dD="emulator/auth/handler",fD=encodeURIComponent("fac");async function zg(n,e,t,r,s,a){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zi,eventId:s};if(e instanceof Os){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Ub(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,w]of Object.entries(a||{}))l[g]=w}if(e instanceof ql){const g=e.getScopes().filter(w=>w!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await n._getAppCheckToken(),p=f?`#${fD}=${encodeURIComponent(f)}`:"";return`${pD(n)}?${Ul(h).slice(1)}${p}`}function pD({config:n}){return n.emulator?Gy(n,dD):`https://${n.authDomain}/${hD}`}const Eg="webStorageSupport";class mD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zo,this._completeRedirectFn=sp,this._overrideRedirectResult=o_}async _openPopup(e,t,r,s){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await zg(e,t,r,kc(),s);return uD(e,a,nh())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await zg(e,t,r,kc(),s);return r2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ar(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await rD(e),r=new VS(e);return t.register("authEvent",s=>(te(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},s=>{const a=s?.[0]?.[Eg];a!==void 0&&t(!!a),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=H2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lS()||rS()||Zc()}}const gD=mD;class yD{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Zr("unexpected MultiFactorSessionType")}}}class a_ extends yD{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new a_(e)}_finalizeEnroll(e,t,r){return JN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return d2(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class MS{constructor(){}static assertion(e){return a_._fromCredential(e)}}MS.FACTOR_ID="phone";var vI="@firebase/auth",wI="1.12.0";class _D{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wD(n){Cs(new lr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;te(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uS(n)},p=new jk(r,s,a,f);return Zk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Cs(new lr("auth-internal",e=>{const t=wt(e.getProvider("auth").getImmediate());return(r=>new _D(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(vI,wI,vD(n)),Jn(vI,wI,"esm2020")}const ED=300;xb("authIdTokenMaxAge");function ID(){return document.getElementsByTagName("head")?.[0]??document}Uk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Bt("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",ID().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wD("Browser");function $o(){return window}const TD=2e3;async function SD(n,e,t){const{BuildInfo:r}=$o();Ar(e.sessionId,"AuthEvent did not contain a session ID");const s=await bD(e.sessionId),a={};return Zc()?a.ibi=r.packageName:Xc()?a.apn=r.packageName:rn(n,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=s,zg(n,t,e.type,void 0,e.eventId??void 0,a)}async function AD(n){const{BuildInfo:e}=$o(),t={};Zc()?t.iosBundleId=e.packageName:Xc()?t.androidPackageName=e.packageName:rn(n,"operation-not-supported-in-this-environment"),await LS(n,t)}function RD(n){const{cordova:e}=$o();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,Nk()?"_blank":"_system","location=yes"),t(s)})})}async function PD(n,e,t){const{cordova:r}=$o();let s=()=>{};try{await new Promise((a,l)=>{let h=null;function f(){a();const w=r.plugins.browsertab?.close;typeof w=="function"&&w(),typeof t?.close=="function"&&t.close()}function p(){h||(h=window.setTimeout(()=>{l(Bt(n,"redirect-cancelled-by-user"))},TD))}function g(){document?.visibilityState==="visible"&&p()}e.addPassiveListener(f),document.addEventListener("resume",p,!1),Xc()&&document.addEventListener("visibilitychange",g,!1),s=()=>{e.removePassiveListener(f),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",g,!1),h&&window.clearTimeout(h)}})}finally{s()}}function xD(n){const e=$o();te(typeof e?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof e?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof e?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function bD(n){const e=CD(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function CD(n){if(Ar(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}const kD=20;class ND extends VS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function DD(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:LD(),postBody:null,tenantId:n.tenantId,error:Bt(n,"no-auth-event")}}function VD(n,e){return qg()._set($g(n),e)}async function EI(n){const e=await qg()._get($g(n));return e&&await qg()._remove($g(n)),e}function OD(n,e){const t=FD(e);if(t.includes("/__/auth/callback")){const r=Zd(t),a=(r.firebaseError?MD(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],l=a?Bt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function LD(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<kD;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function qg(){return Kn(t_)}function $g(n){return Mo("authEvent",n.config.apiKey,n.name)}function MD(n){try{return JSON.parse(n)}catch{return null}}function FD(n){const e=Zd(n),t=e.link?decodeURIComponent(e.link):void 0,r=Zd(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Zd(s).link||s||r||t||n}function Zd(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return al(t.join("?"))}const jD=500;class UD{constructor(){this._redirectPersistence=zo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sp,this._overrideRedirectResult=o_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new ND(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){rn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,s){xD(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),V2(),await this._originValidation(e);const l=DD(e,r,s);await VD(e,l);const h=await SD(e,l,t),f=await RD(h);return PD(e,a,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AD(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:s,BuildInfo:a}=$o(),l=setTimeout(async()=>{await EI(e),t.onEvent(II())},jD),h=async g=>{clearTimeout(l);const w=await EI(e);let I=null;w&&g?.url&&(I=OD(w,g.url)),t.onEvent(I||II())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const f=s,p=`${a.packageName.toLowerCase()}://`;$o().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(p)&&h({url:g}),typeof f=="function")try{f(g)}catch(w){console.error(w)}}}}const BD=UD;function II(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bt("no-auth-event")}}function zD(n,e){wt(n)._logFramework(e)}var qD="@firebase/auth-compat",$D="0.6.2";const WD=1e3;function _c(){return self?.location?.protocol||null}function HD(){return _c()==="http:"||_c()==="https:"}function FS(n=vt()){return!!((_c()==="file:"||_c()==="ionic:"||_c()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function GD(){return Fy()||Gf()}function KD(){return C0()&&document?.documentMode===11}function QD(n=vt()){return/Edge\/\d+/.test(n)}function JD(n=vt()){return KD()||QD(n)}function jS(){try{const n=self.localStorage,e=nh();if(n)return n.setItem(e,"1"),n.removeItem(e),JD()?xc():!0}catch{return l_()&&xc()}return!1}function l_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ig(){return(HD()||b0()||FS())&&!GD()&&jS()&&!l_()}function US(){return FS()&&typeof document<"u"}async function YD(){return US()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},WD);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function XD(){return typeof window<"u"?window:null}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=te,BS="persistence";function ZD(n,e){if(Yu(Object.values(Gn).includes(e),n,"invalid-persistence-type"),Fy()){Yu(e!==Gn.SESSION,n,"unsupported-persistence-type");return}if(Gf()){Yu(e===Gn.NONE,n,"unsupported-persistence-type");return}if(l_()){Yu(e===Gn.NONE||e===Gn.LOCAL&&xc(),n,"unsupported-persistence-type");return}Yu(e===Gn.NONE||jS(),n,"unsupported-persistence-type")}async function Wg(n){await n._initializationPromise;const e=zS(),t=Mo(BS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function eV(n,e){const t=zS();if(!t)return[];const r=Mo(BS,n,e);switch(t.getItem(r)){case Gn.NONE:return[yl];case Gn.LOCAL:return[Vc,zo];case Gn.SESSION:return[zo];default:return[]}}function zS(){try{return XD()?.sessionStorage||null}catch{return null}}const tV=te;class Ii{constructor(){this.browserResolver=Kn(gD),this.cordovaResolver=Kn(BD),this.underlyingResolver=null,this._redirectPersistence=zo,this._completeRedirectFn=sp,this._overrideRedirectResult=o_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,s)}async _openRedirect(e,t,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return US()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return tV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await YD();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function qS(n){return n.unwrap()}function nV(n){return n.wrapped()}function rV(n){return $S(n)}function sV(n,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new iV(n,QN(n,e))}else if(t){const r=$S(e),s=e;r&&(s.credential=r,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function $S(n){const{_tokenResponse:e}=n instanceof Kt?n.customData:n;if(!e)return null;if(!(n instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return qo.credentialFromResult(n);const t=e.providerId;if(!t||t===Qu.PASSWORD)return null;let r;switch(t){case Qu.GOOGLE:r=Jr;break;case Qu.FACEBOOK:r=Qr;break;case Qu.GITHUB:r=Yr;break;case Qu.TWITTER:r=Xr;break;default:const{oauthIdToken:s,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:h,nonce:f}=e;return!a&&!l&&!s&&!h?null:h?t.startsWith("saml.")?_l._create(t,h):is._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:s,accessToken:a}):new hl(t).credential({idToken:s,accessToken:a,rawNonce:f})}return n instanceof Kt?r.credentialFromError(n):r.credentialFromResult(n)}function Cn(n,e){return e.catch(t=>{throw t instanceof Kt&&sV(n,t),t}).then(t=>{const r=t.operationType,s=t.user;return{operationType:r,credential:rV(t),additionalUserInfo:KN(t),user:ip.getOrCreate(s)}})}async function Hg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Cn(n,t.confirm(r))}}class iV{constructor(e,t){this.resolver=t,this.auth=nV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Cn(qS(this.auth),this.resolver.resolveSignIn(e))}}let ip=class ac{constructor(e){this._delegate=e,this.multiFactor=XN(e)}static getOrCreate(e){return ac.USER_MAP.has(e)||ac.USER_MAP.set(e,new ac(e)),ac.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Cn(this.auth,vS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Hg(this.auth,E2(this._delegate,e,t))}async linkWithPopup(e){return Cn(this.auth,C2(this._delegate,e,Ii))}async linkWithRedirect(e){return await Wg(wt(this.auth)),j2(this._delegate,e,Ii)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Cn(this.auth,wS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Hg(this.auth,I2(this._delegate,e,t))}reauthenticateWithPopup(e){return Cn(this.auth,b2(this._delegate,e,Ii))}async reauthenticateWithRedirect(e){return await Wg(wt(this.auth)),M2(this._delegate,e,Ii)}sendEmailVerification(e){return MN(this._delegate,e)}async unlink(e){return await TN(this._delegate,e),this}updateEmail(e){return BN(this._delegate,e)}updatePassword(e){return zN(this._delegate,e)}updatePhoneNumber(e){return T2(this._delegate,e)}updateProfile(e){return UN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return FN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ip.USER_MAP=new WeakMap;const Xu=te;class Gg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Xu(r,"invalid-api-key",{appName:e.name}),Xu(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?Ii:void 0;this._delegate=t.initialize({options:{persistence:oV(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(dk),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ip.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){eN(this._delegate,e,t)}applyActionCode(e){return xN(this._delegate,e)}checkActionCode(e){return ES(this._delegate,e)}confirmPasswordReset(e,t){return PN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Cn(this._delegate,CN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return LN(this._delegate,e)}isSignInWithEmailLink(e){return DN(this._delegate,e)}async getRedirectResult(){Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment");const e=await B2(this._delegate,Ii);return e?Cn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){zD(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:s,error:a,complete:l}=TI(e,t,r);return this._delegate.onAuthStateChanged(s,a,l)}onIdTokenChanged(e,t,r){const{next:s,error:a,complete:l}=TI(e,t,r);return this._delegate.onIdTokenChanged(s,a,l)}sendSignInLinkToEmail(e,t){return NN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return RN(this._delegate,e,t||void 0)}async setPersistence(e){ZD(this._delegate,e);let t;switch(e){case Gn.SESSION:t=zo;break;case Gn.LOCAL:t=await Kn(Vc)._isAvailable()?Vc:t_;break;case Gn.NONE:t=yl;break;default:return rn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Cn(this._delegate,IN(this._delegate))}signInWithCredential(e){return Cn(this._delegate,Zf(this._delegate,e))}signInWithCustomToken(e){return Cn(this._delegate,AN(this._delegate,e))}signInWithEmailAndPassword(e,t){return Cn(this._delegate,kN(this._delegate,e,t))}signInWithEmailLink(e,t){return Cn(this._delegate,VN(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Hg(this._delegate,w2(this._delegate,e,t))}async signInWithPopup(e){return Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment"),Cn(this._delegate,x2(this._delegate,e,Ii))}async signInWithRedirect(e){return Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment"),await Wg(this._delegate),O2(this._delegate,e,Ii)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return bN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Gg.Persistence=Gn;function TI(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const s=r;return{next:l=>s(l&&ip.getOrCreate(l)),error:e,complete:t}}function oV(n,e){const t=eV(n,e);if(typeof self<"u"&&!t.includes(Vc)&&t.push(Vc),typeof window<"u")for(const r of[t_,zo])t.includes(r)||t.push(r);return t.includes(yl)||t.push(yl),t}class u_{static credential(e,t){return qo.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new qo(qS(ur.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}u_.PHONE_SIGN_IN_METHOD=qo.PHONE_SIGN_IN_METHOD;u_.PROVIDER_ID=qo.PROVIDER_ID;const aV=te;class lV{constructor(e,t,r=ur.app()){aV(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new _2(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const uV="auth-compat";function cV(n){n.INTERNAL.registerComponent(new lr(uV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Gg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qa.EMAIL_SIGNIN,PASSWORD_RESET:Qa.PASSWORD_RESET,RECOVER_EMAIL:Qa.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Qa.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Qa.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Qa.VERIFY_EMAIL}},EmailAuthProvider:qi,FacebookAuthProvider:Qr,GithubAuthProvider:Yr,GoogleAuthProvider:Jr,OAuthProvider:hl,SAMLAuthProvider:If,PhoneAuthProvider:u_,PhoneMultiFactorGenerator:MS,RecaptchaVerifier:lV,TwitterAuthProvider:Xr,Auth:Gg,AuthCredential:zl,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(qD,$D)}cV(ur);var SI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Pi,WS;(function(){var n;function e(b,A){function x(){}x.prototype=A.prototype,b.F=A.prototype,b.prototype=new x,b.prototype.constructor=b,b.D=function(O,V,j){for(var P=Array(arguments.length-2),je=2;je<arguments.length;je++)P[je-2]=arguments[je];return A.prototype[V].apply(O,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,A,x){x||(x=0);const O=Array(16);if(typeof A=="string")for(var V=0;V<16;++V)O[V]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(V=0;V<16;++V)O[V]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=b.g[0],x=b.g[1],V=b.g[2];let j=b.g[3],P;P=A+(j^x&(V^j))+O[0]+3614090360&4294967295,A=x+(P<<7&4294967295|P>>>25),P=j+(V^A&(x^V))+O[1]+3905402710&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(x^j&(A^x))+O[2]+606105819&4294967295,V=j+(P<<17&4294967295|P>>>15),P=x+(A^V&(j^A))+O[3]+3250441966&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(j^x&(V^j))+O[4]+4118548399&4294967295,A=x+(P<<7&4294967295|P>>>25),P=j+(V^A&(x^V))+O[5]+1200080426&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(x^j&(A^x))+O[6]+2821735955&4294967295,V=j+(P<<17&4294967295|P>>>15),P=x+(A^V&(j^A))+O[7]+4249261313&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(j^x&(V^j))+O[8]+1770035416&4294967295,A=x+(P<<7&4294967295|P>>>25),P=j+(V^A&(x^V))+O[9]+2336552879&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(x^j&(A^x))+O[10]+4294925233&4294967295,V=j+(P<<17&4294967295|P>>>15),P=x+(A^V&(j^A))+O[11]+2304563134&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(j^x&(V^j))+O[12]+1804603682&4294967295,A=x+(P<<7&4294967295|P>>>25),P=j+(V^A&(x^V))+O[13]+4254626195&4294967295,j=A+(P<<12&4294967295|P>>>20),P=V+(x^j&(A^x))+O[14]+2792965006&4294967295,V=j+(P<<17&4294967295|P>>>15),P=x+(A^V&(j^A))+O[15]+1236535329&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(V^j&(x^V))+O[1]+4129170786&4294967295,A=x+(P<<5&4294967295|P>>>27),P=j+(x^V&(A^x))+O[6]+3225465664&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(j^A))+O[11]+643717713&4294967295,V=j+(P<<14&4294967295|P>>>18),P=x+(j^A&(V^j))+O[0]+3921069994&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(x^V))+O[5]+3593408605&4294967295,A=x+(P<<5&4294967295|P>>>27),P=j+(x^V&(A^x))+O[10]+38016083&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(j^A))+O[15]+3634488961&4294967295,V=j+(P<<14&4294967295|P>>>18),P=x+(j^A&(V^j))+O[4]+3889429448&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(x^V))+O[9]+568446438&4294967295,A=x+(P<<5&4294967295|P>>>27),P=j+(x^V&(A^x))+O[14]+3275163606&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(j^A))+O[3]+4107603335&4294967295,V=j+(P<<14&4294967295|P>>>18),P=x+(j^A&(V^j))+O[8]+1163531501&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^j&(x^V))+O[13]+2850285829&4294967295,A=x+(P<<5&4294967295|P>>>27),P=j+(x^V&(A^x))+O[2]+4243563512&4294967295,j=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(j^A))+O[7]+1735328473&4294967295,V=j+(P<<14&4294967295|P>>>18),P=x+(j^A&(V^j))+O[12]+2368359562&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(x^V^j)+O[5]+4294588738&4294967295,A=x+(P<<4&4294967295|P>>>28),P=j+(A^x^V)+O[8]+2272392833&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^x)+O[11]+1839030562&4294967295,V=j+(P<<16&4294967295|P>>>16),P=x+(V^j^A)+O[14]+4259657740&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^j)+O[1]+2763975236&4294967295,A=x+(P<<4&4294967295|P>>>28),P=j+(A^x^V)+O[4]+1272893353&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^x)+O[7]+4139469664&4294967295,V=j+(P<<16&4294967295|P>>>16),P=x+(V^j^A)+O[10]+3200236656&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^j)+O[13]+681279174&4294967295,A=x+(P<<4&4294967295|P>>>28),P=j+(A^x^V)+O[0]+3936430074&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^x)+O[3]+3572445317&4294967295,V=j+(P<<16&4294967295|P>>>16),P=x+(V^j^A)+O[6]+76029189&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^j)+O[9]+3654602809&4294967295,A=x+(P<<4&4294967295|P>>>28),P=j+(A^x^V)+O[12]+3873151461&4294967295,j=A+(P<<11&4294967295|P>>>21),P=V+(j^A^x)+O[15]+530742520&4294967295,V=j+(P<<16&4294967295|P>>>16),P=x+(V^j^A)+O[2]+3299628645&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(V^(x|~j))+O[0]+4096336452&4294967295,A=x+(P<<6&4294967295|P>>>26),P=j+(x^(A|~V))+O[7]+1126891415&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~x))+O[14]+2878612391&4294967295,V=j+(P<<15&4294967295|P>>>17),P=x+(j^(V|~A))+O[5]+4237533241&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~j))+O[12]+1700485571&4294967295,A=x+(P<<6&4294967295|P>>>26),P=j+(x^(A|~V))+O[3]+2399980690&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~x))+O[10]+4293915773&4294967295,V=j+(P<<15&4294967295|P>>>17),P=x+(j^(V|~A))+O[1]+2240044497&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~j))+O[8]+1873313359&4294967295,A=x+(P<<6&4294967295|P>>>26),P=j+(x^(A|~V))+O[15]+4264355552&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~x))+O[6]+2734768916&4294967295,V=j+(P<<15&4294967295|P>>>17),P=x+(j^(V|~A))+O[13]+1309151649&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~j))+O[4]+4149444226&4294967295,A=x+(P<<6&4294967295|P>>>26),P=j+(x^(A|~V))+O[11]+3174756917&4294967295,j=A+(P<<10&4294967295|P>>>22),P=V+(A^(j|~x))+O[2]+718787259&4294967295,V=j+(P<<15&4294967295|P>>>17),P=x+(j^(V|~A))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+j&4294967295}r.prototype.v=function(b,A){A===void 0&&(A=b.length);const x=A-this.blockSize,O=this.C;let V=this.h,j=0;for(;j<A;){if(V==0)for(;j<=x;)s(this,b,j),j+=this.blockSize;if(typeof b=="string"){for(;j<A;)if(O[V++]=b.charCodeAt(j++),V==this.blockSize){s(this,O),V=0;break}}else for(;j<A;)if(O[V++]=b[j++],V==this.blockSize){s(this,O),V=0;break}}this.h=V,this.o+=A},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;A=this.o*8;for(var x=b.length-8;x<b.length;++x)b[x]=A&255,A/=256;for(this.v(b),b=Array(16),A=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)b[A++]=this.g[x]>>>O&255;return b};function a(b,A){var x=h;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=A(b)}function l(b,A){this.h=A;const x=[];let O=!0;for(let V=b.length-1;V>=0;V--){const j=b[V]|0;O&&j==A||(x[V]=j,O=!1)}this.g=x}var h={};function f(b){return-128<=b&&b<128?a(b,function(A){return new l([A|0],A<0?-1:0)}):new l([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return w;if(b<0)return D(p(-b));const A=[];let x=1;for(let O=0;b>=x;O++)A[O]=b/x|0,x*=4294967296;return new l(A,0)}function g(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return D(g(b.substring(1),A));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(A,8));let O=w;for(let j=0;j<b.length;j+=8){var V=Math.min(8,b.length-j);const P=parseInt(b.substring(j,j+V),A);V<8?(V=p(Math.pow(A,V)),O=O.j(V).add(p(P))):(O=O.j(x),O=O.add(p(P)))}return O}var w=f(0),I=f(1),C=f(16777216);n=l.prototype,n.m=function(){if(F(this))return-D(this).m();let b=0,A=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);b+=(O>=0?O:4294967296+O)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(k(this))return"0";if(F(this))return"-"+D(this).toString(b);const A=p(Math.pow(b,6));var x=this;let O="";for(;;){const V=pe(x,A).g;x=Q(x,V.j(A));let j=((x.g.length>0?x.g[0]:x.h)>>>0).toString(b);if(x=V,k(x))return j+O;for(;j.length<6;)j="0"+j;O=j+O}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function k(b){if(b.h!=0)return!1;for(let A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function F(b){return b.h==-1}n.l=function(b){return b=Q(this,b),F(b)?-1:k(b)?0:1};function D(b){const A=b.g.length,x=[];for(let O=0;O<A;O++)x[O]=~b.g[O];return new l(x,~b.h).add(I)}n.abs=function(){return F(this)?D(this):this},n.add=function(b){const A=Math.max(this.g.length,b.g.length),x=[];let O=0;for(let V=0;V<=A;V++){let j=O+(this.i(V)&65535)+(b.i(V)&65535),P=(j>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);O=P>>>16,j&=65535,P&=65535,x[V]=P<<16|j}return new l(x,x[x.length-1]&-2147483648?-1:0)};function Q(b,A){return b.add(D(A))}n.j=function(b){if(k(this)||k(b))return w;if(F(this))return F(b)?D(this).j(D(b)):D(D(this).j(b));if(F(b))return D(this.j(D(b)));if(this.l(C)<0&&b.l(C)<0)return p(this.m()*b.m());const A=this.g.length+b.g.length,x=[];for(var O=0;O<2*A;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<b.g.length;V++){const j=this.i(O)>>>16,P=this.i(O)&65535,je=b.i(V)>>>16,gt=b.i(V)&65535;x[2*O+2*V]+=P*gt,se(x,2*O+2*V),x[2*O+2*V+1]+=j*gt,se(x,2*O+2*V+1),x[2*O+2*V+1]+=P*je,se(x,2*O+2*V+1),x[2*O+2*V+2]+=j*je,se(x,2*O+2*V+2)}for(b=0;b<A;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=A;b<2*A;b++)x[b]=0;return new l(x,0)};function se(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function ie(b,A){this.g=b,this.h=A}function pe(b,A){if(k(A))throw Error("division by zero");if(k(b))return new ie(w,w);if(F(b))return A=pe(D(b),A),new ie(D(A.g),D(A.h));if(F(A))return A=pe(b,D(A)),new ie(D(A.g),A.h);if(b.g.length>30){if(F(b)||F(A))throw Error("slowDivide_ only works with positive integers.");for(var x=I,O=A;O.l(b)<=0;)x=ve(x),O=ve(O);var V=K(x,1),j=K(O,1);for(O=K(O,2),x=K(x,2);!k(O);){var P=j.add(O);P.l(b)<=0&&(V=V.add(x),j=P),O=K(O,1),x=K(x,1)}return A=Q(b,V.j(A)),new ie(V,A)}for(V=w;b.l(A)>=0;){for(x=Math.max(1,Math.floor(b.m()/A.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),j=p(x),P=j.j(A);F(P)||P.l(b)>0;)x-=O,j=p(x),P=j.j(A);k(j)&&(j=I),V=V.add(j),b=Q(b,P)}return new ie(V,b)}n.B=function(b){return pe(this,b).h},n.and=function(b){const A=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)&b.i(O);return new l(x,this.h&b.h)},n.or=function(b){const A=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)|b.i(O);return new l(x,this.h|b.h)},n.xor=function(b){const A=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<A;O++)x[O]=this.i(O)^b.i(O);return new l(x,this.h^b.h)};function ve(b){const A=b.g.length+1,x=[];for(let O=0;O<A;O++)x[O]=b.i(O)<<1|b.i(O-1)>>>31;return new l(x,b.h)}function K(b,A){const x=A>>5;A%=32;const O=b.g.length-x,V=[];for(let j=0;j<O;j++)V[j]=A>0?b.i(j+x)>>>A|b.i(j+x+1)<<32-A:b.i(j+x);return new l(V,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,Pi=l}).apply(typeof SI<"u"?SI:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var HS,lc,GS,ef,Kg,KS,QS,JS;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var _=0;_<c.length;++_){var v=c[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,_){if(_)e:{var v=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in v))break e;v=v[z]}c=c[c.length-1],S=v[c],_=_(S),_!=S&&_!=null&&e(v,c,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(_){var v=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&v.push([S,_[S]]);return v}});var a=a||{},l=this||self;function h(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function f(c,_,v){return c.call.apply(c.bind,arguments)}function p(c,_,v){return p=f,p.apply(null,arguments)}function g(c,_){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function w(c,_){function v(){}v.prototype=_.prototype,c.Z=_.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(S,z,H){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return _.prototype[z].apply(S,ae)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function C(c){const _=c.length;if(_>0){const v=Array(_);for(let S=0;S<_;S++)v[S]=c[S];return v}return[]}function k(c,_){for(let S=1;S<arguments.length;S++){const z=arguments[S];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=c.length||0;const H=z.length||0;c.length=v+H;for(let ae=0;ae<H;ae++)c[v+ae]=z[ae]}else c.push(z)}}class F{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function D(c){l.setTimeout(()=>{throw c},0)}function Q(){var c=b;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class se{constructor(){this.h=this.g=null}add(_,v){const S=ie.get();S.set(_,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ie=new F(()=>new pe,c=>c.reset());class pe{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,K=!1,b=new se,A=()=>{const c=Promise.resolve(void 0);ve=()=>{c.then(x)}};function x(){for(var c;c=Q();){try{c.h.call(c.g)}catch(v){D(v)}var _=ie;_.j(c),_.h<100&&(_.h++,c.next=_.g,_.g=c)}K=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};l.addEventListener("test",v,_),l.removeEventListener("test",v,_)}catch{}return c})();function P(c){return/^[\s\xa0]*$/.test(c)}function je(c,_){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,_)}w(je,V),je.prototype.init=function(c,_){const v=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget,_||(v=="mouseover"?_=c.fromElement:v=="mouseout"&&(_=c.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var gt="closure_listenable_"+(Math.random()*1e6|0),Re=0;function ce(c,_,v,S,z){this.listener=c,this.proxy=null,this.src=_,this.type=v,this.capture=!!S,this.ha=z,this.key=++Re,this.da=this.fa=!1}function re(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ie(c,_,v){for(const S in c)_.call(v,c[S],S,c)}function fe(c,_){for(const v in c)_.call(void 0,c[v],v,c)}function M(c){const _={};for(const v in c)_[v]=c[v];return _}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(c,_){let v,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(v in S)c[v]=S[v];for(let H=0;H<J.length;H++)v=J[H],Object.prototype.hasOwnProperty.call(S,v)&&(c[v]=S[v])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,_,v,S,z){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ae=Ue(c,_,S,z);return ae>-1?(_=c[ae],v||(_.fa=!1)):(_=new ce(_,this.src,H,!!S,z),_.fa=v,c.push(_)),_};function Oe(c,_){const v=_.type;if(v in c.g){var S=c.g[v],z=Array.prototype.indexOf.call(S,_,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&(re(_),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ue(c,_,v,S){for(let z=0;z<c.length;++z){const H=c[z];if(!H.da&&H.listener==_&&H.capture==!!v&&H.ha==S)return z}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),We={};function tt(c,_,v,S,z){if(Array.isArray(_)){for(let H=0;H<_.length;H++)tt(c,_[H],v,S,z);return null}return v=tu(v),c&&c[gt]?c.J(_,v,h(S)?!!S.capture:!1,z):gn(c,_,v,!1,S,z)}function gn(c,_,v,S,z,H){if(!_)throw Error("Invalid event type");const ae=h(z)?!!z.capture:!!z;let Ne=ua(c);if(Ne||(c[Je]=Ne=new Pe(c)),v=Ne.add(_,v,S,ae,H),v.proxy)return v;if(S=aa(),v.proxy=S,S.src=c,S.listener=v,c.addEventListener)j||(z=ae),z===void 0&&(z=!1),c.addEventListener(_.toString(),S,z);else if(c.attachEvent)c.attachEvent(la(_.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function aa(){function c(v){return _.call(c.src,c.listener,v)}const _=Th;return c}function eu(c,_,v,S,z){if(Array.isArray(_))for(var H=0;H<_.length;H++)eu(c,_[H],v,S,z);else S=h(S)?!!S.capture:!!S,v=tu(v),c&&c[gt]?(c=c.i,H=String(_).toString(),H in c.g&&(_=c.g[H],v=Ue(_,v,S,z),v>-1&&(re(_[v]),Array.prototype.splice.call(_,v,1),_.length==0&&(delete c.g[H],c.h--)))):c&&(c=ua(c))&&(_=c.g[_.toString()],c=-1,_&&(c=Ue(_,v,S,z)),(v=c>-1?_[c]:null)&&Us(v))}function Us(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[gt])Oe(_.i,c);else{var v=c.type,S=c.proxy;_.removeEventListener?_.removeEventListener(v,S,c.capture):_.detachEvent?_.detachEvent(la(v),S):_.addListener&&_.removeListener&&_.removeListener(S),(v=ua(_))?(Oe(v,c),v.h==0&&(v.src=null,_[Je]=null)):re(c)}}}function la(c){return c in We?We[c]:We[c]="on"+c}function Th(c,_){if(c.da)c=!0;else{_=new je(_,this);const v=c.listener,S=c.ha||c.src;c.fa&&Us(c),c=v.call(S,_)}return c}function ua(c){return c=c[Je],c instanceof Pe?c:null}var Qi="__closure_events_fn_"+(Math.random()*1e9>>>0);function tu(c){return typeof c=="function"?c:(c[Qi]||(c[Qi]=function(_){return c.handleEvent(_)}),c[Qi])}function Dt(){O.call(this),this.i=new Pe(this),this.M=this,this.G=null}w(Dt,O),Dt.prototype[gt]=!0,Dt.prototype.removeEventListener=function(c,_,v,S){eu(this,c,_,v,S)};function Rt(c,_){var v,S=c.G;if(S)for(v=[];S;S=S.G)v.push(S);if(c=c.M,S=_.type||_,typeof _=="string")_=new V(_,c);else if(_ instanceof V)_.target=_.target||c;else{var z=_;_=new V(S,c),Ce(_,z)}z=!0;let H,ae;if(v)for(ae=v.length-1;ae>=0;ae--)H=_.g=v[ae],z=hr(H,S,!0,_)&&z;if(H=_.g=c,z=hr(H,S,!0,_)&&z,z=hr(H,S,!1,_)&&z,v)for(ae=0;ae<v.length;ae++)H=_.g=v[ae],z=hr(H,S,!1,_)&&z}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var c=this.i;for(const _ in c.g){const v=c.g[_];for(let S=0;S<v.length;S++)re(v[S]);delete c.g[_],c.h--}}this.G=null},Dt.prototype.J=function(c,_,v,S){return this.i.add(String(c),_,!1,v,S)},Dt.prototype.K=function(c,_,v,S){return this.i.add(String(c),_,!0,v,S)};function hr(c,_,v,S){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();let z=!0;for(let H=0;H<_.length;++H){const ae=_[H];if(ae&&!ae.da&&ae.capture==v){const Ne=ae.listener,Pt=ae.ha||ae.src;ae.fa&&Oe(c.i,ae),z=Ne.call(Pt,S)!==!1&&z}}return z&&!S.defaultPrevented}function nu(c,_){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(c,_||0)}function ru(c){c.g=nu(()=>{c.g=null,c.i&&(c.i=!1,ru(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class Sh extends O{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(c){O.call(this),this.h=c,this.g={}}w(Bs,O);var su=[];function ca(c){Ie(c.g,function(_,v){this.g.hasOwnProperty(v)&&Us(_)},c),c.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),ca(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zs=l.JSON.stringify,Ah=l.JSON.parse,Ji=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function qs(){}function Rh(){}var $s={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ha(){V.call(this,"d")}w(ha,V);function iu(){V.call(this,"c")}w(iu,V);var dr={},da=null;function Ws(){return da=da||new Dt}dr.Ia="serverreachability";function fa(c){V.call(this,dr.Ia,c)}w(fa,V);function ls(c){const _=Ws();Rt(_,new fa(_))}dr.STAT_EVENT="statevent";function us(c,_){V.call(this,dr.STAT_EVENT,c),this.stat=_}w(us,V);function Et(c){const _=Ws();Rt(_,new us(_,c))}dr.Ja="timingevent";function ou(c,_){V.call(this,dr.Ja,c),this.size=_}w(ou,V);function Hs(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},_)}function Gs(){this.g=!0}Gs.prototype.ua=function(){this.g=!1};function Ph(c,_,v,S,z,H){c.info(function(){if(c.g)if(H){var ae="",Ne=H.split("&");for(let Xe=0;Xe<Ne.length;Xe++){var Pt=Ne[Xe].split("=");if(Pt.length>1){const Vt=Pt[0];Pt=Pt[1];const zn=Vt.split("_");ae=zn.length>=2&&zn[1]=="type"?ae+(Vt+"="+Pt+"&"):ae+(Vt+"=redacted&")}}}else ae=null;else ae=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+v+`
`+ae})}function xh(c,_,v,S,z,H,ae){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+v+`
`+H+" "+ae})}function Pr(c,_,v,S){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+Yi(c,v)+(S?" "+S:"")})}function bh(c,_){c.info(function(){return"TIMEOUT: "+_})}Gs.prototype.info=function(){};function Yi(c,_){if(!c.g)return _;if(!_)return null;try{const H=JSON.parse(_);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return zs(H)}catch{return _}}var Ks={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ch;function cs(){}w(cs,qs),cs.prototype.g=function(){return new XMLHttpRequest},Ch=new cs;function xr(c){return encodeURIComponent(String(c))}function pa(c){var _=1;c=c.split(":");const v=[];for(;_>0&&c.length;)v.push(c.shift()),_--;return c.length&&v.push(c.join(":")),v}function Xn(c,_,v,S){this.j=c,this.i=_,this.l=v,this.S=S||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kh}function kh(){this.i=null,this.g="",this.h=!1}var Nh={},au={};function fr(c,_,v){c.M=1,c.A=ds(Zn(_)),c.u=v,c.R=!0,lu(c,null)}function lu(c,_){c.F=Date.now(),Xi(c),c.B=Zn(c.A);var v=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),_u(v.i,"t",S),c.C=0,v=c.j.L,c.h=new kh,c.g=zh(c.j,v?_:null,!c.u),c.P>0&&(c.O=new Sh(p(c.Y,c,c.g),c.P)),_=c.V,v=c.g,S=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(su[0]=z.toString()),z=su);for(let H=0;H<z.length;H++){const ae=tt(v,z[H],S||_.handleEvent,!1,_.h||_);if(!ae)break;_.g[ae.key]=ae}_=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,_)):(c.v="GET",c.g.ea(c.B,c.v,null,_)),ls(),Ph(c.i,c.v,c.B,c.l,c.S,c.u)}Xn.prototype.ba=function(c){c=c.target;const _=this.O;_&&Or(c)==3?_.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const Ne=Or(this.g),Pt=this.g.ya(),Xe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Uh(this.g)))){this.K||Ne!=4||Pt==7||(Pt==8||Xe<=0?ls(3):ls(2)),ma(this);var _=this.g.ca();this.X=_;var v=Dh(this);if(this.o=_==200,xh(this.i,this.v,this.B,this.l,this.S,Ne,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(S)){var H=S;break t}}H=null}if(c=H)Pr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ot(this,c);else{this.o=!1,this.m=3,Et(12),hs(this),Zi(this);break e}}if(this.R){c=!0;let Vt;for(;!this.K&&this.C<v.length;)if(Vt=Oh(this,v),Vt==au){Ne==4&&(this.m=4,Et(14),c=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Nh){this.m=4,Et(15),Pr(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Pr(this.i,this.l,Vt,null),ot(this,Vt);if(Vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||v.length!=0||this.h.h||(this.m=1,Et(16),c=!1),this.o=this.o&&c,!c)Pr(this.i,this.l,v,"[Invalid Chunked Response]"),hs(this),Zi(this);else if(v.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),lo(ae),ae.P=!0,Et(11))}}else Pr(this.i,this.l,v,null),ot(this,v);Ne==4&&hs(this),this.o&&!this.K&&(Ne==4?Aa(this.j,this):(this.o=!1,Xi(this)))}else wu(this.g),_==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),hs(this),Zi(this)}}}catch{}};function Dh(c){if(!Vh(c))return c.g.la();const _=Uh(c.g);if(_==="")return"";let v="";const S=_.length,z=Or(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return hs(c),Zi(c),"";c.h.i=new l.TextDecoder}for(let H=0;H<S;H++)c.h.h=!0,v+=c.h.i.decode(_[H],{stream:!(z&&H==S-1)});return _.length=0,c.h.g+=v,c.C=0,c.h.g}function Vh(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Oh(c,_){var v=c.C,S=_.indexOf(`
`,v);return S==-1?au:(v=Number(_.substring(v,S)),isNaN(v)?Nh:(S+=1,S+v>_.length?au:(_=_.slice(S,S+v),c.C=S+v,_)))}Xn.prototype.cancel=function(){this.K=!0,hs(this)};function Xi(c){c.T=Date.now()+c.H,uu(c,c.H)}function uu(c,_){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Hs(p(c.aa,c),_)}function ma(c){c.D&&(l.clearTimeout(c.D),c.D=null)}Xn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(bh(this.i,this.B),this.M!=2&&(ls(),Et(17)),hs(this),this.m=2,Zi(this)):uu(this,this.T-c)};function Zi(c){c.j.I==0||c.K||Aa(c.j,c)}function hs(c){ma(c);var _=c.O;_&&typeof _.dispose=="function"&&_.dispose(),c.O=null,ca(c.V),c.g&&(_=c.g,c.g=null,_.abort(),_.dispose())}function ot(c,_){try{var v=c.j;if(v.I!=0&&(v.g==c||hu(v.h,c))){if(!c.L&&hu(v.h,c)&&v.I==3){try{var S=v.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Sa(v),Un(v);else break e;Fr(v),Et(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Hs(p(v.Va,v),6e3));eo(v.h)<=1&&v.ta&&(v.ta=void 0)}else Bn(v,11)}else if((c.L||v.g==c)&&Sa(v),!P(_))for(z=v.Ba.g.parse(_),_=0;_<z.length;_++){let Xe=z[_];const Vt=Xe[0];if(!(Vt<=v.K))if(v.K=Vt,Xe=Xe[1],v.I==2)if(Xe[0]=="c"){v.M=Xe[1],v.ba=Xe[2];const zn=Xe[3];zn!=null&&(v.ka=zn,v.j.info("VER="+v.ka));const ys=Xe[4];ys!=null&&(v.za=ys,v.j.info("SVER="+v.za));const jr=Xe[5];jr!=null&&typeof jr=="number"&&jr>0&&(S=1.5*jr,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Ur=c.g;if(Ur){const xa=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var H=S.h;H.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ya(H,H.h),H.h=null))}if(S.G){const Tu=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Tu&&(S.wa=Tu,Qe(S.J,S.G,Tu))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ae=c;if(S.na=Iu(S,S.L?S.ba:null,S.W),ae.L){to(S.h,ae);var Ne=ae,Pt=S.O;Pt&&(Ne.H=Pt),Ne.D&&(ma(Ne),Xi(Ne)),S.g=ae}else sn(S);v.i.length>0&&gs(v)}else Xe[0]!="stop"&&Xe[0]!="close"||Bn(v,7);else v.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Bn(v,7):Ia(v):Xe[0]!="noop"&&v.l&&v.l.qa(Xe),v.A=0)}}ls(4)}catch{}}var Fp=class{constructor(c,_){this.g=c,this.map=_}};function ga(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eo(c){return c.h?1:c.g?c.g.size:0}function hu(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function ya(c,_){c.g?c.g.add(_):c.h=_}function to(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}ga.prototype.cancel=function(){if(this.i=Mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Mn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const v of c.g.values())_=_.concat(v.G);return _}return C(c.i)}var Lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fn(c,_){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const S=c[v].indexOf("=");let z,H=null;S>=0?(z=c[v].substring(0,S),H=c[v].substring(S+1)):z=c[v],_(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function br(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;c instanceof br?(this.l=c.l,no(this,c.j),this.o=c.o,this.g=c.g,Cr(this,c.u),this.h=c.h,Js(this,vu(c.i)),this.m=c.m):c&&(_=String(c).match(Lh))?(this.l=!1,no(this,_[1]||"",!0),this.o=ro(_[2]||""),this.g=ro(_[3]||"",!0),Cr(this,_[4]),this.h=ro(_[5]||"",!0),Js(this,_[6]||"",!0),this.m=ro(_[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}br.prototype.toString=function(){const c=[];var _=this.j;_&&c.push(so(_,fu,!0),":");var v=this.g;return(v||_=="file")&&(c.push("//"),(_=this.o)&&c.push(so(_,fu,!0),"@"),c.push(xr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(so(v,v.charAt(0)=="/"?io:pu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",so(v,mu)),c.join("")},br.prototype.resolve=function(c){const _=Zn(this);let v=!!c.j;v?no(_,c.j):v=!!c.o,v?_.o=c.o:v=!!c.g,v?_.g=c.g:v=c.u!=null;var S=c.h;if(v)Cr(_,c.u);else if(v=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=_.h.lastIndexOf("/");z!=-1&&(S=_.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ae=0;ae<z.length;){const Ne=z[ae++];Ne=="."?S&&ae==z.length&&H.push(""):Ne==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ae==z.length&&H.push("")):(H.push(Ne),S=!0)}S=H.join("/")}else S=z}return v?_.h=S:v=c.i.toString()!=="",v?Js(_,vu(c.i)):v=!!c.m,v&&(_.m=c.m),_};function Zn(c){return new br(c)}function no(c,_,v){c.j=v?ro(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function Cr(c,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);c.u=_}else c.u=null}function Js(c,_,v){_ instanceof ze?(c.i=_,va(c.i,c.l)):(v||(_=so(_,jp)),c.i=new ze(_,c.l))}function Qe(c,_,v){c.i.set(_,v)}function ds(c){return Qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ro(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function so(c,_,v){return typeof c=="string"?(c=encodeURI(c).replace(_,du),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fu=/[#\/\?@]/g,pu=/[#\?:]/g,io=/[#\?]/g,jp=/[#\?@]/g,mu=/#/g;function ze(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function kr(c){c.g||(c.g=new Map,c.h=0,c.i&&Fn(c.i,function(_,v){c.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}n=ze.prototype,n.add=function(c,_){kr(this),this.i=null,c=Nr(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(_),this.h+=1,this};function gu(c,_){kr(c),_=Nr(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function _a(c,_){return kr(c),_=Nr(c,_),c.g.has(_)}n.forEach=function(c,_){kr(this),this.g.forEach(function(v,S){v.forEach(function(z){c.call(_,z,S,this)},this)},this)};function yu(c,_){kr(c);let v=[];if(typeof _=="string")_a(c,_)&&(v=v.concat(c.g.get(Nr(c,_))));else for(c=Array.from(c.g.values()),_=0;_<c.length;_++)v=v.concat(c[_]);return v}n.set=function(c,_){return kr(this),this.i=null,c=Nr(this,c),_a(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},n.get=function(c,_){return c?(c=yu(this,c),c.length>0?String(c[0]):_):_};function _u(c,_,v){gu(c,_),v.length>0&&(c.i=null,c.g.set(Nr(c,_),C(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var v=_[S];const z=xr(v);v=yu(this,v);for(let H=0;H<v.length;H++){let ae=z;v[H]!==""&&(ae+="="+xr(v[H])),c.push(ae)}}return this.i=c.join("&")};function vu(c){const _=new ze;return _.i=c.i,c.g&&(_.g=new Map(c.g),_.h=c.h),_}function Nr(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function va(c,_){_&&!c.j&&(kr(c),c.i=null,c.g.forEach(function(v,S){const z=S.toLowerCase();S!=z&&(gu(this,S),_u(this,z,v))},c)),c.j=_}function Dr(c,_){const v=new Gs;if(l.Image){const S=new Image;S.onload=g(Jt,v,"TestLoadImage: loaded",!0,_,S),S.onerror=g(Jt,v,"TestLoadImage: error",!1,_,S),S.onabort=g(Jt,v,"TestLoadImage: abort",!1,_,S),S.ontimeout=g(Jt,v,"TestLoadImage: timeout",!1,_,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else _(!1)}function Vr(c,_){const v=new Gs,S=new AbortController,z=setTimeout(()=>{S.abort(),Jt(v,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?Jt(v,"TestPingServer: ok",!0,_):Jt(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),Jt(v,"TestPingServer: error",!1,_)})}function Jt(c,_,v,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(v)}catch{}}function oo(){this.g=new Ji}function fs(c){this.i=c.Sb||null,this.h=c.ab||!1}w(fs,qs),fs.prototype.g=function(){return new jn(this.i,this.h)};function jn(c,_){Dt.call(this),this.H=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(jn,Dt),n=jn.prototype,n.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=_,this.readyState=1,pr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(_.body=c),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mh(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mh(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?Ys(this):pr(this),this.readyState==3&&Mh(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ys(this))},n.Na=function(c){this.g&&(this.response=c,Ys(this))},n.ga=function(){this.g&&Ys(this)};function Ys(c){c.readyState=4,c.l=null,c.j=null,c.B=null,pr(c)}n.setRequestHeader=function(c,_){this.A.append(c,_)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=_.next();return c.join(`\r
`)};function pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fh(c){let _="";return Ie(c,function(v,S){_+=S,_+=":",_+=v,_+=`\r
`}),_}function wa(c,_,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Fh(v),typeof c=="string"?v!=null&&xr(v):Qe(c,_,v))}function nt(c){Dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(nt,Dt);var jh=/^https?$/i,Up=["POST","PUT"];n=nt.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,_,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ch.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(H){Xs(this,H);return}if(c=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)v.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())v.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),z=l.FormData&&c instanceof l.FormData,!(Array.prototype.indexOf.call(Up,_,void 0)>=0)||S||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ae]of v)this.g.setRequestHeader(H,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Xs(this,H)}};function Xs(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.o=5,Zs(c),ms(c)}function Zs(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Rt(this,"complete"),Rt(this,"abort"),ms(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ms(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ps(this):this.Xa())},n.Xa=function(){ps(this)};function ps(c){if(c.h&&typeof a<"u"){if(c.v&&Or(c)==4)setTimeout(c.Ca.bind(c),0);else if(Rt(c,"readystatechange"),Or(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var S;if(S=H===0){let ae=String(c.D).match(Lh)[1]||null;!ae&&l.self&&l.self.location&&(ae=l.self.location.protocol.slice(0,-1)),S=!jh.test(ae?ae.toLowerCase():"")}v=S}if(v)Rt(c,"complete"),Rt(c,"success");else{c.o=6;try{var z=Or(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",Zs(c)}}finally{ms(c)}}}}function ms(c,_){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,_||Rt(c,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Or(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),Ah(_)}};function Uh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wu(c){const _={};c=(c.g&&Or(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(P(c[S]))continue;var v=pa(c[S]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=_[z]||[];_[z]=H,H.push(v)}fe(_,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(c,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||_}function Ea(c){this.za=0,this.i=[],this.j=new Gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lr("baseRetryDelayMs",5e3,c),this.Za=Lr("retryDelaySeedMs",1e4,c),this.Ta=Lr("forwardChannelMaxRetries",2,c),this.va=Lr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(c&&c.concurrentRequestLimit),this.Ba=new oo,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ea.prototype,n.ka=8,n.I=1,n.connect=function(c,_,v,S){Et(0),this.W=c,this.H=_||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Iu(this,null,this.W),gs(this)};function Ia(c){if(Ta(c),c.I==3){var _=c.V++,v=Zn(c.J);if(Qe(v,"SID",c.M),Qe(v,"RID",_),Qe(v,"TYPE","terminate"),Mr(c,v),_=new Xn(c,c.j,_),_.M=2,_.A=ds(Zn(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!v&&l.Image&&(new Image().src=_.A,v=!0),v||(_.g=zh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Xi(_)}uo(c)}function Un(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function Ta(c){Un(c),c.v&&(l.clearTimeout(c.v),c.v=null),Sa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&l.clearTimeout(c.m),c.m=null)}function gs(c){if(!cu(c.h)&&!c.m){c.m=!0;var _=c.Ea;ve||A(),K||(ve(),K=!0),b.add(_,c),c.D=0}}function Bh(c,_){return eo(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=_.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Hs(p(c.Ea,c,_),Ra(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Xn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),Ce(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var _=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=v;break e}if(_===4096||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=Eu(this,z,_),v=Zn(this.J),Qe(v,"RID",c),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),Mr(this,v),H&&(this.R?_="headers="+xr(Fh(H))+"&"+_:this.u&&wa(v,this.u,H)),ya(this.h,z),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",_),Qe(v,"SID","null"),z.U=!0,fr(z,v,null)):fr(z,v,_),this.I=2}}else this.I==3&&(c?ao(this,c):this.i.length==0||cu(this.h)||ao(this))};function ao(c,_){var v;_?v=_.l:v=c.V++;const S=Zn(c.J);Qe(S,"SID",c.M),Qe(S,"RID",v),Qe(S,"AID",c.K),Mr(c,S),c.u&&c.o&&wa(S,c.u,c.o),v=new Xn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),_&&(c.i=_.G.concat(c.i)),_=Eu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ya(c.h,v),fr(v,S,_)}function Mr(c,_){c.H&&Ie(c.H,function(v,S){Qe(_,S,v)}),c.l&&Ie({},function(v,S){Qe(_,S,v)})}function Eu(c,_,v){v=Math.min(c.i.length,v);const S=c.l?p(c.l.Ka,c.l,c):null;e:{var z=c.i;let Ne=-1;for(;;){const Pt=["count="+v];Ne==-1?v>0?(Ne=z[0].g,Pt.push("ofs="+Ne)):Ne=0:Pt.push("ofs="+Ne);let Xe=!0;for(let Vt=0;Vt<v;Vt++){var H=z[Vt].g;const zn=z[Vt].map;if(H-=Ne,H<0)Ne=Math.max(0,z[Vt].g-100),Xe=!1;else try{H="req"+H+"_"||"";try{var ae=zn instanceof Map?zn:Object.entries(zn);for(const[ys,jr]of ae){let Ur=jr;h(jr)&&(Ur=zs(jr)),Pt.push(H+ys+"="+encodeURIComponent(Ur))}}catch(ys){throw Pt.push(H+"type="+encodeURIComponent("_badmap")),ys}}catch{S&&S(zn)}}if(Xe){ae=Pt.join("&");break e}}ae=void 0}return c=c.i.splice(0,v),_.G=c,ae}function sn(c){if(!c.g&&!c.v){c.Y=1;var _=c.Da;ve||A(),K||(ve(),K=!0),b.add(_,c),c.A=0}}function Fr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Hs(p(c.Da,c),Ra(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,ei(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Hs(p(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Un(this),ei(this))};function lo(c){c.B!=null&&(l.clearTimeout(c.B),c.B=null)}function ei(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var _=Zn(c.na);Qe(_,"RID","rpc"),Qe(_,"SID",c.M),Qe(_,"AID",c.K),Qe(_,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qe(_,"TO",c.ia),Qe(_,"TYPE","xmlhttp"),Mr(c,_),c.u&&c.o&&wa(_,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=ds(Zn(_)),v.u=null,v.R=!0,lu(v,c)}n.Va=function(){this.C!=null&&(this.C=null,Un(this),Fr(this),Et(19))};function Sa(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Aa(c,_){var v=null;if(c.g==_){Sa(c),lo(c),c.g=null;var S=2}else if(hu(c.h,_))v=_.G,to(c.h,_),S=1;else return;if(c.I!=0){if(_.o)if(S==1){v=_.u?_.u.length:0,_=Date.now()-_.F;var z=c.D;S=Ws(),Rt(S,new ou(S,v)),gs(c)}else sn(c);else if(z=_.m,z==3||z==0&&_.X>0||!(S==1&&Bh(c,_)||S==2&&Fr(c)))switch(v&&v.length>0&&(_=c.h,_.i=_.i.concat(v)),z){case 1:Bn(c,5);break;case 4:Bn(c,10);break;case 3:Bn(c,6);break;default:Bn(c,2)}}}function Ra(c,_){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*_}function Bn(c,_){if(c.j.info("Error code "+_),_==2){var v=p(c.bb,c),S=c.Ua;const z=!S;S=new br(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||no(S,"https"),ds(S),z?Dr(S.toString(),v):Vr(S.toString(),v)}else Et(2);c.I=0,c.l&&c.l.pa(_),uo(c),Ta(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function uo(c){if(c.I=0,c.ja=[],c.l){const _=Mn(c.h);(_.length!=0||c.i.length!=0)&&(k(c.ja,_),k(c.ja,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.oa()}}function Iu(c,_,v){var S=v instanceof br?Zn(v):new br(v);if(S.g!="")_&&(S.g=_+"."+S.g),Cr(S,S.u);else{var z=l.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;const H=new br(null);S&&no(H,S),_&&(H.g=_),z&&Cr(H,z),v&&(H.h=v),S=H}return v=c.G,_=c.wa,v&&_&&Qe(S,v,_),Qe(S,"VER",c.ka),Mr(c,S),S}function zh(c,_,v){if(_&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Aa&&!c.ma?new nt(new fs({ab:v})):new nt(c.ma),_.Fa(c.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}n=qh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pa(){}Pa.prototype.g=function(c,_){return new Yt(c,_)};function Yt(c,_){Dt.call(this),this.g=new Ea(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(c?c["X-WebChannel-Client-Profile"]=_.sa:c={"X-WebChannel-Client-Profile":_.sa}),this.g.U=c,(c=_&&_.Qb)&&!P(c)&&(this.g.u=c),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.G=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new ti(this)}w(Yt,Dt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ia(this.g)},Yt.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=zs(c),c=v);_.i.push(new Fp(_.Ya++,c)),_.I==3&&gs(_)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Yt.Z.N.call(this)};function $h(c){ha.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){e:{for(const v in _){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}w($h,ha);function Wh(){iu.call(this),this.status=1}w(Wh,iu);function ti(c){this.g=c}w(ti,qh),ti.prototype.ra=function(){Rt(this.g,"a")},ti.prototype.qa=function(c){Rt(this.g,new $h(c))},ti.prototype.pa=function(c){Rt(this.g,new Wh)},ti.prototype.oa=function(){Rt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,JS=function(){return new Pa},QS=function(){return Ws()},KS=dr,Kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ks.NO_ERROR=0,Ks.TIMEOUT=8,Ks.HTTP_ERROR=6,ef=Ks,Qs.COMPLETE="complete",GS=Qs,Rh.EventType=$s,$s.OPEN="a",$s.CLOSE="b",$s.ERROR="c",$s.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,lc=Rh,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,HS=nt}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});const AI="@firebase/firestore",RI="4.9.3";class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let $l="12.7.0";const Di=new Kf("@firebase/firestore");function nl(){return Di.logLevel}function hV(n){Di.setLogLevel(n)}function Z(n,...e){if(Di.logLevel<=Me.DEBUG){const t=e.map(c_);Di.debug(`Firestore (${$l}): ${n}`,...t)}}function bt(n,...e){if(Di.logLevel<=Me.ERROR){const t=e.map(c_);Di.error(`Firestore (${$l}): ${n}`,...t)}}function os(n,...e){if(Di.logLevel<=Me.WARN){const t=e.map(c_);Di.warn(`Firestore (${$l}): ${n}`,...t)}}function c_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,YS(n,r,t)}function YS(n,e,t){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bt(r),new Error(r)}function ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||YS(e,s,r)}function dV(n,e){n||he(57014,e)}function ue(n,e){return n}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Kt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class XS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class pV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mV{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new nn,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},h=f=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nn)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new XS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class gV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _V{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=a=>{a.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Z("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new PI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new PI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class h_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=vV(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function ke(n,e){return n<e?-1:n>e?1:0}function Qg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return Tg(s)===Tg(a)?ke(s,a):Tg(s)?1:-1}return ke(n.length,e.length)}const wV=55296,EV=57343;function Tg(n){const e=n.charCodeAt(0);return e>=wV&&e<=EV}function vl(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function ZS(n){return n+"\0"}const xI="__name__";class Gr{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Gr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return ke(e.length,t.length)}static compareSegments(e,t){const r=Gr.isNumericId(e),s=Gr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Gr.extractNumericId(e).compare(Gr.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pi.fromString(e.substring(4,e.length-2))}}class Fe extends Gr{construct(e,t,r){return new Fe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Fe(t)}static emptyPath(){return new Fe([])}}const IV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Gr{construct(e,t,r){return new pt(e,t,r)}static isValidIdentifier(e){return IV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xI}static keyField(){return new pt([xI])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Y(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new Y(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Y(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new Y(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}class le{constructor(e){this.path=e}static fromPath(e){return new le(Fe.fromString(e))}static fromName(e){return new le(Fe.fromString(e).popFirst(5))}static empty(){return new le(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Fe(e.slice()))}}function d_(n,e,t){if(!t)throw new Y(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eA(n,e,t,r){if(e===!0&&r===!0)throw new Y(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bI(n){if(!le.isDocumentKey(n))throw new Y(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CI(n){if(le.isDocumentKey(n))throw new Y(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function op(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function Ke(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=op(n);throw new Y(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nA(n,e){if(e<=0)throw new Y(W.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function sh(n,e){if(!tA(n))throw new Y(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new Y(W.INVALID_ARGUMENT,t);return!0}const kI=-62135596800,NI=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NI);return new Ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kI)throw new Y(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NI}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sh(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Ft("string",Ye._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ye(0,0))}static max(){return new Ee(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wl=-1;class Rf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Jg(n){return n.fields.find((e=>e.kind===2))}function Ao(n){return n.fields.filter((e=>e.kind!==2))}Rf.UNKNOWN_ID=-1;class tf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oc(0,Yn.min())}}function rA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new Yn(s,le.empty(),e)}function sA(n){return new Yn(n.readTime,n.key,wl)}class Yn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yn(Ee.min(),le.empty(),wl)}static max(){return new Yn(Ee.max(),le.empty(),wl)}}function f_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}const iA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $i(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==iA)throw n;Z("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let s=0,a=0,l=!1;e.forEach((h=>{++s,h.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((s=>s?U.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((g=>{l[p]=g,++h,h===a&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new U(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}const Hn="SimpleDb";class ap{static open(e,t,r,s){try{return new ap(t,e.transaction(s,r))}catch(a){throw new vc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new nn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new vc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=p_(r.target.error);this.S.reject(new vc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Z(Hn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new SV(t)}}class ns{static delete(e){return Z(Hn,"Removing database:",e),Po(Dy().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xc())return!1;if(ns.F())return!0;const e=vt(),t=ns.M(e),r=0<t&&t<10,s=aA(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ns.M(vt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Z(Hn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new Y(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new Y(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new vc(e,l))},s.onupgradeneeded=a=>{Z(Hn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,s.transaction,a.oldVersion,this.version).next((()=>{Z(Hn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=ap.open(this.db,e,a?"readonly":"readwrite",r),f=s(h).next((p=>(h.C(),p))).catch((p=>(h.abort(p),U.reject(p)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&l<3;if(Z(Hn,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class TV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Po(this.U.delete())}}class vc extends Y{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Wi(n){return n.name==="IndexedDbTransactionError"}class SV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Z(Hn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Z(Hn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Po(r)}add(e){return Z(Hn,"ADD",this.store.name,e,e),Po(this.store.add(e))}get(e){return Po(this.store.get(e)).next((t=>(t===void 0&&(t=null),Z(Hn,"GET",this.store.name,e,t),t)))}delete(e){return Z(Hn,"DELETE",this.store.name,e),Po(this.store.delete(e))}count(){return Z(Hn,"COUNT",this.store.name),Po(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new U(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.H(a,((h,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){Z(Hn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((a,l,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new U(((r,s)=>{t.onerror=a=>{const l=p_(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():r()})):r()}}))}H(e,t){const r=[];return new U(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void s();const f=new TV(h),p=t(h.primaryKey,h.value,f);if(p instanceof U){const g=p.catch((w=>(f.done(),U.reject(w))));r.push(g)}f.isDone?s():f.G===null?h.continue():h.continue(f.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Po(n){return new U(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=p_(r.target.error);t(s)}}))}let DI=!1;function p_(n){const e=ns.M(vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Y("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DI||(DI=!0,setTimeout((()=>{throw r}),0)),r}}return n}const wc="IndexBackfiller";class AV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Z(wc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Z(wc,`Documents written: ${t}`)}catch(t){Wi(t)?Z(wc,"Ignoring IndexedDB error during index backfill: ",t):await $i(t)}await this.re(6e4)}))}}class RV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,a=!0;return U.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return Z(wc,`Processing collection: ${l}`),this.oe(e,l,s).next((h=>{s-=h,r.add(l)}));a=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,a))).next((h=>(Z(wc,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,a)=>{const l=sA(a);f_(l,r)>0&&(r=l)})),new Yn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kn.ce=-1;const xi=-1;function ih(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function lA(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Pf="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VI(e)),e=PV(n.get(t),e);return VI(e)}function PV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Pf:t+="";break;default:t+=a}}return t}function VI(n){return n+Pf+""}function es(n){const e=n.length;if(ye(e>=2,64408,{path:n}),e===2)return ye(n.charAt(0)===Pf&&n.charAt(1)==="",56145,{path:n}),Fe.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf(Pf,a);switch((l<0||l>t)&&he(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;s.length===0?f=h:(s+=h,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:he(61167,{path:n})}a=l+2}return new Fe(r)}const Ro="remoteDocuments",oh="owner",Ja="owner",Mc="mutationQueues",xV="userId",Er="mutations",OI="batchId",Do="userMutationsIndex",LI=["userId","batchId"];function nf(n,e){return[n,pn(e)]}function uA(n,e,t){return[n,pn(e),t]}const bV={},El="documentMutations",xf="remoteDocumentsV14",CV=["prefixPath","collectionGroup","readTime","documentId"],rf="documentKeyIndex",kV=["prefixPath","collectionGroup","documentId"],cA="collectionGroupIndex",NV=["collectionGroup","readTime","prefixPath","documentId"],Fc="remoteDocumentGlobal",Yg="remoteDocumentGlobalKey",Il="targets",hA="queryTargetsIndex",DV=["canonicalId","targetId"],Tl="targetDocuments",VV=["targetId","path"],m_="documentTargetsIndex",OV=["path","targetId"],bf="targetGlobalKey",jo="targetGlobal",jc="collectionParents",LV=["collectionId","parent"],Sl="clientMetadata",MV="clientId",lp="bundles",FV="bundleId",up="namedQueries",jV="name",g_="indexConfiguration",UV="indexId",Xg="collectionGroupIndex",BV="collectionGroup",Ec="indexState",zV=["indexId","uid"],dA="sequenceNumberIndex",qV=["uid","sequenceNumber"],Ic="indexEntries",$V=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fA="documentKeyIndex",WV=["indexId","uid","orderedDocumentKey"],cp="documentOverlays",HV=["userId","collectionPath","documentId"],Zg="collectionPathOverlayIndex",GV=["userId","collectionPath","largestBatchId"],pA="collectionGroupOverlayIndex",KV=["userId","collectionGroup","largestBatchId"],y_="globals",QV="name",mA=[Mc,Er,El,Ro,Il,oh,jo,Tl,Sl,Fc,jc,lp,up],JV=[...mA,cp],gA=[Mc,Er,El,xf,Il,oh,jo,Tl,Sl,Fc,jc,lp,up,cp],yA=gA,__=[...yA,g_,Ec,Ic],YV=__,_A=[...__,y_],XV=_A;class ey extends oA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function zt(n,e){const t=ue(n);return ns.O(t.le,e)}function MI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class it{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bd(this.root,e,this.comparator,!0)}}class Bd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??en.RED,this.left=s??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new en(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return en.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FI(this.data.getIterator())}getIteratorFrom(e){return new FI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class FI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ya(n){return n.hasNext()?n.getNext():void 0}class Nn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new et(pt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class wA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function ZV(){return typeof atob<"u"}class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new wA("Invalid base64 string: "+a):a}})(e);return new Tt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const eO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(n){if(ye(!!n,39018),typeof n=="string"){let e=0;const t=eO.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ds(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}const EA="server_timestamp",IA="__type__",TA="__previous_value__",SA="__local_write_time__";function hp(n){return(n?.mapValue?.fields||{})[IA]?.stringValue===EA}function dp(n){const e=n.mapValue.fields[TA];return hp(e)?dp(e):e}function Uc(n){const e=Ns(n.mapValue.fields[SA].timestampValue);return new Ye(e.seconds,e.nanos)}class tO{constructor(e,t,r,s,a,l,h,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=g}}const ty="(default)";class Vi{constructor(e,t){this.projectId=e,this.database=t||ty}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database===ty}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}const v_="__type__",AA="__max__",Ti={mapValue:{fields:{__type__:{stringValue:AA}}}},w_="__vector__",Al="value",sf={nullValue:"NULL_VALUE"};function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hp(n)?4:RA(n)?9007199254740991:fp(n)?10:11:he(28295,{value:n})}function as(n,e){if(n===e)return!0;const t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uc(n).isEqual(Uc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Ns(s.timestampValue),h=Ns(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Ds(s.bytesValue).isEqual(Ds(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return ft(s.geoPointValue.latitude)===ft(a.geoPointValue.latitude)&&ft(s.geoPointValue.longitude)===ft(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return ft(s.integerValue)===ft(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=ft(s.doubleValue),h=ft(a.doubleValue);return l===h?Lc(l)===Lc(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return vl(n.arrayValue.values||[],e.arrayValue.values||[],as);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(MI(l)!==MI(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!as(l[f],h[f])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function Bc(n,e){return(n.values||[]).find((t=>as(t,e)))!==void 0}function Li(n,e){if(n===e)return 0;const t=Oi(n),r=Oi(e);if(t!==r)return ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=ft(a.integerValue||a.doubleValue),f=ft(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return jI(n.timestampValue,e.timestampValue);case 4:return jI(Uc(n),Uc(e));case 5:return Qg(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Ds(a),f=Ds(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const g=ke(h[p],f[p]);if(g!==0)return g}return ke(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=ke(ft(a.latitude),ft(l.latitude));return h!==0?h:ke(ft(a.longitude),ft(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UI(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},p=h[Al]?.arrayValue,g=f[Al]?.arrayValue,w=ke(p?.values?.length||0,g?.values?.length||0);return w!==0?w:UI(p,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ti.mapValue&&l===Ti.mapValue)return 0;if(a===Ti.mapValue)return 1;if(l===Ti.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let w=0;w<f.length&&w<g.length;++w){const I=Qg(f[w],g[w]);if(I!==0)return I;const C=Li(h[f[w]],p[g[w]]);if(C!==0)return C}return ke(f.length,g.length)})(n.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function jI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);const t=Ns(n),r=Ns(e),s=ke(t.seconds,r.seconds);return s!==0?s:ke(t.nanos,r.nanos)}function UI(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Li(t[s],r[s]);if(a)return a}return ke(t.length,r.length)}function Rl(n){return ny(n)}function ny(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ns(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ds(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=ny(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${ny(t.fields[l])}`;return s+"}"})(n.mapValue):he(61005,{value:n})}function of(n){switch(Oi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dp(n);return e?16+of(e):16;case 5:return 2*n.stringValue.length;case 6:return Ds(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+of(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Hi(r.fields,((a,l)=>{s+=a.length+of(l)})),s})(n.mapValue);default:throw he(13486,{value:n})}}function Wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ry(n){return!!n&&"integerValue"in n}function zc(n){return!!n&&"arrayValue"in n}function BI(n){return!!n&&"nullValue"in n}function zI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function fp(n){return(n?.mapValue?.fields||{})[v_]?.stringValue===w_}function Tc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Hi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Tc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(n.arrayValue.values[t]);return e}return{...n}}function RA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AA}const PA={mapValue:{fields:{[v_]:{stringValue:w_},[Al]:{arrayValue:{}}}}};function nO(n){return"nullValue"in n?sf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wo(Vi.empty(),le.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?fp(n)?PA:{mapValue:{}}:he(35942,{value:n})}function rO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wo(Vi.empty(),le.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?PA:"mapValue"in n?fp(n)?{mapValue:{}}:Ti:he(61959,{value:n})}function qI(n,e){const t=Li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $I(n,e){const t=Li(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=pt.emptyPath(),r={},s=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=Tc(l):s.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];af(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Hi(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new tn(Tc(this.value))}}function xA(n){const e=[];return Hi(n.fields,((t,r)=>{const s=new pt([t]);if(af(r)){const a=xA(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Nn(e)}class ut{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new ut(e,0,Ee.min(),Ee.min(),Ee.min(),tn.empty(),0)}static newFoundDocument(e,t,r,s){return new ut(e,1,t,Ee.min(),r,s,0)}static newNoDocument(e,t){return new ut(e,2,t,Ee.min(),Ee.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,Ee.min(),Ee.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Mi{constructor(e,t){this.position=e,this.inclusive=t}}function WI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=le.comparator(le.fromName(l.referenceValue),t.key):r=Li(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function HI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!as(n.position[t],e.position[t]))return!1;return!0}class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class bA{}class Be extends bA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iO(e,t,r):t==="array-contains"?new lO(e,r):t==="in"?new OA(e,r):t==="not-in"?new uO(e,r):t==="array-contains-any"?new cO(e,r):new Be(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new oO(e,r):new aO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Li(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Li(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends bA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ze(e,t)}matches(e){return Pl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pl(n){return n.op==="and"}function sy(n){return n.op==="or"}function E_(n){return CA(n)&&Pl(n)}function CA(n){for(const e of n.filters)if(e instanceof Ze)return!1;return!0}function iy(n){if(n instanceof Be)return n.field.canonicalString()+n.op.toString()+Rl(n.value);if(E_(n))return n.filters.map((e=>iy(e))).join(",");{const e=n.filters.map((t=>iy(t))).join(",");return`${n.op}(${e})`}}function kA(n,e){return n instanceof Be?(function(r,s){return s instanceof Be&&r.op===s.op&&r.field.isEqual(s.field)&&as(r.value,s.value)})(n,e):n instanceof Ze?(function(r,s){return s instanceof Ze&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,h)=>a&&kA(l,s.filters[h])),!0):!1})(n,e):void he(19439)}function NA(n,e){const t=n.filters.concat(e);return Ze.create(t,n.op)}function DA(n){return n instanceof Be?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`})(n):n instanceof Ze?(function(t){return t.op.toString()+" {"+t.getFilters().map(DA).join(" ,")+"}"})(n):"Filter"}class iO extends Be{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){const t=le.comparator(e.key,this.key);return this.matchesComparison(t)}}class oO extends Be{constructor(e,t){super(e,"in",t),this.keys=VA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class aO extends Be{constructor(e,t){super(e,"not-in",t),this.keys=VA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VA(n,e){return(e.arrayValue?.values||[]).map((t=>le.fromName(t.referenceValue)))}class lO extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zc(t)&&Bc(t.arrayValue,this.value)}}class OA extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}}class uO extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bc(this.value.arrayValue,t)}}class cO extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Bc(this.value.arrayValue,r)))}}class hO{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function oy(n,e=null,t=[],r=[],s=null,a=null,l=null){return new hO(n,e,t,r,s,a,l)}function Ho(n){const e=ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>iy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),ih(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Rl(r))).join(",")),e.Te=t}return e.Te}function ah(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HI(n.startAt,e.startAt)&&HI(n.endAt,e.endAt)}function Cf(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function kf(n,e){return n.filters.filter((t=>t instanceof Be&&t.field.isEqual(e)))}function GI(n,e,t){let r=sf,s=!0;for(const a of kf(n,e)){let l=sf,h=!0;switch(a.op){case"<":case"<=":l=nO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=sf}qI({value:r,inclusive:s},{value:l,inclusive:h})<0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];qI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function KI(n,e,t){let r=Ti,s=!0;for(const a of kf(n,e)){let l=Ti,h=!0;switch(a.op){case">=":case">":l=rO(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Ti}$I({value:r,inclusive:s},{value:l,inclusive:h})>0&&(r=l,s=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];$I({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}class Ls{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function LA(n,e,t,r,s,a,l,h){return new Ls(n,e,t,r,s,a,l,h)}function Wl(n){return new Ls(n)}function QI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function I_(n){return n.collectionGroup!==null}function fl(n){const e=ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new et(pt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qc(a,r))})),t.has(pt.keyField().canonicalString())||e.Ie.push(new qc(pt.keyField(),r))}return e.Ie}function En(n){const e=ue(n);return e.Ee||(e.Ee=dO(e,fl(n))),e.Ee}function dO(n,e){if(n.limitType==="F")return oy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new qc(s.field,a)}));const t=n.endAt?new Mi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Mi(n.startAt.position,n.startAt.inclusive):null;return oy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ay(n,e){const t=n.filters.concat([e]);return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nf(n,e,t){return new Ls(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lh(n,e){return ah(En(n),En(e))&&n.limitType===e.limitType}function MA(n){return`${Ho(En(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>DA(s))).join(", ")}]`),ih(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Rl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Rl(s))).join(",")),`Target(${r})`})(En(n))}; limitType=${n.limitType})`}function uh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):le.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of fl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,h,f){const p=WI(l,h,f);return l.inclusive?p<=0:p<0})(r.startAt,fl(r),s)||r.endAt&&!(function(l,h,f){const p=WI(l,h,f);return l.inclusive?p>=0:p>0})(r.endAt,fl(r),s))})(n,e)}function FA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jA(n){return(e,t)=>{let r=!1;for(const s of fl(n)){const a=fO(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function fO(n,e,t){const r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Li(f,p):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}class Ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return vA(this.inner)}size(){return this.innerSize}}const pO=new it(le.comparator);function Dn(){return pO}const UA=new it(le.comparator);function uc(...n){let e=UA;for(const t of n)e=e.insert(t.key,t);return e}function BA(n){let e=UA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ts(){return Sc()}function zA(){return Sc()}function Sc(){return new Ms((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mO=new it(le.comparator),gO=new et(le.comparator);function Ve(...n){let e=gO;for(const t of n)e=e.add(t);return e}const yO=new et(ke);function T_(){return yO}function S_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function qA(n){return{integerValue:""+n}}function $A(n,e){return lA(e)?qA(e):S_(n,e)}class pp{constructor(){this._=void 0}}function _O(n,e,t){return n instanceof xl?(function(s,a){const l={fields:{[IA]:{stringValue:EA},[SA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&hp(a)&&(a=dp(a)),a&&(l.fields[TA]=a),{mapValue:l}})(t,e):n instanceof Go?HA(n,e):n instanceof Ko?GA(n,e):(function(s,a){const l=WA(s,a),h=JI(l)+JI(s.Ae);return ry(l)&&ry(s.Ae)?qA(h):S_(s.serializer,h)})(n,e)}function vO(n,e,t){return n instanceof Go?HA(n,e):n instanceof Ko?GA(n,e):t}function WA(n,e){return n instanceof bl?(function(r){return ry(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class xl extends pp{}class Go extends pp{constructor(e){super(),this.elements=e}}function HA(n,e){const t=KA(e);for(const r of n.elements)t.some((s=>as(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ko extends pp{constructor(e){super(),this.elements=e}}function GA(n,e){let t=KA(e);for(const r of n.elements)t=t.filter((s=>!as(s,r)));return{arrayValue:{values:t}}}class bl extends pp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function JI(n){return ft(n.integerValue||n.doubleValue)}function KA(n){return zc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ch{constructor(e,t){this.field=e,this.transform=t}}function wO(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Go&&s instanceof Go||r instanceof Ko&&s instanceof Ko?vl(r.elements,s.elements,as):r instanceof bl&&s instanceof bl?as(r.Ae,s.Ae):r instanceof xl&&s instanceof xl})(n.transform,e.transform)}class EO{constructor(e,t){this.version=e,this.transformResults=t}}class mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mt}static exists(e){return new mt(void 0,e)}static updateTime(e){return new mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class mp{}function QA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gl(n.key,mt.none()):new Hl(n.key,n.data,mt.none());{const t=n.data,r=tn.empty();let s=new et(pt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Fs(n.key,r,new Nn(s.toArray()),mt.none())}}function IO(n,e,t){n instanceof Hl?(function(s,a,l){const h=s.value.clone(),f=XI(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Fs?(function(s,a,l){if(!lf(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=XI(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(JA(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ac(n,e,t,r){return n instanceof Hl?(function(a,l,h,f){if(!lf(a.precondition,l))return h;const p=a.value.clone(),g=ZI(a.fieldTransforms,f,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fs?(function(a,l,h,f){if(!lf(a.precondition,l))return h;const p=ZI(a.fieldTransforms,f,l),g=l.data;return g.setAll(JA(a)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,l,h){return lf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function TO(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=WA(r.transform,s||null);a!=null&&(t===null&&(t=tn.empty()),t.set(r.field,a))}return t||null}function YI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vl(r,s,((a,l)=>wO(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Hl extends mp{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fs extends mp{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function JA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function XI(n,e,t){const r=new Map;ye(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,vO(l,h,t[s]))}return r}function ZI(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,_O(a,l,e))}return r}class Gl extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A_ extends mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class R_{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&IO(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=zA();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=QA(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ve())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,((t,r)=>YI(t,r)))&&vl(this.baseMutations,e.baseMutations,((t,r)=>YI(t,r)))}}class P_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return mO})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new P_(e,t,r,s)}}class x_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lt,qe;function YA(n){switch(n){case W.OK:return he(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function XA(n){if(n===void 0)return bt("GRPC error has no .code"),W.UNKNOWN;switch(n){case Lt.OK:return W.OK;case Lt.CANCELLED:return W.CANCELLED;case Lt.UNKNOWN:return W.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return W.INTERNAL;case Lt.UNAVAILABLE:return W.UNAVAILABLE;case Lt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Lt.NOT_FOUND:return W.NOT_FOUND;case Lt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Lt.ABORTED:return W.ABORTED;case Lt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Lt.DATA_LOSS:return W.DATA_LOSS;default:return he(39323,{code:n})}}(qe=Lt||(Lt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function ZA(){return new TextEncoder}const AO=new Pi([4294967295,4294967295],0);function eT(n){const e=ZA().encode(n),t=new WS;return t.update(e),new Uint8Array(t.digest())}function tT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Pi([t,r],0),new Pi([s,a],0)]}class b_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Pi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Pi.fromNumber(r)));return s.compare(AO)===1&&(s=new Pi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eT(e),[r,s]=tT(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new b_(a,s,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=eT(e),[r,s]=tT(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hh(Ee.min(),s,new it(ke),Dn(),Ve())}}class dh{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dh(r,t,Ve(),Ve(),Ve())}}class uf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class e1{constructor(e,t){this.targetId=e,this.Ce=t}}class t1{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class nT{constructor(){this.ve=0,this.Fe=rT(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ve(),t=Ve(),r=Ve();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:he(38017,{changeType:a})}})),new dh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.Je=zd(),this.He=zd(),this.Ye=new it(ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Cf(a))if(r===0){const l=new le(a.path);this.et(t,l,ut.newNoDocument(l,Ee.min()))}else ye(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=Ds(r).toUint8Array()}catch(f){if(f instanceof wA)return os("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new b_(l,s,a)}catch(f){return os(f instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Cf(h.target)){const f=new le(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,ut.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=Ve();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new hh(e,t,this.Ye,this.je,r);return this.je=Dn(),this.Je=zd(),this.He=zd(),this.Ye=new it(ke),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new et(ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new et(ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Z("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zd(){return new it(le.comparator)}function rT(){return new it(le.comparator)}const PO={asc:"ASCENDING",desc:"DESCENDING"},xO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bO={and:"AND",or:"OR"};class CO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ly(n,e){return n.useProto3Json||ih(e)?e:{value:e}}function Cl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function n1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kO(n,e){return Cl(n,e.toTimestamp())}function Ct(n){return ye(!!n,49232),Ee.fromTimestamp((function(t){const r=Ns(t);return new Ye(r.seconds,r.nanos)})(n))}function C_(n,e){return uy(n,e).canonicalString()}function uy(n,e){const t=(function(s){return new Fe(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function r1(n){const e=Fe.fromString(n);return ye(f1(e),10190,{key:e.toString()}),e}function $c(n,e){return C_(n.databaseId,e.path)}function rs(n,e){const t=r1(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(o1(t))}function s1(n,e){return C_(n.databaseId,e)}function i1(n){const e=r1(n);return e.length===4?Fe.emptyPath():o1(e)}function cy(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function o1(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sT(n,e,t){return{name:$c(n,e),fields:t.value.mapValue.fields}}function a1(n,e,t){const r=rs(n,e.name),s=Ct(e.updateTime),a=e.createTime?Ct(e.createTime):Ee.min(),l=new tn({mapValue:{fields:e.fields}}),h=ut.newFoundDocument(r,s,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function NO(n,e){return"found"in e?(function(r,s){ye(!!s.found,43571),s.found.name,s.found.updateTime;const a=rs(r,s.found.name),l=Ct(s.found.updateTime),h=s.found.createTime?Ct(s.found.createTime):Ee.min(),f=new tn({mapValue:{fields:s.found.fields}});return ut.newFoundDocument(a,l,h,f)})(n,e):"missing"in e?(function(r,s){ye(!!s.missing,3894),ye(!!s.readTime,22933);const a=rs(r,s.missing),l=Ct(s.readTime);return ut.newNoDocument(a,l)})(n,e):he(7234,{result:e})}function DO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:he(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,g){return p.useProto3Json?(ye(g===void 0||typeof g=="string",58123),Tt.fromBase64String(g||"")):(ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Tt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(p){const g=p.code===void 0?W.UNKNOWN:XA(p.code);return new Y(g,p.message||"")})(l);t=new t1(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=rs(n,r.document.name),a=Ct(r.document.updateTime),l=r.document.createTime?Ct(r.document.createTime):Ee.min(),h=new tn({mapValue:{fields:r.document.fields}}),f=ut.newFoundDocument(s,a,l,h),p=r.targetIds||[],g=r.removedTargetIds||[];t=new uf(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=rs(n,r.document),a=r.readTime?Ct(r.readTime):Ee.min(),l=ut.newNoDocument(s,a),h=r.removedTargetIds||[];t=new uf([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=rs(n,r.document),a=r.removedTargetIds||[];t=new uf([],a,s,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new SO(s,a),h=r.targetId;t=new e1(h,l)}}return t}function Wc(n,e){let t;if(e instanceof Hl)t={update:sT(n,e.key,e.value)};else if(e instanceof Gl)t={delete:$c(n,e.key)};else if(e instanceof Fs)t={update:sT(n,e.key,e.data),updateMask:jO(e.fieldMask)};else{if(!(e instanceof A_))return he(16599,{Vt:e.type});t={verify:$c(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof xl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Go)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ko)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bl)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw he(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:kO(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:he(27497)})(n,e.precondition)),t}function hy(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?mt.updateTime(Ct(a.updateTime)):a.exists!==void 0?mt.exists(a.exists):mt.none()})(e.currentDocument):mt.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,h){let f=null;if("setToServerValue"in h)ye(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new xl;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];f=new Go(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];f=new Ko(g)}else"increment"in h?f=new bl(l,h.increment):he(16584,{proto:h});const p=pt.fromServerFormat(h.fieldPath);return new ch(p,f)})(n,s))):[];if(e.update){e.update.name;const s=rs(n,e.update.name),a=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new Nn(p.map((g=>pt.fromServerFormat(g))))})(e.updateMask);return new Fs(s,a,l,t,r)}return new Hl(s,a,t,r)}if(e.delete){const s=rs(n,e.delete);return new Gl(s,t)}if(e.verify){const s=rs(n,e.verify);return new A_(s,t)}return he(1463,{proto:e})}function VO(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?Ct(s.updateTime):Ct(a);return l.isEqual(Ee.min())&&(l=Ct(a)),new EO(l,s.transformResults||[])})(t,e)))):[]}function l1(n,e){return{documents:[s1(n,e.path)]}}function u1(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=s1(n,s);const a=(function(p){if(p.length!==0)return d1(Ze.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((g=>(function(I){return{field:sl(I.field),direction:LO(I.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=ly(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function c1(n){let e=i1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){ye(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(w){const I=h1(w);return I instanceof Ze&&E_(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(w){return w.map((I=>(function(k){return new qc(il(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let I;return I=typeof w=="object"?w.value:w,ih(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(w){const I=!!w.before,C=w.values||[];return new Mi(C,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const I=!w.before,C=w.values||[];return new Mi(C,I)})(t.endAt)),LA(e,s,l,a,h,"F",f,p)}function OO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function h1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=il(t.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=il(t.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=il(t.unaryFilter.field);return Be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=il(t.unaryFilter.field);return Be.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Be.create(il(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ze.create(t.compositeFilter.filters.map((r=>h1(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function LO(n){return PO[n]}function MO(n){return xO[n]}function FO(n){return bO[n]}function sl(n){return{fieldPath:n.canonicalString()}}function il(n){return pt.fromServerFormat(n.fieldPath)}function d1(n){return n instanceof Be?(function(t){if(t.op==="=="){if(zI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(BI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(BI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:MO(t.op),value:t.value}}})(n):n instanceof Ze?(function(t){const r=t.getFilters().map((s=>d1(s)));return r.length===1?r[0]:{compositeFilter:{op:FO(t.op),filters:r}}})(n):he(54877,{filter:n})}function jO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function f1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ps{constructor(e,t,r,s,a=Ee.min(),l=Ee.min(),h=Tt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class p1{constructor(e){this.yt=e}}function UO(n,e){let t;if(e.document)t=a1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=le.fromSegments(e.noDocument.path),s=Jo(e.noDocument.readTime);t=ut.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const r=le.fromSegments(e.unknownDocument.path),s=Jo(e.unknownDocument.version);t=ut.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new Ye(s[0],s[1]);return Ee.fromTimestamp(a)})(e.readTime)),t}function iT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Df(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:$c(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Cl(a,l.version.toTimestamp()),createTime:Cl(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Qo(e.version)}}return r}function Df(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jo(n){const e=new Ye(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function xo(n,e){const t=(e.baseMutations||[]).map((a=>hy(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>hy(n.yt,a))),s=Ye.fromMillis(e.localWriteTimeMs);return new R_(e.batchId,s,t,r)}function hc(n){const e=Jo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Jo(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return ye(l===1,1966,{count:l}),En(Wl(i1(a.documents[0])))})(n.query):(function(a){return En(c1(a))})(n.query),new Ps(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function m1(n,e){const t=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion);let s;s=Cf(e.target)?l1(n.yt,e.target):u1(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ho(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function k_(n){const e=c1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nf(e,e.limit,"L"):e}function Sg(n,e){return new x_(e.largestBatchId,hy(n.yt,e.overlayMutation))}function oT(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function aT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qo(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}class BO{getBundleMetadata(e,t){return lT(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Jo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return lT(e).put((function(s){return{bundleId:s.id,createTime:Qo(Ct(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return uT(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:k_(a.bundledQuery),readTime:Jo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return uT(e).put((function(s){return{name:s.name,readTime:Qo(Ct(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function lT(n){return zt(n,lp)}function uT(n){return zt(n,up)}class gp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new gp(e,r)}getOverlay(e,t){return Zu(e).get(oT(this.userId,t)).next((r=>r?Sg(this.serializer,r):null))}getOverlays(e,t){const r=ts();return U.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,l)=>{const h=new x_(t,l);s.push(this.St(e,h))})),U.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(pn(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Zu(e).Z(Zg,h))})),U.waitFor(a)}getOverlaysForCollection(e,t,r){const s=ts(),a=pn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Zu(e).J(Zg,l).next((h=>{for(const f of h){const p=Sg(this.serializer,f);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=ts();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zu(e).ee({index:pA,range:h},((f,p,g)=>{const w=Sg(this.serializer,p);a.size()<s||w.largestBatchId===l?(a.set(w.getKey(),w),l=w.largestBatchId):g.done()})).next((()=>a))}St(e,t){return Zu(e).put((function(s,a,l){const[h,f,p]=oT(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Wc(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Zu(n){return zt(n,cp)}class zO{bt(e){return zt(e,y_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class bo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const r=ft(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Lc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ns(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ds(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?RA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):fp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):he(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=Al,a=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ft(a)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}bo.Kt=new bo;const Xa=255;function qO(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function cT(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const l=qO(255&r[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class $O{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=cT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=cT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Xa),this.sn(255)}_n(){this.an(Xa),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Xa?(this.sn(Xa),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Xa?(this.an(Xa),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class WO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class HO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ec{constructor(){this.cn=new $O,this.ln=new WO(this.cn),this.hn=new HO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Co{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Co(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:cf(this.En),directionalValue:cf(this.dn),orderedDocumentKey:cf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function yi(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=hT(n.En,e.En),t!==0?t:(t=hT(n.dn,e.dn),t!==0?t:le.comparator(n.In,e.In)))}function hT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function cf(n){return N0()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function dT(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class fT{constructor(e){this.mn=new et(((t,r)=>pt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Jg(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ao(e);let s=new Set,a=0,l=0;for(;a<r.length&&this.wn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!s.has(h.field.canonicalString())){const f=r[a];if(!this.Sn(h,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new et(pt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new tf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new tf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new tf(r.field,r.dir==="asc"?0:1)));return new Rf(Rf.UNKNOWN_ID,this.collectionId,t,Oc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function g1(n){if(ye(n instanceof Be||n instanceof Ze,20012),n instanceof Be){if(n instanceof OA){const t=n.value.arrayValue?.values?.map((r=>Be.create(n.field,"==",r)))||[];return Ze.create(t,"or")}return n}const e=n.filters.map((t=>g1(t)));return Ze.create(e,n.op)}function GO(n){if(n.getFilters().length===0)return[];const e=py(g1(n));return ye(y1(e),7391),dy(e)||fy(e)?[e]:e.getFilters()}function dy(n){return n instanceof Be}function fy(n){return n instanceof Ze&&E_(n)}function y1(n){return dy(n)||fy(n)||(function(t){if(t instanceof Ze&&sy(t)){for(const r of t.getFilters())if(!dy(r)&&!fy(r))return!1;return!0}return!1})(n)}function py(n){if(ye(n instanceof Be||n instanceof Ze,34018),n instanceof Be)return n;if(n.filters.length===1)return py(n.filters[0]);const e=n.filters.map((r=>py(r)));let t=Ze.create(e,n.op);return t=Vf(t),y1(t)?t:(ye(t instanceof Ze,64498),ye(Pl(t),40251),ye(t.filters.length>1,57927),t.filters.reduce(((r,s)=>N_(r,s))))}function N_(n,e){let t;return ye(n instanceof Be||n instanceof Ze,38388),ye(e instanceof Be||e instanceof Ze,25473),t=n instanceof Be?e instanceof Be?(function(s,a){return Ze.create([s,a],"and")})(n,e):pT(n,e):e instanceof Be?pT(e,n):(function(s,a){if(ye(s.filters.length>0&&a.filters.length>0,48005),Pl(s)&&Pl(a))return NA(s,a.getFilters());const l=sy(s)?s:a,h=sy(s)?a:s,f=l.filters.map((p=>N_(p,h)));return Ze.create(f,"or")})(n,e),Vf(t)}function pT(n,e){if(Pl(e))return NA(e,n.getFilters());{const t=e.filters.map((r=>N_(n,r)));return Ze.create(t,"or")}}function Vf(n){if(ye(n instanceof Be||n instanceof Ze,11850),n instanceof Be)return n;const e=n.getFilters();if(e.length===1)return Vf(e[0]);if(CA(n))return n;const t=e.map((s=>Vf(s))),r=[];return t.forEach((s=>{s instanceof Be?r.push(s):s instanceof Ze&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Ze.create(r,n.op)}class KO{constructor(){this.Cn=new D_}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Yn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class D_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new et(Fe.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Fe.comparator)).toArray()}}const mT="IndexedDbIndexManager",qd=new Uint8Array(0);class QO{constructor(e,t){this.databaseId=t,this.vn=new D_,this.Fn=new Ms((r=>Ho(r)),((r,s)=>ah(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:pn(s)};return gT(e).put(a)}return U.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[ZS(t),""],!1,!0);return gT(e).J(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(es(l.parent))}return r}))}addFieldIndex(e,t){const r=tc(e),s=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=el(e);return a.next((h=>{l.put(aT(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=tc(e),s=el(e),a=Za(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=tc(e),r=Za(e),s=el(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return U.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new fT(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Za(e);let s=!0;const a=new Map;return U.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{s&&(s=!!h),a.set(l,h)})))).next((()=>{if(s){let l=Ve();const h=[];return U.forEach(a,((f,p)=>{Z(mT,`Using index ${(function(ie){return`id=${ie.indexId}|cg=${ie.collectionGroup}|f=${ie.fields.map((pe=>`${pe.fieldPath}:${pe.kind}`)).join(",")}`})(f)} to execute ${Ho(t)}`);const g=(function(ie,pe){const ve=Jg(pe);if(ve===void 0)return null;for(const K of kf(ie,ve.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null})(p,f),w=(function(ie,pe){const ve=new Map;for(const K of Ao(pe))for(const b of kf(ie,K.fieldPath))switch(b.op){case"==":case"in":ve.set(K.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return ve.set(K.fieldPath.canonicalString(),b.value),Array.from(ve.values())}return null})(p,f),I=(function(ie,pe){const ve=[];let K=!0;for(const b of Ao(pe)){const A=b.kind===0?GI(ie,b.fieldPath,ie.startAt):KI(ie,b.fieldPath,ie.startAt);ve.push(A.value),K&&(K=A.inclusive)}return new Mi(ve,K)})(p,f),C=(function(ie,pe){const ve=[];let K=!0;for(const b of Ao(pe)){const A=b.kind===0?KI(ie,b.fieldPath,ie.endAt):GI(ie,b.fieldPath,ie.endAt);ve.push(A.value),K&&(K=A.inclusive)}return new Mi(ve,K)})(p,f),k=this.On(f,p,I),F=this.On(f,p,C),D=this.Nn(f,p,w),Q=this.Bn(f.indexId,g,k,I.inclusive,F,C.inclusive,D);return U.forEach(Q,(se=>r.Y(se,t.limit).next((ie=>{ie.forEach((pe=>{const ve=le.fromSegments(pe.documentKey);l.has(ve)||(l=l.add(ve),h.push(ve))}))}))))})).next((()=>h))}return U.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=GO(Ze.create(e.filters,"and")).map((r=>oy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,a,l,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),p=f/(t!=null?t.length:1),g=[];for(let w=0;w<f;++w){const I=t?this.Ln(t[w/p]):qd,C=this.kn(e,I,r[w%p],s),k=this.qn(e,I,a[w%p],l),F=h.map((D=>this.kn(e,I,D,!0)));g.push(...this.createRange(C,k,F))}return g}kn(e,t,r,s){const a=new Co(e,le.empty(),t,r);return s?a:a.An()}qn(e,t,r,s){const a=new Co(e,le.empty(),t,r);return s?a.An():a}xn(e,t){const r=new fT(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const h of a)r.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return U.forEach(s,(a=>this.xn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new et(pt.comparator),g=!1;for(const w of f.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?g=!0:p=p.add(I.field));for(const w of f.orderBy)w.field.isKeyField()||(p=p.add(w.field));return p.size+(g?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new ec;for(const s of Ao(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.Pn(s.kind);bo.Kt.Dt(a,l)}return r.un()}Ln(e){const t=new ec;return bo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new ec;return bo.Kt.Dt(Wo(this.databaseId,t),r.Pn((function(a){const l=Ao(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new ec);let a=0;for(const l of Ao(e)){const h=r[a++];for(const f of s)if(this.Un(t,l.fieldPath)&&zc(h))s=this.Kn(s,l,h);else{const p=f.Pn(l.kind);bo.Kt.Dt(h,p)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of s){const f=new ec;f.seed(h.un()),bo.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof Be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=tc(e),s=el(e);return(t?r.J(Xg,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const l=[];return U.forEach(a,(h=>s.get([h.indexId,this.uid]).next((f=>{l.push((function(g,w){const I=w?new Oc(w.sequenceNumber,new Yn(Jo(w.readTime),new le(es(w.documentKey)),w.largestBatchId)):Oc.empty(),C=g.fields.map((([k,F])=>new tf(pt.fromServerFormat(k),F)));return new Rf(g.indexId,g.collectionGroup,C,I)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:ke(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=tc(e),a=el(e);return this.Gn(e).next((l=>s.J(Xg,IDBKeyRange.bound(t,t)).next((h=>U.forEach(h,(f=>a.put(aT(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((s,a)=>{const l=r.get(s.collectionGroup);return(l?U.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((h=>(r.set(s.collectionGroup,h),U.forEach(h,(f=>this.zn(e,s,f).next((p=>{const g=this.jn(a,f);return p.isEqual(g)?U.resolve():this.Jn(e,a,f,p,g)})))))))}))}Hn(e,t,r,s){return Za(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return Za(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=Za(e);let a=new et(yi);return s.ee({index:fA,range:IDBKeyRange.only([r.indexId,this.uid,cf(this.$n(r,t))])},((l,h)=>{a=a.add(new Co(r.indexId,t,dT(h.arrayValue),dT(h.directionalValue)))})).next((()=>a))}jn(e,t){let r=new et(yi);const s=this.Qn(t,e);if(s==null)return r;const a=Jg(t);if(a!=null){const l=e.data.field(a.fieldPath);if(zc(l))for(const h of l.arrayValue.values||[])r=r.add(new Co(t.indexId,e.key,this.Ln(h),s))}else r=r.add(new Co(t.indexId,e.key,qd,s));return r}Jn(e,t,r,s,a){Z(mT,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,g,w,I){const C=f.getIterator(),k=p.getIterator();let F=Ya(C),D=Ya(k);for(;F||D;){let Q=!1,se=!1;if(F&&D){const ie=g(F,D);ie<0?se=!0:ie>0&&(Q=!0)}else F!=null?se=!0:Q=!0;Q?(w(D),D=Ya(k)):se?(I(F),F=Ya(C)):(F=Ya(C),D=Ya(k))}})(s,a,yi,(h=>{l.push(this.Hn(e,t,r,h))}),(h=>{l.push(this.Yn(e,t,r,h))})),U.waitFor(l)}Gn(e){let t=1;return el(e).ee({index:dA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,h)=>yi(l,h))).filter(((l,h,f)=>!h||yi(l,f[h-1])!==0));const s=[];s.push(e);for(const l of r){const h=yi(l,e),f=yi(l,t);if(h===0)s[0]=e.An();else if(h>0&&f<0)s.push(l),s.push(l.An());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const h=s[l].Vn(this.uid,qd,le.empty()),f=s[l+1].Vn(this.uid,qd,le.empty());a.push(IDBKeyRange.bound(h,f))}return a}Zn(e,t){return yi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yT)}getMinOffset(e,t){return U.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||he(44426))))).next(yT)}}function gT(n){return zt(n,jc)}function Za(n){return zt(n,Ic)}function tc(n){return zt(n,g_)}function el(n){return zt(n,Ec)}function yT(n){ye(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;f_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Yn(e.readTime,e.documentKey,t)}const _T={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_1=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function v1(n,e,t){const r=n.store(Er),s=n.store(El),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=r.ee({range:l},((g,w,I)=>(h++,I.delete())));a.push(f.next((()=>{ye(h===1,47070,{batchId:t.batchId})})));const p=[];for(const g of t.mutations){const w=uA(e,g.key.path,t.batchId);a.push(s.delete(w)),p.push(g.key)}return U.waitFor(a).next((()=>p))}function Of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw he(14731);e=n.noDocument}return JSON.stringify(e).length}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(_1,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class yp{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new yp(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).ee({index:Do,range:r},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=ol(e),l=_i(e);return l.add({}).next((h=>{ye(typeof h=="number",49019);const f=new R_(h,t,r,s),p=(function(C,k,F){const D=F.baseMutations.map((se=>Wc(C.yt,se))),Q=F.mutations.map((se=>Wc(C.yt,se)));return{userId:k,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:D,mutations:Q}})(this.serializer,this.userId,f),g=[];let w=new et(((I,C)=>ke(I.canonicalString(),C.canonicalString())));for(const I of s){const C=uA(this.userId,I.key.path,h);w=w.add(I.key.path.popLast()),g.push(l.put(p)),g.push(a.put(C,bV))}return w.forEach((I=>{g.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),U.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return _i(e).get(t).next((r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),xo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?U.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return _i(e).ee({index:Do,range:s},((l,h,f)=>{h.userId===this.userId&&(ye(h.batchId>=r,47524,{tr:r}),a=xo(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=xi;return _i(e).ee({index:Do,range:t,reverse:!0},((s,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xi],[this.userId,Number.POSITIVE_INFINITY]);return _i(e).J(Do,t).next((r=>r.map((s=>xo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return ol(e).ee({range:s},((l,h,f)=>{const[p,g,w]=l,I=es(g);if(p===this.userId&&t.path.isEqual(I))return _i(e).get(w).next((C=>{if(!C)throw he(61480,{nr:l,batchId:w});ye(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:w}),a.push(xo(this.serializer,C))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(ke);const s=[];return t.forEach((a=>{const l=nf(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=ol(e).ee({range:h},((p,g,w)=>{const[I,C,k]=p,F=es(C);I===this.userId&&a.path.isEqual(F)?r=r.add(k):w.done()}));s.push(f)})),U.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=nf(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new et(ke);return ol(e).ee({range:l},((f,p,g)=>{const[w,I,C]=f,k=es(I);w===this.userId&&r.isPrefixOf(k)?k.length===s&&(h=h.add(C)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const r=[],s=[];return t.forEach((a=>{s.push(_i(e).get(a).next((l=>{if(l===null)throw he(35274,{batchId:a});ye(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(xo(this.serializer,l))})))})),U.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return v1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),U.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return ol(e).ee({range:r},((a,l,h)=>{if(a[0]===this.userId){const f=es(a[1]);s.push(f)}else h.done()})).next((()=>{ye(s.length===0,56720,{sr:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return w1(e,this.userId,t)}_r(e){return E1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:xi,lastStreamToken:""}))}}function w1(n,e,t){const r=nf(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return ol(n).ee({range:a,X:!0},((h,f,p)=>{const[g,w,I]=h;g===e&&w===s&&(l=!0),p.done()})).next((()=>l))}function _i(n){return zt(n,Er)}function ol(n){return zt(n,El)}function E1(n){return zt(n,Mc)}class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}class JO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Yo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Ye(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>tl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return tl(e).ee(((l,h)=>{const f=hc(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>U.waitFor(a))).next((()=>s))}forEachTarget(e,t){return tl(e).ee(((r,s)=>{const a=hc(s);t(a)}))}lr(e){return vT(e).get(bf).next((t=>(ye(t!==null,2888),t)))}hr(e,t){return vT(e).put(bf,t)}Pr(e,t){return tl(e).put(m1(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ho(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return tl(e).ee({range:s,index:hA},((l,h,f)=>{const p=hc(h);ah(t,p.target)&&(a=p,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=Ei(e);return t.forEach((l=>{const h=pn(l.path);s.push(a.put({targetId:r,path:h})),s.push(this.referenceDelegate.addReference(e,r,l))})),U.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ei(e);return U.forEach(t,(a=>{const l=pn(a.path);return U.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Ei(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ei(e);let a=Ve();return s.ee({range:r,X:!0},((l,h,f)=>{const p=es(l[1]),g=new le(p);a=a.add(g)})).next((()=>a))}containsKey(e,t){const r=pn(t.path),s=IDBKeyRange.bound([r],[ZS(r)],!1,!0);let a=0;return Ei(e).ee({index:m_,X:!0,range:s},(([l,h],f,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,t){return tl(e).get(t).next((r=>r?hc(r):null))}}function tl(n){return zt(n,Il)}function vT(n){return zt(n,jo)}function Ei(n){return zt(n,Tl)}const wT="LruGarbageCollector",YO=1048576;function ET([n,e],[t,r]){const s=ke(n,t);return s===0?ke(e,r):s}class XO{constructor(e){this.Ir=e,this.buffer=new et(ET),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ET(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(wT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wi(t)?Z(wT,"Ignoring IndexedDB error during garbage collection: ",t):await $i(t)}await this.Vr(3e5)}))}}class ZO{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(kn.ce);const r=new XO(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(_T)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_T):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,a,l,h,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),s=this.params.maximumSequenceNumbersToCollect):s=w,l=Date.now(),this.nthSequenceNumber(e,s)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(p=Date.now(),nl()<=Me.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:w}))))}}function T1(n,e){return new ZO(n,e)}class eL{constructor(e,t){this.db=e,this.garbageCollector=T1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return $d(e,r)}removeReference(e,t,r){return $d(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $d(e,t)}br(e,t){return(function(s,a){let l=!1;return E1(s).te((h=>w1(s,h,a).next((f=>(f&&(l=!0),U.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.Sr(e,((l,h)=>{if(h<=t){const f=this.br(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Ee.min()),Ei(e).delete((function(w){return[0,pn(w.path)]})(l)))))}));s.push(f)}})).next((()=>U.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $d(e,t)}Sr(e,t){const r=Ei(e);let s,a=kn.ce;return r.ee({index:m_},(([l,h],{path:f,sequenceNumber:p})=>{l===0?(a!==kn.ce&&t(new le(es(s)),a),a=p,s=f):a=kn.ce})).next((()=>{a!==kn.ce&&t(new le(es(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $d(n,e){return Ei(n).put((function(r,s){return{targetId:0,path:pn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}class S1{constructor(){this.changes=new Ms((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return To(e).put(r)}removeEntry(e,t,r){return To(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Df(l),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=ut.newInvalidDocument(t);return To(e).ee({index:rf,range:IDBKeyRange.only(nc(t))},((s,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:ut.newInvalidDocument(t)};return To(e).ee({index:rf,range:IDBKeyRange.only(nc(t))},((s,a)=>{r={document:this.Cr(t,a),size:Of(a)}})).next((()=>r))}getEntries(e,t){let r=Dn();return this.Fr(e,t,((s,a)=>{const l=this.Cr(s,a);r=r.insert(s,l)})).next((()=>r))}Mr(e,t){let r=Dn(),s=new it(le.comparator);return this.Fr(e,t,((a,l)=>{const h=this.Cr(a,l);r=r.insert(a,h),s=s.insert(a,Of(l))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return U.resolve();let s=new et(ST);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(nc(s.first()),nc(s.last())),l=s.getIterator();let h=l.getNext();return To(e).ee({index:rf,range:a},((f,p,g)=>{const w=le.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&ST(h,w)<0;)r(h,null),h=l.getNext();h&&h.isEqual(w)&&(r(h,p),h=l.hasNext()?l.getNext():null),h?g.j(nc(h)):g.done()})).next((()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return To(e).J(IDBKeyRange.bound(h,f,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let g=Dn();for(const w of p){const I=this.Cr(le.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(uh(t,I)||s.has(I.key))&&(g=g.insert(I.key,I))}return g}))}getAllFromCollectionGroup(e,t,r,s){let a=Dn();const l=TT(t,r),h=TT(t,Yn.max());return To(e).ee({index:cA,range:IDBKeyRange.bound(l,h,!0)},((f,p,g)=>{const w=this.Cr(le.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(w.key,w),a.size===s&&g.done()})).next((()=>a))}newChangeBuffer(e){return new nL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return IT(e).get(Yg).next((t=>(ye(!!t,20021),t)))}Dr(e,t){return IT(e).put(Yg,t)}Cr(e,t){if(t){const r=UO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return ut.newInvalidDocument(e)}}function A1(n){return new tL(n)}class nL extends S1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ms((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new et(((a,l)=>ke(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=iT(this.Nr.serializer,l);s=s.add(a.path.popLast());const p=Of(f);r+=p-h.size,t.push(this.Nr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=iT(this.Nr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function IT(n){return zt(n,Fc)}function To(n){return zt(n,xf)}function nc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TT(n,e){const t=e.documentKey.path.toArray();return[n,Df(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ST(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=ke(t[a],r[a]),s)return s;return s=ke(t.length,r.length),s||(s=ke(t[t.length-2],r[r.length-2]),s||ke(t[t.length-1],r[r.length-1]))}class rL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class R1{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ac(r.mutation,s,Nn.empty(),Ye.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ve()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ve()){const s=ts();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=uc();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ts();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ve())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,s){let a=Dn();const l=Sc(),h=(function(){return Sc()})();return t.forEach(((f,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof Fs)?a=a.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),Ac(g.mutation,p,g.mutation.getFieldMask(),Ye.now())):l.set(p.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,g)=>l.set(p,g))),t.forEach(((p,g)=>h.set(p,new rL(g,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Sc();let s=new it(((l,h)=>l-h)),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let g=r.get(f)||Nn.empty();g=h.applyToLocalView(p,g),r.set(f,g);const w=(s.get(h.batchId)||Ve()).add(f);s=s.insert(h.batchId,w)}))})).next((()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,g=f.value,w=zA();g.forEach((I=>{if(!a.has(I)){const C=QA(t.get(I),r.get(I));C!==null&&w.set(I,C),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return U.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(l){return le.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):I_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):U.resolve(ts());let h=wl,f=a;return l.next((p=>U.forEach(p,((g,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(g)?U.resolve():this.remoteDocumentCache.getEntry(e,g).next((I=>{f=f.insert(g,I)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Ve()))).next((g=>({batchId:h,changes:BA(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next((r=>{let s=uc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=uc();return this.indexManager.getCollectionParents(e,a).next((h=>U.forEach(h,(f=>{const p=(function(w,I){return new Ls(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((g=>{g.forEach(((w,I)=>{l=l.insert(w,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,ut.newInvalidDocument(g)))}));let h=uc();return l.forEach(((f,p)=>{const g=a.get(f);g!==void 0&&Ac(g.mutation,p,Nn.empty(),Ye.now()),uh(t,p)&&(h=h.insert(f,p))})),h}))}}class sL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ct(s.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:k_(s.bundledQuery),readTime:Ct(s.readTime)}})(t)),U.resolve()}}class iL{constructor(){this.overlays=new it(le.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ts();return U.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.St(e,t,a)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const s=ts(),a=t.length+1,l=new le(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return U.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new it(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=ts(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=ts(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,g)=>h.set(p,g))),!(h.size()>=s)););return U.resolve(h)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new x_(t,r));let a=this.qr.get(t);a===void 0&&(a=Ve(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class oL{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class V_{constructor(){this.Qr=new et(Ht.$r),this.Ur=new et(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new le(new Fe([])),r=new Ht(t,e),s=new Ht(t,e+1),a=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new le(new Fe([])),r=new Ht(t,e),s=new Ht(t,e+1);let a=Ve();return this.Ur.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||ke(e.Yr,t.Yr)}static Kr(e,t){return ke(e.Yr,t.Yr)||le.comparator(e.key,t.key)}}class aL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new et(Ht.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new R_(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.Zr=this.Zr.add(new Ht(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return U.resolve(l)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),a=s<0?0:s;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?xi:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),s=new Ht(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(l=>{const h=this.Xr(l.Yr);a.push(h)})),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new et(ke);return t.forEach((s=>{const a=new Ht(s,0),l=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;le.isDocumentKey(a)||(a=a.child(""));const l=new Ht(new le(a),0);let h=new et(ke);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Yr)),!0)}),l),U.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(t.mutations,(s=>{const a=new Ht(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ht(t,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lL{constructor(e){this.ri=e,this.docs=(function(){return new it(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ut.newInvalidDocument(s))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Dn();const l=t.path,h=new le(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||f_(sA(g),r)<=0||(s.has(g.key)||uh(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,t,r,s){he(9500)}ii(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uL(this)}getSize(e){return U.resolve(this.size)}}class uL extends S1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class cL{constructor(e){this.persistence=e,this.si=new Ms((t=>Ho(t)),ah),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new V_,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)})),U.waitFor(a).next((()=>s))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),U.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}}class O_{constructor(e,t){this.ui={},this.overlays={},this.ci=new kn(0),this.li=!1,this.li=!0,this.hi=new oL,this.referenceDelegate=e(this),this.Pi=new cL(this),this.indexManager=new KO,this.remoteDocumentCache=(function(s){return new lL(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new p1(t),this.Ii=new sL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Z("MemoryPersistence","Starting transaction:",e);const s=new hL(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,t){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class hL extends oA{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Ri=new V_,this.Vi=null}static mi(e){return new _p(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const s=le.fromPath(r);return this.gi(e,s).next((a=>{a||t.removeEntry(s,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.pi=new Ms((r=>pn(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=T1(this,t)}static mi(e,t){return new Lf(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return U.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?U.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,Ee.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=of(e.data.value)),t}br(e,t,r){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dL{constructor(e){this.serializer=e}k(e,t,r,s){const a=new ap("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore(oh)})(e),(function(f){f.createObjectStore(Mc,{keyPath:xV}),f.createObjectStore(Er,{keyPath:OI,autoIncrement:!0}).createIndex(Do,LI,{unique:!0}),f.createObjectStore(El)})(e),AT(e),(function(f){f.createObjectStore(Ro)})(e));let l=U.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore(Tl),f.deleteObjectStore(Il),f.deleteObjectStore(jo)})(e),AT(e)),l=l.next((()=>(function(f){const p=f.store(jo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return p.put(bf,g)})(a)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(Er).J().next((w=>{f.deleteObjectStore(Er),f.createObjectStore(Er,{keyPath:OI,autoIncrement:!0}).createIndex(Do,LI,{unique:!0});const I=p.store(Er),C=w.map((k=>I.put(k)));return U.waitFor(C)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Sl,{keyPath:MV})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.yi(a)))),r<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Fc)})(e),this.wi(a))))),r<7&&s>=7&&(l=l.next((()=>this.Si(a)))),r<8&&s>=8&&(l=l.next((()=>this.bi(e,a)))),r<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.Di(a)))),r<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(lp,{keyPath:FV})})(e),(function(f){f.createObjectStore(up,{keyPath:jV})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(cp,{keyPath:HV});p.createIndex(Zg,GV,{unique:!1}),p.createIndex(pA,KV,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(xf,{keyPath:CV});p.createIndex(rf,kV),p.createIndex(cA,NV)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Ro)))),r<14&&s>=14&&(l=l.next((()=>this.Fi(e,a)))),r<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore(g_,{keyPath:UV,autoIncrement:!0}).createIndex(Xg,BV,{unique:!1}),f.createObjectStore(Ec,{keyPath:zV}).createIndex(dA,qV,{unique:!1}),f.createObjectStore(Ic,{keyPath:$V}).createIndex(fA,WV,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore(Ec).clear()})).next((()=>{t.objectStore(Ic).clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(y_,{keyPath:QV})})(e)}))),r<18&&s>=18&&N0()&&(l=l.next((()=>{t.objectStore(Ec).clear()})).next((()=>{t.objectStore(Ic).clear()}))),l}wi(e){let t=0;return e.store(Ro).ee(((r,s)=>{t+=Of(s)})).next((()=>{const r={byteSize:t};return e.store(Fc).put(Yg,r)}))}yi(e){const t=e.store(Mc),r=e.store(Er);return t.J().next((s=>U.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,xi],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Do,l).next((h=>U.forEach(h,(f=>{ye(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=xo(this.serializer,f);return v1(e,a.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Tl),r=e.store(Ro);return e.store(jo).get(bf).next((s=>{const a=[];return r.ee(((l,h)=>{const f=new Fe(l),p=(function(w){return[0,pn(w)]})(f);a.push(t.get(p).next((g=>g?U.resolve():(w=>t.put({targetId:0,path:pn(w),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>U.waitFor(a)))}))}bi(e,t){e.createObjectStore(jc,{keyPath:LV});const r=t.store(jc),s=new D_,a=l=>{if(s.add(l)){const h=l.lastSegment(),f=l.popLast();return r.put({collectionId:h,parent:pn(f)})}};return t.store(Ro).ee({X:!0},((l,h)=>{const f=new Fe(l);return a(f.popLast())})).next((()=>t.store(El).ee({X:!0},(([l,h,f],p)=>{const g=es(h);return a(g.popLast())}))))}Di(e){const t=e.store(Il);return t.ee(((r,s)=>{const a=hc(s),l=m1(this.serializer,a);return t.put(l)}))}Ci(e,t){const r=t.store(Ro),s=[];return r.ee(((a,l)=>{const h=t.store(xf),f=(function(w){return w.document?new le(Fe.fromString(w.document.name).popFirst(5)):w.noDocument?le.fromSegments(w.noDocument.path):w.unknownDocument?le.fromSegments(w.unknownDocument.path):he(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(h.put(p))})).next((()=>U.waitFor(s)))}Fi(e,t){const r=t.store(Er),s=A1(this.serializer),a=new O_(_p.mi,this.serializer.yt);return r.J().next((l=>{const h=new Map;return l.forEach((f=>{let p=h.get(f.userId)??Ve();xo(this.serializer,f).keys().forEach((g=>p=p.add(g))),h.set(f.userId,p)})),U.forEach(h,((f,p)=>{const g=new Gt(p),w=gp.wt(this.serializer,g),I=a.getIndexManager(g),C=yp.wt(g,this.serializer,I,a.referenceDelegate);return new R1(s,C,w,I).recalculateAndSaveOverlaysForDocumentKeys(new ey(t,kn.ce),f).next()}))}))}}function AT(n){n.createObjectStore(Tl,{keyPath:VV}).createIndex(m_,OV,{unique:!0}),n.createObjectStore(Il,{keyPath:"targetId"}).createIndex(hA,DV,{unique:!0}),n.createObjectStore(jo)}const vi="IndexedDbPersistence",Ag=18e5,Rg=5e3,Pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",P1="main";class L_{constructor(e,t,r,s,a,l,h,f,p,g,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=l,this.document=h,this.xi=p,this.Oi=g,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!L_.v())throw new Y(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eL(this,s),this.$i=t+P1,this.serializer=new p1(f),this.Ui=new ns(this.$i,this.Ni,new dL(this.serializer)),this.hi=new zO,this.Pi=new JO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=A1(this.serializer),this.Ii=new BO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&bt(vi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Y(W.FAILED_PRECONDITION,Pg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new kn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Wi(e))return Z(vi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z(vi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return rc(e).get(Ja).next((t=>U.resolve(this.es(t))))}ts(e){return Wd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ag)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=zt(t,Sl);return r.J().next((s=>{const a=this.ss(s,Ag),l=s.filter((h=>a.indexOf(h)===-1));return U.forEach(l,(h=>r.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):rc(e).get(Ja).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Y(W.FAILED_PRECONDITION,Pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wd(e).J().next((r=>this.ss(r,Rg).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,h=this.networkEnabled===s.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Z(vi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[oh,Sl],(e=>{const t=new ey(e,kn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Wd(e).J().next((t=>this.ss(t,Ag).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return yp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return gp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Z(vi,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?XV:f===17?_A:f===16?YV:f===15?__:f===14?yA:f===13?gA:f===12?JV:f===11?mA:void he(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,a,(h=>(l=new ey(h,this.ci?this.ci.next():kn.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Y(W.FAILED_PRECONDITION,iA);return r(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>r(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return rc(e).get(Ja).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Y(W.FAILED_PRECONDITION,Pg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rc(e).put(Ja,t)}static v(){return ns.v()}Zi(e){const t=rc(e);return t.get(Ja).next((r=>this.es(r)?(Z(vi,"Releasing primary lease."),t.delete(Ja)):U.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;k0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Z(vi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(vi,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rc(n){return zt(n,oh)}function Wd(n){return zt(n,Sl)}function M_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class F_{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Ve(),s=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new F_(e,t.fromCache,r,s)}}class fL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class x1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return k0()?8:aA(vt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new fL;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(nl()<=Me.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(nl()<=Me.DEBUG&&Z("QueryEngine","Query:",rl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(nl()<=Me.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):U.resolve())}ys(e,t){if(QI(t))return U.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Nf(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Ve(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,h);return this.Cs(t,p,l,f.readTime)?this.ys(e,Nf(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,s){return QI(t)||s.isEqual(Ee.min())?U.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,s)?U.resolve(null):(nl()<=Me.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(t)),this.vs(e,l,t,rA(s,wl)).next((h=>h)))}))}Ds(e,t){let r=new et(jA(e));return t.forEach(((s,a)=>{uh(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,r){return nl()<=Me.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ps.getDocumentsMatchingQuery(e,t,Yn.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const j_="LocalStore",pL=3e8;class mL{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new it(ke),this.xs=new Ms((a=>Ho(a)),ah),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function b1(n,e,t,r){return new mL(n,e,t,r)}async function C1(n,e){const t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=Ve();for(const p of s){l.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of a){h.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function gL(n,e){const t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,g){const w=p.batch,I=w.keys();let C=U.resolve();return I.forEach((k=>{C=C.next((()=>g.getEntry(f,k))).next((F=>{const D=p.docVersions.get(k);ye(D!==null,48541),F.version.compareTo(D)<0&&(w.applyToRemoteDocument(F,p),F.isValidDocument()&&(F.setReadTime(p.commitVersion),g.addEntry(F)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function k1(n){const e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function yL(n,e){const t=ue(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const h=[];e.targetChanges.forEach(((g,w)=>{const I=s.get(w);if(!I)return;h.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,w))));let C=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Tt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),s=s.insert(w,C),(function(F,D,Q){return F.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=pL?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(I,C,g)&&h.push(t.Pi.updateTargetData(a,C))}));let f=Dn(),p=Ve();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),h.push(N1(a,l,e.documentUpdates).next((g=>{f=g.ks,p=g.qs}))),!r.isEqual(Ee.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(g)}return U.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.Ms=s,a)))}function N1(n,e,t){let r=Ve(),s=Ve();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Dn();return t.forEach(((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):Z(j_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{ks:l,qs:s}}))}function _L(n,e){const t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=xi),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kl(n,e){const t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((a=>a?(s=a,U.resolve(s)):t.Pi.allocateTargetId(r).next((l=>(s=new Ps(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Nl(n,e,t){const r=ue(n),s=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Wi(l))throw l;Z(j_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Mf(n,e,t){const r=ue(n);let s=Ee.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,g){const w=ue(f),I=w.xs.get(g);return I!==void 0?U.resolve(w.Ms.get(I)):w.Pi.getTargetData(p,g)})(r,l,En(e)).next((h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?s:Ee.min(),t?a:Ve()))).next((h=>(O1(r,FA(e),h),{documents:h,Qs:a})))))}function D1(n,e){const t=ue(n),r=ue(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function V1(n,e){const t=ue(n),r=t.Os.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,rA(r,wl),Number.MAX_SAFE_INTEGER))).then((s=>(O1(t,e,s),s)))}function O1(n,e,t){let r=n.Os.get(e)||Ee.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}async function vL(n,e,t,r){const s=ue(n);let a=Ve(),l=Dn();for(const p of t){const g=e.$s(p.metadata.name);p.document&&(a=a.add(g));const w=e.Us(p);w.setReadTime(e.Ks(p.metadata.readTime)),l=l.insert(g,w)}const h=s.Ns.newChangeBuffer({trackRemovals:!0}),f=await kl(s,(function(g){return En(Wl(Fe.fromString(`__bundle__/docs/${g}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(p=>N1(p,h,l).next((g=>(h.apply(p),g))).next((g=>s.Pi.removeMatchingKeysForTargetId(p,f.targetId).next((()=>s.Pi.addMatchingKeys(p,a,f.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(p,g.ks,g.qs))).next((()=>g.ks))))))}async function wL(n,e,t=Ve()){const r=await kl(n,En(k_(e.bundledQuery))),s=ue(n);return s.persistence.runTransaction("Save named query","readwrite",(a=>{const l=Ct(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.Ii.saveNamedQuery(a,e);const h=r.withResumeToken(Tt.EMPTY_BYTE_STRING,l);return s.Ms=s.Ms.insert(h.targetId,h),s.Pi.updateTargetData(a,h).next((()=>s.Pi.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>s.Pi.addMatchingKeys(a,t,r.targetId))).next((()=>s.Ii.saveNamedQuery(a,e)))}))}const L1="firestore_clients";function RT(n,e){return`${L1}_${n}_${e}`}const M1="firestore_mutations";function PT(n,e,t){let r=`${M1}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const F1="firestore_targets";function xg(n,e){return`${F1}_${n}_${e}`}const Kr="SharedClientState";class Ff{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ws(e,t,r){const s=JSON.parse(r);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new Y(s.error.code,s.error.message))),l?new Ff(e,t,s.state,a):(bt(Kr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let s,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(s=new Y(r.error.code,r.error.message))),a?new Rc(e,r.state,s):(bt(Kr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,a=T_();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=lA(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return s?new jf(e,a):(bt(Kr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class U_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new U_(t.clientId,t.onlineState):(bt(Kr,`Failed to parse online state: ${e}`),null)}}class my{constructor(){this.activeTargetIds=T_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bg{constructor(e,t,r,s,a){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new it(ke),this.started=!1,this.Xs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=RT(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new my),this.ro=new RegExp(`^${L1}_${l}_([^_]*)$`),this.io=new RegExp(`^${M1}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${F1}_${l}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(RT(this.persistenceKey,r));if(s){const a=jf.Ws(r,s);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(xg(this.persistenceKey,e));if(s){const a=Rc.Ws(e,s);a&&(r=a.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Z(Kr,"READ",e,t),t}setItem(e,t){Z(Kr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Z(Kr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(Z(Kr,"EVENT",t.key,t.newValue),t.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(a){let l=kn.ce;if(a!=null)try{const h=JSON.parse(a);ye(typeof h=="number",30636,{So:a}),l=h}catch(h){bt(Kr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);r!==kn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const s=new Ff(this.currentUser,e,t,r),a=PT(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Gs())}Po(e){const t=PT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const s=xg(this.persistenceKey,e),a=new Rc(e,t,r);this.setItem(s,a.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return jf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),s=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Ff.Ws(new Gt(a),s,t)}yo(e,t){const r=this.so.exec(e),s=Number(r[1]);return Rc.Ws(s,t)}uo(e){return U_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Z(Kr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),a=this.lo(r),l=[],h=[];return a.forEach((f=>{s.has(f)||l.push(f)})),s.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=T_();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class j1{constructor(){this.Mo=new my,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new my,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EL{Oo(e){}shutdown(){}}const xT="ConnectivityMonitor";class bT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(xT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(xT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hd=null;function gy(){return Hd===null?Hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hd++,"0x"+Hd.toString(16)}const Cg="RestConnection",IL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ty?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,a){const l=gy(),h=this.zo(e,t.toUriEncodedString());Z(Cg,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,a);const{host:p}=new URL(h),g=Bi(p);return this.Jo(e,h,f,r,g).then((w=>(Z(Cg,`Received RPC '${e}' ${l}: `,w),w)),(w=>{throw os(Cg,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w}))}Ho(e,t,r,s,a,l){return this.Go(e,t,r,s,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,t){const r=IL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class SL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cn="WebChannelConnection";class AL extends TL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,a){const l=gy();return new Promise(((h,f)=>{const p=new HS;p.setWithCredentials(!0),p.listenOnce(GS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ef.NO_ERROR:const w=p.getResponseJson();Z(cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case ef.TIMEOUT:Z(cn,`RPC '${e}' ${l} timed out`),f(new Y(W.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const I=p.getStatus();if(Z(cn,`RPC '${e}' ${l} failed with status:`,I,"response text:",p.getResponseText()),I>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const k=C?.error;if(k&&k.status&&k.message){const F=(function(Q){const se=Q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(se)>=0?se:W.UNKNOWN})(k.status);f(new Y(F,k.message))}else f(new Y(W.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new Y(W.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Z(cn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);Z(cn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=gy(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=JS(),h=QS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=a.join("");Z(cn,`Creating RPC '${e}' stream ${s}: ${g}`,f);const w=l.createWebChannel(g,f);this.I_(w);let I=!1,C=!1;const k=new SL({Yo:D=>{C?Z(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(I||(Z(cn,`Opening RPC '${e}' stream ${s} transport.`),w.open(),I=!0),Z(cn,`RPC '${e}' stream ${s} sending:`,D),w.send(D))},Zo:()=>w.close()}),F=(D,Q,se)=>{D.listen(Q,(ie=>{try{se(ie)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return F(w,lc.EventType.OPEN,(()=>{C||(Z(cn,`RPC '${e}' stream ${s} transport opened.`),k.o_())})),F(w,lc.EventType.CLOSE,(()=>{C||(C=!0,Z(cn,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(w))})),F(w,lc.EventType.ERROR,(D=>{C||(C=!0,os(cn,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new Y(W.UNAVAILABLE,"The operation could not be completed")))})),F(w,lc.EventType.MESSAGE,(D=>{if(!C){const Q=D.data[0];ye(!!Q,16349);const se=Q,ie=se?.error||se[0]?.error;if(ie){Z(cn,`RPC '${e}' stream ${s} received error:`,ie);const pe=ie.status;let ve=(function(A){const x=Lt[A];if(x!==void 0)return XA(x)})(pe),K=ie.message;ve===void 0&&(ve=W.INTERNAL,K="Unknown error status: "+pe+" with message "+ie.message),C=!0,k.a_(new Y(ve,K)),w.close()}else Z(cn,`RPC '${e}' stream ${s} received:`,Q),k.u_(Q)}})),F(h,KS.STAT_EVENT,(D=>{D.stat===Kg.PROXY?Z(cn,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Kg.NOPROXY&&Z(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function U1(){return typeof window<"u"?window:null}function hf(){return typeof document<"u"?document:null}function fh(n){return new CO(n,!0)}class B_{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const CT="PersistentStream";class B1{constructor(e,t,r,s,a,l,h,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new Y(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Z(CT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Z(CT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class RL extends B1{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=DO(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ee.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?Ct(l.readTime):Ee.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=cy(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=Cf(f)?{documents:l1(a,f)}:{query:u1(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=n1(a,l.resumeToken);const p=ly(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Cl(a,l.snapshotVersion.toTimestamp());const p=ly(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=OO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=cy(this.serializer),t.removeTarget=e,this.q_(t)}}class PL extends B1{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=VO(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=cy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Wc(this.serializer,r)))};this.q_(t)}}class xL{}class bL extends xL{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,uy(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Y(W.UNKNOWN,a.toString())}))}Ho(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,uy(t,r),s,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Y(W.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class CL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):Z("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xo="RemoteStore";class kL{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Gi(this)&&(Z(Xo,"Restarting streams for network reachability change."),await(async function(f){const p=ue(f);p.Ea.add(4),await Kl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ph(p)})(this))}))})),this.Ra=new CL(r,s)}}async function ph(n){if(Gi(n))for(const e of n.da)await e(!0)}async function Kl(n){for(const e of n.da)await e(!1)}function vp(n,e){const t=ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$_(t)?q_(t):Jl(t).O_()&&z_(t,e))}function Dl(n,e){const t=ue(n),r=Jl(t);t.Ia.delete(e),r.O_()&&z1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Gi(t)&&t.Ra.set("Unknown"))}function z_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jl(n).Y_(e)}function z1(n,e){n.Va.Ue(e),Jl(n).Z_(e)}function q_(n){n.Va=new RO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Jl(n).start(),n.Ra.ua()}function $_(n){return Gi(n)&&!Jl(n).x_()&&n.Ia.size>0}function Gi(n){return ue(n).Ea.size===0}function q1(n){n.Va=void 0}async function NL(n){n.Ra.set("Online")}async function DL(n){n.Ia.forEach(((e,t)=>{z_(n,e)}))}async function VL(n,e){q1(n),$_(n)?(n.Ra.ha(e),q_(n)):n.Ra.set("Unknown")}async function OL(n,e,t){if(n.Ra.set("Online"),e instanceof t1&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const h of a.targetIds)s.Ia.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ia.delete(h),s.Va.removeTarget(h))})(n,e)}catch(r){Z(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uf(n,r)}else if(e instanceof uf?n.Va.Ze(e):e instanceof e1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const r=await k1(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(p);g&&a.Ia.set(p,g.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,p)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(Tt.EMPTY_BYTE_STRING,g.snapshotVersion)),z1(a,f);const w=new Ps(g.target,f,p,g.sequenceNumber);z_(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){Z(Xo,"Failed to raise snapshot:",r),await Uf(n,r)}}async function Uf(n,e,t){if(!Wi(e))throw e;n.Ea.add(1),await Kl(n),n.Ra.set("Offline"),t||(t=()=>k1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Z(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ph(n)}))}function $1(n,e){return e().catch((t=>Uf(n,t,e)))}async function Ql(n){const e=ue(n),t=Fi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xi;for(;LL(e);)try{const s=await _L(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,ML(e,s)}catch(s){await Uf(e,s)}W1(e)&&H1(e)}function LL(n){return Gi(n)&&n.Ta.length<10}function ML(n,e){n.Ta.push(e);const t=Fi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function W1(n){return Gi(n)&&!Fi(n).x_()&&n.Ta.length>0}function H1(n){Fi(n).start()}async function FL(n){Fi(n).ra()}async function jL(n){const e=Fi(n);for(const t of n.Ta)e.ea(t.mutations)}async function UL(n,e,t){const r=n.Ta.shift(),s=P_.from(r,e,t);await $1(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ql(n)}async function BL(n,e){e&&Fi(n).X_&&await(async function(r,s){if((function(l){return YA(l)&&l!==W.ABORTED})(s.code)){const a=r.Ta.shift();Fi(r).B_(),await $1(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Ql(r)}})(n,e),W1(n)&&H1(n)}async function kT(n,e){const t=ue(n);t.asyncQueue.verifyOperationInProgress(),Z(Xo,"RemoteStore received new credentials");const r=Gi(t);t.Ea.add(3),await Kl(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ph(t)}async function yy(n,e){const t=ue(n);e?(t.Ea.delete(2),await ph(t)):e||(t.Ea.add(2),await Kl(t),t.Ra.set("Unknown"))}function Jl(n){return n.ma||(n.ma=(function(t,r,s){const a=ue(t);return a.sa(),new RL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:NL.bind(null,n),t_:DL.bind(null,n),r_:VL.bind(null,n),H_:OL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$_(n)?q_(n):n.Ra.set("Unknown")):(await n.ma.stop(),q1(n))}))),n.ma}function Fi(n){return n.fa||(n.fa=(function(t,r,s){const a=ue(t);return a.sa(),new PL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:FL.bind(null,n),r_:BL.bind(null,n),ta:jL.bind(null,n),na:UL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ql(n)):(await n.fa.stop(),n.Ta.length>0&&(Z(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class W_{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new W_(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yl(n,e){if(bt("AsyncQueue",`${e}: ${n}`),Wi(n))return new Y(W.UNAVAILABLE,`${e}: ${n}`);throw n}class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NT{constructor(){this.ga=new it(le.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Vl{constructor(e,t,r,s,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new Vl(e,t,pl.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class zL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qL{constructor(){this.queries=DT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=ue(t),a=s.queries;s.queries=DT(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new Y(W.ABORTED,"Firestore shutting down"))}}function DT(){return new Ms((n=>MA(n)),lh)}async function H_(n,e){const t=ue(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new zL,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=Yl(l,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&K_(t)}async function G_(n,e){const t=ue(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $L(n,e){const t=ue(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(s)&&(r=!0);l.wa=s}}r&&K_(t)}function WL(n,e,t){const r=ue(n),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);r.queries.delete(e)}function K_(n){n.Ca.forEach((e=>{e.next()}))}var _y,VT;(VT=_y||(_y={})).Ma="default",VT.Cache="cache";class Q_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_y.Cache}}class HL{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class OT{constructor(e){this.serializer=e}$s(e){return rs(this.serializer,e)}Us(e){return e.metadata.exists?a1(this.serializer,e.document,!1):ut.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ct(e)}}class GL{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=G1(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=Fe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new OT(this.serializer);for(const s of e)if(s.metadata.queries){const a=r.$s(s.metadata.name);for(const l of s.metadata.queries){const h=(t.get(l)||Ve()).add(a);t.set(l,h)}}return t}async ja(e){const t=await vL(e,new OT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await wL(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function G1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class K1{constructor(e){this.key=e}}class Q1{constructor(e){this.key=e}}class J1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ve(),this.mutatedKeys=Ve(),this.eu=jA(e),this.tu=new pl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new NT,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,w)=>{const I=s.get(g),C=uh(this.query,w)?w:null,k=!!I&&this.mutatedKeys.has(I.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let D=!1;I&&C?I.data.isEqual(C.data)?k!==F&&(r.track({type:3,doc:C}),D=!0):this.su(I,C)||(r.track({type:2,doc:C}),D=!0,(f&&this.eu(C,f)>0||p&&this.eu(C,p)<0)&&(h=!0)):!I&&C?(r.track({type:0,doc:C}),D=!0):I&&!C&&(r.track({type:1,doc:I}),D=!0,(f||p)&&(h=!0)),D&&(C?(l=l.add(C),a=F?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,w)=>(function(C,k){const F=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:D})}};return F(C)-F(k)})(g.type,w.type)||this.eu(g.doc,w.doc))),this.ou(r),s=s??!1;const h=t&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,p=f!==this.Za;return this.Za=f,l.length!==0||p?{snapshot:new Vl(this.query,e.tu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Q1(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new K1(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ve();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ki="SyncEngine";class KL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QL{constructor(e){this.key=e,this.hu=!1}}class JL{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ms((h=>MA(h)),lh),this.Iu=new Map,this.Eu=new Set,this.du=new it(le.comparator),this.Au=new Map,this.Ru=new V_,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YL(n,e,t=!0){const r=wp(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Y1(r,e,t,!0),s}async function XL(n,e){const t=wp(n);await Y1(t,e,!0,!1)}async function Y1(n,e,t,r){const s=await kl(n.localStore,En(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await J_(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&vp(n.remoteStore,s),h}async function J_(n,e,t,r,s){n.pu=(w,I,C)=>(async function(F,D,Q,se){let ie=D.view.ru(Q);ie.Cs&&(ie=await Mf(F.localStore,D.query,!1).then((({documents:b})=>D.view.ru(b,ie))));const pe=se&&se.targetChanges.get(D.targetId),ve=se&&se.targetMismatches.get(D.targetId)!=null,K=D.view.applyChanges(ie,F.isPrimaryClient,pe,ve);return vy(F,D.targetId,K.au),K.snapshot})(n,w,I,C);const a=await Mf(n.localStore,e,!0),l=new J1(e,a.Qs),h=l.ru(a.documents),f=dh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(h,n.isPrimaryClient,f);vy(n,t,p.au);const g=new KL(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function ZL(n,e,t){const r=ue(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!lh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Nl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Dl(r.remoteStore,s.targetId),Ol(r,s.targetId)})).catch($i)):(Ol(r,s.targetId),await Nl(r.localStore,s.targetId,!0))}async function e4(n,e){const t=ue(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(t.remoteStore,r.targetId))}async function t4(n,e,t){const r=ev(n);try{const s=await(function(l,h){const f=ue(l),p=Ye.now(),g=h.reduce(((C,k)=>C.add(k.key)),Ve());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let k=Dn(),F=Ve();return f.Ns.getEntries(C,g).next((D=>{k=D,k.forEach(((Q,se)=>{se.isValidDocument()||(F=F.add(Q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,k))).next((D=>{w=D;const Q=[];for(const se of h){const ie=TO(se,w.get(se.key).overlayedDocument);ie!=null&&Q.push(new Fs(se.key,ie,xA(ie.value.mapValue),mt.exists(!0)))}return f.mutationQueue.addMutationBatch(C,p,Q,h)})).next((D=>{I=D;const Q=D.applyToLocalDocumentSet(w,F);return f.documentOverlayCache.saveOverlays(C,D.batchId,Q)}))})).then((()=>({batchId:I.batchId,changes:BA(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,h,f){let p=l.Vu[l.currentUser.toKey()];p||(p=new it(ke)),p=p.insert(h,f),l.Vu[l.currentUser.toKey()]=p})(r,s.batchId,t),await js(r,s.changes),await Ql(r.remoteStore)}catch(s){const a=Yl(s,"Failed to persist write");t.reject(a)}}async function X1(n,e){const t=ue(n);try{const r=await yL(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?ye(l.hu,14607):s.removedDocuments.size>0&&(ye(l.hu,42227),l.hu=!1))})),await js(t,r,e)}catch(r){await $i(r)}}function LT(n,e,t){const r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)})),(function(l,h){const f=ue(l);f.onlineState=h;let p=!1;f.queries.forEach(((g,w)=>{for(const I of w.Sa)I.va(h)&&(p=!0)})),p&&K_(f)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function n4(n,e,t){const r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new it(le.comparator);l=l.insert(a,ut.newNoDocument(a,Ee.min()));const h=Ve().add(a),f=new hh(Ee.min(),new Map,new it(ke),l,h);await X1(r,f),r.du=r.du.remove(a),r.Au.delete(e),Z_(r)}else await Nl(r.localStore,e,!1).then((()=>Ol(r,e,t))).catch($i)}async function r4(n,e){const t=ue(n),r=e.batch.batchId;try{const s=await gL(t.localStore,e);X_(t,r,null),Y_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await js(t,s)}catch(s){await $i(s)}}async function s4(n,e,t){const r=ue(n);try{const s=await(function(l,h){const f=ue(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return f.mutationQueue.lookupMutationBatch(p,h).next((w=>(ye(w!==null,37113),g=w.keys(),f.mutationQueue.removeMutationBatch(p,w)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>f.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);X_(r,e,t),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await js(r,s)}catch(s){await $i(s)}}async function i4(n,e){const t=ue(n);Gi(t.remoteStore)||Z(Ki,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const h=ue(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>h.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(r===xi)return void e.resolve();const s=t.mu.get(r)||[];s.push(e),t.mu.set(r,s)}catch(r){const s=Yl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Y_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function X_(n,e,t){const r=ue(n);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ol(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||Z1(n,r)}))}function Z1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Dl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Z_(n))}function vy(n,e,t){for(const r of t)r instanceof K1?(n.Ru.addReference(r.key,e),o4(n,r)):r instanceof Q1?(Z(Ki,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Z1(n,r.key)):he(19791,{wu:r})}function o4(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Z(Ki,"New document in limbo: "+t),n.Eu.add(r),Z_(n))}function Z_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new le(Fe.fromString(e)),r=n.fu.next();n.Au.set(r,new QL(t)),n.du=n.du.insert(t,r),vp(n.remoteStore,new Ps(En(Wl(t.path)),r,"TargetPurposeLimboResolution",kn.ce))}}async function js(n,e,t){const r=ue(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{l.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(p){s.push(p);const g=F_.As(f.targetId,p);a.push(g)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(f,p){const g=ue(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>U.forEach(p,(I=>U.forEach(I.Es,(C=>g.persistence.referenceDelegate.addReference(w,I.targetId,C))).next((()=>U.forEach(I.ds,(C=>g.persistence.referenceDelegate.removeReference(w,I.targetId,C)))))))))}catch(w){if(!Wi(w))throw w;Z(j_,"Failed to update sequence numbers: "+w)}for(const w of p){const I=w.targetId;if(!w.fromCache){const C=g.Ms.get(I),k=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(I,F)}}})(r.localStore,a))}async function a4(n,e){const t=ue(n);if(!t.currentUser.isEqual(e)){Z(Ki,"User change. New user:",e.toKey());const r=await C1(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new Y(W.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await js(t,r.Ls)}}function l4(n,e){const t=ue(n),r=t.Au.get(e);if(r&&r.hu)return Ve().add(r.key);{let s=Ve();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const h=t.Tu.get(l);s=s.unionWith(h.view.nu)}return s}}async function u4(n,e){const t=ue(n),r=await Mf(t.localStore,e.query,!0),s=e.view.cu(r);return t.isPrimaryClient&&vy(t,e.targetId,s.au),s}async function c4(n,e){const t=ue(n);return V1(t.localStore,e).then((r=>js(t,r)))}async function h4(n,e,t,r){const s=ue(n),a=await(function(h,f){const p=ue(h),g=ue(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(w=>g.er(w,f).next((I=>I?p.localDocuments.getDocuments(w,I):U.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await Ql(s.remoteStore):t==="acknowledged"||t==="rejected"?(X_(s,e,r||null),Y_(s,e),(function(h,f){ue(ue(h).mutationQueue).ir(f)})(s.localStore,e)):he(6720,"Unknown batchState",{Su:t}),await js(s,a)):Z(Ki,"Cannot apply mutation batch with id: "+e)}async function d4(n,e){const t=ue(n);if(wp(t),ev(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await MT(t,r.toArray());t.gu=!0,await yy(t.remoteStore,!0);for(const a of s)vp(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const r=[];let s=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then((()=>(Ol(t,l),Nl(t.localStore,l,!0)))),Dl(t.remoteStore,l)})),await s,await MT(t,r),(function(l){const h=ue(l);h.Au.forEach(((f,p)=>{Dl(h.remoteStore,p)})),h.Ru.Jr(),h.Au=new Map,h.du=new it(le.comparator)})(t),t.gu=!1,await yy(t.remoteStore,!1)}}async function MT(n,e,t){const r=ue(n),s=[],a=[];for(const l of e){let h;const f=r.Iu.get(l);if(f&&f.length!==0){h=await kl(r.localStore,En(f[0]));for(const p of f){const g=r.Tu.get(p),w=await u4(r,g);w.snapshot&&a.push(w.snapshot)}}else{const p=await D1(r.localStore,l);h=await kl(r.localStore,p),await J_(r,eR(p),l,!1,h.resumeToken)}s.push(h)}return r.Pu.H_(a),s}function eR(n){return LA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function f4(n){return(function(t){return ue(ue(t).persistence).Ts()})(ue(n).localStore)}async function p4(n,e,t,r){const s=ue(n);if(s.gu)return void Z(Ki,"Ignoring unexpected query state notification.");const a=s.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await V1(s.localStore,FA(a[0])),h=hh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);await js(s,l,h);break}case"rejected":await Nl(s.localStore,e,!0),Ol(s,e,r);break;default:he(64155,t)}}async function m4(n,e,t){const r=wp(n);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Z(Ki,"Adding an already active target "+s);continue}const a=await D1(r.localStore,s),l=await kl(r.localStore,a);await J_(r,eR(a),l.targetId,!1,l.resumeToken),vp(r.remoteStore,l)}for(const s of t)r.Iu.has(s)&&await Nl(r.localStore,s,!1).then((()=>{Dl(r.remoteStore,s),Ol(r,s)})).catch($i)}}function wp(n){const e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=X1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n4.bind(null,e),e.Pu.H_=$L.bind(null,e.eventManager),e.Pu.yu=WL.bind(null,e.eventManager),e}function ev(n){const e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s4.bind(null,e),e}function g4(n,e,t){const r=ue(n);(async function(a,l,h){try{const f=await l.getMetadata();if(await(function(C,k){const F=ue(C),D=Ct(k.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",(Q=>F.Ii.getBundleMetadata(Q,k.id))).then((Q=>!!Q&&Q.createTime.compareTo(D)>=0))})(a.localStore,f))return await l.close(),h._completeWith((function(C){return{taskState:"Success",documentsLoaded:C.totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}})(f)),Promise.resolve(new Set);h._updateProgress(G1(f));const p=new GL(f,l.serializer);let g=await l.bu();for(;g;){const I=await p.Ga(g);I&&h._updateProgress(I),g=await l.bu()}const w=await p.ja(a.localStore);return await js(a,w.Ha,void 0),await(function(C,k){const F=ue(C);return F.persistence.runTransaction("Save bundle","readwrite",(D=>F.Ii.saveBundleMetadata(D,k)))})(a.localStore,f),h._completeWith(w.progress),Promise.resolve(w.Ja)}catch(f){return os(Ki,`Loading bundle failed with ${f}`),h._failWith(f),Promise.resolve(new Set)}})(r,e,t).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return b1(this.persistence,new x1,e.initialUser,this.serializer)}Cu(e){return new O_(_p.mi,this.serializer)}Du(e){return new j1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class y4 extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ye(this.persistence.referenceDelegate instanceof Lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new O_((r=>Lf.mi(r,t)),this.serializer)}}class tR extends Hc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await ev(this.xu.syncEngine),await Ql(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return b1(this.persistence,new x1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new I1(r,e.asyncQueue,t)}Mu(e,t){const r=new RV(t,this.persistence);return new AV(e.asyncQueue,r)}Cu(e){const t=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new L_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,U1(),hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new j1}}class _4 extends tR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof bg&&(this.sharedClientState.syncEngine={Co:h4.bind(null,t),vo:p4.bind(null,t),Fo:m4.bind(null,t),Ts:f4.bind(null,t),Do:c4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await d4(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=U1();if(!bg.v(t))throw new Y(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=M_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=a4.bind(null,this.syncEngine),await yy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qL})()}createDatastore(e){const t=fh(e.databaseInfo.databaseId),r=(function(a){return new AL(a)})(e.databaseInfo);return(function(a,l,h,f){return new bL(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,h){return new kL(r,s,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>LT(this.syncEngine,t,0)),(function(){return bT.v()?new bT:new EL})())}createSyncEngine(e,t){return(function(s,a,l,h,f,p,g){const w=new JL(s,a,l,h,f,p);return g&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ue(t);Z(Xo,"RemoteStore shutting down."),r.Ea.add(5),await Kl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gc.provider={build:()=>new Gc};function FT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Ep{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class v4{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new nn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const s=await this.$u(r);return new HL(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class w4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Y(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const l=ue(s),h={documents:a.map((w=>$c(l.serializer,w)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,Fe.emptyPath(),h,a.length),p=new Map;f.forEach((w=>{const I=NO(l.serializer,w);p.set(I.key.toString(),I)}));const g=[];return a.forEach((w=>{const I=p.get(w.toString());ye(!!I,55234,{key:w}),g.push(I)})),g})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const s=le.fromPath(r);this.mutations.push(new A_(s,this.precondition(s)))})),await(async function(r,s){const a=ue(r),l={writes:s.map((h=>Wc(a.serializer,h)))};await a.Go("Commit",a.serializer.databaseId,Fe.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Gu:e.constructor.name});t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Y(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?mt.exists(!1):mt.updateTime(t):mt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new Y(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(t)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class E4{constructor(e,t,r,s,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=a,this.zu=r.maxAttempts,this.M_=new B_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new w4(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ih(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!YA(t)}return!1}}const ji="FirestoreClient";class I4{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Gt.UNAUTHENTICATED,this.clientId=h_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Z(ji,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Z(ji,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kg(n,e){n.asyncQueue.verifyOperationInProgress(),Z(ji,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await C1(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function jT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await tv(n);Z(ji,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>kT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>kT(e.remoteStore,s))),n._onlineComponents=e}async function tv(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Z(ji,"Using user provided OfflineComponentProvider");try{await kg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;os("Error using user provided cache. Falling back to memory cache: "+t),await kg(n,new Hc)}}else Z(ji,"Using default OfflineComponentProvider"),await kg(n,new y4(void 0));return n._offlineComponents}async function Ip(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Z(ji,"Using user provided OnlineComponentProvider"),await jT(n,n._uninitializedComponentsProvider._online)):(Z(ji,"Using default OnlineComponentProvider"),await jT(n,new Gc))),n._onlineComponents}function nR(n){return tv(n).then((e=>e.persistence))}function nv(n){return tv(n).then((e=>e.localStore))}function rR(n){return Ip(n).then((e=>e.remoteStore))}function rv(n){return Ip(n).then((e=>e.syncEngine))}function T4(n){return Ip(n).then((e=>e.datastore))}async function Ll(n){const e=await Ip(n),t=e.eventManager;return t.onListen=YL.bind(null,e.syncEngine),t.onUnlisten=ZL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=e4.bind(null,e.syncEngine),t}function S4(n){return n.asyncQueue.enqueue((async()=>{const e=await nR(n),t=await rR(n);return e.setNetworkEnabled(!0),(function(s){const a=ue(s);return a.Ea.delete(0),ph(a)})(t)}))}function A4(n){return n.asyncQueue.enqueue((async()=>{const e=await nR(n),t=await rR(n);return e.setNetworkEnabled(!1),(async function(s){const a=ue(s);a.Ea.add(0),await Kl(a),a.Ra.set("Offline")})(t)}))}function R4(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,l){try{const h=await(function(p,g){const w=ue(p);return w.persistence.runTransaction("read document","readonly",(I=>w.localDocuments.getDocument(I,g)))})(s,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Y(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const f=Yl(h,`Failed to get document '${a} from cache`);l.reject(f)}})(await nv(n),e,t))),t.promise}function sR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const g=new Ep({next:I=>{g.Nu(),l.enqueueAndForget((()=>G_(a,w)));const C=I.docs.has(h);!C&&I.fromCache?p.reject(new Y(W.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&I.fromCache&&f&&f.source==="server"?p.reject(new Y(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new Q_(Wl(h.path),g,{includeMetadataChanges:!0,qa:!0});return H_(a,w)})(await Ll(n),n.asyncQueue,e,t,r))),r.promise}function P4(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,l){try{const h=await Mf(s,a,!0),f=new J1(a,h.Qs),p=f.ru(h.documents),g=f.applyChanges(p,!1);l.resolve(g.snapshot)}catch(h){const f=Yl(h,`Failed to execute query '${a} against cache`);l.reject(f)}})(await nv(n),e,t))),t.promise}function iR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const g=new Ep({next:I=>{g.Nu(),l.enqueueAndForget((()=>G_(a,w))),I.fromCache&&f.source==="server"?p.reject(new Y(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),w=new Q_(h,g,{includeMetadataChanges:!0,qa:!0});return H_(a,w)})(await Ll(n),n.asyncQueue,e,t,r))),r.promise}function x4(n,e){const t=new Ep(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,a){ue(s).Ca.add(a),a.next()})(await Ll(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,a){ue(s).Ca.delete(a)})(await Ll(n),t)))}}function b4(n,e,t,r){const s=(function(l,h){let f;return f=typeof l=="string"?ZA().encode(l):l,(function(g,w){return new v4(g,w)})((function(g,w){if(g instanceof Uint8Array)return FT(g,w);if(g instanceof ArrayBuffer)return FT(new Uint8Array(g),w);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),h)})(t,fh(e));n.asyncQueue.enqueueAndForget((async()=>{g4(await rv(n),s,r)}))}function C4(n,e){return n.asyncQueue.enqueue((async()=>(function(r,s){const a=ue(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Ii.getNamedQuery(l,s)))})(await nv(n),e)))}function oR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const UT=new Map;const aR="firestore.googleapis.com",BT=!0;class zT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aR,this.ssl=BT}else this.host=e.host,this.ssl=e.ssl??BT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YO)throw new Y(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fV;switch(r.type){case"firstParty":return new yV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=UT.get(t);r&&(Z("ComponentProvider","Removing Datastore"),UT.delete(t),r.terminate())})(this),Promise.resolve()}}function k4(n,e,t,r={}){n=Ke(n,mh);const s=Bi(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;s&&(Ly(`https://${h}`),My("Firestore",!0)),a.host!==aR&&a.host!==h&&os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:s,emulatorOptions:r};if(!Ci(f,l)&&(n._setSettings(f),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Gt.MOCK_USER;else{p=Cb(r.mockUserToken,n._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Y(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gt(w)}n._authCredentials=new pV(new XS(p,g))}}let In=class lR{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lR(this.firestore,e,this._query)}},st=class dc{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dc(this.firestore,e,this._key)}toJSON(){return{type:dc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sh(t,dc._jsonSchema))return new dc(e,r||null,new le(Fe.fromString(t.referencePath)))}};st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:Ft("string",st._jsonSchemaVersion),referencePath:Ft("string")};let bi=class uR extends In{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new le(e))}withConverter(e){return new uR(this.firestore,e,this._path)}};function cR(n,e,...t){if(n=Te(n),d_("collection","path",e),n instanceof mh){const r=Fe.fromString(e,...t);return CI(r),new bi(n,null,r)}{if(!(n instanceof st||n instanceof bi))throw new Y(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return CI(r),new bi(n.firestore,null,r)}}function N4(n,e){if(n=Ke(n,mh),d_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Y(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new In(n,null,(function(r){return new Ls(Fe.emptyPath(),r)})(e))}function Bf(n,e,...t){if(n=Te(n),arguments.length===1&&(e=h_.newId()),d_("doc","path",e),n instanceof mh){const r=Fe.fromString(e,...t);return bI(r),new st(n,null,new le(r))}{if(!(n instanceof st||n instanceof bi))throw new Y(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return bI(r),new st(n.firestore,n instanceof bi?n.converter:null,new le(r))}}function hR(n,e){return n=Te(n),e=Te(e),(n instanceof st||n instanceof bi)&&(e instanceof st||e instanceof bi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dR(n,e){return n=Te(n),e=Te(e),n instanceof In&&e instanceof In&&n.firestore===e.firestore&&lh(n._query,e._query)&&n.converter===e.converter}const qT="AsyncQueue";class $T{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B_(this,"async_queue_retry"),this._c=()=>{const r=hf();r&&Z(qT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new nn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wi(e))throw e;Z(qT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",WT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=W_.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&he(47125,{Pc:WT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function wy(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class D4{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const V4=-1;let kt=class extends mh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new $T,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $T(e),this._firestoreClient=void 0,await e}}};function mn(n){if(n._terminated)throw new Y(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||fR(n),n._firestoreClient}function fR(n){const e=n._freezeSettings(),t=(function(s,a,l,h){return new tO(s,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new I4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(n._componentsProvider))}function O4(n,e){os("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return pR(n,Gc.provider,{build:r=>new tR(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function L4(n){os("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();pR(n,Gc.provider,{build:t=>new _4(t,e.cacheSizeBytes)})}function pR(n,e,t){if((n=Ke(n,kt))._firestoreClient||n._terminated)throw new Y(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Y(W.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},fR(n)}function M4(n){if(n._initialized&&!n._terminated)throw new Y(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!ns.v())return Promise.resolve();const s=r+P1;await ns.delete(s)})(M_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function F4(n){return(function(t){const r=new nn;return t.asyncQueue.enqueueAndForget((async()=>i4(await rv(t),r))),r.promise})(mn(n=Ke(n,kt)))}function j4(n){return S4(mn(n=Ke(n,kt)))}function U4(n){return A4(mn(n=Ke(n,kt)))}function B4(n,e){const t=mn(n=Ke(n,kt)),r=new D4;return b4(t,n._databaseId,e,r),r}function z4(n,e){return C4(mn(n=Ke(n,kt)),e).then((t=>t?new In(n,null,t.query):null))}class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(Tt.fromBase64String(e))}catch(t){throw new Y(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dn(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sh(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:Ft("string",dn._jsonSchemaVersion),bytes:Ft("string")};let Ui=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let ra=class{constructor(e){this._methodName=e}};class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(sh(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:Ft("string",Tr._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class ss{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sh(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ss(e.vectorValues);throw new Y(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:Ft("string",ss._jsonSchemaVersion),vectorValues:Ft("object")};const q4=/^__.*__$/;class $4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hl(e,this.data,t,this.fieldTransforms)}}class mR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:n})}}class Tp{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gR(this.Ac)&&q4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fh(e)}Cc(e,t,r,s=!1){return new Tp({Ac:e,methodName:t,Dc:r,path:pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sa(n){const e=n._freezeSettings(),t=fh(n._databaseId);return new W4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Sp(n,e,t,r,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,s);cv("Data must be an object, but it was:",l,r);const h=vR(r,l);let f,p;if(a.merge)f=new Nn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const w of a.mergeFields){const I=Ey(e,w,t);if(!l.contains(I))throw new Y(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);ER(g,I)||g.push(I)}f=new Nn(g),p=l.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,p=l.fieldTransforms;return new $4(new tn(h),f,p)}class gh extends ra{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function yR(n,e,t){return new Tp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sv extends ra{_toFieldTransform(e){return new ch(e.path,new xl)}isEqual(e){return e instanceof sv}}class iv extends ra{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=yR(this,e,!0),r=this.vc.map((a=>ia(a,t))),s=new Go(r);return new ch(e.path,s)}isEqual(e){return e instanceof iv&&Ci(this.vc,e.vc)}}class ov extends ra{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=yR(this,e,!0),r=this.vc.map((a=>ia(a,t))),s=new Ko(r);return new ch(e.path,s)}isEqual(e){return e instanceof ov&&Ci(this.vc,e.vc)}}class av extends ra{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bl(e.serializer,$A(e.serializer,this.Fc));return new ch(e.path,t)}isEqual(e){return e instanceof av&&this.Fc===e.Fc}}function lv(n,e,t,r){const s=n.Cc(1,e,t);cv("Data must be an object, but it was:",s,r);const a=[],l=tn.empty();Hi(r,((f,p)=>{const g=hv(e,f,t);p=Te(p);const w=s.yc(g);if(p instanceof gh)a.push(g);else{const I=ia(p,w);I!=null&&(a.push(g),l.set(g,I))}}));const h=new Nn(a);return new mR(l,h,s.fieldTransforms)}function uv(n,e,t,r,s,a){const l=n.Cc(1,e,t),h=[Ey(e,r,t)],f=[s];if(a.length%2!=0)throw new Y(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(Ey(e,a[I])),f.push(a[I+1]);const p=[],g=tn.empty();for(let I=h.length-1;I>=0;--I)if(!ER(p,h[I])){const C=h[I];let k=f[I];k=Te(k);const F=l.yc(C);if(k instanceof gh)p.push(C);else{const D=ia(k,F);D!=null&&(p.push(C),g.set(C,D))}}const w=new Nn(p);return new mR(g,w,l.fieldTransforms)}function _R(n,e,t,r=!1){return ia(t,n.Cc(r?4:3,e))}function ia(n,e){if(wR(n=Te(n)))return cv("Unsupported field value:",e,n),vR(n,e);if(n instanceof ra)return(function(r,s){if(!gR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const h of r){let f=ia(h,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $A(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ye.fromDate(r);return{timestampValue:Cl(s.serializer,a)}}if(r instanceof Ye){const a=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cl(s.serializer,a)}}if(r instanceof Tr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:n1(s.serializer,r._byteString)};if(r instanceof st){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:C_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ss)return(function(l,h){return{mapValue:{fields:{[v_]:{stringValue:w_},[Al]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return S_(h.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${op(r)}`)})(n,e)}function vR(n,e){const t={};return vA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(n,((r,s)=>{const a=ia(s,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function wR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof Tr||n instanceof dn||n instanceof st||n instanceof ra||n instanceof ss)}function cv(n,e,t){if(!wR(t)||!tA(t)){const r=op(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ey(n,e,t){if((e=Te(e))instanceof Ui)return e._internalPath;if(typeof e=="string")return hv(n,e);throw zf("Field path arguments must be of type string or ",n,!1,void 0,t)}const H4=new RegExp("[~\\*/\\[\\]]");function hv(n,e,t){if(e.search(H4)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ui(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zf(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new Y(W.INVALID_ARGUMENT,h+n+f)}function ER(n,e){return n.some((t=>t.isEqual(e)))}class Kc{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class G4 extends Kc{data(){return super.data()}}function Ap(n,e){return typeof e=="string"?hv(n,e):e instanceof Ui?e._internalPath:e._delegate._internalPath}function IR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dv{}class yh extends dv{}function wi(n,e,...t){let r=[];e instanceof dv&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof fv)).length,h=a.filter((f=>f instanceof Rp)).length;if(l>1||l>0&&h>0)throw new Y(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Rp extends yh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){const t=this._parse(e);return SR(e._query,t),new In(e.firestore,e.converter,ay(e._query,t))}_parse(e){const t=sa(e.firestore);return(function(a,l,h,f,p,g,w){let I;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new Y(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){GT(w,g);const k=[];for(const F of w)k.push(HT(f,a,F));I={arrayValue:{values:k}}}else I=HT(f,a,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||GT(w,g),I=_R(h,l,w,g==="in"||g==="not-in");return Be.create(p,g,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function K4(n,e,t){const r=e,s=Ap("where",n);return Rp._create(s,r,t)}class fv extends dv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ze.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const h=a.getFlattenedFilters();for(const f of h)SR(l,f),l=ay(l,f)})(e._query,t),new In(e.firestore,e.converter,ay(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pv extends yh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pv(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new Y(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qc(a,l)})(e._query,this._field,this._direction);return new In(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Ls(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Q4(n,e="asc"){const t=e,r=Ap("orderBy",n);return pv._create(r,t)}class Pp extends yh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){return new In(e.firestore,e.converter,Nf(e._query,this._limit,this._limitType))}}function J4(n){return nA("limit",n),Pp._create("limit",n,"F")}function Y4(n){return nA("limitToLast",n),Pp._create("limitToLast",n,"L")}class xp extends yh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xp(e,t,r)}_apply(e){const t=TR(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(s,a){return new Ls(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)})(e._query,t))}}function X4(...n){return xp._create("startAt",n,!0)}function Z4(...n){return xp._create("startAfter",n,!1)}class bp extends yh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new bp(e,t,r)}_apply(e){const t=TR(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(s,a){return new Ls(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)})(e._query,t))}}function eM(...n){return bp._create("endBefore",n,!1)}function tM(...n){return bp._create("endAt",n,!0)}function TR(n,e,t,r){if(t[0]=Te(t[0]),t[0]instanceof Kc)return(function(a,l,h,f,p){if(!f)throw new Y(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const g=[];for(const w of fl(a))if(w.field.isKeyField())g.push(Wo(l,f.key));else{const I=f.data.field(w.field);if(hp(I))throw new Y(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const C=w.field.canonicalString();throw new Y(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}g.push(I)}return new Mi(g,p)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=sa(n.firestore);return(function(l,h,f,p,g,w){const I=l.explicitOrderBy;if(g.length>I.length)throw new Y(W.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let k=0;k<g.length;k++){const F=g[k];if(I[k].field.isKeyField()){if(typeof F!="string")throw new Y(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof F}`);if(!I_(l)&&F.indexOf("/")!==-1)throw new Y(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${F}' contains a slash.`);const D=l.path.child(Fe.fromString(F));if(!le.isDocumentKey(D))throw new Y(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const Q=new le(D);C.push(Wo(h,Q))}else{const D=_R(f,p,F);C.push(D)}}return new Mi(C,w)})(n._query,n.firestore._databaseId,s,e,t,r)}}function HT(n,e,t){if(typeof(t=Te(t))=="string"){if(t==="")throw new Y(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I_(e)&&t.indexOf("/")!==-1)throw new Y(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Fe.fromString(t));if(!le.isDocumentKey(r))throw new Y(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wo(n,new le(r))}if(t instanceof st)return Wo(n,t._key);throw new Y(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(t)}.`)}function GT(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SR(n,e){const t=(function(s,a){for(const l of s)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Y(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class mv{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hi(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Al].arrayValue?.values?.map((r=>ft(r.doubleValue)));return new ss(t)}convertGeoPoint(e){return new Tr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fe.fromString(e);ye(f1(r),9688,{name:e});const s=new Vi(r.get(1),r.get(3)),a=new le(r.popFirst(5));return s.isEqual(t)||bt(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Cp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nM extends mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,t)}}class Vo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ar=class AR extends Kc{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ap("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=AR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",ar._jsonSchema={type:Ft("string",ar._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};let Pc=class extends ar{data(e={}){return super.data(e)}},Sr=class RR{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Pc(this._firestore,this._userDataWriter,r.key,r,new Vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((h=>{const f=new Pc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Pc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Vo(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:rM(h.type),doc:f,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=RR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=h_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function rM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function PR(n,e){return n instanceof ar&&e instanceof ar?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sr&&e instanceof Sr&&n._firestore===e._firestore&&dR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sM(n){n=Ke(n,st);const e=Ke(n.firestore,kt);return sR(mn(e),n._key).then((t=>gv(e,n,t)))}Sr._jsonSchemaVersion="firestore/querySnapshot/1.0",Sr._jsonSchema={type:Ft("string",Sr._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class oa extends mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,t)}}function iM(n){n=Ke(n,st);const e=Ke(n.firestore,kt),t=mn(e),r=new oa(e);return R4(t,n._key).then((s=>new ar(e,r,n._key,s,new Vo(s!==null&&s.hasLocalMutations,!0),n.converter)))}function oM(n){n=Ke(n,st);const e=Ke(n.firestore,kt);return sR(mn(e),n._key,{source:"server"}).then((t=>gv(e,n,t)))}function aM(n){n=Ke(n,In);const e=Ke(n.firestore,kt),t=mn(e),r=new oa(e);return IR(n._query),iR(t,n._query).then((s=>new Sr(e,r,n,s)))}function lM(n){n=Ke(n,In);const e=Ke(n.firestore,kt),t=mn(e),r=new oa(e);return P4(t,n._query).then((s=>new Sr(e,r,n,s)))}function uM(n){n=Ke(n,In);const e=Ke(n.firestore,kt),t=mn(e),r=new oa(e);return iR(t,n._query,{source:"server"}).then((s=>new Sr(e,r,n,s)))}function KT(n,e,t){n=Ke(n,st);const r=Ke(n.firestore,kt),s=Cp(n.converter,e,t);return _h(r,[Sp(sa(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,mt.none())])}function QT(n,e,t,...r){n=Ke(n,st);const s=Ke(n.firestore,kt),a=sa(s);let l;return l=typeof(e=Te(e))=="string"||e instanceof Ui?uv(a,"updateDoc",n._key,e,t,r):lv(a,"updateDoc",n._key,e),_h(s,[l.toMutation(n._key,mt.exists(!0))])}function cM(n){return _h(Ke(n.firestore,kt),[new Gl(n._key,mt.none())])}function hM(n,e){const t=Ke(n.firestore,kt),r=Bf(n),s=Cp(n.converter,e);return _h(t,[Sp(sa(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then((()=>r))}function xR(n,...e){n=Te(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||wy(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(wy(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,l,h;if(n instanceof st)l=Ke(n.firestore,kt),h=Wl(n._key.path),a={next:f=>{e[r]&&e[r](gv(l,n,f))},error:e[r+1],complete:e[r+2]};else{const f=Ke(n,In);l=Ke(f.firestore,kt),h=f._query;const p=new oa(l);a={next:g=>{e[r]&&e[r](new Sr(l,p,f,g))},error:e[r+1],complete:e[r+2]},IR(n._query)}return(function(p,g,w,I){const C=new Ep(I),k=new Q_(g,C,w);return p.asyncQueue.enqueueAndForget((async()=>H_(await Ll(p),k))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>G_(await Ll(p),k)))}})(mn(l),h,s,a)}function dM(n,e){return x4(mn(n=Ke(n,kt)),wy(e)?e:{next:e})}function _h(n,e){return(function(r,s){const a=new nn;return r.asyncQueue.enqueueAndForget((async()=>t4(await rv(r),s,a))),a.promise})(mn(n),e)}function gv(n,e,t){const r=t.docs.get(e._key),s=new oa(n);return new ar(n,s,e._key,r,new Vo(t.hasPendingWrites,t.fromCache),e.converter)}const fM={maxAttempts:5};let pM=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sa(e)}set(e,t,r){this._verifyNotCommitted();const s=Si(e,this._firestore),a=Cp(s.converter,t,r),l=Sp(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,mt.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=Si(e,this._firestore);let l;return l=typeof(t=Te(t))=="string"||t instanceof Ui?uv(this._dataReader,"WriteBatch.update",a._key,t,r,s):lv(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Si(e,this._firestore);return this._mutations=this._mutations.concat(new Gl(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Si(n,e){if((n=Te(n)).firestore!==e)throw new Y(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sa(e)}get(e){const t=Si(e,this._firestore),r=new nM(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return he(24041);const a=s[0];if(a.isFoundDocument())return new Kc(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Kc(this._firestore,r,t._key,null,t.converter);throw he(18433,{doc:a})}))}set(e,t,r){const s=Si(e,this._firestore),a=Cp(s.converter,t,r),l=Sp(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const a=Si(e,this._firestore);let l;return l=typeof(t=Te(t))=="string"||t instanceof Ui?uv(this._dataReader,"Transaction.update",a._key,t,r,s):lv(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Si(e,this._firestore);return this._transaction.delete(t._key),this}}let gM=class extends mM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Si(e,this._firestore),r=new oa(this._firestore);return super.get(e).then((s=>new ar(this._firestore,r,t._key,s._document,new Vo(!1,!1),t.converter)))}};function yM(n,e,t){n=Ke(n,kt);const r={...fM,...t};return(function(a){if(a.maxAttempts<1)throw new Y(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,l,h){const f=new nn;return a.asyncQueue.enqueueAndForget((async()=>{const p=await T4(a);new E4(a.asyncQueue,p,h,l,f).ju()})),f.promise})(mn(n),(s=>e(new gM(n,s))),r)}function _M(){return new gh("deleteField")}function vM(){return new sv("serverTimestamp")}function wM(...n){return new iv("arrayUnion",n)}function EM(...n){return new ov("arrayRemove",n)}function IM(n){return new av("increment",n)}(function(e,t=!0){(function(s){$l=s})(zi),Cs(new lr("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new kt(new mV(r.getProvider("auth-internal")),new _V(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Y(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(p.options.projectId,g)})(l,s),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Jn(AI,RI,e),Jn(AI,RI,"esm2020")})();const TM="@firebase/firestore-compat",SM="0.4.3";function yv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Y("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JT(){if(typeof Uint8Array>"u")throw new Y("unimplemented","Uint8Arrays are not available in this environment.")}function YT(){if(!ZV())throw new Y("unimplemented","Blobs are unavailable in Firestore in this environment.")}let bR=class Iy{constructor(e){this._delegate=e}static fromBase64String(e){return YT(),new Iy(dn.fromBase64String(e))}static fromUint8Array(e){return JT(),new Iy(dn.fromUint8Array(e))}toBase64(){return YT(),this._delegate.toBase64()}toUint8Array(){return JT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Ty(n){return AM(n,["next","error","complete"])}function AM(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class RM{enableIndexedDbPersistence(e,t){return O4(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return L4(e._delegate)}clearIndexedDbPersistence(e){return M4(e._delegate)}}class CR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){k4(this._delegate,e,t,r)}enableNetwork(){return j4(this._delegate)}disableNetwork(){return U4(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return F4(this._delegate)}onSnapshotsInSync(e){return dM(this._delegate,e)}get app(){if(!this._appCompat)throw new Y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ml(this,cR(this._delegate,e))}catch(t){throw wn(t,"collection()","Firestore.collection()")}}doc(e){try{return new or(this,Bf(this._delegate,e))}catch(t){throw wn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vn(this,N4(this._delegate,e))}catch(t){throw wn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return yM(this._delegate,t=>e(new kR(this,t)))}batch(){return mn(this._delegate),new NR(new pM(this._delegate,e=>_h(this._delegate,e)))}loadBundle(e){return B4(this._delegate,e)}namedQuery(e){return z4(this._delegate,e).then(t=>t?new vn(this,t):null)}}class kp extends mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new bR(new dn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return or.forKey(t,this.firestore,null)}}function PM(n){hV(n)}class kR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}get(e){const t=Oo(e);return this._delegate.get(t).then(r=>new Qc(this._firestore,new ar(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Oo(e);return r?(yv("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const a=Oo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...s),this}delete(e){const t=Oo(e);return this._delegate.delete(t),this}}class NR{constructor(e){this._delegate=e}set(e,t,r){const s=Oo(e);return r?(yv("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const a=Oo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...s),this}delete(e){const t=Oo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zo.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let a=s.get(t);return a||(a=new Zo(e,new kp(e),t),s.set(t,a)),a}}Zo.INSTANCES=new WeakMap;class or{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new or(t,new st(t._delegate,r,new le(e)))}static forKey(e,t,r){return new or(t,new st(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ml(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ml(this.firestore,cR(this._delegate,e))}catch(t){throw wn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Te(e),e instanceof st?hR(this._delegate,e):!1}set(e,t){t=yv("DocumentReference.set",t);try{return t?KT(this._delegate,e,t):KT(this._delegate,e)}catch(r){throw wn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?QT(this._delegate,e):QT(this._delegate,e,t,...r)}catch(s){throw wn(s,"updateDoc()","DocumentReference.update()")}}delete(){return cM(this._delegate)}onSnapshot(...e){const t=DR(e),r=VR(e,s=>new Qc(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return xR(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=iM(this._delegate):e?.source==="server"?t=oM(this._delegate):t=sM(this._delegate),t.then(r=>new Qc(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new or(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wn(n,e,t){return n.message=n.message.replace(e,t),n}function DR(n){for(const e of n)if(typeof e=="object"&&!Ty(e))return e;return{}}function VR(n,e){let t;return Ty(n[0])?t=n[0]:Ty(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Qc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PR(this._delegate,e._delegate)}}class Jc extends Qc{data(e){const t=this._delegate.data(e);return this._delegate._converter||dV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class vn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}where(e,t,r){try{return new vn(this.firestore,wi(this._delegate,K4(e,t,r)))}catch(s){throw wn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vn(this.firestore,wi(this._delegate,Q4(e,t)))}catch(r){throw wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vn(this.firestore,wi(this._delegate,J4(e)))}catch(t){throw wn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vn(this.firestore,wi(this._delegate,Y4(e)))}catch(t){throw wn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vn(this.firestore,wi(this._delegate,X4(...e)))}catch(t){throw wn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vn(this.firestore,wi(this._delegate,Z4(...e)))}catch(t){throw wn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vn(this.firestore,wi(this._delegate,eM(...e)))}catch(t){throw wn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vn(this.firestore,wi(this._delegate,tM(...e)))}catch(t){throw wn(t,"endAt()","Query.endAt()")}}isEqual(e){return dR(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=lM(this._delegate):e?.source==="server"?t=uM(this._delegate):t=aM(this._delegate),t.then(r=>new Sy(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=DR(e),r=VR(e,s=>new Sy(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return xR(this._delegate,t,r)}withConverter(e){return new vn(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class xM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Sy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new xM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jc(this._firestore,r))})}isEqual(e){return PR(this._delegate,e._delegate)}}class Ml extends vn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new or(this.firestore,e):null}doc(e){try{return e===void 0?new or(this.firestore,Bf(this._delegate)):new or(this.firestore,Bf(this._delegate,e))}catch(t){throw wn(t,"doc()","CollectionReference.doc()")}}add(e){return hM(this._delegate,e).then(t=>new or(this.firestore,t))}isEqual(e){return hR(this._delegate,e._delegate)}withConverter(e){return new Ml(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Oo(n){return Ke(n,st)}class _v{constructor(...e){this._delegate=new Ui(...e)}static documentId(){return new _v(pt.keyField().canonicalString())}isEqual(e){return e=Te(e),e instanceof Ui?this._delegate._internalPath.isEqual(e._internalPath):!1}}class ko{static serverTimestamp(){const e=vM();return e._methodName="FieldValue.serverTimestamp",new ko(e)}static delete(){const e=_M();return e._methodName="FieldValue.delete",new ko(e)}static arrayUnion(...e){const t=wM(...e);return t._methodName="FieldValue.arrayUnion",new ko(t)}static arrayRemove(...e){const t=EM(...e);return t._methodName="FieldValue.arrayRemove",new ko(t)}static increment(e){const t=IM(e);return t._methodName="FieldValue.increment",new ko(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bM={Firestore:CR,GeoPoint:Tr,Timestamp:Ye,Blob:bR,Transaction:kR,WriteBatch:NR,DocumentReference:or,DocumentSnapshot:Qc,Query:vn,QueryDocumentSnapshot:Jc,QuerySnapshot:Sy,CollectionReference:Ml,FieldPath:_v,FieldValue:ko,setLogLevel:PM,CACHE_SIZE_UNLIMITED:V4};function CM(n,e){n.INTERNAL.registerComponent(new lr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps({...bM}))}function kM(n){CM(n,(e,t)=>new CR(e,t,new RM)),n.registerVersion(TM,SM)}kM(ur);const NM="type.googleapis.com/google.protobuf.Int64Value",DM="type.googleapis.com/google.protobuf.UInt64Value";function OR(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function qf(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>qf(e));if(typeof n=="function"||typeof n=="object")return OR(n,e=>qf(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Fl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case NM:case DM:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Fl(e)):typeof n=="function"||typeof n=="object"?OR(n,e=>Fl(e)):n}const LR="functions";const XT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vn extends Kt{constructor(e,t,r){super(`${LR}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Vn.prototype)}}function VM(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $f(n,e){let t=VM(n),r=t,s;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!XT[l])return new Vn("internal","internal");t=XT[l],r=l}const h=a.message;typeof h=="string"&&(r=h),s=a.details,s!==void 0&&(s=Fl(s))}}catch{}return t==="ok"?null:new Vn(t,r,s)}class OM{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ct(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}const ZT="us-central1",LM=/^data: (.*?)(?:\n|$)/;function MM(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Vn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let FM=class{constructor(e,t,r,s,a=ZT,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new OM(e,t,r,s),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=ZT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function jM(n,e,t){const r=Bi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Ly(n.emulatorOrigin+"/backends"),My("Functions",!0))}function UM(n,e,t){const r=s=>qM(n,e,s,t||{});return r.stream=(s,a)=>$M(n,e,s,a),r}function BM(n,e,t){const r=s=>jR(n,e,s,t||{});return r.stream=(s,a)=>UR(n,e,s,a||{}),r}function MR(n){return n.emulatorOrigin&&Bi(n.emulatorOrigin)?"include":void 0}async function zM(n,e,t,r,s){t["Content-Type"]="application/json";let a;try{a=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:MR(s)})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function FR(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function qM(n,e,t,r){const s=n._url(e);return jR(n,s,t,r)}async function jR(n,e,t,r){t=qf(t);const s={data:t},a=await FR(n,r),l=r.timeout||7e4,h=MM(l),f=await Promise.race([zM(e,s,a,n.fetchImpl,n),h.promise,n.cancelAllRequests]);if(h.cancel(),!f)throw new Vn("cancelled","Firebase Functions instance was deleted.");const p=$f(f.status,f.json);if(p)throw p;if(!f.json)throw new Vn("internal","Response is not valid JSON object.");let g=f.json.data;if(typeof g>"u"&&(g=f.json.result),typeof g>"u")throw new Vn("internal","Response is missing data field.");return{data:Fl(g)}}function $M(n,e,t,r){const s=n._url(e);return UR(n,s,t,r||{})}async function UR(n,e,t,r){t=qf(t);const s={data:t},a=await FR(n,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r?.signal,credentials:MR(n)})}catch(I){if(I instanceof Error&&I.name==="AbortError"){const k=new Vn("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const C=$f(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let h,f;const p=new Promise((I,C)=>{h=I,f=C});r?.signal?.addEventListener("abort",()=>{const I=new Vn("cancelled","Request was cancelled.");f(I)});const g=l.body.getReader(),w=WM(g,h,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const I=w.getReader();return{async next(){const{value:C,done:k}=await I.read();return{value:C,done:k}},async return(){return await I.cancel(),{done:!0,value:void 0}}}}},data:p}}function WM(n,e,t,r){const s=(l,h)=>{const f=l.match(LM);if(!f)return;const p=f[1];try{const g=JSON.parse(p);if("result"in g){e(Fl(g.result));return}if("message"in g){h.enqueue(Fl(g.message));return}if("error"in g){const w=$f(0,g);h.error(w),t(w);return}}catch(g){if(g instanceof Vn){h.error(g),t(g);return}}},a=new TextDecoder;return new ReadableStream({start(l){let h="";return f();async function f(){if(r?.aborted){const p=new Vn("cancelled","Request was cancelled");return l.error(p),t(p),Promise.resolve()}try{const{value:p,done:g}=await n.read();if(g){h.trim()&&s(h.trim(),l),l.close();return}if(r?.aborted){const I=new Vn("cancelled","Request was cancelled");l.error(I),t(I),await n.cancel();return}h+=a.decode(p,{stream:!0});const w=h.split(`
`);h=w.pop()||"";for(const I of w)I.trim()&&s(I.trim(),l);return f()}catch(p){const g=p instanceof Vn?p:$f(0,null);l.error(g),t(g)}}},cancel(){return n.cancel()}})}const e0="@firebase/functions",t0="0.13.1";const HM="auth-internal",GM="app-check-internal",KM="messaging-internal";function QM(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider(HM),l=t.getProvider(KM),h=t.getProvider(GM);return new FM(s,a,l,h,r)};Cs(new lr(LR,e,"PUBLIC").setMultipleInstances(!0)),Jn(e0,t0,n),Jn(e0,t0,"esm2020")}function n0(n,e,t){jM(Te(n),e,t)}function JM(n,e,t){return UM(Te(n),e,t)}function YM(n,e,t){return BM(Te(n),e,t)}QM();const XM="@firebase/functions-compat",ZM="0.4.1";class BR{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return JM(this._delegate,e,t)}httpsCallableFromURL(e,t){return YM(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Kt("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Kt("functions","Port missing in origin provided to useFunctionsEmulator()");return n0(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return n0(this._delegate,e,t)}}const eF="us-central1",tF=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??eF});return new BR(t,r)};function nF(){const n={Functions:BR};ur.INTERNAL.registerComponent(new lr("functions-compat",tF,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}nF();ur.registerVersion(XM,ZM);const rF={apiKey:"AIzaSyDummyKeyForEmulatorOnly",projectId:"schoolbook-290b6"};ur.apps.length||ur.initializeApp(rF);const bn=ur.firestore(),ll=ur.auth(),vv=ur.functions(),r0=window.location.hostname;(r0==="localhost"||r0==="127.0.0.1")&&(console.log("Using Firebase Emulators"),bn.useEmulator("127.0.0.1",8085),ll.useEmulator("http://127.0.0.1:9099",{disableWarnings:!0}),vv.useEmulator("127.0.0.1",5001));const Gd=Object.freeze(Object.defineProperty({__proto__:null,auth:ll,db:bn,functions:vv},Symbol.toStringTag,{value:"Module"})),df={onAuthStateChanged(n){return ll.onAuthStateChanged(n)},async signUp(n,e){return ll.createUserWithEmailAndPassword(n,e)},async login(n,e){return ll.signInWithEmailAndPassword(n,e)},async logout(){return ll.signOut()},async completeProfile(n){return vv.httpsCallable("completeProfile")(n)},onProfileSnapshot(n,e){return bn.collection("users").doc(n).onSnapshot(e)}},sF="modulepreload",iF=function(n){return"/"+n},s0={},Kd=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var l=p;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");s=p(t.map(g=>{if(g=iF(g),g in s0)return;s0[g]=!0;const w=g.endsWith(".css"),I=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${I}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":sF,w||(C.as="script"),C.crossOrigin="",C.href=g,f&&C.setAttribute("nonce",f),document.head.appendChild(C),w)return new Promise((k,F)=>{C.addEventListener("load",k),C.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return s.then(h=>{for(const f of h||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};function zR(n,e){return function(){return n.apply(e,arguments)}}const{toString:oF}=Object.prototype,{getPrototypeOf:wv}=Object,{iterator:Np,toStringTag:qR}=Symbol,Dp=(n=>e=>{const t=oF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rr=n=>(n=n.toLowerCase(),e=>Dp(e)===n),Vp=n=>e=>typeof e===n,{isArray:Xl}=Array,jl=Vp("undefined");function vh(n){return n!==null&&!jl(n)&&n.constructor!==null&&!jl(n.constructor)&&On(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const $R=Rr("ArrayBuffer");function aF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&$R(n.buffer),e}const lF=Vp("string"),On=Vp("function"),WR=Vp("number"),wh=n=>n!==null&&typeof n=="object",uF=n=>n===!0||n===!1,ff=n=>{if(Dp(n)!=="object")return!1;const e=wv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(qR in n)&&!(Np in n)},cF=n=>{if(!wh(n)||vh(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},hF=Rr("Date"),dF=Rr("File"),fF=Rr("Blob"),pF=Rr("FileList"),mF=n=>wh(n)&&On(n.pipe),gF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||On(n.append)&&((e=Dp(n))==="formdata"||e==="object"&&On(n.toString)&&n.toString()==="[object FormData]"))},yF=Rr("URLSearchParams"),[_F,vF,wF,EF]=["ReadableStream","Request","Response","Headers"].map(Rr),IF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),Xl(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{if(vh(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let h;for(r=0;r<l;r++)h=a[r],e.call(null,n[h],h,n)}}function HR(n,e){if(vh(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const Lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GR=n=>!jl(n)&&n!==Lo;function Ay(){const{caseless:n,skipUndefined:e}=GR(this)&&this||{},t={},r=(s,a)=>{const l=n&&HR(t,a)||a;ff(t[l])&&ff(s)?t[l]=Ay(t[l],s):ff(s)?t[l]=Ay({},s):Xl(s)?t[l]=s.slice():(!e||!jl(s))&&(t[l]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Eh(arguments[s],r);return t}const TF=(n,e,t,{allOwnKeys:r}={})=>(Eh(e,(s,a)=>{t&&On(s)?n[a]=zR(s,t):n[a]=s},{allOwnKeys:r}),n),SF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),AF=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},RF=(n,e,t,r)=>{let s,a,l;const h={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)l=s[a],(!r||r(l,n,e))&&!h[l]&&(e[l]=n[l],h[l]=!0);n=t!==!1&&wv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},PF=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},xF=n=>{if(!n)return null;if(Xl(n))return n;let e=n.length;if(!WR(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},bF=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&wv(Uint8Array)),CF=(n,e)=>{const r=(n&&n[Np]).call(n);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},kF=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},NF=Rr("HTMLFormElement"),DF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),i0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),VF=Rr("RegExp"),KR=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Eh(t,(s,a)=>{let l;(l=e(s,a,n))!==!1&&(r[a]=l||s)}),Object.defineProperties(n,r)},OF=n=>{KR(n,(e,t)=>{if(On(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(On(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},LF=(n,e)=>{const t={},r=s=>{s.forEach(a=>{t[a]=!0})};return Xl(n)?r(n):r(String(n).split(e)),t},MF=()=>{},FF=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function jF(n){return!!(n&&On(n.append)&&n[qR]==="FormData"&&n[Np])}const UF=n=>{const e=new Array(10),t=(r,s)=>{if(wh(r)){if(e.indexOf(r)>=0)return;if(vh(r))return r;if(!("toJSON"in r)){e[s]=r;const a=Xl(r)?[]:{};return Eh(r,(l,h)=>{const f=t(l,s+1);!jl(f)&&(a[h]=f)}),e[s]=void 0,a}}return r};return t(n,0)},BF=Rr("AsyncFunction"),zF=n=>n&&(wh(n)||On(n))&&On(n.then)&&On(n.catch),QR=((n,e)=>n?setImmediate:e?((t,r)=>(Lo.addEventListener("message",({source:s,data:a})=>{s===Lo&&a===t&&r.length&&r.shift()()},!1),s=>{r.push(s),Lo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",On(Lo.postMessage)),qF=typeof queueMicrotask<"u"?queueMicrotask.bind(Lo):typeof process<"u"&&process.nextTick||QR,$F=n=>n!=null&&On(n[Np]),G={isArray:Xl,isArrayBuffer:$R,isBuffer:vh,isFormData:gF,isArrayBufferView:aF,isString:lF,isNumber:WR,isBoolean:uF,isObject:wh,isPlainObject:ff,isEmptyObject:cF,isReadableStream:_F,isRequest:vF,isResponse:wF,isHeaders:EF,isUndefined:jl,isDate:hF,isFile:dF,isBlob:fF,isRegExp:VF,isFunction:On,isStream:mF,isURLSearchParams:yF,isTypedArray:bF,isFileList:pF,forEach:Eh,merge:Ay,extend:TF,trim:IF,stripBOM:SF,inherits:AF,toFlatObject:RF,kindOf:Dp,kindOfTest:Rr,endsWith:PF,toArray:xF,forEachEntry:CF,matchAll:kF,isHTMLForm:NF,hasOwnProperty:i0,hasOwnProp:i0,reduceDescriptors:KR,freezeMethods:OF,toObjectSet:LF,toCamelCase:DF,noop:MF,toFiniteNumber:FF,findKey:HR,global:Lo,isContextDefined:GR,isSpecCompliantForm:jF,toJSONObject:UF,isAsyncFn:BF,isThenable:zF,setImmediate:QR,asap:qF,isIterable:$F};function De(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}G.inherits(De,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const JR=De.prototype,YR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{YR[n]={value:n}});Object.defineProperties(De,YR);Object.defineProperty(JR,"isAxiosError",{value:!0});De.from=(n,e,t,r,s,a)=>{const l=Object.create(JR);G.toFlatObject(n,l,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const h=n&&n.message?n.message:"Error",f=e==null&&n?n.code:e;return De.call(l,h,f,t,r,s),n&&l.cause==null&&Object.defineProperty(l,"cause",{value:n,configurable:!0}),l.name=n&&n.name||"Error",a&&Object.assign(l,a),l};const WF=null;function Ry(n){return G.isPlainObject(n)||G.isArray(n)}function XR(n){return G.endsWith(n,"[]")?n.slice(0,-2):n}function o0(n,e,t){return n?n.concat(e).map(function(s,a){return s=XR(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function HF(n){return G.isArray(n)&&!n.some(Ry)}const GF=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function Op(n,e,t){if(!G.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=G.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,D){return!G.isUndefined(D[F])});const r=t.metaTokens,s=t.visitor||g,a=t.dots,l=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(s))throw new TypeError("visitor must be a function");function p(k){if(k===null)return"";if(G.isDate(k))return k.toISOString();if(G.isBoolean(k))return k.toString();if(!f&&G.isBlob(k))throw new De("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(k)||G.isTypedArray(k)?f&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function g(k,F,D){let Q=k;if(k&&!D&&typeof k=="object"){if(G.endsWith(F,"{}"))F=r?F:F.slice(0,-2),k=JSON.stringify(k);else if(G.isArray(k)&&HF(k)||(G.isFileList(k)||G.endsWith(F,"[]"))&&(Q=G.toArray(k)))return F=XR(F),Q.forEach(function(ie,pe){!(G.isUndefined(ie)||ie===null)&&e.append(l===!0?o0([F],pe,a):l===null?F:F+"[]",p(ie))}),!1}return Ry(k)?!0:(e.append(o0(D,F,a),p(k)),!1)}const w=[],I=Object.assign(GF,{defaultVisitor:g,convertValue:p,isVisitable:Ry});function C(k,F){if(!G.isUndefined(k)){if(w.indexOf(k)!==-1)throw Error("Circular reference detected in "+F.join("."));w.push(k),G.forEach(k,function(Q,se){(!(G.isUndefined(Q)||Q===null)&&s.call(e,Q,G.isString(se)?se.trim():se,F,I))===!0&&C(Q,F?F.concat(se):[se])}),w.pop()}}if(!G.isObject(n))throw new TypeError("data must be an object");return C(n),e}function a0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Ev(n,e){this._pairs=[],n&&Op(n,this,e)}const ZR=Ev.prototype;ZR.append=function(e,t){this._pairs.push([e,t])};ZR.toString=function(e){const t=e?function(r){return e.call(this,r,a0)}:a0;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function KF(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function eP(n,e,t){if(!e)return n;const r=t&&t.encode||KF;G.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let a;if(s?a=s(e,t):a=G.isURLSearchParams(e)?e.toString():new Ev(e,t).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class l0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(r){r!==null&&e(r)})}}const tP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QF=typeof URLSearchParams<"u"?URLSearchParams:Ev,JF=typeof FormData<"u"?FormData:null,YF=typeof Blob<"u"?Blob:null,XF={isBrowser:!0,classes:{URLSearchParams:QF,FormData:JF,Blob:YF},protocols:["http","https","file","blob","url","data"]},Iv=typeof window<"u"&&typeof document<"u",Py=typeof navigator=="object"&&navigator||void 0,ZF=Iv&&(!Py||["ReactNative","NativeScript","NS"].indexOf(Py.product)<0),e6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",t6=Iv&&window.location.href||"http://localhost",n6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iv,hasStandardBrowserEnv:ZF,hasStandardBrowserWebWorkerEnv:e6,navigator:Py,origin:t6},Symbol.toStringTag,{value:"Module"})),fn={...n6,...XF};function r6(n,e){return Op(n,new fn.classes.URLSearchParams,{visitor:function(t,r,s,a){return fn.isNode&&G.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function s6(n){return G.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function i6(n){const e={},t=Object.keys(n);let r;const s=t.length;let a;for(r=0;r<s;r++)a=t[r],e[a]=n[a];return e}function nP(n){function e(t,r,s,a){let l=t[a++];if(l==="__proto__")return!0;const h=Number.isFinite(+l),f=a>=t.length;return l=!l&&G.isArray(s)?s.length:l,f?(G.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!h):((!s[l]||!G.isObject(s[l]))&&(s[l]=[]),e(t,r,s[l],a)&&G.isArray(s[l])&&(s[l]=i6(s[l])),!h)}if(G.isFormData(n)&&G.isFunction(n.entries)){const t={};return G.forEachEntry(n,(r,s)=>{e(s6(r),s,t,0)}),t}return null}function o6(n,e,t){if(G.isString(n))try{return(e||JSON.parse)(n),G.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ih={transitional:tP,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,a=G.isObject(e);if(a&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return s?JSON.stringify(nP(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return r6(e,this.formSerializer).toString();if((h=G.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Op(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),o6(e)):e}],transformResponse:[function(e){const t=this.transitional||Ih.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(r&&!this.responseType||s)){const l=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(h){if(l)throw h.name==="SyntaxError"?De.from(h,De.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],n=>{Ih.headers[n]={}});const a6=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l6=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(l){s=l.indexOf(":"),t=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!t||e[t]&&a6[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},u0=Symbol("internals");function sc(n){return n&&String(n).trim().toLowerCase()}function pf(n){return n===!1||n==null?n:G.isArray(n)?n.map(pf):String(n)}function u6(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const c6=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Ng(n,e,t,r,s){if(G.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!G.isString(e)){if(G.isString(r))return e.indexOf(r)!==-1;if(G.isRegExp(r))return r.test(e)}}function h6(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function d6(n,e){const t=G.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,a,l){return this[r].call(this,e,s,a,l)},configurable:!0})})}let Ln=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function a(h,f,p){const g=sc(f);if(!g)throw new Error("header name must be a non-empty string");const w=G.findKey(s,g);(!w||s[w]===void 0||p===!0||p===void 0&&s[w]!==!1)&&(s[w||f]=pf(h))}const l=(h,f)=>G.forEach(h,(p,g)=>a(p,g,f));if(G.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(G.isString(e)&&(e=e.trim())&&!c6(e))l(l6(e),t);else if(G.isObject(e)&&G.isIterable(e)){let h={},f,p;for(const g of e){if(!G.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[p=g[0]]=(f=h[p])?G.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}l(h,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=sc(e),e){const r=G.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return u6(s);if(G.isFunction(t))return t.call(this,s,r);if(G.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sc(e),e){const r=G.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Ng(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function a(l){if(l=sc(l),l){const h=G.findKey(r,l);h&&(!t||Ng(r,r[h],h,t))&&(delete r[h],s=!0)}}return G.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const a=t[r];(!e||Ng(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,r={};return G.forEach(this,(s,a)=>{const l=G.findKey(r,a);if(l){t[l]=pf(s),delete t[a];return}const h=e?h6(a):String(a).trim();h!==a&&delete t[a],t[h]=pf(s),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&G.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[u0]=this[u0]={accessors:{}}).accessors,s=this.prototype;function a(l){const h=sc(l);r[h]||(d6(s,l),r[h]=!0)}return G.isArray(e)?e.forEach(a):a(e),this}};Ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(Ln.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});G.freezeMethods(Ln);function Dg(n,e){const t=this||Ih,r=e||t,s=Ln.from(r.headers);let a=r.data;return G.forEach(n,function(h){a=h.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function rP(n){return!!(n&&n.__CANCEL__)}function Zl(n,e,t){De.call(this,n??"canceled",De.ERR_CANCELED,e,t),this.name="CanceledError"}G.inherits(Zl,De,{__CANCEL__:!0});function sP(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new De("Request failed with status code "+t.status,[De.ERR_BAD_REQUEST,De.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function f6(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function p6(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,a=0,l;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),g=r[a];l||(l=p),t[s]=f,r[s]=p;let w=a,I=0;for(;w!==s;)I+=t[w++],w=w%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),p-l<e)return;const C=g&&p-g;return C?Math.round(I*1e3/C):void 0}}function m6(n,e){let t=0,r=1e3/e,s,a;const l=(p,g=Date.now())=>{t=g,s=null,a&&(clearTimeout(a),a=null),n(...p)};return[(...p)=>{const g=Date.now(),w=g-t;w>=r?l(p,g):(s=p,a||(a=setTimeout(()=>{a=null,l(s)},r-w)))},()=>s&&l(s)]}const Wf=(n,e,t=3)=>{let r=0;const s=p6(50,250);return m6(a=>{const l=a.loaded,h=a.lengthComputable?a.total:void 0,f=l-r,p=s(f),g=l<=h;r=l;const w={loaded:l,total:h,progress:h?l/h:void 0,bytes:f,rate:p||void 0,estimated:p&&h&&g?(h-l)/p:void 0,event:a,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(w)},t)},c0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},h0=n=>(...e)=>G.asap(()=>n(...e)),g6=fn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,fn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,y6=fn.hasStandardBrowserEnv?{write(n,e,t,r,s,a,l){if(typeof document>"u")return;const h=[`${n}=${encodeURIComponent(e)}`];G.isNumber(t)&&h.push(`expires=${new Date(t).toUTCString()}`),G.isString(r)&&h.push(`path=${r}`),G.isString(s)&&h.push(`domain=${s}`),a===!0&&h.push("secure"),G.isString(l)&&h.push(`SameSite=${l}`),document.cookie=h.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _6(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function v6(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function iP(n,e,t){let r=!_6(e);return n&&(r||t==!1)?v6(n,e):e}const d0=n=>n instanceof Ln?{...n}:n;function ea(n,e){e=e||{};const t={};function r(p,g,w,I){return G.isPlainObject(p)&&G.isPlainObject(g)?G.merge.call({caseless:I},p,g):G.isPlainObject(g)?G.merge({},g):G.isArray(g)?g.slice():g}function s(p,g,w,I){if(G.isUndefined(g)){if(!G.isUndefined(p))return r(void 0,p,w,I)}else return r(p,g,w,I)}function a(p,g){if(!G.isUndefined(g))return r(void 0,g)}function l(p,g){if(G.isUndefined(g)){if(!G.isUndefined(p))return r(void 0,p)}else return r(void 0,g)}function h(p,g,w){if(w in e)return r(p,g);if(w in n)return r(void 0,p)}const f={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:h,headers:(p,g,w)=>s(d0(p),d0(g),w,!0)};return G.forEach(Object.keys({...n,...e}),function(g){const w=f[g]||s,I=w(n[g],e[g],g);G.isUndefined(I)&&w!==h||(t[g]=I)}),t}const oP=n=>{const e=ea({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:h}=e;if(e.headers=l=Ln.from(l),e.url=eP(iP(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&l.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),G.isFormData(t)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(G.isFunction(t.getHeaders)){const f=t.getHeaders(),p=["content-type","content-length"];Object.entries(f).forEach(([g,w])=>{p.includes(g.toLowerCase())&&l.set(g,w)})}}if(fn.hasStandardBrowserEnv&&(r&&G.isFunction(r)&&(r=r(e)),r||r!==!1&&g6(e.url))){const f=s&&a&&y6.read(a);f&&l.set(s,f)}return e},w6=typeof XMLHttpRequest<"u",E6=w6&&function(n){return new Promise(function(t,r){const s=oP(n);let a=s.data;const l=Ln.from(s.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:p}=s,g,w,I,C,k;function F(){C&&C(),k&&k(),s.cancelToken&&s.cancelToken.unsubscribe(g),s.signal&&s.signal.removeEventListener("abort",g)}let D=new XMLHttpRequest;D.open(s.method.toUpperCase(),s.url,!0),D.timeout=s.timeout;function Q(){if(!D)return;const ie=Ln.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ve={data:!h||h==="text"||h==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:ie,config:n,request:D};sP(function(b){t(b),F()},function(b){r(b),F()},ve),D=null}"onloadend"in D?D.onloadend=Q:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(Q)},D.onabort=function(){D&&(r(new De("Request aborted",De.ECONNABORTED,n,D)),D=null)},D.onerror=function(pe){const ve=pe&&pe.message?pe.message:"Network Error",K=new De(ve,De.ERR_NETWORK,n,D);K.event=pe||null,r(K),D=null},D.ontimeout=function(){let pe=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const ve=s.transitional||tP;s.timeoutErrorMessage&&(pe=s.timeoutErrorMessage),r(new De(pe,ve.clarifyTimeoutError?De.ETIMEDOUT:De.ECONNABORTED,n,D)),D=null},a===void 0&&l.setContentType(null),"setRequestHeader"in D&&G.forEach(l.toJSON(),function(pe,ve){D.setRequestHeader(ve,pe)}),G.isUndefined(s.withCredentials)||(D.withCredentials=!!s.withCredentials),h&&h!=="json"&&(D.responseType=s.responseType),p&&([I,k]=Wf(p,!0),D.addEventListener("progress",I)),f&&D.upload&&([w,C]=Wf(f),D.upload.addEventListener("progress",w),D.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(g=ie=>{D&&(r(!ie||ie.type?new Zl(null,n,D):ie),D.abort(),D=null)},s.cancelToken&&s.cancelToken.subscribe(g),s.signal&&(s.signal.aborted?g():s.signal.addEventListener("abort",g)));const se=f6(s.url);if(se&&fn.protocols.indexOf(se)===-1){r(new De("Unsupported protocol "+se+":",De.ERR_BAD_REQUEST,n));return}D.send(a||null)})},I6=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const a=function(p){if(!s){s=!0,h();const g=p instanceof Error?p:this.reason;r.abort(g instanceof De?g:new Zl(g instanceof Error?g.message:g))}};let l=e&&setTimeout(()=>{l=null,a(new De(`timeout ${e} of ms exceeded`,De.ETIMEDOUT))},e);const h=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>G.asap(h),f}},T6=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},S6=async function*(n,e){for await(const t of A6(n))yield*T6(t,e)},A6=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},f0=(n,e,t,r)=>{const s=S6(n,e);let a=0,l,h=f=>{l||(l=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await s.next();if(p){h(),f.close();return}let w=g.byteLength;if(t){let I=a+=w;t(I)}f.enqueue(new Uint8Array(g))}catch(p){throw h(p),p}},cancel(f){return h(f),s.return()}},{highWaterMark:2})},p0=64*1024,{isFunction:Qd}=G,R6=(({Request:n,Response:e})=>({Request:n,Response:e}))(G.global),{ReadableStream:m0,TextEncoder:g0}=G.global,y0=(n,...e)=>{try{return!!n(...e)}catch{return!1}},P6=n=>{n=G.merge.call({skipUndefined:!0},R6,n);const{fetch:e,Request:t,Response:r}=n,s=e?Qd(e):typeof fetch=="function",a=Qd(t),l=Qd(r);if(!s)return!1;const h=s&&Qd(m0),f=s&&(typeof g0=="function"?(k=>F=>k.encode(F))(new g0):async k=>new Uint8Array(await new t(k).arrayBuffer())),p=a&&h&&y0(()=>{let k=!1;const F=new t(fn.origin,{body:new m0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!F}),g=l&&h&&y0(()=>G.isReadableStream(new r("").body)),w={stream:g&&(k=>k.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!w[k]&&(w[k]=(F,D)=>{let Q=F&&F[k];if(Q)return Q.call(F);throw new De(`Response type '${k}' is not supported`,De.ERR_NOT_SUPPORT,D)})});const I=async k=>{if(k==null)return 0;if(G.isBlob(k))return k.size;if(G.isSpecCompliantForm(k))return(await new t(fn.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(G.isArrayBufferView(k)||G.isArrayBuffer(k))return k.byteLength;if(G.isURLSearchParams(k)&&(k=k+""),G.isString(k))return(await f(k)).byteLength},C=async(k,F)=>{const D=G.toFiniteNumber(k.getContentLength());return D??I(F)};return async k=>{let{url:F,method:D,data:Q,signal:se,cancelToken:ie,timeout:pe,onDownloadProgress:ve,onUploadProgress:K,responseType:b,headers:A,withCredentials:x="same-origin",fetchOptions:O}=oP(k),V=e||fetch;b=b?(b+"").toLowerCase():"text";let j=I6([se,ie&&ie.toAbortSignal()],pe),P=null;const je=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let gt;try{if(K&&p&&D!=="get"&&D!=="head"&&(gt=await C(A,Q))!==0){let M=new t(F,{method:"POST",body:Q,duplex:"half"}),J;if(G.isFormData(Q)&&(J=M.headers.get("content-type"))&&A.setContentType(J),M.body){const[Ce,Pe]=c0(gt,Wf(h0(K)));Q=f0(M.body,p0,Ce,Pe)}}G.isString(x)||(x=x?"include":"omit");const Re=a&&"credentials"in t.prototype,ce={...O,signal:j,method:D.toUpperCase(),headers:A.normalize().toJSON(),body:Q,duplex:"half",credentials:Re?x:void 0};P=a&&new t(F,ce);let re=await(a?V(P,O):V(F,ce));const Ie=g&&(b==="stream"||b==="response");if(g&&(ve||Ie&&je)){const M={};["status","statusText","headers"].forEach(Oe=>{M[Oe]=re[Oe]});const J=G.toFiniteNumber(re.headers.get("content-length")),[Ce,Pe]=ve&&c0(J,Wf(h0(ve),!0))||[];re=new r(f0(re.body,p0,Ce,()=>{Pe&&Pe(),je&&je()}),M)}b=b||"text";let fe=await w[G.findKey(w,b)||"text"](re,k);return!Ie&&je&&je(),await new Promise((M,J)=>{sP(M,J,{data:fe,headers:Ln.from(re.headers),status:re.status,statusText:re.statusText,config:k,request:P})})}catch(Re){throw je&&je(),Re&&Re.name==="TypeError"&&/Load failed|fetch/i.test(Re.message)?Object.assign(new De("Network Error",De.ERR_NETWORK,k,P),{cause:Re.cause||Re}):De.from(Re,Re&&Re.code,k,P)}}},x6=new Map,aP=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:s}=e,a=[r,s,t];let l=a.length,h=l,f,p,g=x6;for(;h--;)f=a[h],p=g.get(f),p===void 0&&g.set(f,p=h?new Map:P6(e)),g=p;return p};aP();const Tv={http:WF,xhr:E6,fetch:{get:aP}};G.forEach(Tv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const _0=n=>`- ${n}`,b6=n=>G.isFunction(n)||n===null||n===!1;function C6(n,e){n=G.isArray(n)?n:[n];const{length:t}=n;let r,s;const a={};for(let l=0;l<t;l++){r=n[l];let h;if(s=r,!b6(r)&&(s=Tv[(h=String(r)).toLowerCase()],s===void 0))throw new De(`Unknown adapter '${h}'`);if(s&&(G.isFunction(s)||(s=s.get(e))))break;a[h||"#"+l]=s}if(!s){const l=Object.entries(a).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=t?l.length>1?`since :
`+l.map(_0).join(`
`):" "+_0(l[0]):"as no adapter specified";throw new De("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return s}const lP={getAdapter:C6,adapters:Tv};function Vg(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Zl(null,n)}function v0(n){return Vg(n),n.headers=Ln.from(n.headers),n.data=Dg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),lP.getAdapter(n.adapter||Ih.adapter,n)(n).then(function(r){return Vg(n),r.data=Dg.call(n,n.transformResponse,r),r.headers=Ln.from(r.headers),r},function(r){return rP(r)||(Vg(n),r&&r.response&&(r.response.data=Dg.call(n,n.transformResponse,r.response),r.response.headers=Ln.from(r.response.headers))),Promise.reject(r)})}const uP="1.13.2",Lp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Lp[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const w0={};Lp.transitional=function(e,t,r){function s(a,l){return"[Axios v"+uP+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,h)=>{if(e===!1)throw new De(s(l," has been removed"+(t?" in "+t:"")),De.ERR_DEPRECATED);return t&&!w0[l]&&(w0[l]=!0,console.warn(s(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,h):!0}};Lp.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function k6(n,e,t){if(typeof n!="object")throw new De("options must be an object",De.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const a=r[s],l=e[a];if(l){const h=n[a],f=h===void 0||l(h,a,n);if(f!==!0)throw new De("option "+a+" must be "+f,De.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new De("Unknown option "+a,De.ERR_BAD_OPTION)}}const mf={assertOptions:k6,validators:Lp},Wr=mf.validators;let Uo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new l0,response:new l0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ea(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:a}=t;r!==void 0&&mf.assertOptions(r,{silentJSONParsing:Wr.transitional(Wr.boolean),forcedJSONParsing:Wr.transitional(Wr.boolean),clarifyTimeoutError:Wr.transitional(Wr.boolean)},!1),s!=null&&(G.isFunction(s)?t.paramsSerializer={serialize:s}:mf.assertOptions(s,{encode:Wr.function,serialize:Wr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mf.assertOptions(t,{baseUrl:Wr.spelling("baseURL"),withXsrfToken:Wr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&G.merge(a.common,a[t.method]);a&&G.forEach(["delete","get","head","post","put","patch","common"],k=>{delete a[k]}),t.headers=Ln.concat(l,a);const h=[];let f=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(t)===!1||(f=f&&F.synchronous,h.unshift(F.fulfilled,F.rejected))});const p=[];this.interceptors.response.forEach(function(F){p.push(F.fulfilled,F.rejected)});let g,w=0,I;if(!f){const k=[v0.bind(this),void 0];for(k.unshift(...h),k.push(...p),I=k.length,g=Promise.resolve(t);w<I;)g=g.then(k[w++],k[w++]);return g}I=h.length;let C=t;for(;w<I;){const k=h[w++],F=h[w++];try{C=k(C)}catch(D){F.call(this,D);break}}try{g=v0.call(this,C)}catch(k){return Promise.reject(k)}for(w=0,I=p.length;w<I;)g=g.then(p[w++],p[w++]);return g}getUri(e){e=ea(this.defaults,e);const t=iP(e.baseURL,e.url,e.allowAbsoluteUrls);return eP(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){Uo.prototype[e]=function(t,r){return this.request(ea(r||{},{method:e,url:t,data:(r||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(r){return function(a,l,h){return this.request(ea(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Uo.prototype[e]=t(),Uo.prototype[e+"Form"]=t(!0)});let N6=class cP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(h=>{r.subscribe(h),a=h}).then(s);return l.cancel=function(){r.unsubscribe(a)},l},e(function(a,l,h){r.reason||(r.reason=new Zl(a,l,h),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new cP(function(s){e=s}),cancel:e}}};function D6(n){return function(t){return n.apply(null,t)}}function V6(n){return G.isObject(n)&&n.isAxiosError===!0}const xy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(xy).forEach(([n,e])=>{xy[e]=n});function hP(n){const e=new Uo(n),t=zR(Uo.prototype.request,e);return G.extend(t,Uo.prototype,e,{allOwnKeys:!0}),G.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return hP(ea(n,s))},t}const Nt=hP(Ih);Nt.Axios=Uo;Nt.CanceledError=Zl;Nt.CancelToken=N6;Nt.isCancel=rP;Nt.VERSION=uP;Nt.toFormData=Op;Nt.AxiosError=De;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=D6;Nt.isAxiosError=V6;Nt.mergeConfig=ea;Nt.AxiosHeaders=Ln;Nt.formToJSON=n=>nP(G.isHTMLForm(n)?new FormData(n):n);Nt.getAdapter=lP.getAdapter;Nt.HttpStatusCode=xy;Nt.default=Nt;const{Axios:a5,AxiosError:l5,CanceledError:u5,isCancel:c5,CancelToken:h5,VERSION:d5,all:f5,Cancel:p5,isAxiosError:m5,spread:g5,toFormData:y5,AxiosHeaders:_5,HttpStatusCode:v5,formToJSON:w5,getAdapter:E5,mergeConfig:I5}=Nt,Hr={onBooksSnapshot(n){return bn.collection("books").onSnapshot(e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));n(t)})},async createBook(n){return bn.collection("books").add({...n,status:"Available"})},async deleteBook(n){return bn.collection("books").doc(n).delete()},async reserveBook(n,e,t,r){try{return(await Nt.post("http://127.0.0.1:5001/schoolbook-290b6/us-central1/handleBookTransaction",{bookId:n,buyerId:e,agreedPrice:Number(t),meetingTime:r})).data}catch(s){throw s}},async startTransaction(n,e,t){if(!e)return alert("");if(e.uid===n.sellerId)return alert("");try{const r=bn.collection("transactions"),a=await r.where("bookId","==",n.id).where("buyerId","==",e.uid).get();if(!a.empty)t(a.docs[0].id);else{const l=await r.add({bookId:n.id,bookTitle:n.title,sellerId:n.sellerId,buyerId:e.uid,price:n.price,status:"Pending",timestamp:new Date});t(l.id)}}catch(r){console.error(r),alert(": "+r.message)}},async confirmTransactionTime(n){const{functions:e}=await Kd(async()=>{const{functions:r}=await Promise.resolve().then(()=>Gd);return{functions:r}},void 0);return e.httpsCallable("confirmTransactionTime")({transactionId:n})},getUserTransactions(n,e){return bn.collection("transactions").where("buyerId","==",n).onSnapshot(e)},getSellerTransactions(n,e){return bn.collection("transactions").where("sellerId","==",n).onSnapshot(e)},async updateTransactionStatus(n,e){const{functions:t}=await Kd(async()=>{const{functions:s}=await Promise.resolve().then(()=>Gd);return{functions:s}},void 0);return t.httpsCallable("updateTransactionStatus")({transactionId:n,newStatus:e})},async requestReschedule(n,e,t){const{functions:r}=await Kd(async()=>{const{functions:a}=await Promise.resolve().then(()=>Gd);return{functions:a}},void 0);return r.httpsCallable("requestReschedule")({transactionId:n,newTime:e,reason:t})},async respondToReschedule(n,e){const{functions:t}=await Kd(async()=>{const{functions:s}=await Promise.resolve().then(()=>Gd);return{functions:s}},void 0);return t.httpsCallable("respondToReschedule")({transactionId:n,response:e})},onWishesSnapshot(n){return bn.collection("wishes").orderBy("timestamp","desc").onSnapshot(e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));n(t)})},async addWish({content:n,user:e,avatarId:t}){return bn.collection("wishes").add({uid:"anonymous",user:e||"",avatarId:t||"default",content:n,timestamp:new Date})},async addBook(n){return bn.collection("books").add({...n,status:"Available",timestamp:new Date})},recordCheckIn(){localStorage.setItem("lastCheckIn",new Date().toDateString())},hasCheckedInToday(){return localStorage.getItem("lastCheckIn")===new Date().toDateString()}},E0={async sendMessage(n,e,t,r){if(r.trim())try{await bn.collection("transactions").doc(n).collection("messages").add({senderId:e,senderName:t,content:r.trim(),timestamp:new Date})}catch(s){throw console.error("Error sending message:",s),s}},subscribeToMessages(n,e){return bn.collection("transactions").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(r=>{const s=r.docs.map(a=>({id:a.id,...a.data()}));e(s)},r=>{console.error("Error subscribing to messages:",r)})}},Mp={fontFamily:'"Noto Sans TC", "PMingLiU", sans-serif'},$e={whiteBucks:"#E8E3DF",fossilGray:"#C9C3B6",brushwood:"#9E9081",chocolateBubble:"#A58976",brownWindmill:"#756256",bgLight:"#F9F7F5"},O6=["","","","","","","/"],L6=["","","","","","","","","","",""],M6=["","","","","",""],I0=[{id:"all",name:""},{id:"chi",name:""},{id:"eng",name:""},{id:"math",name:""},{id:"sci",name:""},{id:"soc",name:""},{id:"exam",name:""},{id:"cap",name:""}],Bo=[{id:"default",name:"",price:0,src:"https://i.postimg.cc/9fW28Bc0/niu.jpg"},{id:"special1",name:"",price:100,src:"https://i.postimg.cc/zyP43KbN/tu-zi.jpg"},{id:"special2",name:"",price:100,src:"https://i.postimg.cc/pd2vGBP9/zhu.jpg"},{id:"special3",name:"",price:100,src:"https://i.postimg.cc/wB6zfk97/gou.jpg"},{id:"special4",name:"",price:100,src:"https://i.postimg.cc/qNvyYNG3/EE1D91FC-D76E-4FBA-A85F-33F8D82EAFEB.jpg"},{id:"special5",name:"",price:100,src:"https://i.postimg.cc/VkjgJMr4/84AD5380-E492-4603-B7C7-4BD68372B94A.jpg"},{id:"cat",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cat&backgroundColor=FFD700"},{id:"glasses",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=glasses&backgroundColor=4ADE80"},{id:"cool",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cool&backgroundColor=A58976"},{id:"artist",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=artist&backgroundColor=FFB6C1"},{id:"robot",name:"",price:100,src:"https://api.dicebear.com/7.x/bottts/svg?seed=robot&backgroundColor=E0E0E0"}],F6=[{id:1,content:"   ",user:"",time:"10",avatarId:"default"},{id:2,content:"",user:"",time:"1",avatarId:"cat"},{id:3,content:" ",user:"",time:"3",avatarId:"glasses"}],j6=[{id:1,type:"comment",user:"",avatar:null,content:"",time:"5",isRead:!1},{id:2,type:"system",content:" 30 ",time:"2",isRead:!1},{id:3,type:"system",content:" SchoolBook Exchange",time:"1",isRead:!0}],Sv=({type:n,price:e,originalPrice:t,large:r=!1})=>n==="exchange"?T.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:$e.brushwood},children:[T.jsx(Xx,{size:r?20:14}),T.jsx("span",{children:""})]}):n==="gift"?T.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:$e.chocolateBubble},children:[T.jsx(Wx,{size:r?20:14}),T.jsx("span",{children:""})]}):T.jsxs("div",{className:"flex flex-col",children:[T.jsxs("div",{className:`font-bold ${r?"text-3xl":"text-lg"}`,style:{color:$e.brownWindmill},children:["NT$ ",e]}),t&&T.jsxs("span",{className:"text-xs line-through",style:{color:$e.fossilGray},children:[" $",t]})]}),U6=({coins:n,isCheckedIn:e,onCheckIn:t,onGoToStore:r})=>{const[s,a]=be.useState("gsat"),[l,h]=be.useState({title:"",date:"2026-06-30"}),[f,p]=be.useState(!1),[g,w]=be.useState(0),I=[{time:"3",content:" 208  "},{time:"5",content:" 105  "},{time:"10",content:" 301  "},{time:"",content:" 805   SchoolBook Exchange"}];be.useEffect(()=>{const Q=setInterval(()=>{w(se=>(se+1)%I.length)},3500);return()=>clearInterval(Q)},[]);const C=I[g],k={gsat:{title:"",date:"2026-01-20"},ast:{title:"",date:"2026-07-10"},cap:{title:"",date:"2026-05-15"}},F=()=>{const Q=s==="custom"?l.date:k[s].date,pe=new Date(Q)-new Date,ve=Math.ceil(pe/(1e3*60*60*24));return ve>0?ve:0},D=()=>s==="custom"?`${l.title}`:k[s].title;return T.jsxs("div",{className:"mx-4 mt-4 mb-6 space-y-3",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("div",{className:"bg-white p-3 rounded-xl border flex flex-col justify-between h-28 relative overflow-hidden",style:{borderColor:$e.whiteBucks},children:[T.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-50 rounded-full -mr-6 -mt-6 z-0"}),f?T.jsxs("div",{className:"relative z-20 flex flex-col gap-2 h-full justify-center",children:[T.jsx("input",{type:"text",value:l.title,onChange:Q=>h({...l,title:Q.target.value}),className:"text-xs border rounded p-1 w-full",placeholder:""}),T.jsx("input",{type:"date",value:l.date,onChange:Q=>h({...l,date:Q.target.value}),className:"text-xs border rounded p-1 w-full"}),T.jsx("button",{onClick:()=>p(!1),className:"text-xs bg-red-500 text-white rounded py-1",children:""})]}):T.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[T.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 font-bold mb-1",children:[T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx(Ox,{size:14,className:"text-red-500"}),T.jsxs("div",{className:"relative inline-block group",children:[T.jsxs("select",{value:s,onChange:Q=>a(Q.target.value),className:"appearance-none bg-transparent pr-4 outline-none cursor-pointer hover:text-gray-700",children:[T.jsx("option",{value:"gsat",children:""}),T.jsx("option",{value:"ast",children:""}),T.jsx("option",{value:"cap",children:""}),T.jsx("option",{value:"custom",children:"..."})]}),T.jsx(Fx,{size:10,className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none"})]})]}),s==="custom"&&T.jsx("button",{onClick:()=>p(!0),className:"text-gray-400 hover:text-gray-600",children:T.jsx(Lg,{size:12})})]}),T.jsxs("div",{className:"flex items-baseline gap-1",children:[T.jsx("span",{className:"text-4xl font-bold text-gray-800",children:F()}),T.jsx("span",{className:"text-xs text-gray-500",children:""})]}),T.jsx("div",{className:"text-[10px] text-gray-400 mt-1 truncate",children:D()})]})]}),T.jsxs("div",{onClick:e?void 0:t,className:`p-3 rounded-xl border flex flex-col justify-between h-28 cursor-pointer transition-all relative overflow-hidden group
             ${e?"bg-[#FDFBF7]":"bg-white hover:border-[#A58976]"}`,style:{borderColor:$e.whiteBucks},children:[T.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-yellow-50 rounded-full -mr-6 -mt-6 z-0"}),T.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 font-bold",children:[T.jsx(Cy,{size:14,className:"text-yellow-500"})," "]}),T.jsx("div",{className:"text-xs font-bold text-[#756256]",children:n})]}),e?T.jsxs("div",{className:"text-center py-1 animate-fade-in flex flex-col items-center",children:[T.jsx(zx,{size:20,className:"text-green-500 mb-1"}),T.jsx("div",{className:"text-xs text-green-600 font-bold mb-2",children:""}),T.jsxs("button",{onClick:Q=>{Q.stopPropagation(),r()},className:"flex items-center gap-1 px-3 py-1 bg-[#756256] text-white text-[10px] rounded-full shadow hover:bg-[#5D4E44] transition-colors",children:[T.jsx(ab,{size:10})," "]})]}):T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:scale-110 transition-transform",children:T.jsx(ky,{size:20,className:"text-yellow-600"})}),T.jsx("div",{className:"text-xs text-gray-600 font-bold",children:" +5"})]})]})]})]}),T.jsxs("div",{className:"bg-white rounded-lg border px-3 py-2 flex items-center gap-3 shadow-sm",style:{borderColor:$e.whiteBucks},children:[T.jsx("div",{className:"bg-red-50 text-red-500 p-1 rounded-md",children:T.jsx(vb,{size:14,fill:"currentColor"})}),T.jsx("div",{className:"flex-1 overflow-hidden h-5 relative",children:T.jsxs("div",{className:"absolute animate-slide-up text-xs font-medium text-gray-600 w-full truncate",children:[T.jsx("span",{className:"font-bold text-[#756256] mr-1",children:C.time}),C.content]},g)})]})]})},B6=({wishes:n,onAddWish:e,currentUser:t,currentAvatar:r})=>{const[s,a]=be.useState(!1),[l,h]=be.useState(""),f=()=>{l.trim()&&(e(l),h(""),a(!1))};return T.jsxs("div",{className:"mb-8 px-4",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx("span",{className:"bg-yellow-400 text-white p-1 rounded-full",children:T.jsx(ub,{size:16,fill:"currentColor"})}),T.jsx("h2",{className:"text-lg font-bold tracking-wide",style:{color:$e.brownWindmill},children:""})]}),T.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",style:{borderColor:$e.whiteBucks},children:[n.map(p=>T.jsxs("div",{className:"flex gap-3 border-b last:border-0 pb-3 last:pb-0",style:{borderColor:$e.bgLight},children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:p.avatarId?T.jsx("img",{src:Bo.find(g=>g.id===p.avatarId)?.src||Bo[0].src,alt:"avatar",className:"w-full h-full object-cover"}):T.jsx(gf,{size:20,className:"text-gray-400"})}),T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex justify-between items-center mb-1",children:[T.jsx("span",{className:"text-sm font-bold text-[#756256]",children:p.user}),T.jsx("span",{className:"text-xs font-normal text-gray-400",children:p.time})]}),T.jsx("p",{className:"text-sm text-[#9E9081]",children:p.content})]})]},p.id)),T.jsxs("button",{onClick:()=>a(!0),className:"w-full py-2 mt-2 text-xs font-bold text-[#9E9081] border border-dashed hover:bg-[#F9F7F5] rounded-lg transition-colors flex items-center justify-center gap-1",style:{borderColor:$e.fossilGray},children:[T.jsx(ky,{size:14})," "]})]}),s&&T.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl overflow-hidden shadow-2xl animate-scale-up flex flex-col h-[60vh] md:h-auto",children:[T.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:$e.whiteBucks},children:[T.jsx("button",{onClick:()=>a(!1),className:"p-1",children:T.jsx(Hf,{size:24,className:"text-gray-600"})}),T.jsx("span",{className:"font-bold text-[#756256] text-lg",children:""}),T.jsx("button",{onClick:f,className:"text-blue-500 font-bold text-sm px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!l.trim(),children:""})]}),T.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden border border-gray-100",children:T.jsx("img",{src:r?.src,alt:"avatar",className:"w-full h-full object-cover"})}),T.jsx("span",{className:"font-bold text-[#5D4037]",children:t?.name||""})]}),T.jsx("textarea",{className:"flex-1 w-full resize-none outline-none text-[#5D4037] placeholder-gray-400 text-lg leading-relaxed",placeholder:"...",value:l,onChange:p=>h(p.target.value),autoFocus:!0})]}),T.jsxs("div",{className:"p-3 border-t bg-gray-50 flex gap-4 text-gray-400",children:[T.jsx(S0,{size:20,className:"cursor-pointer hover:text-[#756256] transition-colors"}),T.jsx(mb,{size:20,className:"cursor-pointer hover:text-[#756256] transition-colors"})]})]})})]})},z6=({onLogin:n})=>{const[e,t]=be.useState(!1),[r,s]=be.useState(!1),[a,l]=be.useState(""),[h,f]=be.useState(""),[p,g]=be.useState(""),[w,I]=be.useState(""),[C,k]=be.useState(""),F=async D=>{if(D.preventDefault(),s(!0),e){if(!a.endsWith("@shsh.tw")){alert(" @shsh.tw "),s(!1);return}if(!p||!w||!C){alert(""),s(!1);return}}try{if(e){await df.signUp(a,h);try{await df.completeProfile({realName:p,studentId:w,nickname:C}),alert("")}catch(Q){console.error("Profile completion failed",Q),alert("")}alert(""),t(!1)}else await df.login(a,h)}catch(Q){console.error(Q),alert((e?": ":": ")+Q.message)}finally{s(!1)}};return r?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F9F7F5]",children:T.jsx("div",{className:"text-[#756256] font-bold",children:"..."})}):T.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Mp,backgroundColor:$e.bgLight,color:$e.brownWindmill},children:T.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border",style:{borderColor:$e.whiteBucks},children:[T.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:$e.brownWindmill},children:e?"":""}),T.jsx("p",{className:"text-sm mb-6",style:{color:$e.brushwood},children:e?"":""}),T.jsxs("form",{onSubmit:F,className:"space-y-3 mb-4",children:[e&&T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:p,onChange:D=>g(D.target.value),placeholder:" ()",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0}),T.jsx("input",{type:"text",value:w,onChange:D=>I(D.target.value),placeholder:"",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0}),T.jsx("input",{type:"text",value:C,onChange:D=>k(D.target.value),placeholder:"",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0})]}),T.jsx("input",{type:"email",value:a,onChange:D=>l(D.target.value),placeholder:"Email (@shsh.tw)",className:"w-full p-3 border rounded-xl",required:!0}),T.jsx("input",{type:"password",value:h,onChange:D=>f(D.target.value),placeholder:"Password",className:"w-full p-3 border rounded-xl",required:!0}),T.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 rounded-xl border-2 font-bold mb-3 hover:bg-gray-50 flex items-center justify-center gap-2",style:{borderColor:$e.whiteBucks,color:$e.brownWindmill},children:r?"...":e?"":""})]}),T.jsx("button",{onClick:()=>t(!e),className:"text-xs text-gray-400 hover:underline",children:e?"":" ()"})]})})},q6=({product:n,onBack:e,onContact:t,currentUser:r})=>{if(!n)return null;const s=r?.uid===n.sellerId;return T.jsxs("div",{className:"min-h-screen pb-24 bg-white",style:Mp,children:[T.jsxs("nav",{className:"fixed top-0 w-full z-50 flex justify-between items-center px-4 py-3 bg-white/80 backdrop-blur-md border-b",style:{borderColor:$e.whiteBucks},children:[T.jsx("button",{onClick:e,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200",children:T.jsx(Ux,{size:20,color:$e.brownWindmill})}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:T.jsx(ib,{size:20,color:$e.brownWindmill})}),T.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:T.jsx(A0,{size:20,color:$e.brownWindmill})})]})]}),T.jsxs("div",{className:"pt-16 pb-6 md:pt-20 md:pb-12 md:px-8 max-w-6xl mx-auto md:flex md:gap-10 md:items-start",children:[T.jsx("div",{className:"aspect-[4/3] bg-gray-100 relative md:w-1/2 md:aspect-square md:rounded-2xl md:overflow-hidden md:shadow-sm md:sticky md:top-24",children:T.jsx("img",{src:n.cover||n.imageBase64||"https://dummyimage.com/600x400/eee/aaa",alt:n.title,className:"w-full h-full object-contain bg-[#F9F7F5]"})}),T.jsxs("div",{className:"px-5 mt-6 md:w-1/2 md:px-0 md:mt-0",children:[T.jsxs("div",{className:"flex gap-2 mb-2",children:[T.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.subject}),n.grade&&n.grade!==""&&T.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.grade})]}),T.jsx("h1",{className:"text-2xl md:text-3xl font-bold mt-4 mb-2 leading-tight",style:{color:$e.brownWindmill},children:n.title}),T.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[n.author,"  ",n.publisher]}),T.jsx("div",{className:"flex items-end gap-3 mb-6 pb-6 border-b",style:{borderColor:$e.whiteBucks},children:T.jsx(Sv,{type:n.type,price:n.price,originalPrice:n.originalPrice,large:!0})}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg inline-block border border-gray-100",children:n.conditionLevel}),T.jsx("p",{className:"text-gray-700 mt-2",children:n.location?n.location:""})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:n.description||""})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-[#F9F7F5] border border-stone-100",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white shadow-sm",children:T.jsx(gf,{size:24,className:"text-gray-500"})}),T.jsxs("div",{children:[T.jsxs("div",{className:"font-bold text-[#756256] text-lg",children:[n.seller?.nickname||n.seller?.name||"",T.jsxs("span",{className:"text-sm text-gray-500 font-normal ml-2",children:["@",n.seller?.studentId||""]})]}),T.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[T.jsx(hb,{size:12,fill:"#fbbf24",className:"text-yellow-400"}),T.jsx("span",{className:"font-bold text-gray-700",children:n.seller?.score||5})]})]})]})]}),!s&&T.jsx("div",{className:"hidden md:block pt-4",children:T.jsxs("button",{onClick:t,className:"w-full py-4 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2 text-lg",children:[T.jsx(Og,{size:20}),"  / "]})})]})]})]}),!s&&T.jsx("div",{className:"fixed bottom-0 left-0 w-full p-4 bg-white border-t safe-area-bottom flex gap-3 md:hidden z-40",style:{borderColor:$e.whiteBucks},children:T.jsxs("button",{onClick:t,className:"flex-1 py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-colors flex items-center justify-center gap-2",children:[T.jsx(Og,{size:18})," "]})})]})},$6=({transactionId:n,currentUser:e,title:t,onClose:r})=>{const[s,a]=be.useState([]),[l,h]=be.useState(""),f=be.useRef(null);be.useEffect(()=>{if(!n)return;const g=E0.subscribeToMessages(n,w=>{a(w),setTimeout(()=>f.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>g&&g()},[n]);const p=async()=>{if(l.trim())try{await E0.sendMessage(n,e.uid,e.name||e.nickname||"",l),h("")}catch(g){console.error(g),alert(": "+g.message)}};return T.jsxs("div",{className:"fixed bottom-4 right-4 w-80 h-96 bg-white rounded-t-xl rounded-bl-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[T.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center shadow-md",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Og,{size:18}),T.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:t||""})]}),T.jsx("button",{onClick:r,className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:T.jsx(Hf,{size:16})})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 bg-[#F9F7F5]",children:[s.length===0&&T.jsx("div",{className:"text-center text-xs text-gray-400 mt-4",children:""}),s.map(g=>{const w=g.senderId===e.uid;return T.jsx("div",{className:`flex ${w?"justify-end":"justify-start"}`,children:T.jsx("div",{className:`max-w-[80%] rounded-xl px-3 py-2 text-sm shadow-sm ${w?"bg-[#756256] text-white rounded-tr-none":"bg-white text-gray-700 rounded-tl-none border"}`,children:g.content})},g.id)}),T.jsx("div",{ref:f})]}),T.jsxs("div",{className:"p-3 bg-white border-t flex gap-2",children:[T.jsx("input",{type:"text",value:l,onChange:g=>h(g.target.value),onKeyDown:g=>g.key==="Enter"&&p(),placeholder:"...",className:"flex-1 bg-gray-100 rounded-full px-3 py-2 text-sm outline-none focus:ring-1 focus:ring-[#756256]"}),T.jsx("button",{onClick:p,className:"bg-[#756256] text-white p-2 rounded-full hover:bg-[#5D4E44] transition-colors",children:T.jsx(nb,{size:16})})]})]})},W6=({currentUser:n,onSelectChat:e,onClose:t})=>{const[r,s]=be.useState([]);return be.useEffect(()=>{if(!n)return;const a=new Map,l=p=>{p.forEach(g=>{a.set(g.id,{id:g.id,...g.data()})}),s(Array.from(a.values()).sort((g,w)=>{const I=g.timestamp?.toDate?g.timestamp.toDate():new Date(g.timestamp);return(w.timestamp?.toDate?w.timestamp.toDate():new Date(w.timestamp))-I}))},h=Hr.getUserTransactions(n.uid,l),f=Hr.getSellerTransactions(n.uid,l);return()=>{h(),f()}},[n]),T.jsxs("div",{className:"fixed bottom-20 right-4 w-80 max-h-96 bg-white rounded-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[T.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center",children:[T.jsx("span",{className:"font-bold",children:""}),T.jsx("button",{onClick:t,className:"hover:bg-white/20 rounded-full p-1",children:T.jsx(Hf,{size:16})})]}),T.jsxs("div",{className:"overflow-y-auto p-2 space-y-2 bg-[#F9F7F5] flex-1",children:[r.length===0&&T.jsx("div",{className:"text-center text-gray-400 py-4 text-sm",children:""}),r.map(a=>T.jsxs("div",{onClick:()=>e({transactionId:a.id,title:a.bookTitle}),className:"p-3 bg-white hover:bg-gray-50 rounded-lg cursor-pointer transition-colors shadow-sm border border-gray-100",children:[T.jsx("div",{className:"font-bold text-[#756256] text-sm truncate",children:a.bookTitle}),T.jsxs("div",{className:"text-xs text-gray-500 flex justify-between mt-1",children:[T.jsx("span",{children:a.buyerId===n.uid?"":""}),T.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] ${a.status==="Completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status==="Pending"?"":a.status})]})]},a.id))]})]})},H6=({onClose:n,onConfirm:e,coins:t})=>T.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:T.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xs text-center shadow-2xl animate-scale-up",children:[T.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4 text-yellow-500",children:T.jsx(Cy,{size:32})}),T.jsx("h3",{className:"text-xl font-bold text-[#5D4037] mb-2",children:""}),T.jsxs("p",{className:"text-gray-500 mb-6",children:[" ",t," "]}),T.jsx("button",{onClick:e,className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44]",children:""})]})}),G6=({currentUser:n,userBooks:e,onNavigate:t,onUpload:r,onBuyAvatar:s,onEquipAvatar:a,myAvatars:l,currentAvatar:h,coins:f})=>{const[p,g]=be.useState("shelf"),[w,I]=be.useState(!1),[C,k]=be.useState(!1),[F,D]=be.useState(null),[Q,se]=be.useState({title:"",author:"",publisher:"",subject:"",grade:"",price:"",originalPrice:"",type:"sell",conditionLevel:"",description:"",location:"",cover:null,imageBase64:null}),ie=K=>{const b=K.target.files[0];if(b){const A=new FileReader;A.onloadend=()=>se({...Q,imageBase64:A.result,cover:null}),A.readAsDataURL(b)}},pe=K=>{if(K.preventDefault(),!Q.title||!Q.price)return alert("");r({...Q,sellerId:n.uid,seller:{name:n.realName||n.displayName,studentId:n.studentId,score:5}}),alert(""),g("shelf"),se({...Q,title:"",price:"",imageBase64:null})},ve=()=>T.jsxs("div",{className:"relative inline-block",children:[T.jsxs("div",{className:"w-24 h-24 rounded-full border-4 border-white shadow-lg overflow-hidden bg-gray-100 relative group cursor-pointer",onClick:()=>I(!0),children:[T.jsx("img",{src:h.src,alt:"avatar",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx(Lg,{size:20,className:"text-white"})})]}),w&&T.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",onClick:()=>I(!1),children:T.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-sm p-4 shadow-2xl animate-scale-up",onClick:K=>K.stopPropagation(),children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h3",{className:"font-bold text-[#756256]",children:""}),T.jsx("button",{onClick:()=>I(!1),children:T.jsx(Hf,{size:20})})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("div",{className:"text-xs font-bold text-gray-400 mb-2",children:""}),T.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:l.map(K=>{const b=Bo.find(A=>A.id===K)||Bo[0];return currentAvatarId,T.jsx("div",{onClick:()=>a(K),className:`flex-shrink-0 w-16 text-center cursor-pointer transition-all ${h.id===K?"opacity-100 scale-110":"opacity-50 hover:opacity-100"}`,children:T.jsx("div",{className:`w-14 h-14 rounded-full border-2 ${h.id===K?"border-[#756256]":"border-transparent"} overflow-hidden mx-auto`,children:T.jsx("img",{src:b.src,className:"w-full h-full object-cover"})})},K)})})]}),T.jsxs("div",{children:[T.jsx("div",{className:"text-xs font-bold text-gray-400 mb-2",children:" ()"}),T.jsx("div",{className:"grid grid-cols-4 gap-2",children:Bo.filter(K=>!l.includes(K.id)).map(K=>T.jsxs("div",{onClick:()=>{D(K),k(!0)},className:"relative aspect-square rounded-xl bg-gray-50 border cursor-pointer hover:border-[#756256] transition-colors group",children:[T.jsx("img",{src:K.src,className:"w-full h-full object-cover rounded-xl"}),T.jsxs("div",{className:"absolute bottom-0 right-0 bg-[#756256] text-white text-[10px] px-1 rounded-tl-md font-bold",children:["$",K.price]})]},K.id))})]})]})]})})]});return T.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] pb-24",style:Mp,children:[T.jsxs("div",{className:"h-40 bg-gradient-to-br from-[#E6DBC6] to-[#C9C3B6] relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-20",style:{backgroundImage:"radial-gradient(circle at 50% 50%, #fff 2px, transparent 2.5px)",backgroundSize:"20px 20px"}}),T.jsx("div",{className:"absolute top-4 right-4 flex gap-2",children:T.jsx("button",{className:"p-2 bg-white/30 backdrop-blur-md rounded-full text-[#756256] hover:bg-white/50",children:T.jsx(Lg,{size:20})})})]}),T.jsxs("div",{className:"px-4 -mt-12 relative z-10 flex justify-between items-end mb-6",children:[T.jsx(ve,{}),T.jsxs("div",{className:"flex-1 ml-4 mb-2",children:[T.jsx("h1",{className:"text-2xl font-bold text-[#5D4037]",children:n.realName||n.displayName||""}),T.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#756256]",children:[T.jsxs("span",{className:"font-mono bg-white/50 px-2 rounded",children:["@",n.studentId]}),T.jsxs("span",{className:"flex items-center gap-1 bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded-full text-xs font-bold",children:[T.jsx(Cy,{size:10})," ",f]})]})]})]}),T.jsx("div",{className:"px-4 mb-4",children:T.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-1 flex",style:{borderColor:$e.whiteBucks},children:["shelf","upload"].map(K=>T.jsx("button",{onClick:()=>g(K),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${p===K?"bg-[#756256] text-white shadow-md":"text-gray-400 hover:text-[#756256]"}`,children:K==="shelf"?"":""},K))})}),T.jsxs("div",{className:"px-4",children:[p==="shelf"&&T.jsx("div",{className:"columns-2 gap-3 space-y-3",children:e.length===0?T.jsx("div",{className:"col-span-2 text-center py-10 text-gray-400 border-2 border-dashed rounded-xl border-[#E8E3DF]",children:""}):e.map(K=>T.jsxs("div",{onClick:()=>t("product",K),className:"bg-white rounded-xl break-inside-avoid shadow-sm border overflow-hidden cursor-pointer hover:shadow-md transition-shadow",style:{borderColor:$e.whiteBucks},children:[T.jsxs("div",{className:"aspect-[3/4] bg-gray-100 relative",children:[T.jsx("img",{src:K.cover||K.imageBase64||"https://dummyimage.com/300x400",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:T.jsx("span",{className:"bg-black/60 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded-full",children:K.status==="sold"?"":""})})]}),T.jsxs("div",{className:"p-3",children:[T.jsx("h3",{className:"font-bold text-[#5D4037] text-sm line-clamp-1",children:K.title}),T.jsx(Sv,{type:K.type,price:K.price})]})]},K.id))}),p==="upload"&&T.jsxs("form",{onSubmit:pe,className:"space-y-4 max-w-lg mx-auto bg-white p-6 rounded-xl shadow-sm border",style:{borderColor:$e.whiteBucks},children:[T.jsxs("div",{className:"w-full aspect-video bg-gray-50 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors relative overflow-hidden",style:{borderColor:$e.fossilGray},children:[T.jsx("input",{type:"file",accept:"image/*",onChange:ie,className:"absolute inset-0 opacity-0 cursor-pointer"}),Q.imageBase64?T.jsx("img",{src:Q.imageBase64,alt:"Preview",className:"w-full h-full object-contain"}):T.jsxs(T.Fragment,{children:[T.jsx(S0,{size:32,className:"text-gray-400 mb-2"}),T.jsx("span",{className:"text-xs text-gray-400",children:""})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("input",{type:"text",placeholder:"",value:Q.title,onChange:K=>se({...Q,title:K.target.value}),className:"w-full p-2 border rounded-lg bg-[#F9F7F5] outline-none focus:ring-1 focus:ring-[#756256]"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"",value:Q.author,onChange:K=>se({...Q,author:K.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]"}),T.jsxs("select",{value:Q.publisher,onChange:K=>se({...Q,publisher:K.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),O6.map(K=>T.jsx("option",{value:K,children:K},K))]})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("select",{value:Q.subject,onChange:K=>se({...Q,subject:K.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),L6.map(K=>T.jsx("option",{value:K,children:K},K))]}),T.jsxs("select",{value:Q.grade,onChange:K=>se({...Q,grade:K.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),M6.map(K=>T.jsx("option",{value:K,children:K},K))]})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("div",{className:"flex gap-2",children:["sell","exchange","gift"].map(K=>T.jsx("button",{type:"button",onClick:()=>se({...Q,type:K}),className:`flex-1 py-2 rounded-lg text-xs font-bold border ${Q.type===K?"bg-[#756256] text-white":"bg-white text-gray-500"}`,children:K==="sell"?"":K==="exchange"?"":""},K))}),T.jsx("input",{type:"number",placeholder:"",value:Q.price,onChange:K=>se({...Q,price:K.target.value}),disabled:Q.type!=="sell",className:"w-full p-2 border rounded-lg bg-[#F9F7F5]"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("textarea",{rows:3,placeholder:"...",value:Q.description,onChange:K=>se({...Q,description:K.target.value}),className:"w-full p-2 border rounded-lg bg-[#F9F7F5]"})]}),T.jsx("button",{type:"submit",className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44]",children:""})]})]}),C&&F&&T.jsx("div",{className:"fixed inset-0 z-[90] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xs text-center shadow-xl animate-scale-up",children:[T.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),T.jsx("img",{src:F.src,className:"w-20 h-20 mx-auto rounded-full my-4 bg-gray-100"}),T.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:[" ",T.jsx("span",{className:"text-yellow-600 font-bold",children:F.price})," "]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-2 border rounded-lg font-bold text-gray-500",children:""}),T.jsx("button",{onClick:()=>{s(F),k(!1)},className:"flex-1 py-2 bg-[#756256] text-white rounded-lg font-bold",children:""})]})]})})]})},K6=()=>{const[n,e]=be.useState("login"),[t,r]=be.useState(null),[s,a]=be.useState(null),[l,h]=be.useState(null),[f,p]=be.useState("all"),[g,w]=be.useState([]),[I,C]=be.useState(125),[k,F]=be.useState(F6),[D,Q]=be.useState(["default","cat"]),[se,ie]=be.useState("default"),[pe,ve]=be.useState(j6),[K,b]=be.useState(null),[A,x]=be.useState(!1);be.useEffect(()=>{const Re=df.onAuthStateChanged(ce=>{ce?(a(ce),e("home")):(a(null),e("login"))});return()=>Re()},[]),be.useEffect(()=>{if(!s)return;const Re=Hr.onBooksSnapshot(re=>w(re)),ce=Hr.onWishesSnapshot(re=>F(re));return()=>{Re(),ce()}},[s]),be.useEffect(()=>{b({exams:[{title:"",daysLeft:23},{title:"",daysLeft:180}]})},[]);const O=(Re,ce=null)=>{ce&&r(ce),e(Re),window.scrollTo(0,0)},V=()=>{if(Hr.hasCheckedInToday())return;const Re=5;C(ce=>ce+Re),Hr.recordCheckIn(),x(!0)},j=Re=>{const ce={content:Re,user:s.nickname||s.displayName,time:"",avatarId:se};Hr.addWish(ce)},P=Bo.find(Re=>Re.id===se)||Bo[0],je=Re=>{if(I<Re.price)return alert("");C(ce=>ce-Re.price),Q(ce=>[...ce,Re.id])},gt=()=>{switch(n){case"login":return T.jsx(z6,{onLogin:()=>{}});case"home":const Re=g.filter(ce=>f!=="all"?f==="exam"?ce.subject===""||ce.subject===""||ce.subject==="":!!(ce.subject&&ce.subject.includes(I0.find(re=>re.id===f)?.name)):!0);return T.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] pb-24",style:Mp,children:[T.jsxs("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md px-4 py-3 shadow-sm border-b",style:{borderColor:$e.whiteBucks},children:[T.jsxs("div",{className:"flex justify-between items-center mb-3",children:[T.jsxs("div",{className:"flex items-center gap-2 text-[#756256] font-bold text-xl tracking-tight",children:[T.jsx(fb,{size:24})," ",T.jsx("span",{className:"bg-gradient-to-r from-[#756256] to-[#A58976] bg-clip-text text-transparent",children:"SchoolBook Exchange"})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsxs("button",{className:"relative p-2 bg-white rounded-full shadow-sm text-gray-400 hover:text-[#756256] transition-colors",children:[T.jsx(Dx,{size:20}),pe.some(ce=>!ce.isRead)&&T.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"})]}),T.jsx("button",{onClick:()=>O("profile"),className:"w-10 h-10 rounded-full border-2 border-white shadow-md overflow-hidden bg-gray-200",children:T.jsx("img",{src:P.src,alt:"avatar",className:"w-full h-full object-cover"})})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx(eb,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),T.jsx("input",{type:"text",placeholder:"...",className:"w-full bg-[#F3F0EC] text-sm text-gray-700 rounded-xl pl-10 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-[#E6DBC6] transition-all"})]})]}),T.jsx(U6,{coins:I,isCheckedIn:Hr.hasCheckedInToday(),onCheckIn:V,onGoToStore:()=>{O("profile")},examCountdown:K,isLoading:!K,books:g,onNavigate:O}),T.jsxs("div",{className:"mx-4",children:[T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-4 scrollbar-hide mb-2",children:I0.map(ce=>T.jsx("button",{onClick:()=>p(ce.id),className:`px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all shadow-sm border ${f===ce.id?"bg-[#756256] text-white border-[#756256]":"bg-white text-gray-500 border-transparent"}`,children:ce.name},ce.id))}),T.jsx("div",{className:"columns-2 md:columns-3 gap-3 space-y-3",children:Re.length===0?T.jsx("div",{className:"col-span-2 text-center py-10 text-gray-400",children:""}):Re.map((ce,re)=>T.jsxs("div",{onClick:()=>O("product",ce),className:"break-inside-avoid bg-white rounded-xl overflow-hidden shadow-sm border cursor-pointer hover:shadow-md transition-shadow group mb-3",style:{borderColor:$e.whiteBucks},children:[T.jsxs("div",{className:"relative",children:[T.jsx("img",{src:ce.cover||ce.imageBase64||"https://dummyimage.com/300x400",className:"w-full h-auto object-cover transform transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),T.jsx("div",{className:"absolute top-2 right-2 flex flex-col gap-1 items-end",children:T.jsx("span",{className:"bg-white/90 backdrop-blur-md text-[#756256] text-[10px] px-2 py-1 rounded-full font-bold shadow-sm",children:ce.subject})}),ce.conditionLevel===""&&T.jsx("div",{className:"absolute bottom-0 left-0 bg-blue-500 text-white text-[10px] px-2 py-0.5 rounded-tr-lg",children:"New"})]}),T.jsxs("div",{className:"p-3",children:[T.jsx("h3",{className:"font-bold text-[#5D4037] text-sm leading-snug mb-1 line-clamp-2",children:ce.title}),T.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400 mb-2",children:[T.jsx(gf,{size:10})," ",T.jsx("span",{children:ce.seller?.nickname||ce.seller?.name||""})]}),T.jsxs("div",{className:"flex justify-between items-end",children:[T.jsx(Sv,{type:ce.type,price:ce.price}),T.jsx("button",{className:"p-1.5 rounded-full bg-gray-50 text-gray-400 hover:bg-red-50 hover:text-red-500 transition-colors",children:T.jsx(A0,{size:14})})]})]})]},re))})]}),T.jsx("div",{className:"mt-8",children:T.jsx(B6,{wishes:k,onAddWish:j,currentUser:s,currentAvatar:P})})]});case"product":return T.jsx(q6,{product:t,onBack:()=>e("home"),onContact:()=>Hr.startTransaction(t,s,ce=>h({transactionId:ce,title:t.title})),currentUser:s});case"profile":return T.jsx(G6,{currentUser:s,userBooks:g.filter(ce=>ce.sellerId===s.uid),onNavigate:O,onUpload:ce=>Hr.addBook(ce),onBuyAvatar:je,onEquipAvatar:ie,myAvatars:D,currentAvatar:P,coins:I});default:return T.jsx("div",{children:"404"})}};return T.jsxs(T.Fragment,{children:[gt(),(n==="home"||n==="profile")&&T.jsxs("div",{className:"fixed bottom-0 w-full bg-white border-t py-3 px-6 flex justify-between items-center z-50 safe-area-bottom shadow-[0_-5px_20px_rgba(0,0,0,0.03)]",style:{borderColor:$e.whiteBucks},children:[T.jsxs("button",{onClick:()=>e("home"),className:`flex flex-col items-center gap-1 transition-colors ${n==="home"?"text-[#756256]":"text-gray-300"}`,children:[T.jsx(Kx,{size:24,strokeWidth:n==="home"?2.5:2}),T.jsx("span",{className:"text-[10px] font-bold",children:""})]}),T.jsxs("button",{className:"flex flex-col items-center gap-1 text-gray-300 relative group",children:[T.jsx("div",{className:"p-3 bg-[#756256] rounded-full -mt-10 shadow-lg border-4 border-[#F9F7F5] transform transition-transform group-hover:scale-110 active:scale-95 text-white flex items-center justify-center",children:T.jsx(ky,{size:24})}),T.jsx("span",{className:"text-[10px] font-bold mt-1",children:""})]}),T.jsxs("button",{onClick:()=>e("profile"),className:`flex flex-col items-center gap-1 transition-colors ${n==="profile"?"text-[#756256]":"text-gray-300"}`,children:[T.jsx(gf,{size:24,strokeWidth:n==="profile"?2.5:2}),T.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),l&&T.jsx($6,{transactionId:l.transactionId,title:l.title,currentUser:s,onClose:()=>h(null)}),s&&!l&&T.jsx(W6,{currentUser:s,onSelectChat:Re=>h(Re),onClose:()=>{}}),A&&T.jsx(H6,{onClose:()=>x(!1),onConfirm:()=>x(!1),coins:5})]})};Rx.createRoot(document.getElementById("root")).render(T.jsx(be.StrictMode,{children:T.jsx(K6,{})}));
