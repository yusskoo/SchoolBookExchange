(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var ag={exports:{}},Ku={},lg={exports:{}},Oe={};var kE;function mx(){if(kE)return Oe;kE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=v&&M[v]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,j={};function N(M,Q,xe){this.props=M,this.context=Q,this.refs=j,this.updater=xe||C}N.prototype.isReactComponent={},N.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},N.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function q(){}q.prototype=N.prototype;function oe(M,Q,xe){this.props=M,this.context=Q,this.refs=j,this.updater=xe||C}var ee=oe.prototype=new q;ee.constructor=oe,k(ee,N.prototype),ee.isPureReactComponent=!0;var de=Array.isArray,ve=Object.prototype.hasOwnProperty,ye={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function R(M,Q,xe){var Re,Ve={},Fe=null,Ke=null;if(Q!=null)for(Re in Q.ref!==void 0&&(Ke=Q.ref),Q.key!==void 0&&(Fe=""+Q.key),Q)ve.call(Q,Re)&&!b.hasOwnProperty(Re)&&(Ve[Re]=Q[Re]);var qe=arguments.length-2;if(qe===1)Ve.children=xe;else if(1<qe){for(var tt=Array(qe),gn=0;gn<qe;gn++)tt[gn]=arguments[gn+2];Ve.children=tt}if(M&&M.defaultProps)for(Re in qe=M.defaultProps,qe)Ve[Re]===void 0&&(Ve[Re]=qe[Re]);return{$$typeof:n,type:M,key:Fe,ref:Ke,props:Ve,_owner:ye.current}}function x(M,Q){return{$$typeof:n,type:M.type,key:Q,ref:M.ref,props:M.props,_owner:M._owner}}function O(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function V(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(xe){return Q[xe]})}var F=/\/+/g;function A(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?V(""+M.key):Q.toString(36)}function Ae(M,Q,xe,Re,Ve){var Fe=typeof M;(Fe==="undefined"||Fe==="boolean")&&(M=null);var Ke=!1;if(M===null)Ke=!0;else switch(Fe){case"string":case"number":Ke=!0;break;case"object":switch(M.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=M,Ve=Ve(Ke),M=Re===""?"."+A(Ke,0):Re,de(Ve)?(xe="",M!=null&&(xe=M.replace(F,"$&/")+"/"),Ae(Ve,Q,xe,"",function(gn){return gn})):Ve!=null&&(O(Ve)&&(Ve=x(Ve,xe+(!Ve.key||Ke&&Ke.key===Ve.key?"":(""+Ve.key).replace(F,"$&/")+"/")+M)),Q.push(Ve)),1;if(Ke=0,Re=Re===""?".":Re+":",de(M))for(var qe=0;qe<M.length;qe++){Fe=M[qe];var tt=Re+A(Fe,qe);Ke+=Ae(Fe,Q,xe,tt,Ve)}else if(tt=I(M),typeof tt=="function")for(M=tt.call(M),qe=0;!(Fe=M.next()).done;)Fe=Fe.value,tt=Re+A(Fe,qe++),Ke+=Ae(Fe,Q,xe,tt,Ve);else if(Fe==="object")throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Ke}function at(M,Q,xe){if(M==null)return M;var Re=[],Ve=0;return Ae(M,Re,"","",function(Fe){return Q.call(xe,Fe,Ve++)}),Re}function Ze(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(xe){(M._status===0||M._status===-1)&&(M._status=1,M._result=xe)},function(xe){(M._status===0||M._status===-1)&&(M._status=2,M._result=xe)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var et={current:null},ie={transition:null},Ee={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ye};function he(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:at,forEach:function(M,Q,xe){at(M,function(){Q.apply(this,arguments)},xe)},count:function(M){var Q=0;return at(M,function(){Q++}),Q},toArray:function(M){return at(M,function(Q){return Q})||[]},only:function(M){if(!O(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=N,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=oe,Oe.StrictMode=r,Oe.Suspense=f,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,Oe.act=he,Oe.cloneElement=function(M,Q,xe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Re=k({},M.props),Ve=M.key,Fe=M.ref,Ke=M._owner;if(Q!=null){if(Q.ref!==void 0&&(Fe=Q.ref,Ke=ye.current),Q.key!==void 0&&(Ve=""+Q.key),M.type&&M.type.defaultProps)var qe=M.type.defaultProps;for(tt in Q)ve.call(Q,tt)&&!b.hasOwnProperty(tt)&&(Re[tt]=Q[tt]===void 0&&qe!==void 0?qe[tt]:Q[tt])}var tt=arguments.length-2;if(tt===1)Re.children=xe;else if(1<tt){qe=Array(tt);for(var gn=0;gn<tt;gn++)qe[gn]=arguments[gn+2];Re.children=qe}return{$$typeof:n,type:M.type,key:Ve,ref:Fe,props:Re,_owner:Ke}},Oe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Oe.createElement=R,Oe.createFactory=function(M){var Q=R.bind(null,M);return Q.type=M,Q},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:h,render:M}},Oe.isValidElement=O,Oe.lazy=function(M){return{$$typeof:g,_payload:{_status:-1,_result:M},_init:Ze}},Oe.memo=function(M,Q){return{$$typeof:p,type:M,compare:Q===void 0?null:Q}},Oe.startTransition=function(M){var Q=ie.transition;ie.transition={};try{M()}finally{ie.transition=Q}},Oe.unstable_act=he,Oe.useCallback=function(M,Q){return et.current.useCallback(M,Q)},Oe.useContext=function(M){return et.current.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M){return et.current.useDeferredValue(M)},Oe.useEffect=function(M,Q){return et.current.useEffect(M,Q)},Oe.useId=function(){return et.current.useId()},Oe.useImperativeHandle=function(M,Q,xe){return et.current.useImperativeHandle(M,Q,xe)},Oe.useInsertionEffect=function(M,Q){return et.current.useInsertionEffect(M,Q)},Oe.useLayoutEffect=function(M,Q){return et.current.useLayoutEffect(M,Q)},Oe.useMemo=function(M,Q){return et.current.useMemo(M,Q)},Oe.useReducer=function(M,Q,xe){return et.current.useReducer(M,Q,xe)},Oe.useRef=function(M){return et.current.useRef(M)},Oe.useState=function(M){return et.current.useState(M)},Oe.useSyncExternalStore=function(M,Q,xe){return et.current.useSyncExternalStore(M,Q,xe)},Oe.useTransition=function(){return et.current.useTransition()},Oe.version="18.3.1",Oe}var NE;function xy(){return NE||(NE=1,lg.exports=mx()),lg.exports}var DE;function gx(){if(DE)return Ku;DE=1;var n=xy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var g,v={},I=null,C=null;p!==void 0&&(I=""+p),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(v[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:e,type:h,key:I,ref:C,props:v,_owner:i.current}}return Ku.Fragment=t,Ku.jsx=l,Ku.jsxs=l,Ku}var VE;function yx(){return VE||(VE=1,ag.exports=gx()),ag.exports}var T=yx(),be=xy(),Fd={},ug={exports:{}},xn={},cg={exports:{}},hg={};var OE;function _x(){return OE||(OE=1,(function(n){function e(ie,Ee){var he=ie.length;ie.push(Ee);e:for(;0<he;){var M=he-1>>>1,Q=ie[M];if(0<i(Q,Ee))ie[M]=Ee,ie[he]=Q,he=M;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var Ee=ie[0],he=ie.pop();if(he!==Ee){ie[0]=he;e:for(var M=0,Q=ie.length,xe=Q>>>1;M<xe;){var Re=2*(M+1)-1,Ve=ie[Re],Fe=Re+1,Ke=ie[Fe];if(0>i(Ve,he))Fe<Q&&0>i(Ke,Ve)?(ie[M]=Ke,ie[Fe]=he,M=Fe):(ie[M]=Ve,ie[Re]=he,M=Re);else if(Fe<Q&&0>i(Ke,he))ie[M]=Ke,ie[Fe]=he,M=Fe;else break e}}return Ee}function i(ie,Ee){var he=ie.sortIndex-Ee.sortIndex;return he!==0?he:ie.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],g=1,v=null,I=3,C=!1,k=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(ie){for(var Ee=t(p);Ee!==null;){if(Ee.callback===null)r(p);else if(Ee.startTime<=ie)r(p),Ee.sortIndex=Ee.expirationTime,e(f,Ee);else break;Ee=t(p)}}function de(ie){if(j=!1,ee(ie),!k)if(t(f)!==null)k=!0,Ze(ve);else{var Ee=t(p);Ee!==null&&et(de,Ee.startTime-ie)}}function ve(ie,Ee){k=!1,j&&(j=!1,q(R),R=-1),C=!0;var he=I;try{for(ee(Ee),v=t(f);v!==null&&(!(v.expirationTime>Ee)||ie&&!V());){var M=v.callback;if(typeof M=="function"){v.callback=null,I=v.priorityLevel;var Q=M(v.expirationTime<=Ee);Ee=n.unstable_now(),typeof Q=="function"?v.callback=Q:v===t(f)&&r(f),ee(Ee)}else r(f);v=t(f)}if(v!==null)var xe=!0;else{var Re=t(p);Re!==null&&et(de,Re.startTime-Ee),xe=!1}return xe}finally{v=null,I=he,C=!1}}var ye=!1,b=null,R=-1,x=5,O=-1;function V(){return!(n.unstable_now()-O<x)}function F(){if(b!==null){var ie=n.unstable_now();O=ie;var Ee=!0;try{Ee=b(!0,ie)}finally{Ee?A():(ye=!1,b=null)}}else ye=!1}var A;if(typeof oe=="function")A=function(){oe(F)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,at=Ae.port2;Ae.port1.onmessage=F,A=function(){at.postMessage(null)}}else A=function(){N(F,0)};function Ze(ie){b=ie,ye||(ye=!0,A())}function et(ie,Ee){R=N(function(){ie(n.unstable_now())},Ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){k||C||(k=!0,Ze(ve))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ie){switch(I){case 1:case 2:case 3:var Ee=3;break;default:Ee=I}var he=I;I=Ee;try{return ie()}finally{I=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,Ee){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var he=I;I=ie;try{return Ee()}finally{I=he}},n.unstable_scheduleCallback=function(ie,Ee,he){var M=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?M+he:M):he=M,ie){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=he+Q,ie={id:g++,callback:Ee,priorityLevel:ie,startTime:he,expirationTime:Q,sortIndex:-1},he>M?(ie.sortIndex=he,e(p,ie),t(f)===null&&ie===t(p)&&(j?(q(R),R=-1):j=!0,et(de,he-M))):(ie.sortIndex=Q,e(f,ie),k||C||(k=!0,Ze(ve))),ie},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(ie){var Ee=I;return function(){var he=I;I=Ee;try{return ie.apply(this,arguments)}finally{I=he}}}})(hg)),hg}var LE;function vx(){return LE||(LE=1,cg.exports=_x()),cg.exports}var ME;function wx(){if(ME)return xn;ME=1;var n=xy(),e=vx();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function I(s){return f.call(v,s)?!0:f.call(g,s)?!1:p.test(s)?v[s]=!0:(g[s]=!0,!1)}function C(s,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,o,u,d){if(o===null||typeof o>"u"||C(s,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(s,o,u,d,m,y,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=y,this.removeEmptyString=E}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];N[o]=new j(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function oe(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(q,oe);N[o]=new j(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(q,oe);N[o]=new j(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(q,oe);N[o]=new j(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function ee(s,o,u,d){var m=N.hasOwnProperty(o)?N[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,m,d)&&(u=null),d||m===null?I(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?s.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?s.setAttributeNS(d,o,u):s.setAttribute(o,u))))}var de=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),ye=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),at=Symbol.for("react.memo"),Ze=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),ie=Symbol.iterator;function Ee(s){return s===null||typeof s!="object"?null:(s=ie&&s[ie]||s["@@iterator"],typeof s=="function"?s:null)}var he=Object.assign,M;function Q(s){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+s}var xe=!1;function Re(s,o){if(!s||xe)return"";xe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(W){var d=W}Reflect.construct(s,[],o)}else{try{o.call()}catch(W){d=W}s.call(o.prototype)}else{try{throw Error()}catch(W){d=W}s()}}catch(W){if(W&&d&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=d.stack.split(`
`),E=m.length-1,P=y.length-1;1<=E&&0<=P&&m[E]!==y[P];)P--;for(;1<=E&&0<=P;E--,P--)if(m[E]!==y[P]){if(E!==1||P!==1)do if(E--,P--,0>P||m[E]!==y[P]){var D=`
`+m[E].replace(" at new "," at ");return s.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",s.displayName)),D}while(1<=E&&0<=P);break}}}finally{xe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?Q(s):""}function Ve(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=Re(s.type,!1),s;case 11:return s=Re(s.type.render,!1),s;case 1:return s=Re(s.type,!0),s;default:return""}}function Fe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case b:return"Fragment";case ye:return"Portal";case x:return"Profiler";case R:return"StrictMode";case A:return"Suspense";case Ae:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case at:return o=s.displayName||null,o!==null?o:Fe(s.type)||"Memo";case Ze:o=s._payload,s=s._init;try{return Fe(s(o))}catch{}}return null}function Ke(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function qe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tt(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function gn(s){var o=tt(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function aa(s){s._valueTracker||(s._valueTracker=gn(s))}function eu(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=tt(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function Ui(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function la(s,o){var u=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Th(s,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=qe(o.value!=null?o.value:u),s._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ua(s,o){o=o.checked,o!=null&&ee(s,"checked",o,!1)}function Js(s,o){ua(s,o);var u=qe(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Dt(s,o.type,u):o.hasOwnProperty("defaultValue")&&Dt(s,o.type,qe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function tu(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Dt(s,o,u){(o!=="number"||Ui(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Rt=Array.isArray;function hr(s,o,u,d){if(s=s.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=o.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&d&&(s[u].defaultSelected=!0)}else{for(u=""+qe(u),o=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function nu(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ru(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Rt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:qe(u)}}function Sh(s,o){var u=qe(o.value),d=qe(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),d!=null&&(s.defaultValue=""+d)}function Bi(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function iu(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ca(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?iu(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var zi,Ah=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return s(o,u,d,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=zi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Ys(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rh=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(s){Rh.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),qi[o]=qi[s]})});function $i(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||qi.hasOwnProperty(s)&&qi[s]?(""+o).trim():o+"px"}function ha(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=$i(u,o[u],d);u==="float"&&(u="cssFloat"),d?s.setProperty(u,m):s[u]=m}}var su=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dr(s,o){if(o){if(su[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function da(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wi=null;function fa(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var li=null,ui=null,Et=null;function ou(s){if(s=Du(s)){if(typeof li!="function")throw Error(t(280));var o=s.stateNode;o&&(o=Zh(o),li(s.stateNode,s.type,o))}}function Hi(s){ui?Et?Et.push(s):Et=[s]:ui=s}function Gi(){if(ui){var s=ui,o=Et;if(Et=ui=null,ou(s),o)for(s=0;s<o.length;s++)ou(o[s])}}function Ph(s,o){return s(o)}function xh(){}var Pr=!1;function bh(s,o,u){if(Pr)return s(o,u);Pr=!0;try{return Ph(s,o,u)}finally{Pr=!1,(ui!==null||Et!==null)&&(xh(),Gi())}}function Xs(s,o){var u=s.stateNode;if(u===null)return null;var d=Zh(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Ki=!1;if(h)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Ki=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Ki=!1}function Ch(s,o,u,d,m,y,E,P,D){var W=Array.prototype.slice.call(arguments,3);try{o.apply(u,W)}catch(Z){this.onError(Z)}}var ci=!1,xr=null,pa=!1,Xn=null,kh={onError:function(s){ci=!0,xr=s}};function Nh(s,o,u,d,m,y,E,P,D){ci=!1,xr=null,Ch.apply(kh,arguments)}function au(s,o,u,d,m,y,E,P,D){if(Nh.apply(this,arguments),ci){if(ci){var W=xr;ci=!1,xr=null}else throw Error(t(198));pa||(pa=!0,Xn=W)}}function fr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function lu(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Dh(s){if(fr(s)!==s)throw Error(t(188))}function Vh(s){var o=s.alternate;if(!o){if(o=fr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,d=o;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return Dh(m),s;if(y===d)return Dh(m),o;y=y.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=y;else{for(var E=!1,P=m.child;P;){if(P===u){E=!0,u=m,d=y;break}if(P===d){E=!0,d=m,u=y;break}P=P.sibling}if(!E){for(P=y.child;P;){if(P===u){E=!0,u=y,d=m;break}if(P===d){E=!0,d=y,u=m;break}P=P.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Oh(s){return s=Vh(s),s!==null?Zs(s):null}function Zs(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Zs(s);if(o!==null)return o;s=s.sibling}return null}var uu=e.unstable_scheduleCallback,ma=e.unstable_cancelCallback,eo=e.unstable_shouldYield,hi=e.unstable_requestPaint,lt=e.unstable_now,Fp=e.unstable_getCurrentPriorityLevel,ga=e.unstable_ImmediatePriority,cu=e.unstable_UserBlockingPriority,to=e.unstable_NormalPriority,hu=e.unstable_LowPriority,ya=e.unstable_IdlePriority,no=null,Mn=null;function Lh(s){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(no,s,void 0,(s.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:ro,br=Math.log,Zn=Math.LN2;function ro(s){return s>>>=0,s===0?32:31-(br(s)/Zn|0)|0}var Cr=64,Ji=4194304;function Ge(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function di(s,o){var u=s.pendingLanes;if(u===0)return 0;var d=0,m=s.suspendedLanes,y=s.pingedLanes,E=u&268435455;if(E!==0){var P=E&~m;P!==0?d=Ge(P):(y&=E,y!==0&&(d=Ge(y)))}else E=u&~m,E!==0?d=Ge(E):y!==0&&(d=Ge(y));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)u=31-Fn(o),m=1<<u,d|=s[u],o&=~m;return d}function io(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function so(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var E=31-Fn(y),P=1<<E,D=m[E];D===-1?((P&u)===0||(P&d)!==0)&&(m[E]=io(P,o)):D<=o&&(s.expiredLanes|=P),y&=~P}}function du(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function fu(){var s=Cr;return Cr<<=1,(Cr&4194240)===0&&(Cr=64),s}function pu(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function oo(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Fn(o),s[o]=u}function jp(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-Fn(u),y=1<<m;o[m]=0,d[m]=-1,s[m]=-1,u&=~y}}function mu(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-Fn(u),m=1<<d;m&o|s[d]&o&&(s[d]|=o),u&=~m}}var Be=0;function kr(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var gu,_a,yu,_u,vu,Nr=!1,va=[],Dr=null,Vr=null,Jt=null,ao=new Map,fi=new Map,jn=[],Mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yi(s,o){switch(s){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":ao.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(o.pointerId)}}function pr(s,o,u,d,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Du(o),o!==null&&_a(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function Fh(s,o,u,d,m){switch(o){case"focusin":return Dr=pr(Dr,s,o,u,d,m),!0;case"dragenter":return Vr=pr(Vr,s,o,u,d,m),!0;case"mouseover":return Jt=pr(Jt,s,o,u,d,m),!0;case"pointerover":var y=m.pointerId;return ao.set(y,pr(ao.get(y)||null,s,o,u,d,m)),!0;case"gotpointercapture":return y=m.pointerId,fi.set(y,pr(fi.get(y)||null,s,o,u,d,m)),!0}return!1}function wa(s){var o=ho(s.target);if(o!==null){var u=fr(o);if(u!==null){if(o=u.tag,o===13){if(o=lu(u),o!==null){s.blockedOn=o,vu(s.priority,function(){yu(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function nt(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ea(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Wi=d,u.target.dispatchEvent(d),Wi=null}else return o=Du(u),o!==null&&_a(o),s.blockedOn=u,!1;o.shift()}return!0}function jh(s,o,u){nt(s)&&u.delete(o)}function Up(){Nr=!1,Dr!==null&&nt(Dr)&&(Dr=null),Vr!==null&&nt(Vr)&&(Vr=null),Jt!==null&&nt(Jt)&&(Jt=null),ao.forEach(jh),fi.forEach(jh)}function Xi(s,o){s.blockedOn===o&&(s.blockedOn=null,Nr||(Nr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Up)))}function Zi(s){function o(m){return Xi(m,s)}if(0<va.length){Xi(va[0],s);for(var u=1;u<va.length;u++){var d=va[u];d.blockedOn===s&&(d.blockedOn=null)}}for(Dr!==null&&Xi(Dr,s),Vr!==null&&Xi(Vr,s),Jt!==null&&Xi(Jt,s),ao.forEach(o),fi.forEach(o),u=0;u<jn.length;u++)d=jn[u],d.blockedOn===s&&(d.blockedOn=null);for(;0<jn.length&&(u=jn[0],u.blockedOn===null);)wa(u),u.blockedOn===null&&jn.shift()}var pi=de.ReactCurrentBatchConfig,mi=!0;function Or(s,o,u,d){var m=Be,y=pi.transition;pi.transition=null;try{Be=1,wu(s,o,u,d)}finally{Be=m,pi.transition=y}}function Uh(s,o,u,d){var m=Be,y=pi.transition;pi.transition=null;try{Be=4,wu(s,o,u,d)}finally{Be=m,pi.transition=y}}function wu(s,o,u,d){if(mi){var m=Ea(s,o,u,d);if(m===null)Yp(s,o,d,Lr,u),Yi(s,d);else if(Fh(m,s,o,u,d))d.stopPropagation();else if(Yi(s,d),o&4&&-1<Mh.indexOf(s)){for(;m!==null;){var y=Du(m);if(y!==null&&gu(y),y=Ea(s,o,u,d),y===null&&Yp(s,o,d,Lr,u),y===m)break;m=y}m!==null&&d.stopPropagation()}else Yp(s,o,d,null,u)}}var Lr=null;function Ea(s,o,u,d){if(Lr=null,s=fa(d),s=ho(s),s!==null)if(o=fr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=lu(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Lr=s,null}function Ia(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fp()){case ga:return 1;case cu:return 4;case to:case hu:return 16;case ya:return 536870912;default:return 16}default:return 16}}var Un=null,Ta=null,gi=null;function Bh(){if(gi)return gi;var s,o=Ta,u=o.length,d,m="value"in Un?Un.value:Un.textContent,y=m.length;for(s=0;s<u&&o[s]===m[s];s++);var E=u-s;for(d=1;d<=E&&o[u-d]===m[y-d];d++);return gi=m.slice(s,1<d?1-d:void 0)}function lo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Mr(){return!0}function Eu(){return!1}function sn(s){function o(u,d,m,y,E){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(u=s[P],this[P]=u?u(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Mr:Eu,this.isPropagationStopped=Eu,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),o}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uo=sn(Fr),es=he({},Fr,{view:0,detail:0}),Sa=sn(es),Aa,Ra,Bn,co=he({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bn&&(Bn&&s.type==="mousemove"?(Aa=s.screenX-Bn.screenX,Ra=s.screenY-Bn.screenY):Ra=Aa=0,Bn=s),Aa)},movementY:function(s){return"movementY"in s?s.movementY:Ra}}),Iu=sn(co),zh=he({},co,{dataTransfer:0}),qh=sn(zh),Pa=he({},es,{relatedTarget:0}),Yt=sn(Pa),$h=he({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wh=sn($h),ts=he({},Fr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),c=sn(ts),_=he({},Fr,{data:0}),w=sn(_),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=G[s])?!!o[s]:!1}function ke(){return se}var Pt=he({},es,{key:function(s){if(s.key){var o=S[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?z[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(s){return s.type==="keypress"?lo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Je=sn(Pt),Vt=he({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=sn(Vt),yi=he({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),jr=sn(yi),Ur=he({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),xa=sn(Ur),Tu=he({},co,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),uP=sn(Tu),cP=[9,13,27,32],Bp=h&&"CompositionEvent"in window,Su=null;h&&"documentMode"in document&&(Su=document.documentMode);var hP=h&&"TextEvent"in window&&!Su,Tv=h&&(!Bp||Su&&8<Su&&11>=Su),Sv=" ",Av=!1;function Rv(s,o){switch(s){case"keyup":return cP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ba=!1;function dP(s,o){switch(s){case"compositionend":return Pv(o);case"keypress":return o.which!==32?null:(Av=!0,Sv);case"textInput":return s=o.data,s===Sv&&Av?null:s;default:return null}}function fP(s,o){if(ba)return s==="compositionend"||!Bp&&Rv(s,o)?(s=Bh(),gi=Ta=Un=null,ba=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Tv&&o.locale!=="ko"?null:o.data;default:return null}}var pP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!pP[s.type]:o==="textarea"}function bv(s,o,u,d){Hi(d),o=Jh(o,"onChange"),0<o.length&&(u=new uo("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var Au=null,Ru=null;function mP(s){Gv(s,0)}function Hh(s){var o=Va(s);if(eu(o))return s}function gP(s,o){if(s==="change")return o}var Cv=!1;if(h){var zp;if(h){var qp="oninput"in document;if(!qp){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),qp=typeof kv.oninput=="function"}zp=qp}else zp=!1;Cv=zp&&(!document.documentMode||9<document.documentMode)}function Nv(){Au&&(Au.detachEvent("onpropertychange",Dv),Ru=Au=null)}function Dv(s){if(s.propertyName==="value"&&Hh(Ru)){var o=[];bv(o,Ru,s,fa(s)),bh(mP,o)}}function yP(s,o,u){s==="focusin"?(Nv(),Au=o,Ru=u,Au.attachEvent("onpropertychange",Dv)):s==="focusout"&&Nv()}function _P(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hh(Ru)}function vP(s,o){if(s==="click")return Hh(o)}function wP(s,o){if(s==="input"||s==="change")return Hh(o)}function EP(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var mr=typeof Object.is=="function"?Object.is:EP;function Pu(s,o){if(mr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!mr(s[m],o[m]))return!1}return!0}function Vv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ov(s,o){var u=Vv(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Vv(u)}}function Lv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Lv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Mv(){for(var s=window,o=Ui();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Ui(s.document)}return o}function $p(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function IP(s){var o=Mv(),u=s.focusedElem,d=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Lv(u.ownerDocument.documentElement,u)){if(d!==null&&$p(u)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!s.extend&&y>d&&(m=d,d=y,y=m),m=Ov(u,y);var E=Ov(u,d);m&&E&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),y>d?(s.addRange(o),s.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var TP=h&&"documentMode"in document&&11>=document.documentMode,Ca=null,Wp=null,xu=null,Hp=!1;function Fv(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Hp||Ca==null||Ca!==Ui(d)||(d=Ca,"selectionStart"in d&&$p(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xu&&Pu(xu,d)||(xu=d,d=Jh(Wp,"onSelect"),0<d.length&&(o=new uo("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=Ca)))}function Gh(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var ka={animationend:Gh("Animation","AnimationEnd"),animationiteration:Gh("Animation","AnimationIteration"),animationstart:Gh("Animation","AnimationStart"),transitionend:Gh("Transition","TransitionEnd")},Gp={},jv={};h&&(jv=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Kh(s){if(Gp[s])return Gp[s];if(!ka[s])return s;var o=ka[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in jv)return Gp[s]=o[u];return s}var Uv=Kh("animationend"),Bv=Kh("animationiteration"),zv=Kh("animationstart"),qv=Kh("transitionend"),$v=new Map,Wv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(s,o){$v.set(s,o),a(o,[s])}for(var Kp=0;Kp<Wv.length;Kp++){var Qp=Wv[Kp],SP=Qp.toLowerCase(),AP=Qp[0].toUpperCase()+Qp.slice(1);ns(SP,"on"+AP)}ns(Uv,"onAnimationEnd"),ns(Bv,"onAnimationIteration"),ns(zv,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(qv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RP=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function Hv(s,o,u){var d=s.type||"unknown-event";s.currentTarget=u,au(d,o,void 0,s),s.currentTarget=null}function Gv(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],m=d.event;d=d.listeners;e:{var y=void 0;if(o)for(var E=d.length-1;0<=E;E--){var P=d[E],D=P.instance,W=P.currentTarget;if(P=P.listener,D!==y&&m.isPropagationStopped())break e;Hv(m,P,W),y=D}else for(E=0;E<d.length;E++){if(P=d[E],D=P.instance,W=P.currentTarget,P=P.listener,D!==y&&m.isPropagationStopped())break e;Hv(m,P,W),y=D}}}if(pa)throw s=Xn,pa=!1,Xn=null,s}function ut(s,o){var u=o[rm];u===void 0&&(u=o[rm]=new Set);var d=s+"__bubble";u.has(d)||(Kv(o,s,2,!1),u.add(d))}function Jp(s,o,u){var d=0;o&&(d|=4),Kv(u,s,d,o)}var Qh="_reactListening"+Math.random().toString(36).slice(2);function Cu(s){if(!s[Qh]){s[Qh]=!0,r.forEach(function(u){u!=="selectionchange"&&(RP.has(u)||Jp(u,!1,s),Jp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Qh]||(o[Qh]=!0,Jp("selectionchange",!1,o))}}function Kv(s,o,u,d){switch(Ia(o)){case 1:var m=Or;break;case 4:m=Uh;break;default:m=wu}u=m.bind(null,o,u,s),m=void 0,!Ki||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(o,u,{capture:!0,passive:m}):s.addEventListener(o,u,!0):m!==void 0?s.addEventListener(o,u,{passive:m}):s.addEventListener(o,u,!1)}function Yp(s,o,u,d,m){var y=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var P=d.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(E===4)for(E=d.return;E!==null;){var D=E.tag;if((D===3||D===4)&&(D=E.stateNode.containerInfo,D===m||D.nodeType===8&&D.parentNode===m))return;E=E.return}for(;P!==null;){if(E=ho(P),E===null)return;if(D=E.tag,D===5||D===6){d=y=E;continue e}P=P.parentNode}}d=d.return}bh(function(){var W=y,Z=fa(u),ne=[];e:{var Y=$v.get(s);if(Y!==void 0){var ce=uo,pe=s;switch(s){case"keypress":if(lo(u)===0)break e;case"keydown":case"keyup":ce=Je;break;case"focusin":pe="focus",ce=Yt;break;case"focusout":pe="blur",ce=Yt;break;case"beforeblur":case"afterblur":ce=Yt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=jr;break;case Uv:case Bv:case zv:ce=Wh;break;case qv:ce=xa;break;case"scroll":ce=Sa;break;case"wheel":ce=uP;break;case"copy":case"cut":case"paste":ce=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=zn}var ge=(o&4)!==0,xt=!ge&&s==="scroll",B=ge?Y!==null?Y+"Capture":null:Y;ge=[];for(var L=W,$;L!==null;){$=L;var re=$.stateNode;if($.tag===5&&re!==null&&($=re,B!==null&&(re=Xs(L,B),re!=null&&ge.push(ku(L,re,$)))),xt)break;L=L.return}0<ge.length&&(Y=new ce(Y,pe,null,u,Z),ne.push({event:Y,listeners:ge}))}}if((o&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",Y&&u!==Wi&&(pe=u.relatedTarget||u.fromElement)&&(ho(pe)||pe[_i]))break e;if((ce||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,ce?(pe=u.relatedTarget||u.toElement,ce=W,pe=pe?ho(pe):null,pe!==null&&(xt=fr(pe),pe!==xt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ce=null,pe=W),ce!==pe)){if(ge=Iu,re="onMouseLeave",B="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(ge=zn,re="onPointerLeave",B="onPointerEnter",L="pointer"),xt=ce==null?Y:Va(ce),$=pe==null?Y:Va(pe),Y=new ge(re,L+"leave",ce,u,Z),Y.target=xt,Y.relatedTarget=$,re=null,ho(Z)===W&&(ge=new ge(B,L+"enter",pe,u,Z),ge.target=$,ge.relatedTarget=xt,re=ge),xt=re,ce&&pe)t:{for(ge=ce,B=pe,L=0,$=ge;$;$=Na($))L++;for($=0,re=B;re;re=Na(re))$++;for(;0<L-$;)ge=Na(ge),L--;for(;0<$-L;)B=Na(B),$--;for(;L--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=Na(ge),B=Na(B)}ge=null}else ge=null;ce!==null&&Qv(ne,Y,ce,ge,!1),pe!==null&&xt!==null&&Qv(ne,xt,pe,ge,!0)}}e:{if(Y=W?Va(W):window,ce=Y.nodeName&&Y.nodeName.toLowerCase(),ce==="select"||ce==="input"&&Y.type==="file")var _e=gP;else if(xv(Y))if(Cv)_e=wP;else{_e=_P;var Te=yP}else(ce=Y.nodeName)&&ce.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(_e=vP);if(_e&&(_e=_e(s,W))){bv(ne,_e,u,Z);break e}Te&&Te(s,Y,W),s==="focusout"&&(Te=Y._wrapperState)&&Te.controlled&&Y.type==="number"&&Dt(Y,"number",Y.value)}switch(Te=W?Va(W):window,s){case"focusin":(xv(Te)||Te.contentEditable==="true")&&(Ca=Te,Wp=W,xu=null);break;case"focusout":xu=Wp=Ca=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Fv(ne,u,Z);break;case"selectionchange":if(TP)break;case"keydown":case"keyup":Fv(ne,u,Z)}var Se;if(Bp)e:{switch(s){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else ba?Rv(s,u)&&(Pe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Pe="onCompositionStart");Pe&&(Tv&&u.locale!=="ko"&&(ba||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&ba&&(Se=Bh()):(Un=Z,Ta="value"in Un?Un.value:Un.textContent,ba=!0)),Te=Jh(W,Pe),0<Te.length&&(Pe=new w(Pe,s,null,u,Z),ne.push({event:Pe,listeners:Te}),Se?Pe.data=Se:(Se=Pv(u),Se!==null&&(Pe.data=Se)))),(Se=hP?dP(s,u):fP(s,u))&&(W=Jh(W,"onBeforeInput"),0<W.length&&(Z=new w("onBeforeInput","beforeinput",null,u,Z),ne.push({event:Z,listeners:W}),Z.data=Se))}Gv(ne,o)})}function ku(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Jh(s,o){for(var u=o+"Capture",d=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Xs(s,u),y!=null&&d.unshift(ku(s,y,m)),y=Xs(s,o),y!=null&&d.push(ku(s,y,m))),s=s.return}return d}function Na(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Qv(s,o,u,d,m){for(var y=o._reactName,E=[];u!==null&&u!==d;){var P=u,D=P.alternate,W=P.stateNode;if(D!==null&&D===d)break;P.tag===5&&W!==null&&(P=W,m?(D=Xs(u,y),D!=null&&E.unshift(ku(u,D,P))):m||(D=Xs(u,y),D!=null&&E.push(ku(u,D,P)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var PP=/\r\n?/g,xP=/\u0000|\uFFFD/g;function Jv(s){return(typeof s=="string"?s:""+s).replace(PP,`
`).replace(xP,"")}function Yh(s,o,u){if(o=Jv(o),Jv(s)!==o&&u)throw Error(t(425))}function Xh(){}var Xp=null,Zp=null;function em(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tm=typeof setTimeout=="function"?setTimeout:void 0,bP=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,CP=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(s){return Yv.resolve(null).then(s).catch(kP)}:tm;function kP(s){setTimeout(function(){throw s})}function nm(s,o){var u=o,d=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){s.removeChild(m),Zi(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Zi(o)}function rs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Xv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Br="__reactFiber$"+Da,Nu="__reactProps$"+Da,_i="__reactContainer$"+Da,rm="__reactEvents$"+Da,NP="__reactListeners$"+Da,DP="__reactHandles$"+Da;function ho(s){var o=s[Br];if(o)return o;for(var u=s.parentNode;u;){if(o=u[_i]||u[Br]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Xv(s);s!==null;){if(u=s[Br])return u;s=Xv(s)}return o}s=u,u=s.parentNode}return null}function Du(s){return s=s[Br]||s[_i],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Va(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function Zh(s){return s[Nu]||null}var im=[],Oa=-1;function is(s){return{current:s}}function ct(s){0>Oa||(s.current=im[Oa],im[Oa]=null,Oa--)}function rt(s,o){Oa++,im[Oa]=s.current,s.current=o}var ss={},on=is(ss),Tn=is(!1),fo=ss;function La(s,o){var u=s.type.contextTypes;if(!u)return ss;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=o[y];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(s){return s=s.childContextTypes,s!=null}function ed(){ct(Tn),ct(on)}function Zv(s,o,u){if(on.current!==ss)throw Error(t(168));rt(on,o),rt(Tn,u)}function ew(s,o,u){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,Ke(s)||"Unknown",m));return he({},u,d)}function td(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ss,fo=on.current,rt(on,s),rt(Tn,Tn.current),!0}function tw(s,o,u){var d=s.stateNode;if(!d)throw Error(t(169));u?(s=ew(s,o,fo),d.__reactInternalMemoizedMergedChildContext=s,ct(Tn),ct(on),rt(on,s)):ct(Tn),rt(Tn,u)}var vi=null,nd=!1,sm=!1;function nw(s){vi===null?vi=[s]:vi.push(s)}function VP(s){nd=!0,nw(s)}function os(){if(!sm&&vi!==null){sm=!0;var s=0,o=Be;try{var u=vi;for(Be=1;s<u.length;s++){var d=u[s];do d=d(!0);while(d!==null)}vi=null,nd=!1}catch(m){throw vi!==null&&(vi=vi.slice(s+1)),uu(ga,os),m}finally{Be=o,sm=!1}}return null}var Ma=[],Fa=0,rd=null,id=0,er=[],tr=0,po=null,wi=1,Ei="";function mo(s,o){Ma[Fa++]=id,Ma[Fa++]=rd,rd=s,id=o}function rw(s,o,u){er[tr++]=wi,er[tr++]=Ei,er[tr++]=po,po=s;var d=wi;s=Ei;var m=32-Fn(d)-1;d&=~(1<<m),u+=1;var y=32-Fn(o)+m;if(30<y){var E=m-m%5;y=(d&(1<<E)-1).toString(32),d>>=E,m-=E,wi=1<<32-Fn(o)+m|u<<m|d,Ei=y+s}else wi=1<<y|u<<m|d,Ei=s}function om(s){s.return!==null&&(mo(s,1),rw(s,1,0))}function am(s){for(;s===rd;)rd=Ma[--Fa],Ma[Fa]=null,id=Ma[--Fa],Ma[Fa]=null;for(;s===po;)po=er[--tr],er[tr]=null,Ei=er[--tr],er[tr]=null,wi=er[--tr],er[tr]=null}var qn=null,$n=null,ft=!1,gr=null;function iw(s,o){var u=sr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function sw(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,qn=s,$n=rs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,qn=s,$n=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=po!==null?{id:wi,overflow:Ei}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=sr(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,qn=s,$n=null,!0):!1;default:return!1}}function lm(s){return(s.mode&1)!==0&&(s.flags&128)===0}function um(s){if(ft){var o=$n;if(o){var u=o;if(!sw(s,o)){if(lm(s))throw Error(t(418));o=rs(u.nextSibling);var d=qn;o&&sw(s,o)?iw(d,u):(s.flags=s.flags&-4097|2,ft=!1,qn=s)}}else{if(lm(s))throw Error(t(418));s.flags=s.flags&-4097|2,ft=!1,qn=s}}}function ow(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qn=s}function sd(s){if(s!==qn)return!1;if(!ft)return ow(s),ft=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!em(s.type,s.memoizedProps)),o&&(o=$n)){if(lm(s))throw aw(),Error(t(418));for(;o;)iw(s,o),o=rs(o.nextSibling)}if(ow(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){$n=rs(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}$n=null}}else $n=qn?rs(s.stateNode.nextSibling):null;return!0}function aw(){for(var s=$n;s;)s=rs(s.nextSibling)}function ja(){$n=qn=null,ft=!1}function cm(s){gr===null?gr=[s]:gr.push(s)}var OP=de.ReactCurrentBatchConfig;function Vu(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,s));var m=d,y=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(E){var P=m.refs;E===null?delete P[y]:P[y]=E},o._stringRef=y,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function od(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function lw(s){var o=s._init;return o(s._payload)}function uw(s){function o(B,L){if(s){var $=B.deletions;$===null?(B.deletions=[L],B.flags|=16):$.push(L)}}function u(B,L){if(!s)return null;for(;L!==null;)o(B,L),L=L.sibling;return null}function d(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function m(B,L){return B=ps(B,L),B.index=0,B.sibling=null,B}function y(B,L,$){return B.index=$,s?($=B.alternate,$!==null?($=$.index,$<L?(B.flags|=2,L):$):(B.flags|=2,L)):(B.flags|=1048576,L)}function E(B){return s&&B.alternate===null&&(B.flags|=2),B}function P(B,L,$,re){return L===null||L.tag!==6?(L=tg($,B.mode,re),L.return=B,L):(L=m(L,$),L.return=B,L)}function D(B,L,$,re){var _e=$.type;return _e===b?Z(B,L,$.props.children,re,$.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ze&&lw(_e)===L.type)?(re=m(L,$.props),re.ref=Vu(B,L,$),re.return=B,re):(re=Cd($.type,$.key,$.props,null,B.mode,re),re.ref=Vu(B,L,$),re.return=B,re)}function W(B,L,$,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==$.containerInfo||L.stateNode.implementation!==$.implementation?(L=ng($,B.mode,re),L.return=B,L):(L=m(L,$.children||[]),L.return=B,L)}function Z(B,L,$,re,_e){return L===null||L.tag!==7?(L=To($,B.mode,re,_e),L.return=B,L):(L=m(L,$),L.return=B,L)}function ne(B,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return L=tg(""+L,B.mode,$),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case ve:return $=Cd(L.type,L.key,L.props,null,B.mode,$),$.ref=Vu(B,null,L),$.return=B,$;case ye:return L=ng(L,B.mode,$),L.return=B,L;case Ze:var re=L._init;return ne(B,re(L._payload),$)}if(Rt(L)||Ee(L))return L=To(L,B.mode,$,null),L.return=B,L;od(B,L)}return null}function Y(B,L,$,re){var _e=L!==null?L.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return _e!==null?null:P(B,L,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ve:return $.key===_e?D(B,L,$,re):null;case ye:return $.key===_e?W(B,L,$,re):null;case Ze:return _e=$._init,Y(B,L,_e($._payload),re)}if(Rt($)||Ee($))return _e!==null?null:Z(B,L,$,re,null);od(B,$)}return null}function ce(B,L,$,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get($)||null,P(L,B,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ve:return B=B.get(re.key===null?$:re.key)||null,D(L,B,re,_e);case ye:return B=B.get(re.key===null?$:re.key)||null,W(L,B,re,_e);case Ze:var Te=re._init;return ce(B,L,$,Te(re._payload),_e)}if(Rt(re)||Ee(re))return B=B.get($)||null,Z(L,B,re,_e,null);od(L,re)}return null}function pe(B,L,$,re){for(var _e=null,Te=null,Se=L,Pe=L=0,Wt=null;Se!==null&&Pe<$.length;Pe++){Se.index>Pe?(Wt=Se,Se=null):Wt=Se.sibling;var We=Y(B,Se,$[Pe],re);if(We===null){Se===null&&(Se=Wt);break}s&&Se&&We.alternate===null&&o(B,Se),L=y(We,L,Pe),Te===null?_e=We:Te.sibling=We,Te=We,Se=Wt}if(Pe===$.length)return u(B,Se),ft&&mo(B,Pe),_e;if(Se===null){for(;Pe<$.length;Pe++)Se=ne(B,$[Pe],re),Se!==null&&(L=y(Se,L,Pe),Te===null?_e=Se:Te.sibling=Se,Te=Se);return ft&&mo(B,Pe),_e}for(Se=d(B,Se);Pe<$.length;Pe++)Wt=ce(Se,B,Pe,$[Pe],re),Wt!==null&&(s&&Wt.alternate!==null&&Se.delete(Wt.key===null?Pe:Wt.key),L=y(Wt,L,Pe),Te===null?_e=Wt:Te.sibling=Wt,Te=Wt);return s&&Se.forEach(function(ms){return o(B,ms)}),ft&&mo(B,Pe),_e}function ge(B,L,$,re){var _e=Ee($);if(typeof _e!="function")throw Error(t(150));if($=_e.call($),$==null)throw Error(t(151));for(var Te=_e=null,Se=L,Pe=L=0,Wt=null,We=$.next();Se!==null&&!We.done;Pe++,We=$.next()){Se.index>Pe?(Wt=Se,Se=null):Wt=Se.sibling;var ms=Y(B,Se,We.value,re);if(ms===null){Se===null&&(Se=Wt);break}s&&Se&&ms.alternate===null&&o(B,Se),L=y(ms,L,Pe),Te===null?_e=ms:Te.sibling=ms,Te=ms,Se=Wt}if(We.done)return u(B,Se),ft&&mo(B,Pe),_e;if(Se===null){for(;!We.done;Pe++,We=$.next())We=ne(B,We.value,re),We!==null&&(L=y(We,L,Pe),Te===null?_e=We:Te.sibling=We,Te=We);return ft&&mo(B,Pe),_e}for(Se=d(B,Se);!We.done;Pe++,We=$.next())We=ce(Se,B,Pe,We.value,re),We!==null&&(s&&We.alternate!==null&&Se.delete(We.key===null?Pe:We.key),L=y(We,L,Pe),Te===null?_e=We:Te.sibling=We,Te=We);return s&&Se.forEach(function(px){return o(B,px)}),ft&&mo(B,Pe),_e}function xt(B,L,$,re){if(typeof $=="object"&&$!==null&&$.type===b&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case ve:e:{for(var _e=$.key,Te=L;Te!==null;){if(Te.key===_e){if(_e=$.type,_e===b){if(Te.tag===7){u(B,Te.sibling),L=m(Te,$.props.children),L.return=B,B=L;break e}}else if(Te.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ze&&lw(_e)===Te.type){u(B,Te.sibling),L=m(Te,$.props),L.ref=Vu(B,Te,$),L.return=B,B=L;break e}u(B,Te);break}else o(B,Te);Te=Te.sibling}$.type===b?(L=To($.props.children,B.mode,re,$.key),L.return=B,B=L):(re=Cd($.type,$.key,$.props,null,B.mode,re),re.ref=Vu(B,L,$),re.return=B,B=re)}return E(B);case ye:e:{for(Te=$.key;L!==null;){if(L.key===Te)if(L.tag===4&&L.stateNode.containerInfo===$.containerInfo&&L.stateNode.implementation===$.implementation){u(B,L.sibling),L=m(L,$.children||[]),L.return=B,B=L;break e}else{u(B,L);break}else o(B,L);L=L.sibling}L=ng($,B.mode,re),L.return=B,B=L}return E(B);case Ze:return Te=$._init,xt(B,L,Te($._payload),re)}if(Rt($))return pe(B,L,$,re);if(Ee($))return ge(B,L,$,re);od(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,L!==null&&L.tag===6?(u(B,L.sibling),L=m(L,$),L.return=B,B=L):(u(B,L),L=tg($,B.mode,re),L.return=B,B=L),E(B)):u(B,L)}return xt}var Ua=uw(!0),cw=uw(!1),ad=is(null),ld=null,Ba=null,hm=null;function dm(){hm=Ba=ld=null}function fm(s){var o=ad.current;ct(ad),s._currentValue=o}function pm(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function za(s,o){ld=s,hm=Ba=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(An=!0),s.firstContext=null)}function nr(s){var o=s._currentValue;if(hm!==s)if(s={context:s,memoizedValue:o,next:null},Ba===null){if(ld===null)throw Error(t(308));Ba=s,ld.dependencies={lanes:0,firstContext:s}}else Ba=Ba.next=s;return o}var go=null;function mm(s){go===null?go=[s]:go.push(s)}function hw(s,o,u,d){var m=o.interleaved;return m===null?(u.next=u,mm(o)):(u.next=m.next,m.next=u),o.interleaved=u,Ii(s,d)}function Ii(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var as=!1;function gm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ti(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function ls(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,($e&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Ii(s,u)}return m=d.interleaved,m===null?(o.next=o,mm(d)):(o.next=m.next,m.next=o),d.interleaved=o,Ii(s,u)}function ud(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,mu(s,u)}}function fw(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?m=y=o:y=y.next=o}else m=y=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function cd(s,o,u,d){var m=s.updateQueue;as=!1;var y=m.firstBaseUpdate,E=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var D=P,W=D.next;D.next=null,E===null?y=W:E.next=W,E=D;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,P=Z.lastBaseUpdate,P!==E&&(P===null?Z.firstBaseUpdate=W:P.next=W,Z.lastBaseUpdate=D))}if(y!==null){var ne=m.baseState;E=0,Z=W=D=null,P=y;do{var Y=P.lane,ce=P.eventTime;if((d&Y)===Y){Z!==null&&(Z=Z.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var pe=s,ge=P;switch(Y=o,ce=u,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){ne=pe.call(ce,ne,Y);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,Y=typeof pe=="function"?pe.call(ce,ne,Y):pe,Y==null)break e;ne=he({},ne,Y);break e;case 2:as=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,Y=m.effects,Y===null?m.effects=[P]:Y.push(P))}else ce={eventTime:ce,lane:Y,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Z===null?(W=Z=ce,D=ne):Z=Z.next=ce,E|=Y;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;Y=P,P=Y.next,Y.next=null,m.lastBaseUpdate=Y,m.shared.pending=null}}while(!0);if(Z===null&&(D=ne),m.baseState=D,m.firstBaseUpdate=W,m.lastBaseUpdate=Z,o=m.shared.interleaved,o!==null){m=o;do E|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);vo|=E,s.lanes=E,s.memoizedState=ne}}function pw(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Ou={},zr=is(Ou),Lu=is(Ou),Mu=is(Ou);function yo(s){if(s===Ou)throw Error(t(174));return s}function ym(s,o){switch(rt(Mu,o),rt(Lu,s),rt(zr,Ou),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ca(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ca(o,s)}ct(zr),rt(zr,o)}function qa(){ct(zr),ct(Lu),ct(Mu)}function mw(s){yo(Mu.current);var o=yo(zr.current),u=ca(o,s.type);o!==u&&(rt(Lu,s),rt(zr,u))}function _m(s){Lu.current===s&&(ct(zr),ct(Lu))}var yt=is(0);function hd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var vm=[];function wm(){for(var s=0;s<vm.length;s++)vm[s]._workInProgressVersionPrimary=null;vm.length=0}var dd=de.ReactCurrentDispatcher,Em=de.ReactCurrentBatchConfig,_o=0,_t=null,jt=null,qt=null,fd=!1,Fu=!1,ju=0,LP=0;function an(){throw Error(t(321))}function Im(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!mr(s[u],o[u]))return!1;return!0}function Tm(s,o,u,d,m,y){if(_o=y,_t=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,dd.current=s===null||s.memoizedState===null?UP:BP,s=u(d,m),Fu){y=0;do{if(Fu=!1,ju=0,25<=y)throw Error(t(301));y+=1,qt=jt=null,o.updateQueue=null,dd.current=zP,s=u(d,m)}while(Fu)}if(dd.current=gd,o=jt!==null&&jt.next!==null,_o=0,qt=jt=_t=null,fd=!1,o)throw Error(t(300));return s}function Sm(){var s=ju!==0;return ju=0,s}function qr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?_t.memoizedState=qt=s:qt=qt.next=s,qt}function rr(){if(jt===null){var s=_t.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var o=qt===null?_t.memoizedState:qt.next;if(o!==null)qt=o,jt=s;else{if(s===null)throw Error(t(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},qt===null?_t.memoizedState=qt=s:qt=qt.next=s}return qt}function Uu(s,o){return typeof o=="function"?o(s):o}function Am(s){var o=rr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var d=jt,m=d.baseQueue,y=u.pending;if(y!==null){if(m!==null){var E=m.next;m.next=y.next,y.next=E}d.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,d=d.baseState;var P=E=null,D=null,W=y;do{var Z=W.lane;if((_o&Z)===Z)D!==null&&(D=D.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),d=W.hasEagerState?W.eagerState:s(d,W.action);else{var ne={lane:Z,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};D===null?(P=D=ne,E=d):D=D.next=ne,_t.lanes|=Z,vo|=Z}W=W.next}while(W!==null&&W!==y);D===null?E=d:D.next=P,mr(d,o.memoizedState)||(An=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=D,u.lastRenderedState=d}if(s=u.interleaved,s!==null){m=s;do y=m.lane,_t.lanes|=y,vo|=y,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Rm(s){var o=rr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var d=u.dispatch,m=u.pending,y=o.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do y=s(y,E.action),E=E.next;while(E!==m);mr(y,o.memoizedState)||(An=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,d]}function gw(){}function yw(s,o){var u=_t,d=rr(),m=o(),y=!mr(d.memoizedState,m);if(y&&(d.memoizedState=m,An=!0),d=d.queue,Pm(ww.bind(null,u,d,s),[s]),d.getSnapshot!==o||y||qt!==null&&qt.memoizedState.tag&1){if(u.flags|=2048,Bu(9,vw.bind(null,u,d,m,o),void 0,null),$t===null)throw Error(t(349));(_o&30)!==0||_w(u,o,m)}return m}function _w(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function vw(s,o,u,d){o.value=u,o.getSnapshot=d,Ew(o)&&Iw(s)}function ww(s,o,u){return u(function(){Ew(o)&&Iw(s)})}function Ew(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!mr(s,u)}catch{return!0}}function Iw(s){var o=Ii(s,1);o!==null&&wr(o,s,1,-1)}function Tw(s){var o=qr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:s},o.queue=s,s=s.dispatch=jP.bind(null,_t,s),[o.memoizedState,s]}function Bu(s,o,u,d){return s={tag:s,create:o,destroy:u,deps:d,next:null},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s)),s}function Sw(){return rr().memoizedState}function pd(s,o,u,d){var m=qr();_t.flags|=s,m.memoizedState=Bu(1|o,u,void 0,d===void 0?null:d)}function md(s,o,u,d){var m=rr();d=d===void 0?null:d;var y=void 0;if(jt!==null){var E=jt.memoizedState;if(y=E.destroy,d!==null&&Im(d,E.deps)){m.memoizedState=Bu(o,u,y,d);return}}_t.flags|=s,m.memoizedState=Bu(1|o,u,y,d)}function Aw(s,o){return pd(8390656,8,s,o)}function Pm(s,o){return md(2048,8,s,o)}function Rw(s,o){return md(4,2,s,o)}function Pw(s,o){return md(4,4,s,o)}function xw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function bw(s,o,u){return u=u!=null?u.concat([s]):null,md(4,4,xw.bind(null,o,s),u)}function xm(){}function Cw(s,o){var u=rr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Im(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function kw(s,o){var u=rr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Im(o,d[1])?d[0]:(s=s(),u.memoizedState=[s,o],s)}function Nw(s,o,u){return(_o&21)===0?(s.baseState&&(s.baseState=!1,An=!0),s.memoizedState=u):(mr(u,o)||(u=fu(),_t.lanes|=u,vo|=u,s.baseState=!0),o)}function MP(s,o){var u=Be;Be=u!==0&&4>u?u:4,s(!0);var d=Em.transition;Em.transition={};try{s(!1),o()}finally{Be=u,Em.transition=d}}function Dw(){return rr().memoizedState}function FP(s,o,u){var d=ds(s);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Vw(s))Ow(o,u);else if(u=hw(s,o,u,d),u!==null){var m=_n();wr(u,s,d,m),Lw(u,o,d)}}function jP(s,o,u){var d=ds(s),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Vw(s))Ow(o,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,P=y(E,u);if(m.hasEagerState=!0,m.eagerState=P,mr(P,E)){var D=o.interleaved;D===null?(m.next=m,mm(o)):(m.next=D.next,D.next=m),o.interleaved=m;return}}catch{}u=hw(s,o,m,d),u!==null&&(m=_n(),wr(u,s,d,m),Lw(u,o,d))}}function Vw(s){var o=s.alternate;return s===_t||o!==null&&o===_t}function Ow(s,o){Fu=fd=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Lw(s,o,u){if((u&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,mu(s,u)}}var gd={readContext:nr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},UP={readContext:nr,useCallback:function(s,o){return qr().memoizedState=[s,o===void 0?null:o],s},useContext:nr,useEffect:Aw,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,pd(4194308,4,xw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return pd(4194308,4,s,o)},useInsertionEffect:function(s,o){return pd(4,2,s,o)},useMemo:function(s,o){var u=qr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var d=qr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=FP.bind(null,_t,s),[d.memoizedState,s]},useRef:function(s){var o=qr();return s={current:s},o.memoizedState=s},useState:Tw,useDebugValue:xm,useDeferredValue:function(s){return qr().memoizedState=s},useTransition:function(){var s=Tw(!1),o=s[0];return s=MP.bind(null,s[1]),qr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var d=_t,m=qr();if(ft){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),$t===null)throw Error(t(349));(_o&30)!==0||_w(d,o,u)}m.memoizedState=u;var y={value:u,getSnapshot:o};return m.queue=y,Aw(ww.bind(null,d,y,s),[s]),d.flags|=2048,Bu(9,vw.bind(null,d,y,u,o),void 0,null),u},useId:function(){var s=qr(),o=$t.identifierPrefix;if(ft){var u=Ei,d=wi;u=(d&~(1<<32-Fn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=ju++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=LP++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},BP={readContext:nr,useCallback:Cw,useContext:nr,useEffect:Pm,useImperativeHandle:bw,useInsertionEffect:Rw,useLayoutEffect:Pw,useMemo:kw,useReducer:Am,useRef:Sw,useState:function(){return Am(Uu)},useDebugValue:xm,useDeferredValue:function(s){var o=rr();return Nw(o,jt.memoizedState,s)},useTransition:function(){var s=Am(Uu)[0],o=rr().memoizedState;return[s,o]},useMutableSource:gw,useSyncExternalStore:yw,useId:Dw,unstable_isNewReconciler:!1},zP={readContext:nr,useCallback:Cw,useContext:nr,useEffect:Pm,useImperativeHandle:bw,useInsertionEffect:Rw,useLayoutEffect:Pw,useMemo:kw,useReducer:Rm,useRef:Sw,useState:function(){return Rm(Uu)},useDebugValue:xm,useDeferredValue:function(s){var o=rr();return jt===null?o.memoizedState=s:Nw(o,jt.memoizedState,s)},useTransition:function(){var s=Rm(Uu)[0],o=rr().memoizedState;return[s,o]},useMutableSource:gw,useSyncExternalStore:yw,useId:Dw,unstable_isNewReconciler:!1};function yr(s,o){if(s&&s.defaultProps){o=he({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function bm(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:he({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var yd={isMounted:function(s){return(s=s._reactInternals)?fr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var d=_n(),m=ds(s),y=Ti(d,m);y.payload=o,u!=null&&(y.callback=u),o=ls(s,y,m),o!==null&&(wr(o,s,m,d),ud(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=_n(),m=ds(s),y=Ti(d,m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=ls(s,y,m),o!==null&&(wr(o,s,m,d),ud(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=_n(),d=ds(s),m=Ti(u,d);m.tag=2,o!=null&&(m.callback=o),o=ls(s,m,d),o!==null&&(wr(o,s,d,u),ud(o,s,d))}};function Mw(s,o,u,d,m,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,y,E):o.prototype&&o.prototype.isPureReactComponent?!Pu(u,d)||!Pu(m,y):!0}function Fw(s,o,u){var d=!1,m=ss,y=o.contextType;return typeof y=="object"&&y!==null?y=nr(y):(m=Sn(o)?fo:on.current,d=o.contextTypes,y=(d=d!=null)?La(s,m):ss),o=new o(u,y),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=yd,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),o}function jw(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&yd.enqueueReplaceState(o,o.state,null)}function Cm(s,o,u,d){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},gm(s);var y=o.contextType;typeof y=="object"&&y!==null?m.context=nr(y):(y=Sn(o)?fo:on.current,m.context=La(s,y)),m.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(bm(s,o,y,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&yd.enqueueReplaceState(m,m.state,null),cd(s,u,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function $a(s,o){try{var u="",d=o;do u+=Ve(d),d=d.return;while(d);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:o,stack:m,digest:null}}function km(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Nm(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var qP=typeof WeakMap=="function"?WeakMap:Map;function Uw(s,o,u){u=Ti(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Sd||(Sd=!0,Gm=d),Nm(s,o)},u}function Bw(s,o,u){u=Ti(-1,u),u.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){Nm(s,o)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Nm(s,o),typeof d!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function zw(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new qP;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),s=rx.bind(null,s,o,u),o.then(s,s))}function qw(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function $w(s,o,u,d,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ti(-1,1),o.tag=2,ls(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var $P=de.ReactCurrentOwner,An=!1;function yn(s,o,u,d){o.child=s===null?cw(o,null,u,d):Ua(o,s.child,u,d)}function Ww(s,o,u,d,m){u=u.render;var y=o.ref;return za(o,m),d=Tm(s,o,u,d,y,m),u=Sm(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Si(s,o,m)):(ft&&u&&om(o),o.flags|=1,yn(s,o,d,m),o.child)}function Hw(s,o,u,d,m){if(s===null){var y=u.type;return typeof y=="function"&&!eg(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Gw(s,o,y,d,m)):(s=Cd(u.type,null,d,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,(s.lanes&m)===0){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:Pu,u(E,d)&&s.ref===o.ref)return Si(s,o,m)}return o.flags|=1,s=ps(y,d),s.ref=o.ref,s.return=o,o.child=s}function Gw(s,o,u,d,m){if(s!==null){var y=s.memoizedProps;if(Pu(y,d)&&s.ref===o.ref)if(An=!1,o.pendingProps=d=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(An=!0);else return o.lanes=s.lanes,Si(s,o,m)}return Dm(s,o,u,d,m)}function Kw(s,o,u){var d=o.pendingProps,m=d.children,y=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ha,Wn),Wn|=u;else{if((u&1073741824)===0)return s=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,rt(Ha,Wn),Wn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:u,rt(Ha,Wn),Wn|=d}else y!==null?(d=y.baseLanes|u,o.memoizedState=null):d=u,rt(Ha,Wn),Wn|=d;return yn(s,o,m,u),o.child}function Qw(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Dm(s,o,u,d,m){var y=Sn(u)?fo:on.current;return y=La(o,y),za(o,m),u=Tm(s,o,u,d,y,m),d=Sm(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Si(s,o,m)):(ft&&d&&om(o),o.flags|=1,yn(s,o,u,m),o.child)}function Jw(s,o,u,d,m){if(Sn(u)){var y=!0;td(o)}else y=!1;if(za(o,m),o.stateNode===null)vd(s,o),Fw(o,u,d),Cm(o,u,d,m),d=!0;else if(s===null){var E=o.stateNode,P=o.memoizedProps;E.props=P;var D=E.context,W=u.contextType;typeof W=="object"&&W!==null?W=nr(W):(W=Sn(u)?fo:on.current,W=La(o,W));var Z=u.getDerivedStateFromProps,ne=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";ne||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==d||D!==W)&&jw(o,E,d,W),as=!1;var Y=o.memoizedState;E.state=Y,cd(o,d,E,m),D=o.memoizedState,P!==d||Y!==D||Tn.current||as?(typeof Z=="function"&&(bm(o,u,Z,d),D=o.memoizedState),(P=as||Mw(o,u,P,d,Y,D,W))?(ne||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=D),E.props=d,E.state=D,E.context=W,d=P):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,dw(s,o),P=o.memoizedProps,W=o.type===o.elementType?P:yr(o.type,P),E.props=W,ne=o.pendingProps,Y=E.context,D=u.contextType,typeof D=="object"&&D!==null?D=nr(D):(D=Sn(u)?fo:on.current,D=La(o,D));var ce=u.getDerivedStateFromProps;(Z=typeof ce=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==ne||Y!==D)&&jw(o,E,d,D),as=!1,Y=o.memoizedState,E.state=Y,cd(o,d,E,m);var pe=o.memoizedState;P!==ne||Y!==pe||Tn.current||as?(typeof ce=="function"&&(bm(o,u,ce,d),pe=o.memoizedState),(W=as||Mw(o,u,W,d,Y,pe,D)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,pe,D),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,pe,D)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=pe),E.props=d,E.state=pe,E.context=D,d=W):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),d=!1)}return Vm(s,o,u,d,y,m)}function Vm(s,o,u,d,m,y){Qw(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return m&&tw(o,u,!1),Si(s,o,y);d=o.stateNode,$P.current=o;var P=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=Ua(o,s.child,null,y),o.child=Ua(o,null,P,y)):yn(s,o,P,y),o.memoizedState=d.state,m&&tw(o,u,!0),o.child}function Yw(s){var o=s.stateNode;o.pendingContext?Zv(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Zv(s,o.context,!1),ym(s,o.containerInfo)}function Xw(s,o,u,d,m){return ja(),cm(m),o.flags|=256,yn(s,o,u,d),o.child}var Om={dehydrated:null,treeContext:null,retryLane:0};function Lm(s){return{baseLanes:s,cachePool:null,transitions:null}}function Zw(s,o,u){var d=o.pendingProps,m=yt.current,y=!1,E=(o.flags&128)!==0,P;if((P=E)||(P=s!==null&&s.memoizedState===null?!1:(m&2)!==0),P?(y=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),rt(yt,m&1),s===null)return um(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,s=d.fallback,y?(d=o.mode,y=o.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=kd(E,d,0,null),s=To(s,d,u,null),y.return=o,s.return=o,y.sibling=s,o.child=y,o.child.memoizedState=Lm(u),o.memoizedState=Om,s):Mm(o,E));if(m=s.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return WP(s,o,E,d,P,m,u);if(y){y=d.fallback,E=o.mode,m=s.child,P=m.sibling;var D={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=D,o.deletions=null):(d=ps(m,D),d.subtreeFlags=m.subtreeFlags&14680064),P!==null?y=ps(P,y):(y=To(y,E,u,null),y.flags|=2),y.return=o,d.return=o,d.sibling=y,o.child=d,d=y,y=o.child,E=s.child.memoizedState,E=E===null?Lm(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=s.childLanes&~u,o.memoizedState=Om,d}return y=s.child,s=y.sibling,d=ps(y,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=d,o.memoizedState=null,d}function Mm(s,o){return o=kd({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function _d(s,o,u,d){return d!==null&&cm(d),Ua(o,s.child,null,u),s=Mm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function WP(s,o,u,d,m,y,E){if(u)return o.flags&256?(o.flags&=-257,d=km(Error(t(422))),_d(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(y=d.fallback,m=o.mode,d=kd({mode:"visible",children:d.children},m,0,null),y=To(y,m,E,null),y.flags|=2,d.return=o,y.return=o,d.sibling=y,o.child=d,(o.mode&1)!==0&&Ua(o,s.child,null,E),o.child.memoizedState=Lm(E),o.memoizedState=Om,y);if((o.mode&1)===0)return _d(s,o,E,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var P=d.dgst;return d=P,y=Error(t(419)),d=km(y,d,void 0),_d(s,o,E,d)}if(P=(E&s.childLanes)!==0,An||P){if(d=$t,d!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|E))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Ii(s,m),wr(d,s,m,-1))}return Zm(),d=km(Error(t(421))),_d(s,o,E,d)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=ix.bind(null,s),m._reactRetry=o,null):(s=y.treeContext,$n=rs(m.nextSibling),qn=o,ft=!0,gr=null,s!==null&&(er[tr++]=wi,er[tr++]=Ei,er[tr++]=po,wi=s.id,Ei=s.overflow,po=o),o=Mm(o,d.children),o.flags|=4096,o)}function eE(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),pm(s.return,o,u)}function Fm(s,o,u,d,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=u,y.tailMode=m)}function tE(s,o,u){var d=o.pendingProps,m=d.revealOrder,y=d.tail;if(yn(s,o,d.children,u),d=yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&eE(s,u,o);else if(s.tag===19)eE(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(rt(yt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)s=u.alternate,s!==null&&hd(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Fm(o,!1,m,u,y);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&hd(s)===null){o.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Fm(o,!0,u,null,y);break;case"together":Fm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function vd(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Si(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),vo|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=ps(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=ps(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function HP(s,o,u){switch(o.tag){case 3:Yw(o),ja();break;case 5:mw(o);break;case 1:Sn(o.type)&&td(o);break;case 4:ym(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;rt(ad,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(rt(yt,yt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Zw(s,o,u):(rt(yt,yt.current&1),s=Si(s,o,u),s!==null?s.sibling:null);rt(yt,yt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(s.flags&128)!==0){if(d)return tE(s,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),rt(yt,yt.current),d)break;return null;case 22:case 23:return o.lanes=0,Kw(s,o,u)}return Si(s,o,u)}var nE,jm,rE,iE;nE=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jm=function(){},rE=function(s,o,u,d){var m=s.memoizedProps;if(m!==d){s=o.stateNode,yo(zr.current);var y=null;switch(u){case"input":m=la(s,m),d=la(s,d),y=[];break;case"select":m=he({},m,{value:void 0}),d=he({},d,{value:void 0}),y=[];break;case"textarea":m=nu(s,m),d=nu(s,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Xh)}dr(u,d);var E;u=null;for(W in m)if(!d.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var P=m[W];for(E in P)P.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in d){var D=d[W];if(P=m?.[W],d.hasOwnProperty(W)&&D!==P&&(D!=null||P!=null))if(W==="style")if(P){for(E in P)!P.hasOwnProperty(E)||D&&D.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in D)D.hasOwnProperty(E)&&P[E]!==D[E]&&(u||(u={}),u[E]=D[E])}else u||(y||(y=[]),y.push(W,u)),u=D;else W==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,P=P?P.__html:void 0,D!=null&&P!==D&&(y=y||[]).push(W,D)):W==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(W,""+D):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(D!=null&&W==="onScroll"&&ut("scroll",s),y||P===D||(y=[])):(y=y||[]).push(W,D))}u&&(y=y||[]).push("style",u);var W=y;(o.updateQueue=W)&&(o.flags|=4)}},iE=function(s,o,u,d){u!==d&&(o.flags|=4)};function zu(s,o){if(!ft)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function ln(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function GP(s,o,u){var d=o.pendingProps;switch(am(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(o),null;case 1:return Sn(o.type)&&ed(),ln(o),null;case 3:return d=o.stateNode,qa(),ct(Tn),ct(on),wm(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(sd(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gr!==null&&(Jm(gr),gr=null))),jm(s,o),ln(o),null;case 5:_m(o);var m=yo(Mu.current);if(u=o.type,s!==null&&o.stateNode!=null)rE(s,o,u,d,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return ln(o),null}if(s=yo(zr.current),sd(o)){d=o.stateNode,u=o.type;var y=o.memoizedProps;switch(d[Br]=o,d[Nu]=y,s=(o.mode&1)!==0,u){case"dialog":ut("cancel",d),ut("close",d);break;case"iframe":case"object":case"embed":ut("load",d);break;case"video":case"audio":for(m=0;m<bu.length;m++)ut(bu[m],d);break;case"source":ut("error",d);break;case"img":case"image":case"link":ut("error",d),ut("load",d);break;case"details":ut("toggle",d);break;case"input":Th(d,y),ut("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},ut("invalid",d);break;case"textarea":ru(d,y),ut("invalid",d)}dr(u,y),m=null;for(var E in y)if(y.hasOwnProperty(E)){var P=y[E];E==="children"?typeof P=="string"?d.textContent!==P&&(y.suppressHydrationWarning!==!0&&Yh(d.textContent,P,s),m=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Yh(d.textContent,P,s),m=["children",""+P]):i.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&ut("scroll",d)}switch(u){case"input":aa(d),tu(d,y,!0);break;case"textarea":aa(d),Bi(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Xh)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=iu(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=E.createElement(u,{is:d.is}):(s=E.createElement(u),u==="select"&&(E=s,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):s=E.createElementNS(s,u),s[Br]=o,s[Nu]=d,nE(s,o,!1,!1),o.stateNode=s;e:{switch(E=da(u,d),u){case"dialog":ut("cancel",s),ut("close",s),m=d;break;case"iframe":case"object":case"embed":ut("load",s),m=d;break;case"video":case"audio":for(m=0;m<bu.length;m++)ut(bu[m],s);m=d;break;case"source":ut("error",s),m=d;break;case"img":case"image":case"link":ut("error",s),ut("load",s),m=d;break;case"details":ut("toggle",s),m=d;break;case"input":Th(s,d),m=la(s,d),ut("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=he({},d,{value:void 0}),ut("invalid",s);break;case"textarea":ru(s,d),m=nu(s,d),ut("invalid",s);break;default:m=d}dr(u,m),P=m;for(y in P)if(P.hasOwnProperty(y)){var D=P[y];y==="style"?ha(s,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Ah(s,D)):y==="children"?typeof D=="string"?(u!=="textarea"||D!=="")&&Ys(s,D):typeof D=="number"&&Ys(s,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?D!=null&&y==="onScroll"&&ut("scroll",s):D!=null&&ee(s,y,D,E))}switch(u){case"input":aa(s),tu(s,d,!1);break;case"textarea":aa(s),Bi(s);break;case"option":d.value!=null&&s.setAttribute("value",""+qe(d.value));break;case"select":s.multiple=!!d.multiple,y=d.value,y!=null?hr(s,!!d.multiple,y,!1):d.defaultValue!=null&&hr(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Xh)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ln(o),null;case 6:if(s&&o.stateNode!=null)iE(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=yo(Mu.current),yo(zr.current),sd(o)){if(d=o.stateNode,u=o.memoizedProps,d[Br]=o,(y=d.nodeValue!==u)&&(s=qn,s!==null))switch(s.tag){case 3:Yh(d.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Yh(d.nodeValue,u,(s.mode&1)!==0)}y&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Br]=o,o.stateNode=d}return ln(o),null;case 13:if(ct(yt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ft&&$n!==null&&(o.mode&1)!==0&&(o.flags&128)===0)aw(),ja(),o.flags|=98560,y=!1;else if(y=sd(o),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Br]=o}else ja(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ln(o),y=!1}else gr!==null&&(Jm(gr),gr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(yt.current&1)!==0?Ut===0&&(Ut=3):Zm())),o.updateQueue!==null&&(o.flags|=4),ln(o),null);case 4:return qa(),jm(s,o),s===null&&Cu(o.stateNode.containerInfo),ln(o),null;case 10:return fm(o.type._context),ln(o),null;case 17:return Sn(o.type)&&ed(),ln(o),null;case 19:if(ct(yt),y=o.memoizedState,y===null)return ln(o),null;if(d=(o.flags&128)!==0,E=y.rendering,E===null)if(d)zu(y,!1);else{if(Ut!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=hd(s),E!==null){for(o.flags|=128,zu(y,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)y=u,s=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,s=E.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return rt(yt,yt.current&1|2),o.child}s=s.sibling}y.tail!==null&&lt()>Ga&&(o.flags|=128,d=!0,zu(y,!1),o.lanes=4194304)}else{if(!d)if(s=hd(E),s!==null){if(o.flags|=128,d=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),zu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!ft)return ln(o),null}else 2*lt()-y.renderingStartTime>Ga&&u!==1073741824&&(o.flags|=128,d=!0,zu(y,!1),o.lanes=4194304);y.isBackwards?(E.sibling=o.child,o.child=E):(u=y.last,u!==null?u.sibling=E:o.child=E,y.last=E)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=lt(),o.sibling=null,u=yt.current,rt(yt,d?u&1|2:u&1),o):(ln(o),null);case 22:case 23:return Xm(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(Wn&1073741824)!==0&&(ln(o),o.subtreeFlags&6&&(o.flags|=8192)):ln(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function KP(s,o){switch(am(o),o.tag){case 1:return Sn(o.type)&&ed(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return qa(),ct(Tn),ct(on),wm(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return _m(o),null;case 13:if(ct(yt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ja()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ct(yt),null;case 4:return qa(),null;case 10:return fm(o.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var wd=!1,un=!1,QP=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Wa(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){It(s,o,d)}else u.current=null}function Um(s,o,u){try{u()}catch(d){It(s,o,d)}}var sE=!1;function JP(s,o){if(Xp=mi,s=Mv(),$p(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,P=-1,D=-1,W=0,Z=0,ne=s,Y=null;t:for(;;){for(var ce;ne!==u||m!==0&&ne.nodeType!==3||(P=E+m),ne!==y||d!==0&&ne.nodeType!==3||(D=E+d),ne.nodeType===3&&(E+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)Y=ne,ne=ce;for(;;){if(ne===s)break t;if(Y===u&&++W===m&&(P=E),Y===y&&++Z===d&&(D=E),(ce=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=ce}u=P===-1||D===-1?null:{start:P,end:D}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zp={focusedElem:s,selectionRange:u},mi=!1,fe=o;fe!==null;)if(o=fe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,fe=s;else for(;fe!==null;){o=fe;try{var pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,xt=pe.memoizedState,B=o.stateNode,L=B.getSnapshotBeforeUpdate(o.elementType===o.type?ge:yr(o.type,ge),xt);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var $=o.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){It(o,o.return,re)}if(s=o.sibling,s!==null){s.return=o.return,fe=s;break}fe=o.return}return pe=sE,sE=!1,pe}function qu(s,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&Um(o,u,y)}m=m.next}while(m!==d)}}function Ed(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Bm(s){var o=s.ref;if(o!==null){var u=s.stateNode;s.tag,s=u,typeof o=="function"?o(s):o.current=s}}function oE(s){var o=s.alternate;o!==null&&(s.alternate=null,oE(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Br],delete o[Nu],delete o[rm],delete o[NP],delete o[DP])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function aE(s){return s.tag===5||s.tag===3||s.tag===4}function lE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||aE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zm(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Xh));else if(d!==4&&(s=s.child,s!==null))for(zm(s,o,u),s=s.sibling;s!==null;)zm(s,o,u),s=s.sibling}function qm(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(qm(s,o,u),s=s.sibling;s!==null;)qm(s,o,u),s=s.sibling}var Xt=null,_r=!1;function us(s,o,u){for(u=u.child;u!==null;)uE(s,o,u),u=u.sibling}function uE(s,o,u){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(no,u)}catch{}switch(u.tag){case 5:un||Wa(u,o);case 6:var d=Xt,m=_r;Xt=null,us(s,o,u),Xt=d,_r=m,Xt!==null&&(_r?(s=Xt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(_r?(s=Xt,u=u.stateNode,s.nodeType===8?nm(s.parentNode,u):s.nodeType===1&&nm(s,u),Zi(s)):nm(Xt,u.stateNode));break;case 4:d=Xt,m=_r,Xt=u.stateNode.containerInfo,_r=!0,us(s,o,u),Xt=d,_r=m;break;case 0:case 11:case 14:case 15:if(!un&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&Um(u,o,E),m=m.next}while(m!==d)}us(s,o,u);break;case 1:if(!un&&(Wa(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(P){It(u,o,P)}us(s,o,u);break;case 21:us(s,o,u);break;case 22:u.mode&1?(un=(d=un)||u.memoizedState!==null,us(s,o,u),un=d):us(s,o,u);break;default:us(s,o,u)}}function cE(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new QP),o.forEach(function(d){var m=sx.bind(null,s,d);u.has(d)||(u.add(d),d.then(m,m))})}}function vr(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var y=s,E=o,P=E;e:for(;P!==null;){switch(P.tag){case 5:Xt=P.stateNode,_r=!1;break e;case 3:Xt=P.stateNode.containerInfo,_r=!0;break e;case 4:Xt=P.stateNode.containerInfo,_r=!0;break e}P=P.return}if(Xt===null)throw Error(t(160));uE(y,E,m),Xt=null,_r=!1;var D=m.alternate;D!==null&&(D.return=null),m.return=null}catch(W){It(m,o,W)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)hE(o,s),o=o.sibling}function hE(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(vr(o,s),$r(s),d&4){try{qu(3,s,s.return),Ed(3,s)}catch(ge){It(s,s.return,ge)}try{qu(5,s,s.return)}catch(ge){It(s,s.return,ge)}}break;case 1:vr(o,s),$r(s),d&512&&u!==null&&Wa(u,u.return);break;case 5:if(vr(o,s),$r(s),d&512&&u!==null&&Wa(u,u.return),s.flags&32){var m=s.stateNode;try{Ys(m,"")}catch(ge){It(s,s.return,ge)}}if(d&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,E=u!==null?u.memoizedProps:y,P=s.type,D=s.updateQueue;if(s.updateQueue=null,D!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&ua(m,y),da(P,E);var W=da(P,y);for(E=0;E<D.length;E+=2){var Z=D[E],ne=D[E+1];Z==="style"?ha(m,ne):Z==="dangerouslySetInnerHTML"?Ah(m,ne):Z==="children"?Ys(m,ne):ee(m,Z,ne,W)}switch(P){case"input":Js(m,y);break;case"textarea":Sh(m,y);break;case"select":var Y=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var ce=y.value;ce!=null?hr(m,!!y.multiple,ce,!1):Y!==!!y.multiple&&(y.defaultValue!=null?hr(m,!!y.multiple,y.defaultValue,!0):hr(m,!!y.multiple,y.multiple?[]:"",!1))}m[Nu]=y}catch(ge){It(s,s.return,ge)}}break;case 6:if(vr(o,s),$r(s),d&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(ge){It(s,s.return,ge)}}break;case 3:if(vr(o,s),$r(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Zi(o.containerInfo)}catch(ge){It(s,s.return,ge)}break;case 4:vr(o,s),$r(s);break;case 13:vr(o,s),$r(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Hm=lt())),d&4&&cE(s);break;case 22:if(Z=u!==null&&u.memoizedState!==null,s.mode&1?(un=(W=un)||Z,vr(o,s),un=W):vr(o,s),$r(s),d&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!Z&&(s.mode&1)!==0)for(fe=s,Z=s.child;Z!==null;){for(ne=fe=Z;fe!==null;){switch(Y=fe,ce=Y.child,Y.tag){case 0:case 11:case 14:case 15:qu(4,Y,Y.return);break;case 1:Wa(Y,Y.return);var pe=Y.stateNode;if(typeof pe.componentWillUnmount=="function"){d=Y,u=Y.return;try{o=d,pe.props=o.memoizedProps,pe.state=o.memoizedState,pe.componentWillUnmount()}catch(ge){It(d,u,ge)}}break;case 5:Wa(Y,Y.return);break;case 22:if(Y.memoizedState!==null){pE(ne);continue}}ce!==null?(ce.return=Y,fe=ce):pE(ne)}Z=Z.sibling}e:for(Z=null,ne=s;;){if(ne.tag===5){if(Z===null){Z=ne;try{m=ne.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=ne.stateNode,D=ne.memoizedProps.style,E=D!=null&&D.hasOwnProperty("display")?D.display:null,P.style.display=$i("display",E))}catch(ge){It(s,s.return,ge)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=W?"":ne.memoizedProps}catch(ge){It(s,s.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===s)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===s)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===s)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:vr(o,s),$r(s),d&4&&cE(s);break;case 21:break;default:vr(o,s),$r(s)}}function $r(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(aE(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Ys(m,""),d.flags&=-33);var y=lE(s);qm(s,y,m);break;case 3:case 4:var E=d.stateNode.containerInfo,P=lE(s);zm(s,P,E);break;default:throw Error(t(161))}}catch(D){It(s,s.return,D)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function YP(s,o,u){fe=s,dE(s)}function dE(s,o,u){for(var d=(s.mode&1)!==0;fe!==null;){var m=fe,y=m.child;if(m.tag===22&&d){var E=m.memoizedState!==null||wd;if(!E){var P=m.alternate,D=P!==null&&P.memoizedState!==null||un;P=wd;var W=un;if(wd=E,(un=D)&&!W)for(fe=m;fe!==null;)E=fe,D=E.child,E.tag===22&&E.memoizedState!==null?mE(m):D!==null?(D.return=E,fe=D):mE(m);for(;y!==null;)fe=y,dE(y),y=y.sibling;fe=m,wd=P,un=W}fE(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,fe=y):fE(s)}}function fE(s){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:un||Ed(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!un)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:yr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&pw(o,y,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}pw(o,E,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var D=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&u.focus();break;case"img":D.src&&(u.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var W=o.alternate;if(W!==null){var Z=W.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&Zi(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||o.flags&512&&Bm(o)}catch(Y){It(o,o.return,Y)}}if(o===s){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function pE(s){for(;fe!==null;){var o=fe;if(o===s){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function mE(s){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ed(4,o)}catch(D){It(o,u,D)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(D){It(o,m,D)}}var y=o.return;try{Bm(o)}catch(D){It(o,y,D)}break;case 5:var E=o.return;try{Bm(o)}catch(D){It(o,E,D)}}}catch(D){It(o,o.return,D)}if(o===s){fe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,fe=P;break}fe=o.return}}var XP=Math.ceil,Id=de.ReactCurrentDispatcher,$m=de.ReactCurrentOwner,ir=de.ReactCurrentBatchConfig,$e=0,$t=null,Ot=null,Zt=0,Wn=0,Ha=is(0),Ut=0,$u=null,vo=0,Td=0,Wm=0,Wu=null,Rn=null,Hm=0,Ga=1/0,Ai=null,Sd=!1,Gm=null,cs=null,Ad=!1,hs=null,Rd=0,Hu=0,Km=null,Pd=-1,xd=0;function _n(){return($e&6)!==0?lt():Pd!==-1?Pd:Pd=lt()}function ds(s){return(s.mode&1)===0?1:($e&2)!==0&&Zt!==0?Zt&-Zt:OP.transition!==null?(xd===0&&(xd=fu()),xd):(s=Be,s!==0||(s=window.event,s=s===void 0?16:Ia(s.type)),s)}function wr(s,o,u,d){if(50<Hu)throw Hu=0,Km=null,Error(t(185));oo(s,u,d),(($e&2)===0||s!==$t)&&(s===$t&&(($e&2)===0&&(Td|=u),Ut===4&&fs(s,Zt)),Pn(s,d),u===1&&$e===0&&(o.mode&1)===0&&(Ga=lt()+500,nd&&os()))}function Pn(s,o){var u=s.callbackNode;so(s,o);var d=di(s,s===$t?Zt:0);if(d===0)u!==null&&ma(u),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(u!=null&&ma(u),o===1)s.tag===0?VP(yE.bind(null,s)):nw(yE.bind(null,s)),CP(function(){($e&6)===0&&os()}),u=null;else{switch(kr(d)){case 1:u=ga;break;case 4:u=cu;break;case 16:u=to;break;case 536870912:u=ya;break;default:u=to}u=AE(u,gE.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function gE(s,o){if(Pd=-1,xd=0,($e&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Ka()&&s.callbackNode!==u)return null;var d=di(s,s===$t?Zt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=bd(s,d);else{o=d;var m=$e;$e|=2;var y=vE();($t!==s||Zt!==o)&&(Ai=null,Ga=lt()+500,Eo(s,o));do try{tx();break}catch(P){_E(s,P)}while(!0);dm(),Id.current=y,$e=m,Ot!==null?o=0:($t=null,Zt=0,o=Ut)}if(o!==0){if(o===2&&(m=du(s),m!==0&&(d=m,o=Qm(s,m))),o===1)throw u=$u,Eo(s,0),fs(s,d),Pn(s,lt()),u;if(o===6)fs(s,d);else{if(m=s.current.alternate,(d&30)===0&&!ZP(m)&&(o=bd(s,d),o===2&&(y=du(s),y!==0&&(d=y,o=Qm(s,y))),o===1))throw u=$u,Eo(s,0),fs(s,d),Pn(s,lt()),u;switch(s.finishedWork=m,s.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:Io(s,Rn,Ai);break;case 3:if(fs(s,d),(d&130023424)===d&&(o=Hm+500-lt(),10<o)){if(di(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){_n(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=tm(Io.bind(null,s,Rn,Ai),o);break}Io(s,Rn,Ai);break;case 4:if(fs(s,d),(d&4194240)===d)break;for(o=s.eventTimes,m=-1;0<d;){var E=31-Fn(d);y=1<<E,E=o[E],E>m&&(m=E),d&=~y}if(d=m,d=lt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*XP(d/1960))-d,10<d){s.timeoutHandle=tm(Io.bind(null,s,Rn,Ai),d);break}Io(s,Rn,Ai);break;case 5:Io(s,Rn,Ai);break;default:throw Error(t(329))}}}return Pn(s,lt()),s.callbackNode===u?gE.bind(null,s):null}function Qm(s,o){var u=Wu;return s.current.memoizedState.isDehydrated&&(Eo(s,o).flags|=256),s=bd(s,o),s!==2&&(o=Rn,Rn=u,o!==null&&Jm(o)),s}function Jm(s){Rn===null?Rn=s:Rn.push.apply(Rn,s)}function ZP(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],y=m.getSnapshot;m=m.value;try{if(!mr(y(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(s,o){for(o&=~Wm,o&=~Td,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Fn(o),d=1<<u;s[u]=-1,o&=~d}}function yE(s){if(($e&6)!==0)throw Error(t(327));Ka();var o=di(s,0);if((o&1)===0)return Pn(s,lt()),null;var u=bd(s,o);if(s.tag!==0&&u===2){var d=du(s);d!==0&&(o=d,u=Qm(s,d))}if(u===1)throw u=$u,Eo(s,0),fs(s,o),Pn(s,lt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Io(s,Rn,Ai),Pn(s,lt()),null}function Ym(s,o){var u=$e;$e|=1;try{return s(o)}finally{$e=u,$e===0&&(Ga=lt()+500,nd&&os())}}function wo(s){hs!==null&&hs.tag===0&&($e&6)===0&&Ka();var o=$e;$e|=1;var u=ir.transition,d=Be;try{if(ir.transition=null,Be=1,s)return s()}finally{Be=d,ir.transition=u,$e=o,($e&6)===0&&os()}}function Xm(){Wn=Ha.current,ct(Ha)}function Eo(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,bP(u)),Ot!==null)for(u=Ot.return;u!==null;){var d=u;switch(am(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&ed();break;case 3:qa(),ct(Tn),ct(on),wm();break;case 5:_m(d);break;case 4:qa();break;case 13:ct(yt);break;case 19:ct(yt);break;case 10:fm(d.type._context);break;case 22:case 23:Xm()}u=u.return}if($t=s,Ot=s=ps(s.current,null),Zt=Wn=o,Ut=0,$u=null,Wm=Td=vo=0,Rn=Wu=null,go!==null){for(o=0;o<go.length;o++)if(u=go[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,y=u.pending;if(y!==null){var E=y.next;y.next=m,d.next=E}u.pending=d}go=null}return s}function _E(s,o){do{var u=Ot;try{if(dm(),dd.current=gd,fd){for(var d=_t.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}fd=!1}if(_o=0,qt=jt=_t=null,Fu=!1,ju=0,$m.current=null,u===null||u.return===null){Ut=1,$u=o,Ot=null;break}e:{var y=s,E=u.return,P=u,D=o;if(o=Zt,P.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=D,Z=P,ne=Z.tag;if((Z.mode&1)===0&&(ne===0||ne===11||ne===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ce=qw(E);if(ce!==null){ce.flags&=-257,$w(ce,E,P,y,o),ce.mode&1&&zw(y,W,o),o=ce,D=W;var pe=o.updateQueue;if(pe===null){var ge=new Set;ge.add(D),o.updateQueue=ge}else pe.add(D);break e}else{if((o&1)===0){zw(y,W,o),Zm();break e}D=Error(t(426))}}else if(ft&&P.mode&1){var xt=qw(E);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),$w(xt,E,P,y,o),cm($a(D,P));break e}}y=D=$a(D,P),Ut!==4&&(Ut=2),Wu===null?Wu=[y]:Wu.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=Uw(y,D,o);fw(y,B);break e;case 1:P=D;var L=y.type,$=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(cs===null||!cs.has($)))){y.flags|=65536,o&=-o,y.lanes|=o;var re=Bw(y,P,o);fw(y,re);break e}}y=y.return}while(y!==null)}EE(u)}catch(_e){o=_e,Ot===u&&u!==null&&(Ot=u=u.return);continue}break}while(!0)}function vE(){var s=Id.current;return Id.current=gd,s===null?gd:s}function Zm(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),$t===null||(vo&268435455)===0&&(Td&268435455)===0||fs($t,Zt)}function bd(s,o){var u=$e;$e|=2;var d=vE();($t!==s||Zt!==o)&&(Ai=null,Eo(s,o));do try{ex();break}catch(m){_E(s,m)}while(!0);if(dm(),$e=u,Id.current=d,Ot!==null)throw Error(t(261));return $t=null,Zt=0,Ut}function ex(){for(;Ot!==null;)wE(Ot)}function tx(){for(;Ot!==null&&!eo();)wE(Ot)}function wE(s){var o=SE(s.alternate,s,Wn);s.memoizedProps=s.pendingProps,o===null?EE(s):Ot=o,$m.current=null}function EE(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=GP(u,o,Wn),u!==null){Ot=u;return}}else{if(u=KP(u,o),u!==null){u.flags&=32767,Ot=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ut=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=s}while(o!==null);Ut===0&&(Ut=5)}function Io(s,o,u){var d=Be,m=ir.transition;try{ir.transition=null,Be=1,nx(s,o,u,d)}finally{ir.transition=m,Be=d}return null}function nx(s,o,u,d){do Ka();while(hs!==null);if(($e&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var y=u.lanes|u.childLanes;if(jp(s,y),s===$t&&(Ot=$t=null,Zt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ad||(Ad=!0,AE(to,function(){return Ka(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=ir.transition,ir.transition=null;var E=Be;Be=1;var P=$e;$e|=4,$m.current=null,JP(s,u),hE(u,s),IP(Zp),mi=!!Xp,Zp=Xp=null,s.current=u,YP(u),hi(),$e=P,Be=E,ir.transition=y}else s.current=u;if(Ad&&(Ad=!1,hs=s,Rd=m),y=s.pendingLanes,y===0&&(cs=null),Lh(u.stateNode),Pn(s,lt()),o!==null)for(d=s.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(Sd)throw Sd=!1,s=Gm,Gm=null,s;return(Rd&1)!==0&&s.tag!==0&&Ka(),y=s.pendingLanes,(y&1)!==0?s===Km?Hu++:(Hu=0,Km=s):Hu=0,os(),null}function Ka(){if(hs!==null){var s=kr(Rd),o=ir.transition,u=Be;try{if(ir.transition=null,Be=16>s?16:s,hs===null)var d=!1;else{if(s=hs,hs=null,Rd=0,($e&6)!==0)throw Error(t(331));var m=$e;for($e|=4,fe=s.current;fe!==null;){var y=fe,E=y.child;if((fe.flags&16)!==0){var P=y.deletions;if(P!==null){for(var D=0;D<P.length;D++){var W=P[D];for(fe=W;fe!==null;){var Z=fe;switch(Z.tag){case 0:case 11:case 15:qu(8,Z,y)}var ne=Z.child;if(ne!==null)ne.return=Z,fe=ne;else for(;fe!==null;){Z=fe;var Y=Z.sibling,ce=Z.return;if(oE(Z),Z===W){fe=null;break}if(Y!==null){Y.return=ce,fe=Y;break}fe=ce}}}var pe=y.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var xt=ge.sibling;ge.sibling=null,ge=xt}while(ge!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,fe=E;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:qu(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,fe=B;break e}fe=y.return}}var L=s.current;for(fe=L;fe!==null;){E=fe;var $=E.child;if((E.subtreeFlags&2064)!==0&&$!==null)$.return=E,fe=$;else e:for(E=L;fe!==null;){if(P=fe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Ed(9,P)}}catch(_e){It(P,P.return,_e)}if(P===E){fe=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,fe=re;break e}fe=P.return}}if($e=m,os(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(no,s)}catch{}d=!0}return d}finally{Be=u,ir.transition=o}}return!1}function IE(s,o,u){o=$a(u,o),o=Uw(s,o,1),s=ls(s,o,1),o=_n(),s!==null&&(oo(s,1,o),Pn(s,o))}function It(s,o,u){if(s.tag===3)IE(s,s,u);else for(;o!==null;){if(o.tag===3){IE(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cs===null||!cs.has(d))){s=$a(u,s),s=Bw(o,s,1),o=ls(o,s,1),s=_n(),o!==null&&(oo(o,1,s),Pn(o,s));break}}o=o.return}}function rx(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),o=_n(),s.pingedLanes|=s.suspendedLanes&u,$t===s&&(Zt&u)===u&&(Ut===4||Ut===3&&(Zt&130023424)===Zt&&500>lt()-Hm?Eo(s,0):Wm|=u),Pn(s,o)}function TE(s,o){o===0&&((s.mode&1)===0?o=1:(o=Ji,Ji<<=1,(Ji&130023424)===0&&(Ji=4194304)));var u=_n();s=Ii(s,o),s!==null&&(oo(s,o,u),Pn(s,u))}function ix(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),TE(s,u)}function sx(s,o){var u=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),TE(s,u)}var SE;SE=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Tn.current)An=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return An=!1,HP(s,o,u);An=(s.flags&131072)!==0}else An=!1,ft&&(o.flags&1048576)!==0&&rw(o,id,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;vd(s,o),s=o.pendingProps;var m=La(o,on.current);za(o,u),m=Tm(null,o,d,s,m,u);var y=Sm();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(d)?(y=!0,td(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,gm(o),m.updater=yd,o.stateNode=m,m._reactInternals=o,Cm(o,d,s,u),o=Vm(null,o,d,!0,y,u)):(o.tag=0,ft&&y&&om(o),yn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(vd(s,o),s=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=ax(d),s=yr(d,s),m){case 0:o=Dm(null,o,d,s,u);break e;case 1:o=Jw(null,o,d,s,u);break e;case 11:o=Ww(null,o,d,s,u);break e;case 14:o=Hw(null,o,d,yr(d.type,s),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Dm(s,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Jw(s,o,d,m,u);case 3:e:{if(Yw(o),s===null)throw Error(t(387));d=o.pendingProps,y=o.memoizedState,m=y.element,dw(s,o),cd(o,d,null,u);var E=o.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=$a(Error(t(423)),o),o=Xw(s,o,d,u,m);break e}else if(d!==m){m=$a(Error(t(424)),o),o=Xw(s,o,d,u,m);break e}else for($n=rs(o.stateNode.containerInfo.firstChild),qn=o,ft=!0,gr=null,u=cw(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ja(),d===m){o=Si(s,o,u);break e}yn(s,o,d,u)}o=o.child}return o;case 5:return mw(o),s===null&&um(o),d=o.type,m=o.pendingProps,y=s!==null?s.memoizedProps:null,E=m.children,em(d,m)?E=null:y!==null&&em(d,y)&&(o.flags|=32),Qw(s,o),yn(s,o,E,u),o.child;case 6:return s===null&&um(o),null;case 13:return Zw(s,o,u);case 4:return ym(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Ua(o,null,d,u):yn(s,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),Ww(s,o,d,m,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,y=o.memoizedProps,E=m.value,rt(ad,d._currentValue),d._currentValue=E,y!==null)if(mr(y.value,E)){if(y.children===m.children&&!Tn.current){o=Si(s,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var P=y.dependencies;if(P!==null){E=y.child;for(var D=P.firstContext;D!==null;){if(D.context===d){if(y.tag===1){D=Ti(-1,u&-u),D.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var Z=W.pending;Z===null?D.next=D:(D.next=Z.next,Z.next=D),W.pending=D}}y.lanes|=u,D=y.alternate,D!==null&&(D.lanes|=u),pm(y.return,u,o),P.lanes|=u;break}D=D.next}}else if(y.tag===10)E=y.type===o.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=u,P=E.alternate,P!==null&&(P.lanes|=u),pm(E,u,o),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===o){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}yn(s,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,za(o,u),m=nr(m),d=d(m),o.flags|=1,yn(s,o,d,u),o.child;case 14:return d=o.type,m=yr(d,o.pendingProps),m=yr(d.type,m),Hw(s,o,d,m,u);case 15:return Gw(s,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:yr(d,m),vd(s,o),o.tag=1,Sn(d)?(s=!0,td(o)):s=!1,za(o,u),Fw(o,d,m),Cm(o,d,m,u),Vm(null,o,d,!0,s,u);case 19:return tE(s,o,u);case 22:return Kw(s,o,u)}throw Error(t(156,o.tag))};function AE(s,o){return uu(s,o)}function ox(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,o,u,d){return new ox(s,o,u,d)}function eg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ax(s){if(typeof s=="function")return eg(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===at)return 14}return 2}function ps(s,o){var u=s.alternate;return u===null?(u=sr(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Cd(s,o,u,d,m,y){var E=2;if(d=s,typeof s=="function")eg(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case b:return To(u.children,m,y,o);case R:E=8,m|=8;break;case x:return s=sr(12,u,o,m|2),s.elementType=x,s.lanes=y,s;case A:return s=sr(13,u,o,m),s.elementType=A,s.lanes=y,s;case Ae:return s=sr(19,u,o,m),s.elementType=Ae,s.lanes=y,s;case et:return kd(u,m,y,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:E=10;break e;case V:E=9;break e;case F:E=11;break e;case at:E=14;break e;case Ze:E=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=sr(E,u,o,m),o.elementType=s,o.type=d,o.lanes=y,o}function To(s,o,u,d){return s=sr(7,s,d,o),s.lanes=u,s}function kd(s,o,u,d){return s=sr(22,s,d,o),s.elementType=et,s.lanes=u,s.stateNode={isHidden:!1},s}function tg(s,o,u){return s=sr(6,s,null,o),s.lanes=u,s}function ng(s,o,u){return o=sr(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function lx(s,o,u,d,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pu(0),this.expirationTimes=pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pu(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function rg(s,o,u,d,m,y,E,P,D){return s=new lx(s,o,u,P,D),o===1?(o=1,y===!0&&(o|=8)):o=0,y=sr(3,null,null,o),s.current=y,y.stateNode=s,y.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(y),s}function ux(s,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:d==null?null:""+d,children:s,containerInfo:o,implementation:u}}function RE(s){if(!s)return ss;s=s._reactInternals;e:{if(fr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Sn(u))return ew(s,u,o)}return o}function PE(s,o,u,d,m,y,E,P,D){return s=rg(u,d,!0,s,m,y,E,P,D),s.context=RE(null),u=s.current,d=_n(),m=ds(u),y=Ti(d,m),y.callback=o??null,ls(u,y,m),s.current.lanes=m,oo(s,m,d),Pn(s,d),s}function Nd(s,o,u,d){var m=o.current,y=_n(),E=ds(m);return u=RE(u),o.context===null?o.context=u:o.pendingContext=u,o=Ti(y,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=ls(m,o,E),s!==null&&(wr(s,m,E,y),ud(s,m,E)),E}function Dd(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function xE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function ig(s,o){xE(s,o),(s=s.alternate)&&xE(s,o)}function cx(){return null}var bE=typeof reportError=="function"?reportError:function(s){console.error(s)};function sg(s){this._internalRoot=s}Vd.prototype.render=sg.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Nd(s,o,null,null)},Vd.prototype.unmount=sg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;wo(function(){Nd(null,s,null,null)}),o[_i]=null}};function Vd(s){this._internalRoot=s}Vd.prototype.unstable_scheduleHydration=function(s){if(s){var o=_u();s={blockedOn:null,target:s,priority:o};for(var u=0;u<jn.length&&o!==0&&o<jn[u].priority;u++);jn.splice(u,0,s),u===0&&wa(s)}};function og(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Od(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function CE(){}function hx(s,o,u,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var W=Dd(E);y.call(W)}}var E=PE(o,d,s,0,null,!1,!1,"",CE);return s._reactRootContainer=E,s[_i]=E.current,Cu(s.nodeType===8?s.parentNode:s),wo(),E}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var P=d;d=function(){var W=Dd(D);P.call(W)}}var D=rg(s,0,!1,null,null,!1,!1,"",CE);return s._reactRootContainer=D,s[_i]=D.current,Cu(s.nodeType===8?s.parentNode:s),wo(function(){Nd(o,D,u,d)}),D}function Ld(s,o,u,d,m){var y=u._reactRootContainer;if(y){var E=y;if(typeof m=="function"){var P=m;m=function(){var D=Dd(E);P.call(D)}}Nd(o,E,s,m)}else E=hx(u,o,s,m,d);return Dd(E)}gu=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ge(o.pendingLanes);u!==0&&(mu(o,u|1),Pn(o,lt()),($e&6)===0&&(Ga=lt()+500,os()))}break;case 13:wo(function(){var d=Ii(s,1);if(d!==null){var m=_n();wr(d,s,1,m)}}),ig(s,1)}},_a=function(s){if(s.tag===13){var o=Ii(s,134217728);if(o!==null){var u=_n();wr(o,s,134217728,u)}ig(s,134217728)}},yu=function(s){if(s.tag===13){var o=ds(s),u=Ii(s,o);if(u!==null){var d=_n();wr(u,s,o,d)}ig(s,o)}},_u=function(){return Be},vu=function(s,o){var u=Be;try{return Be=s,o()}finally{Be=u}},li=function(s,o,u){switch(o){case"input":if(Js(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var m=Zh(d);if(!m)throw Error(t(90));eu(d),Js(d,m)}}}break;case"textarea":Sh(s,u);break;case"select":o=u.value,o!=null&&hr(s,!!u.multiple,o,!1)}},Ph=Ym,xh=wo;var dx={usingClientEntryPoint:!1,Events:[Du,Va,Zh,Hi,Gi,Ym]},Gu={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fx={bundleType:Gu.bundleType,version:Gu.version,rendererPackageName:Gu.rendererPackageName,rendererConfig:Gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Oh(s),s===null?null:s.stateNode},findFiberByHostInstance:Gu.findFiberByHostInstance||cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{no=Md.inject(fx),Mn=Md}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dx,xn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(o))throw Error(t(200));return ux(s,o,null,u)},xn.createRoot=function(s,o){if(!og(s))throw Error(t(299));var u=!1,d="",m=bE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=rg(s,1,!1,null,null,u,!1,d,m),s[_i]=o.current,Cu(s.nodeType===8?s.parentNode:s),new sg(o)},xn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Oh(o),s=s===null?null:s.stateNode,s},xn.flushSync=function(s){return wo(s)},xn.hydrate=function(s,o,u){if(!Od(o))throw Error(t(200));return Ld(null,s,o,!0,u)},xn.hydrateRoot=function(s,o,u){if(!og(s))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,y="",E=bE;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=PE(o,null,s,1,u??null,m,!1,y,E),s[_i]=o.current,Cu(s),d)for(s=0;s<d.length;s++)u=d[s],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Vd(o)},xn.render=function(s,o,u){if(!Od(o))throw Error(t(200));return Ld(null,s,o,!1,u)},xn.unmountComponentAtNode=function(s){if(!Od(s))throw Error(t(40));return s._reactRootContainer?(wo(function(){Ld(null,null,s,!1,function(){s._reactRootContainer=null,s[_i]=null})}),!0):!1},xn.unstable_batchedUpdates=Ym,xn.unstable_renderSubtreeIntoContainer=function(s,o,u,d){if(!Od(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ld(s,o,u,!1,d)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var FE;function Ex(){if(FE)return ug.exports;FE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ug.exports=wx(),ug.exports}var jE;function Ix(){if(jE)return Fd;jE=1;var n=Ex();return Fd.createRoot=n.createRoot,Fd.hydrateRoot=n.hydrateRoot,Fd}var Tx=Ix();const Sx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ax=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),UE=n=>{const e=Ax(n);return e.charAt(0).toUpperCase()+e.slice(1)},w0=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),Rx=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Px={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xx=be.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},f)=>be.createElement("svg",{ref:f,...Px,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:w0("lucide",i),...!a&&!Rx(h)&&{"aria-hidden":"true"},...h},[...l.map(([p,g])=>be.createElement(p,g)),...Array.isArray(a)?a:[a]]));const ot=(n,e)=>{const t=be.forwardRef(({className:r,...i},a)=>be.createElement(xx,{ref:a,iconNode:e,className:w0(`lucide-${Sx(UE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=UE(n),t};const bx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Cx=ot("arrow-right",bx);const kx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Nx=ot("bell",kx);const Dx=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Vx=ot("book",Dx);const Ox=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Lx=ot("calendar",Ox);const Mx=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Fx=ot("camera",Mx);const jx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ux=ot("chevron-down",jx);const Bx=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zx=ot("chevron-left",Bx);const qx=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],gf=ot("coins",qx);const $x=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Wx=ot("flame",$x);const Hx=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Gx=ot("gift",Hx);const Kx=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Qx=ot("heart",Kx);const Jx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Yx=ot("house",Jx);const Xx=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zx=ot("map-pin",Xx);const eb=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Og=ot("message-circle",eb);const tb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],by=ot("plus",tb);const nb=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],rb=ot("repeat",nb);const ib=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sb=ot("search",ib);const ob=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ab=ot("send",ob);const lb=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ub=ot("settings",lb);const cb=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],hb=ot("share-2",cb);const db=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],fb=ot("sparkles",db);const pb=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mb=ot("star",pb);const gb=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],E0=ot("store",gb);const yb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],I0=ot("user",yb);const _b=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cy=ot("x",_b);const vb=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wb=ot("zap",vb),Eb=()=>{};var BE={};const T0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ib=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],h=n[t++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},S0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,h=l?n[i+1]:0,f=i+2<n.length,p=f?n[i+2]:0,g=a>>2,v=(a&3)<<4|h>>4;let I=(h&15)<<2|p>>6,C=p&63;f||(C=64,l||(I=64)),r.push(t[g],t[v],t[I],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(T0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ib(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||h==null||p==null||v==null)throw new Tb;const I=a<<2|h>>4;if(r.push(I),p!==64){const C=h<<4&240|p>>2;if(r.push(C),v!==64){const k=p<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Tb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sb=function(n){const e=T0(n);return S0.encodeByteArray(e,!0)},yf=function(n){return Sb(n).replace(/\./g,"")},ky=function(n){try{return S0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _f(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Ab(t)||(n[t]=_f(n[t],e[t]));return n}function Ab(n){return n!=="__proto__"}function Ny(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Rb=()=>Ny().__FIREBASE_DEFAULTS__,Pb=()=>{if(typeof process>"u"||typeof BE>"u")return;const n=BE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ky(n[1]);return e&&JSON.parse(e)},Dy=()=>{try{return Eb()||Rb()||Pb()||xb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vy=()=>Dy()?.config,bb=n=>Dy()?.[`_${n}`];class Cb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function zs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Oy(n){return(await fetch(n,{credentials:"include"})).ok}function kb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yf(JSON.stringify(t)),yf(JSON.stringify(l)),""].join(".")}const fc={};function Nb(){const n={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?n.emulator.push(e):n.prod.push(e);return n}function Db(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zE=!1;function Ly(n,e){if(typeof window>"u"||typeof document>"u"||!zs(window.location.host)||fc[n]===e||fc[n]||zE)return;fc[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",a=Nb().prod.length>0;function l(){const I=document.getElementById(r);I&&I.remove()}function h(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,C){I.setAttribute("width","24"),I.setAttribute("id",C),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function p(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{zE=!0,l()},I}function g(I,C){I.setAttribute("id",C),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function v(){const I=Db(r),C=t("text"),k=document.getElementById(C)||document.createElement("span"),j=t("learnmore"),N=document.getElementById(j)||document.createElement("a"),q=t("preprendIcon"),oe=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ee=I.element;h(ee),g(N,j);const de=p();f(oe,q),ee.append(oe,k,N,de),document.body.appendChild(ee)}a?(k.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Hf(){const n=Dy()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ob(){return typeof window<"u"||A0()}function A0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function My(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function P0(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x0(){return!Hf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b0(){return!Hf()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xc(){try{return typeof indexedDB=="object"}catch{return!1}}function Mb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const Fb="FirebaseError";class Kt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Fb,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?jb(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Kt(i,h,r)}}function jb(n,e){return n.replace(Ub,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ub=/\{\$([^}]+)}/g;function qE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ks(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if($E(a)&&$E(l)){if(!ks(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function $E(n){return n!==null&&typeof n=="object"}function Ul(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function al(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function sc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function C0(n,e){const t=new zb(n,e);return t.subscribe.bind(t)}class zb{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qb(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dg),i.error===void 0&&(i.error=dg),i.complete===void 0&&(i.complete=dg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qb(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dg(){}function Ie(n){return n&&n._delegate?n._delegate:n}class lr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ao="[DEFAULT]";class $b{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Cb;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hb(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wb(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wb(n){return n===Ao?void 0:n}function Hb(n){return n.instantiationMode==="EAGER"}class k0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $b(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Fy=[];var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const N0={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},Gb=Le.INFO,Kb={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},Qb=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Kb[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gf{constructor(e){this.name=e,this._logLevel=Gb,this._logHandler=Qb,this._userLogHandler=null,Fy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?N0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}function Jb(n){Fy.forEach(e=>{e.setLogLevel(n)})}function Yb(n,e){for(const t of Fy){let r=null;e&&e.level&&(r=N0[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,a,...l)=>{const h=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(r??i.logLevel)&&n({level:Le[a].toLowerCase(),message:h,args:l,type:i.name})}}}const Xb=(n,e)=>e.some(t=>n instanceof t);let WE,HE;function Zb(){return WE||(WE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eC(){return HE||(HE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D0=new WeakMap,Lg=new WeakMap,V0=new WeakMap,fg=new WeakMap,jy=new WeakMap;function tC(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Rs(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&D0.set(t,n)}).catch(()=>{}),jy.set(e,n),e}function nC(n){if(Lg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Lg.set(n,e)}let Mg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||V0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rC(n){Mg=n(Mg)}function iC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(pg(this),e,...t);return V0.set(r,e.sort?e.sort():[e]),Rs(r)}:eC().includes(n)?function(...e){return n.apply(pg(this),e),Rs(D0.get(this))}:function(...e){return Rs(n.apply(pg(this),e))}}function sC(n){return typeof n=="function"?iC(n):(n instanceof IDBTransaction&&nC(n),Xb(n,Zb())?new Proxy(n,Mg):n)}function Rs(n){if(n instanceof IDBRequest)return tC(n);if(fg.has(n))return fg.get(n);const e=sC(n);return e!==n&&(fg.set(n,e),jy.set(e,n)),e}const pg=n=>jy.get(n);function oC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Rs(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Rs(l.result),f.oldVersion,f.newVersion,Rs(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const aC=["get","getKey","getAll","getAllKeys","count"],lC=["put","add","delete","clear"],mg=new Map;function GE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mg.get(e))return mg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=lC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aC.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),i&&f.done]))[0]};return mg.set(e,a),a}rC(n=>({...n,get:(e,t,r)=>GE(e,t)||n.get(e,t,r),has:(e,t)=>!!GE(e,t)||n.has(e,t)}));class uC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cC(n){return n.getComponent()?.type==="VERSION"}const vf="@firebase/app",Fg="0.14.6";const bi=new Gf("@firebase/app"),hC="@firebase/app-compat",dC="@firebase/analytics-compat",fC="@firebase/analytics",pC="@firebase/app-check-compat",mC="@firebase/app-check",gC="@firebase/auth",yC="@firebase/auth-compat",_C="@firebase/database",vC="@firebase/data-connect",wC="@firebase/database-compat",EC="@firebase/functions",IC="@firebase/functions-compat",TC="@firebase/installations",SC="@firebase/installations-compat",AC="@firebase/messaging",RC="@firebase/messaging-compat",PC="@firebase/performance",xC="@firebase/performance-compat",bC="@firebase/remote-config",CC="@firebase/remote-config-compat",kC="@firebase/storage",NC="@firebase/storage-compat",DC="@firebase/firestore",VC="@firebase/ai",OC="@firebase/firestore-compat",LC="firebase",MC="12.6.0";const Ns="[DEFAULT]",FC={[vf]:"fire-core",[hC]:"fire-core-compat",[fC]:"fire-analytics",[dC]:"fire-analytics-compat",[mC]:"fire-app-check",[pC]:"fire-app-check-compat",[gC]:"fire-auth",[yC]:"fire-auth-compat",[_C]:"fire-rtdb",[vC]:"fire-data-connect",[wC]:"fire-rtdb-compat",[EC]:"fire-fn",[IC]:"fire-fn-compat",[TC]:"fire-iid",[SC]:"fire-iid-compat",[AC]:"fire-fcm",[RC]:"fire-fcm-compat",[PC]:"fire-perf",[xC]:"fire-perf-compat",[bC]:"fire-rc",[CC]:"fire-rc-compat",[kC]:"fire-gcs",[NC]:"fire-gcs-compat",[DC]:"fire-fst",[OC]:"fire-fst-compat",[VC]:"fire-vertex","fire-js":"fire-js",[LC]:"fire-js-all"};const Ds=new Map,ml=new Map,gl=new Map;function bc(n,e){try{n.container.addComponent(e)}catch(t){bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function O0(n,e){n.container.addOrOverwriteComponent(e)}function Ci(n){const e=n.name;if(gl.has(e))return bi.debug(`There were multiple attempts to register component ${e}.`),!1;gl.set(e,n);for(const t of Ds.values())bc(t,n);for(const t of ml.values())bc(t,n);return!0}function L0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function jC(n,e,t=Ns){L0(n,e).clearInstance(t)}function Uy(n){return n.options!==void 0}function M0(n){return Uy(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function dt(n){return n==null?!1:n.settings!==void 0}function UC(){gl.clear()}const BC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new ta("app","Firebase",BC);let F0=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};function KE(n,e){const t=ky(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,a=new Date().getTime();i-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class zC extends F0{constructor(e,t,r,i){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,i);else{const h=e;super(h.options,l,i)}this._serverConfig={automaticDataCollectionEnabled:a,...t},this._serverConfig.authIdToken&&KE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&KE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jn(vf,Fg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){zy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Qn.create("server-app-deleted")}}const qs=MC;function By(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ns,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(t||(t=Vy()),!t)throw Qn.create("no-options");const a=Ds.get(i);if(a){if(ks(t,a.options)&&ks(r,a.config))return a;throw Qn.create("duplicate-app",{appName:i})}const l=new k0(i);for(const f of gl.values())l.addComponent(f);const h=new F0(t,r,l);return Ds.set(i,h),h}function qC(n,e={}){if(Ob()&&!A0())throw Qn.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Uy(n)?t=n.options:M0(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=Vy()),!t)throw Qn.create("no-options");const i={...r,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const a=g=>[...g].reduce((v,I)=>Math.imul(31,v)+I.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Qn.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(i)),h=ml.get(l);if(h)return h.incRefCount(r.releaseOnDeref),h;const f=new k0(l);for(const g of gl.values())f.addComponent(g);const p=new zC(t,r,l,f);return ml.set(l,p),p}function $C(n=Ns){const e=Ds.get(n);if(!e&&n===Ns&&Vy())return By();if(!e)throw Qn.create("no-app",{appName:n});return e}function WC(){return Array.from(Ds.values())}async function zy(n){let e=!1;const t=n.name;Ds.has(t)?(e=!0,Ds.delete(t)):ml.has(t)&&n.decRefCount()<=0&&(ml.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Jn(n,e,t){let r=FC[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bi.warn(l.join(" "));return}Ci(new lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function j0(n,e){if(n!==null&&typeof n!="function")throw Qn.create("invalid-log-argument");Yb(n,e)}function U0(n){Jb(n)}const HC="firebase-heartbeat-database",GC=1,Cc="firebase-heartbeat-store";let gg=null;function B0(){return gg||(gg=oC(HC,GC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qn.create("idb-open",{originalErrorMessage:n.message})})),gg}async function KC(n){try{const t=(await B0()).transaction(Cc),r=await t.objectStore(Cc).get(z0(n));return await t.done,r}catch(e){if(e instanceof Kt)bi.warn(e.message);else{const t=Qn.create("idb-get",{originalErrorMessage:e?.message});bi.warn(t.message)}}}async function QE(n,e){try{const r=(await B0()).transaction(Cc,"readwrite");await r.objectStore(Cc).put(e,z0(n)),await r.done}catch(t){if(t instanceof Kt)bi.warn(t.message);else{const r=Qn.create("idb-set",{originalErrorMessage:t?.message});bi.warn(r.message)}}}function z0(n){return`${n.name}!${n.options.appId}`}const QC=1024,JC=30;class YC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=JE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>JC){const i=ek(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=JE(),{heartbeatsToSend:t,unsentEntries:r}=XC(this._heartbeatsCache.heartbeats),i=yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bi.warn(e),""}}}function JE(){return new Date().toISOString().substring(0,10)}function XC(n,e=QC){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),YE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),YE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ZC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xc()?Mb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return QE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return QE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function YE(n){return yf(JSON.stringify({version:2,heartbeats:n})).length}function ek(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function tk(n){Ci(new lr("platform-logger",e=>new uC(e),"PRIVATE")),Ci(new lr("heartbeat",e=>new YC(e),"PRIVATE")),Jn(vf,Fg,n),Jn(vf,Fg,"esm2020"),Jn("fire-js","")}tk("");const nk=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:qs,_DEFAULT_ENTRY_NAME:Ns,_addComponent:bc,_addOrOverwriteComponent:O0,_apps:Ds,_clearComponents:UC,_components:gl,_getProvider:L0,_isFirebaseApp:Uy,_isFirebaseServerApp:dt,_isFirebaseServerAppSettings:M0,_registerComponent:Ci,_removeServiceInstance:jC,_serverApps:ml,deleteApp:zy,getApp:$C,getApps:WC,initializeApp:By,initializeServerApp:qC,onLog:j0,registerVersion:Jn,setLogLevel:U0},Symbol.toStringTag,{value:"Module"}));class rk{constructor(e,t){this._delegate=e,this.firebase=t,bc(e,new lr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),zy(this._delegate)))}_getService(e,t=Ns){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ns){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){bc(this._delegate,e)}_addOrOverwriteComponent(e){O0(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ik={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},XE=new ta("app-compat","Firebase",ik);function sk(n){const e={},t={__esModule:!0,initializeApp:a,app:i,registerVersion:Jn,setLogLevel:U0,onLog:j0,apps:null,SDK_VERSION:qs,INTERNAL:{registerComponent:h,removeApp:r,useAsService:f,modularAPIs:nk}};t.default=t,Object.defineProperty(t,"apps",{get:l});function r(p){delete e[p]}function i(p){if(p=p||Ns,!qE(e,p))throw XE.create("no-app",{appName:p});return e[p]}i.App=n;function a(p,g={}){const v=By(p,g);if(qE(e,v.name))return e[v.name];const I=new n(v,t);return e[v.name]=I,I}function l(){return Object.keys(e).map(p=>e[p])}function h(p){const g=p.name,v=g.replace("-compat","");if(Ci(p)&&p.type==="PUBLIC"){const I=(C=i())=>{if(typeof C[v]!="function")throw XE.create("invalid-app-argument",{appName:g});return C[v]()};p.serviceProps!==void 0&&_f(I,p.serviceProps),t[v]=I,n.prototype[v]=function(...C){return this._getService.bind(this,g).apply(this,p.multipleInstances?C:[])}}return p.type==="PUBLIC"?t[v]:null}function f(p,g){return g==="serverAuth"?null:g}return t}function q0(){const n=sk(rk);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:q0,extendNamespace:e,createSubscribe:C0,ErrorFactory:ta,deepExtend:_f};function e(t){_f(n,t)}return n}const ok=q0();const ZE=new Gf("@firebase/app-compat"),ak="@firebase/app-compat",lk="0.5.6";function uk(n){Jn(ak,lk,n)}try{const n=Ny();if(n.firebase!==void 0){ZE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ZE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const ur=ok;uk();var ck="firebase",hk="12.7.0";ur.registerVersion(ck,hk,"app-compat");const Qu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Qa={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function dk(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function $0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fk=dk,pk=$0,W0=new ta("auth","Firebase",$0());const wf=new Gf("@firebase/auth");function mk(n,...e){wf.logLevel<=Le.WARN&&wf.warn(`Auth (${qs}): ${n}`,...e)}function Jd(n,...e){wf.logLevel<=Le.ERROR&&wf.error(`Auth (${qs}): ${n}`,...e)}function rn(n,...e){throw $y(n,...e)}function Bt(n,...e){return $y(n,...e)}function qy(n,e,t){const r={...pk(),[e]:t};return new ta("auth","Firebase",r).create(e,{appName:n.name})}function Qt(n){return qy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&rn(n,"argument-error"),qy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $y(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return W0.create(n,...e)}function te(n,e,...t){if(!n)throw $y(e,...t)}function Zr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jd(e),new Error(e)}function Ar(n,e){n||Zr(e)}function kc(){return typeof self<"u"&&self.location?.href||""}function Wy(){return eI()==="http:"||eI()==="https:"}function eI(){return typeof self<"u"&&self.location?.protocol||null}function gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wy()||R0()||"connection"in navigator)?navigator.onLine:!0}function yk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile=Vb()||My()}get(){return gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hy(n,e){Ar(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class H0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wk=new Yc(3e4,6e4);function St(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function At(n,e,t,r,i={}){return G0(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Ul({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...a};return Lb()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&zs(n.emulatorConfig.host)&&(p.credentials="include"),H0.fetch()(await K0(n,n.config.apiHost,t,h),p)})}async function G0(n,e,t){n._canInitEmulator=!1;const r={..._k,...e};try{const i=new Ik(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw oc(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw oc(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw oc(n,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qy(n,g,p);rn(n,g)}}catch(i){if(i instanceof Kt)throw i;rn(n,"network-request-failed",{message:String(i)})}}async function Vi(n,e,t,r,i={}){const a=await At(n,e,t,r,i);return"mfaPendingCredential"in a&&rn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function K0(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?Hy(n.config,i):`${n.config.apiScheme}://${i}`;return vk.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function Ek(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ik{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bt(this.auth,"network-request-failed")),wk.get())})}}function oc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Bt(n,e,r);return i.customData._tokenResponse=t,i}function tI(n){return n!==void 0&&n.getResponse!==void 0}function nI(n){return n!==void 0&&n.enterprise!==void 0}class Q0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ek(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tk(n){return(await At(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function J0(n,e){return At(n,"GET","/v2/recaptchaConfig",St(n,e))}async function Sk(n,e){return At(n,"POST","/v1/accounts:delete",e)}async function Ak(n,e){return At(n,"POST","/v1/accounts:update",e)}async function Ef(n,e){return At(n,"POST","/v1/accounts:lookup",e)}function pc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rk(n,e=!1){const t=Ie(n),r=await t.getIdToken(e),i=Kf(r);te(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:pc(yg(i.auth_time)),issuedAtTime:pc(yg(i.iat)),expirationTime:pc(yg(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function yg(n){return Number(n)*1e3}function Kf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const i=ky(t);return i?JSON.parse(i):(Jd("Failed to decode base64 JWT payload"),null)}catch(i){return Jd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rI(n){const e=Kf(n);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ki(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kt&&Pk(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Pk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nc(n){const e=n.auth,t=await n.getIdToken(),r=await ki(n,Ef(e,{idToken:t}));te(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?Y0(i.providerUserInfo):[],l=Ck(n.providerData,a),h=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!l?.length,p=h?f:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new jg(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function bk(n){const e=Ie(n);await Nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Ck(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Y0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function kk(n,e){const t=await G0(n,{},async()=>{const r=Ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await K0(n,i,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&zs(n.emulatorConfig.host)&&(f.credentials="include"),H0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Nk(n,e){return At(n,"POST","/v2/accounts:revokeToken",St(n,e))}class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){te(e.length!==0,"internal-error");const t=rI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await kk(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new ul;return r&&(te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return Zr("not implemented")}}function gs(n,e){te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ir{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new jg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ki(this,this.stsTokenManager.getToken(this.auth,e));return te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Rk(this,e)}reload(){return bk(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dt(this.auth.app))return Promise.reject(Qt(this.auth));const e=await this.getIdToken();return await ki(this,Sk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:v,emailVerified:I,isAnonymous:C,providerData:k,stsTokenManager:j}=t;te(v&&j,e,"internal-error");const N=ul.fromJSON(this.name,j);te(typeof v=="string",e,"internal-error"),gs(r,e.name),gs(i,e.name),te(typeof I=="boolean",e,"internal-error"),te(typeof C=="boolean",e,"internal-error"),gs(a,e.name),gs(l,e.name),gs(h,e.name),gs(f,e.name),gs(p,e.name),gs(g,e.name);const q=new Ir({uid:v,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:C,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:N,createdAt:p,lastLoginAt:g});return k&&Array.isArray(k)&&(q.providerData=k.map(oe=>({...oe}))),f&&(q._redirectEventId=f),q}static async _fromIdTokenResponse(e,t,r=!1){const i=new ul;i.updateFromServerResponse(t);const a=new Ir({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];te(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Y0(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,h=new ul;h.updateFromIdToken(r);const f=new Ir({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new jg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,p),f}}const iI=new Map;function Kn(n){Ar(n instanceof Function,"Expected a class definition");let e=iI.get(n);return e?(Ar(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iI.set(n,e),e)}class X0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X0.type="NONE";const yl=X0;function Fo(n,e,t){return`firebase:${n}:${e}:${t}`}class cl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fo(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fo("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ef(this.auth,{idToken:e}).catch(()=>{});return t?Ir._fromGetAccountInfoResponse(this.auth,t,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new cl(Kn(yl),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||Kn(yl);const l=Fo(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const g=await p._get(l);if(g){let v;if(typeof g=="string"){const I=await Ef(e,{idToken:g}).catch(()=>{});if(!I)break;v=await Ir._fromGetAccountInfoResponse(e,I,g)}else v=Ir._fromJSON(e,g);p!==a&&(h=v),a=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new cl(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new cl(a,e,r))}}function sI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rS(e))return"Blackberry";if(iS(e))return"Webos";if(eS(e))return"Safari";if((e.includes("chrome/")||tS(e))&&!e.includes("edge/"))return"Chrome";if(Xc(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Z0(n=vt()){return/firefox\//i.test(n)}function eS(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tS(n=vt()){return/crios\//i.test(n)}function nS(n=vt()){return/iemobile/i.test(n)}function Xc(n=vt()){return/android/i.test(n)}function rS(n=vt()){return/blackberry/i.test(n)}function iS(n=vt()){return/webos/i.test(n)}function Zc(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Dk(n=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Vk(n=vt()){return Zc(n)&&!!window.navigator?.standalone}function Ok(){return P0()&&document.documentMode===10}function sS(n=vt()){return Zc(n)||Xc(n)||iS(n)||rS(n)||/windows phone/i.test(n)||nS(n)}function oS(n,e=[]){let t;switch(n){case"Browser":t=sI(vt());break;case"Worker":t=`${sI(vt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qs}/${r}`}class Lk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Mk(n,e={}){return At(n,"GET","/v2/passwordPolicy",St(n,e))}const Fk=6;class jk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Fk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Uk{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oI(this),this.idTokenSubscription=new oI(this),this.beforeStateQueue=new Lk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ef(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dt(this.app))return Promise.reject(Qt(this));const t=e?Ie(e):null;return t&&te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dt(this.app)?Promise.reject(Qt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dt(this.app)?Promise.reject(Qt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mk(this),t=new jk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Nk(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kn(e)||this._popupRedirectResolver;te(t,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Kn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wt(n){return Ie(n)}class oI{constructor(e){this.auth=e,this.observer=null,this.addObserver=C0(t=>this.observer=t)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bk(n){eh=n}function Gy(n){return eh.loadJS(n)}function zk(){return eh.recaptchaV2Script}function qk(){return eh.recaptchaEnterpriseScript}function $k(){return eh.gapiScript}function aS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Wk=500,Hk=6e4,jd=1e12;class Gk{constructor(e){this.auth=e,this.counter=jd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Jk(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||jd;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||jd;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||jd;return this._widgets.get(t)?.execute(),""}}class Kk{constructor(){this.enterprise=new Qk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Jk{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Yk(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Hk)},Wk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Yk(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Xk="recaptcha-enterprise",mc="NO_RECAPTCHA";class lS{constructor(e){this.type=Xk,this.auth=wt(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{J0(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new Q0(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function i(a,l,h){const f=window.grecaptcha;nI(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(mc)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Kk().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&nI(window.grecaptcha))i(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=qk();f.length!==0&&(f+=h),Gy(f).then(()=>{i(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function Ju(n,e,t,r=!1,i=!1){const a=new lS(n);let l;if(i)l=mc;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Ps(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ju(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ju(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const a=await Ju(n,e,t);return r(n,a).catch(async l=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await Ju(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)})}else{const a=await Ju(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function Zk(n){const e=wt(n),t=await J0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Q0(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new lS(e).verify()}function eN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Kn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tN(n,e,t){const r=wt(n);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,a=uS(e),{host:l,port:h}=nN(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(ks(p,r.config.emulator)&&ks(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,zs(l)?(Oy(`${a}//${l}${f}`),Ly("Auth",!0)):i||rN()}function uS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nN(n){const e=uS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:aI(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:aI(l)}}}function aI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class zl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,t){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}async function cS(n,e){return At(n,"POST","/v1/accounts:resetPassword",St(n,e))}async function iN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function sN(n,e){return At(n,"POST","/v1/accounts:signUp",e)}async function oN(n,e){return At(n,"POST","/v1/accounts:update",St(n,e))}async function aN(n,e){return Vi(n,"POST","/v1/accounts:signInWithPassword",St(n,e))}async function Qf(n,e){return At(n,"POST","/v1/accounts:sendOobCode",St(n,e))}async function lN(n,e){return Qf(n,e)}async function uN(n,e){return Qf(n,e)}async function cN(n,e){return Qf(n,e)}async function hN(n,e){return Qf(n,e)}async function dN(n,e){return Vi(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}async function fN(n,e){return Vi(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}class Dc extends zl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Dc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Dc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,t,"signInWithPassword",aN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dN(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ps(e,r,"signUpPassword",sN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fN(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xi(n,e){return Vi(n,"POST","/v1/accounts:signInWithIdp",St(n,e))}const pN="http://localhost";class si extends zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new si(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return xi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}buildRequest(){const e={requestUri:pN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ul(t)}return e}}async function lI(n,e){return At(n,"POST","/v1/accounts:sendVerificationCode",St(n,e))}async function mN(n,e){return Vi(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e))}async function gN(n,e){const t=await Vi(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e));if(t.temporaryProof)throw oc(n,"account-exists-with-different-credential",t);return t}const yN={USER_NOT_FOUND:"user-not-found"};async function _N(n,e){const t={...e,operation:"REAUTH"};return Vi(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,t),yN)}class jo extends zl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new jo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new jo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return mN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return gN(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return _N(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new jo({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}function vN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wN(n){const e=al(sc(n)).link,t=e?al(sc(e)).deep_link_id:null,r=al(sc(n)).deep_link_id;return(r?al(sc(r)).link:null)||r||t||e||n}class Jf{constructor(e){const t=al(sc(e)),r=t.apiKey??null,i=t.oobCode??null,a=vN(t.mode??null);te(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wN(e);try{return new Jf(t)}catch{return null}}}class $s{constructor(){this.providerId=$s.PROVIDER_ID}static credential(e,t){return Dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Jf.parseLink(t);return te(r,"argument-error"),Dc._fromEmailAndCode(e,r.code,r.tenantId)}}$s.PROVIDER_ID="password";$s.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Oi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ql extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hl extends ql{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return te("providerId"in t&&"signInMethod"in t,"argument-error"),si._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),si._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return hl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:h}=e;if(!r&&!i&&!t&&!a||!h)return null;try{return new hl(h)._credential({idToken:t,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}class Qr extends ql{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";class Jr extends ql{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return si._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Jr.credential(t,r)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";class Yr extends ql{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";const EN="http://localhost";class _l extends zl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return xi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new _l(r,a)}static _create(e,t){return new _l(e,t)}buildRequest(){return{requestUri:EN,returnSecureToken:!0,pendingToken:this.pendingToken}}}const IN="saml.";class If extends Oi{constructor(e){te(e.startsWith(IN),"argument-error"),super(e)}static credentialFromResult(e){return If.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return If.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=_l.fromJSON(e);return te(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return _l._create(r,t)}catch{return null}}}class Xr extends ql{constructor(){super("twitter.com")}static credential(e,t){return si._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Xr.credential(t,r)}catch{return null}}}Xr.TWITTER_SIGN_IN_METHOD="twitter.com";Xr.PROVIDER_ID="twitter.com";async function hS(n,e){return Vi(n,"POST","/v1/accounts:signUp",St(n,e))}class cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Ir._fromIdTokenResponse(e,r,i),l=uI(r);return new cr({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=uI(r);return new cr({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function uI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function TN(n){if(dt(n.app))return Promise.reject(Qt(n));const e=wt(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new cr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await hS(e,{returnSecureToken:!0}),r=await cr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Tf extends Kt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Tf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Tf(e,t,r,i)}}function dS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Tf._fromErrorAndOperation(n,a,e,r):a})}function fS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}async function SN(n,e){const t=Ie(n);await Yf(!0,t,e);const{providerUserInfo:r}=await Ak(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=fS(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Ky(n,e,t=!1){const r=await ki(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cr._forOperation(n,"link",r)}async function Yf(n,e,t){await Nc(e);const r=fS(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";te(r.has(t)===n,e.auth,i)}async function pS(n,e,t=!1){const{auth:r}=n;if(dt(r.app))return Promise.reject(Qt(r));const i="reauthenticate";try{const a=await ki(n,dS(r,i,e,n),t);te(a.idToken,r,"internal-error");const l=Kf(a.idToken);te(l,r,"internal-error");const{sub:h}=l;return te(n.uid===h,r,"user-mismatch"),cr._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&rn(r,"user-mismatch"),a}}async function mS(n,e,t=!1){if(dt(n.app))return Promise.reject(Qt(n));const r="signIn",i=await dS(n,r,e),a=await cr._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function Xf(n,e){return mS(wt(n),e)}async function gS(n,e){const t=Ie(n);return await Yf(!1,t,e.providerId),Ky(t,e)}async function yS(n,e){return pS(Ie(n),e)}async function AN(n,e){return Vi(n,"POST","/v1/accounts:signInWithCustomToken",St(n,e))}async function RN(n,e){if(dt(n.app))return Promise.reject(Qt(n));const t=wt(n),r=await AN(t,{token:e,returnSecureToken:!0}),i=await cr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}class th{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Qy._fromServerResponse(e,t):"totpInfo"in t?Jy._fromServerResponse(e,t):rn(e,"internal-error")}}class Qy extends th{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Qy(t)}}class Jy extends th{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Jy(t)}}function Zf(n,e,t){te(t.url?.length>0,n,"invalid-continue-uri"),te(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),te(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(te(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(te(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Yy(n){const e=wt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PN(n,e,t){const r=wt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Zf(r,i,t),await Ps(r,i,"getOobCode",uN,"EMAIL_PASSWORD_PROVIDER")}async function xN(n,e,t){await cS(Ie(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yy(n),r})}async function bN(n,e){await oN(Ie(n),{oobCode:e})}async function _S(n,e){const t=Ie(n),r=await cS(t,{oobCode:e}),i=r.requestType;switch(te(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,t,"internal-error");default:te(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=th._fromServerResponse(wt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function CN(n,e){const{data:t}=await _S(Ie(n),e);return t.email}async function kN(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),l=await Ps(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hS,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Yy(n),f}),h=await cr._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function NN(n,e,t){return dt(n.app)?Promise.reject(Qt(n)):Xf(Ie(n),$s.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yy(n),r})}async function DN(n,e,t){const r=wt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,h){te(h.handleCodeInApp,r,"argument-error"),h&&Zf(r,l,h)}a(i,t),await Ps(r,i,"getOobCode",cN,"EMAIL_PASSWORD_PROVIDER")}function VN(n,e){return Jf.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function ON(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=Ie(n),i=$s.credentialWithLink(e,t||kc());return te(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Xf(r,i)}async function LN(n,e){return At(n,"POST","/v1/accounts:createAuthUri",St(n,e))}async function MN(n,e){const t=Wy()?kc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await LN(Ie(n),r);return i||[]}async function FN(n,e){const t=Ie(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Zf(t.auth,i,e);const{email:a}=await lN(t.auth,i);a!==n.email&&await n.reload()}async function jN(n,e,t){const r=Ie(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Zf(r.auth,a,t);const{email:l}=await hN(r.auth,a);l!==n.email&&await n.reload()}async function UN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function BN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ie(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await ki(r,UN(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function zN(n,e){const t=Ie(n);return dt(t.auth.app)?Promise.reject(Qt(t.auth)):vS(t,e,null)}function qN(n,e){return vS(Ie(n),null,e)}async function vS(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const l=await ki(n,iN(r,a));await n._updateTokensIfNecessary(l,!0)}function $N(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const i=Kf(n.idToken)?.firebase?.sign_in_provider;if(i){const a=i!=="anonymous"&&i!=="custom"?i:null;return new dl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new WN(r,t);case"github.com":return new HN(r,t);case"google.com":return new GN(r,t);case"twitter.com":return new KN(r,t,n.screenName||null);case"custom":case"anonymous":return new dl(r,null);default:return new dl(r,e,t)}}class dl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class wS extends dl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class WN extends dl{constructor(e,t){super(e,"facebook.com",t)}}class HN extends wS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class GN extends dl{constructor(e,t){super(e,"google.com",t)}}class KN extends wS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function QN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:$N(t)}class Do{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Do("enroll",e,t)}static _fromMfaPendingCredential(e){return new Do("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return Do._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return Do._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Xy{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=wt(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(h=>th._fromServerResponse(r,h));te(i.mfaPendingCredential,r,"internal-error");const l=Do._fromMfaPendingCredential(i.mfaPendingCredential);return new Xy(l,a,async h=>{const f=await h._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const p={...i,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const g=await cr._fromIdTokenResponse(r,t.operationType,p);return await r._updateCurrentUser(g.user),g;case"reauthenticate":return te(t.user,r,"internal-error"),cr._forOperation(t.user,t.operationType,p);default:rn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function JN(n,e){const t=Ie(n),r=e;return te(e.customData.operationType,t,"argument-error"),te(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),Xy._fromError(t,r)}function cI(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:start",St(n,e))}function YN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:finalize",St(n,e))}function XN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:withdraw",St(n,e))}class Zy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>th._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Zy(e)}async getSession(){return Do._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await ki(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ki(this.user,XN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const _g=new WeakMap;function ZN(n){const e=Ie(n);return _g.has(e)||_g.set(e,Zy._fromUser(e)),_g.get(e)}const Sf="__sak";class ES{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eD=1e3,tD=10;class IS extends ES{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Ok()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}IS.type="LOCAL";const e_=IS;class TS extends ES{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TS.type="SESSION";const zo=TS;function nD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await nD(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ep.receivers=[];function nh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class rD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=nh("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const I=v;if(I.data.eventId===p)switch(I.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Mt(){return window}function iD(n){Mt().location.href=n}function t_(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}async function sD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){return navigator?.serviceWorker?.controller||null}function aD(){return t_()?self:null}const SS="firebaseLocalStorageDb",lD=1,Af="firebaseLocalStorage",AS="fbase_key";class rh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tp(n,e){return n.transaction([Af],e?"readwrite":"readonly").objectStore(Af)}function uD(){const n=indexedDB.deleteDatabase(SS);return new rh(n).toPromise()}function Ug(){const n=indexedDB.open(SS,lD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Af,{keyPath:AS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Af)?e(r):(r.close(),await uD(),e(await Ug()))})})}async function hI(n,e,t){const r=tp(n,!0).put({[AS]:e,value:t});return new rh(r).toPromise()}async function cD(n,e){const t=tp(n,!1).get(e),r=await new rh(t).toPromise();return r===void 0?null:r.value}function dI(n,e){const t=tp(n,!0).delete(e);return new rh(t).toPromise()}const hD=800,dD=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ug(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ep._getInstance(aD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new rD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ug();return await hI(e,Sf,"1"),await dI(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>cD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=tp(i,!1).getAll();return new rh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const Vc=RS;function fI(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:start",St(n,e))}function fD(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:finalize",St(n,e))}const vg=aS("rcb"),pD=new Yc(3e4,6e4);class mD{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mt().grecaptcha?.render}load(e,t=""){return te(gD(t),e,"argument-error"),this.shouldResolveImmediately(t)&&tI(Mt().grecaptcha)?Promise.resolve(Mt().grecaptcha):new Promise((r,i)=>{const a=Mt().setTimeout(()=>{i(Bt(e,"network-request-failed"))},pD.get());Mt()[vg]=()=>{Mt().clearTimeout(a),delete Mt()[vg];const h=Mt().grecaptcha;if(!h||!tI(h)){i(Bt(e,"internal-error"));return}const f=h.render;h.render=(p,g)=>{const v=f(p,g);return this.counter++,v},this.hostLanguage=t,r(h)};const l=`${zk()}?${Ul({onload:vg,render:"explicit",hl:t})}`;Gy(l).catch(()=>{clearTimeout(a),i(Bt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Mt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function gD(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class yD{async load(e){return new Gk(e)}clearedOneInstance(){}}const gc="recaptcha",_D={theme:"light",type:"image"};let vD=class{constructor(e,t,r={..._D}){this.parameters=r,this.type=gc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yD:new mD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Mt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(Wy()&&!t_(),this.auth,"internal-error"),await wD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Tk(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function wD(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class n_{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=jo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ED(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),i=await np(r,e,Ie(t));return new n_(i,a=>Xf(r,a))}async function ID(n,e,t){const r=Ie(n);await Yf(!1,r,"phone");const i=await np(r.auth,e,Ie(t));return new n_(i,a=>gS(r,a))}async function TD(n,e,t){const r=Ie(n);if(dt(r.auth.app))return Promise.reject(Qt(r.auth));const i=await np(r.auth,e,Ie(t));return new n_(i,a=>yS(r,a))}async function np(n,e,t){if(!n._getRecaptchaConfig())try{await Zk(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){te(i.type==="enroll",n,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ps(n,a,"mfaSmsEnrollment",async(p,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===mc){te(t?.type===gc,p,"argument-error");const v=await wg(p,g,t);return cI(p,v)}return cI(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{te(i.type==="signin",n,"internal-error");const a=r.multiFactorHint?.uid||r.multiFactorUid;te(a,n,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ps(n,l,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===mc){te(t?.type===gc,g,"argument-error");const I=await wg(g,v,t);return fI(g,I)}return fI(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ps(n,i,"sendVerificationCode",async(f,p)=>{if(p.captchaResponse===mc){te(t?.type===gc,f,"argument-error");const g=await wg(f,p,t);return lI(f,g)}return lI(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t?._reset()}}async function SD(n,e){const t=Ie(n);if(dt(t.auth.app))return Promise.reject(Qt(t.auth));await Ky(t,e)}async function wg(n,e,t){te(t.type===gc,n,"argument-error");const r=await t.verify();te(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const a=i.phoneEnrollmentInfo.phoneNumber,l=i.phoneEnrollmentInfo.captchaResponse,h=i.phoneEnrollmentInfo.clientType,f=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:l,clientType:h,recaptchaVersion:f}}),i}else if("phoneSignInInfo"in i){const a=i.phoneSignInInfo.captchaResponse,l=i.phoneSignInInfo.clientType,h=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:l,recaptchaVersion:h}}),i}else return Object.assign(i,{recaptchaToken:r}),i}let qo=class Yd{constructor(e){this.providerId=Yd.PROVIDER_ID,this.auth=wt(e)}verifyPhoneNumber(e,t){return np(this.auth,e,Ie(t))}static credential(e,t){return jo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yd.credentialFromTaggedObject(t)}static credentialFromError(e){return Yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?jo._fromTokenResponse(t,r):null}};qo.PROVIDER_ID="phone";qo.PHONE_SIGN_IN_METHOD="phone";function na(n,e){return e?Kn(e):(te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class r_ extends zl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AD(n){return mS(n.auth,new r_(n),n.bypassAuthState)}function RD(n){const{auth:e,user:t}=n;return te(t,e,"internal-error"),pS(t,new r_(n),n.bypassAuthState)}async function PD(n){const{auth:e,user:t}=n;return te(t,e,"internal-error"),Ky(t,new r_(n),n.bypassAuthState)}class PS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AD;case"linkViaPopup":case"linkViaRedirect":return PD;case"reauthViaPopup":case"reauthViaRedirect":return RD;default:rn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xD=new Yc(2e3,1e4);async function bD(n,e,t){if(dt(n.app))return Promise.reject(Bt(n,"operation-not-supported-in-this-environment"));const r=wt(n);Bl(n,e,Oi);const i=na(r,t);return new Ri(r,"signInViaPopup",e,i).executeNotNull()}async function CD(n,e,t){const r=Ie(n);if(dt(r.auth.app))return Promise.reject(Bt(r.auth,"operation-not-supported-in-this-environment"));Bl(r.auth,e,Oi);const i=na(r.auth,t);return new Ri(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function kD(n,e,t){const r=Ie(n);Bl(r.auth,e,Oi);const i=na(r.auth,t);return new Ri(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ri extends PS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xD.get())};e()}}Ri.currentPopupAction=null;const ND="pendingRedirect",yc=new Map;class DD extends PS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yc.get(this.auth._key());if(!e){try{const r=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yc.set(this.auth._key(),e)}return this.bypassAuthState||yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(n,e){const t=bS(e),r=xS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function i_(n,e){return xS(n)._set(bS(e),"true")}function OD(){yc.clear()}function s_(n,e){yc.set(n._key(),e)}function xS(n){return Kn(n._redirectPersistence)}function bS(n){return Fo(ND,n.config.apiKey,n.name)}function LD(n,e,t){return MD(n,e,t)}async function MD(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n);Bl(n,e,Oi),await r._initializationPromise;const i=na(r,t);return await i_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function FD(n,e,t){return jD(n,e,t)}async function jD(n,e,t){const r=Ie(n);if(Bl(r.auth,e,Oi),dt(r.auth.app))return Promise.reject(Qt(r.auth));await r.auth._initializationPromise;const i=na(r.auth,t);await i_(i,r.auth);const a=await CS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function UD(n,e,t){return BD(n,e,t)}async function BD(n,e,t){const r=Ie(n);Bl(r.auth,e,Oi),await r.auth._initializationPromise;const i=na(r.auth,t);await Yf(!1,r,e.providerId),await i_(i,r.auth);const a=await CS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function zD(n,e){return await wt(n)._initializationPromise,rp(n,e,!1)}async function rp(n,e,t=!1){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),i=na(r,e),l=await new DD(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function CS(n){const e=nh(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}const qD=600*1e3;class kS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$D(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!NS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(pI(e))}saveEventToCache(e){this.cachedEventUids.add(pI(e)),this.lastProcessedEventTime=Date.now()}}function pI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $D(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NS(n);default:return!1}}async function DS(n,e={}){return At(n,"GET","/v1/projects",e)}const WD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HD=/^https?/;async function GD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await DS(n);for(const t of e)try{if(KD(t))return}catch{}rn(n,"unauthorized-domain")}function KD(n){const e=kc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!HD.test(t))return!1;if(WD.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const QD=new Yc(3e4,6e4);function mI(){const n=Mt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JD(n){return new Promise((e,t)=>{function r(){mI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mI(),t(Bt(n,"network-request-failed"))},timeout:QD.get()})}if(Mt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mt().gapi?.load)r();else{const i=aS("iframefcb");return Mt()[i]=()=>{gapi.load?r():t(Bt(n,"network-request-failed"))},Gy(`${$k()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Xd=null,e})}let Xd=null;function YD(n){return Xd=Xd||JD(n),Xd}const XD=new Yc(5e3,15e3),ZD="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(n){const e=n.config;te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Hy(e,e2):`https://${n.config.authDomain}/${ZD}`,r={apiKey:e.apiKey,appName:n.name,v:qs},i=n2.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ul(r).slice(1)}`}async function i2(n){const e=await YD(n),t=Mt().gapi;return te(t,n,"internal-error"),e.open({where:document.body,url:r2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Bt(n,"network-request-failed"),h=Mt().setTimeout(()=>{a(l)},XD.get());function f(){Mt().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(l)})}))}const s2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o2=500,a2=600,l2="_blank",u2="http://localhost";class gI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c2(n,e,t,r=o2,i=a2){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...s2,width:r.toString(),height:i.toString(),top:a,left:l},p=vt().toLowerCase();t&&(h=tS(p)?l2:t),Z0(p)&&(e=e||u2,f.scrollbars="yes");const g=Object.entries(f).reduce((I,[C,k])=>`${I}${C}=${k},`,"");if(Vk(p)&&h!=="_self")return h2(e||"",h),new gI(null);const v=window.open(e||"",h,g);te(v,n,"popup-blocked");try{v.focus()}catch{}return new gI(v)}function h2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const d2="__/auth/handler",f2="emulator/auth/handler",p2=encodeURIComponent("fac");async function Bg(n,e,t,r,i,a){te(n.config.authDomain,n,"auth-domain-config-required"),te(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qs,eventId:i};if(e instanceof Oi){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Bb(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries(a||{}))l[g]=v}if(e instanceof ql){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await n._getAppCheckToken(),p=f?`#${p2}=${encodeURIComponent(f)}`:"";return`${m2(n)}?${Ul(h).slice(1)}${p}`}function m2({config:n}){return n.emulator?Hy(n,f2):`https://${n.authDomain}/${d2}`}const Eg="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zo,this._completeRedirectFn=rp,this._overrideRedirectResult=s_}async _openPopup(e,t,r,i){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Bg(e,t,r,kc(),i);return c2(e,a,nh())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Bg(e,t,r,kc(),i);return iD(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Ar(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await i2(e),r=new kS(e);return t.register("authEvent",i=>(te(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},i=>{const a=i?.[0]?.[Eg];a!==void 0&&t(!!a),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sS()||eS()||Zc()}}const y2=g2;class _2{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Zr("unexpected MultiFactorSessionType")}}}class o_ extends _2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new o_(e)}_finalizeEnroll(e,t,r){return YN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return fD(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class VS{constructor(){}static assertion(e){return o_._fromCredential(e)}}VS.FACTOR_ID="phone";var yI="@firebase/auth",_I="1.12.0";class v2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function w2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E2(n){Ci(new lr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;te(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oS(n)},p=new Uk(r,i,a,f);return eN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new lr("auth-internal",e=>{const t=wt(e.getProvider("auth").getImmediate());return(r=>new v2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jn(yI,_I,w2(n)),Jn(yI,_I,"esm2020")}const I2=300;bb("authIdTokenMaxAge");function T2(){return document.getElementsByTagName("head")?.[0]??document}Bk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Bt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",T2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E2("Browser");function $o(){return window}const S2=2e3;async function A2(n,e,t){const{BuildInfo:r}=$o();Ar(e.sessionId,"AuthEvent did not contain a session ID");const i=await C2(e.sessionId),a={};return Zc()?a.ibi=r.packageName:Xc()?a.apn=r.packageName:rn(n,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=i,Bg(n,t,e.type,void 0,e.eventId??void 0,a)}async function R2(n){const{BuildInfo:e}=$o(),t={};Zc()?t.iosBundleId=e.packageName:Xc()?t.androidPackageName=e.packageName:rn(n,"operation-not-supported-in-this-environment"),await DS(n,t)}function P2(n){const{cordova:e}=$o();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,Dk()?"_blank":"_system","location=yes"),t(i)})})}async function x2(n,e,t){const{cordova:r}=$o();let i=()=>{};try{await new Promise((a,l)=>{let h=null;function f(){a();const v=r.plugins.browsertab?.close;typeof v=="function"&&v(),typeof t?.close=="function"&&t.close()}function p(){h||(h=window.setTimeout(()=>{l(Bt(n,"redirect-cancelled-by-user"))},S2))}function g(){document?.visibilityState==="visible"&&p()}e.addPassiveListener(f),document.addEventListener("resume",p,!1),Xc()&&document.addEventListener("visibilitychange",g,!1),i=()=>{e.removePassiveListener(f),document.removeEventListener("resume",p,!1),document.removeEventListener("visibilitychange",g,!1),h&&window.clearTimeout(h)}})}finally{i()}}function b2(n){const e=$o();te(typeof e?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof e?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof e?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function C2(n){const e=k2(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function k2(n){if(Ar(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}const N2=20;class D2 extends kS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function V2(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:M2(),postBody:null,tenantId:n.tenantId,error:Bt(n,"no-auth-event")}}function O2(n,e){return zg()._set(qg(n),e)}async function vI(n){const e=await zg()._get(qg(n));return e&&await zg()._remove(qg(n)),e}function L2(n,e){const t=j2(e);if(t.includes("/__/auth/callback")){const r=Zd(t),a=(r.firebaseError?F2(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],l=a?Bt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function M2(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<N2;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function zg(){return Kn(e_)}function qg(n){return Fo("authEvent",n.config.apiKey,n.name)}function F2(n){try{return JSON.parse(n)}catch{return null}}function j2(n){const e=Zd(n),t=e.link?decodeURIComponent(e.link):void 0,r=Zd(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Zd(i).link||i||r||t||n}function Zd(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return al(t.join("?"))}const U2=500;class B2{constructor(){this._redirectPersistence=zo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=rp,this._overrideRedirectResult=s_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new D2(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){rn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){b2(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),OD(),await this._originValidation(e);const l=V2(e,r,i);await O2(e,l);const h=await A2(e,l,t),f=await P2(h);return x2(e,a,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R2(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=$o(),l=setTimeout(async()=>{await vI(e),t.onEvent(wI())},U2),h=async g=>{clearTimeout(l);const v=await vI(e);let I=null;v&&g?.url&&(I=L2(v,g.url)),t.onEvent(I||wI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const f=i,p=`${a.packageName.toLowerCase()}://`;$o().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(p)&&h({url:g}),typeof f=="function")try{f(g)}catch(v){console.error(v)}}}}const z2=B2;function wI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bt("no-auth-event")}}function q2(n,e){wt(n)._logFramework(e)}var $2="@firebase/auth-compat",W2="0.6.2";const H2=1e3;function _c(){return self?.location?.protocol||null}function G2(){return _c()==="http:"||_c()==="https:"}function OS(n=vt()){return!!((_c()==="file:"||_c()==="ionic:"||_c()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function K2(){return My()||Hf()}function Q2(){return P0()&&document?.documentMode===11}function J2(n=vt()){return/Edge\/\d+/.test(n)}function Y2(n=vt()){return Q2()||J2(n)}function LS(){try{const n=self.localStorage,e=nh();if(n)return n.setItem(e,"1"),n.removeItem(e),Y2()?xc():!0}catch{return a_()&&xc()}return!1}function a_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ig(){return(G2()||R0()||OS())&&!K2()&&LS()&&!a_()}function MS(){return OS()&&typeof document<"u"}async function X2(){return MS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},H2);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function Z2(){return typeof window<"u"?window:null}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=te,FS="persistence";function eV(n,e){if(Yu(Object.values(Gn).includes(e),n,"invalid-persistence-type"),My()){Yu(e!==Gn.SESSION,n,"unsupported-persistence-type");return}if(Hf()){Yu(e===Gn.NONE,n,"unsupported-persistence-type");return}if(a_()){Yu(e===Gn.NONE||e===Gn.LOCAL&&xc(),n,"unsupported-persistence-type");return}Yu(e===Gn.NONE||LS(),n,"unsupported-persistence-type")}async function $g(n){await n._initializationPromise;const e=jS(),t=Fo(FS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function tV(n,e){const t=jS();if(!t)return[];const r=Fo(FS,n,e);switch(t.getItem(r)){case Gn.NONE:return[yl];case Gn.LOCAL:return[Vc,zo];case Gn.SESSION:return[zo];default:return[]}}function jS(){try{return Z2()?.sessionStorage||null}catch{return null}}const nV=te;class Is{constructor(){this.browserResolver=Kn(y2),this.cordovaResolver=Kn(z2),this.underlyingResolver=null,this._redirectPersistence=zo,this._completeRedirectFn=rp,this._overrideRedirectResult=s_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return MS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await X2();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function US(n){return n.unwrap()}function rV(n){return n.wrapped()}function iV(n){return BS(n)}function sV(n,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new oV(n,JN(n,e))}else if(t){const r=BS(e),i=e;r&&(i.credential=r,i.tenantId=t.tenantId||void 0,i.email=t.email||void 0,i.phoneNumber=t.phoneNumber||void 0)}}function BS(n){const{_tokenResponse:e}=n instanceof Kt?n.customData:n;if(!e)return null;if(!(n instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return qo.credentialFromResult(n);const t=e.providerId;if(!t||t===Qu.PASSWORD)return null;let r;switch(t){case Qu.GOOGLE:r=Jr;break;case Qu.FACEBOOK:r=Qr;break;case Qu.GITHUB:r=Yr;break;case Qu.TWITTER:r=Xr;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:h,nonce:f}=e;return!a&&!l&&!i&&!h?null:h?t.startsWith("saml.")?_l._create(t,h):si._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:i,accessToken:a}):new hl(t).credential({idToken:i,accessToken:a,rawNonce:f})}return n instanceof Kt?r.credentialFromError(n):r.credentialFromResult(n)}function Cn(n,e){return e.catch(t=>{throw t instanceof Kt&&sV(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:iV(t),additionalUserInfo:QN(t),user:ip.getOrCreate(i)}})}async function Wg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Cn(n,t.confirm(r))}}class oV{constructor(e,t){this.resolver=t,this.auth=rV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Cn(US(this.auth),this.resolver.resolveSignIn(e))}}let ip=class ac{constructor(e){this._delegate=e,this.multiFactor=ZN(e)}static getOrCreate(e){return ac.USER_MAP.has(e)||ac.USER_MAP.set(e,new ac(e)),ac.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Cn(this.auth,gS(this._delegate,e))}async linkWithPhoneNumber(e,t){return Wg(this.auth,ID(this._delegate,e,t))}async linkWithPopup(e){return Cn(this.auth,kD(this._delegate,e,Is))}async linkWithRedirect(e){return await $g(wt(this.auth)),UD(this._delegate,e,Is)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Cn(this.auth,yS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Wg(this.auth,TD(this._delegate,e,t))}reauthenticateWithPopup(e){return Cn(this.auth,CD(this._delegate,e,Is))}async reauthenticateWithRedirect(e){return await $g(wt(this.auth)),FD(this._delegate,e,Is)}sendEmailVerification(e){return FN(this._delegate,e)}async unlink(e){return await SN(this._delegate,e),this}updateEmail(e){return zN(this._delegate,e)}updatePassword(e){return qN(this._delegate,e)}updatePhoneNumber(e){return SD(this._delegate,e)}updateProfile(e){return BN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return jN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};ip.USER_MAP=new WeakMap;const Xu=te;class Hg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Xu(r,"invalid-api-key",{appName:e.name}),Xu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Is:void 0;this._delegate=t.initialize({options:{persistence:aV(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fk),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ip.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){tN(this._delegate,e,t)}applyActionCode(e){return bN(this._delegate,e)}checkActionCode(e){return _S(this._delegate,e)}confirmPasswordReset(e,t){return xN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Cn(this._delegate,kN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return MN(this._delegate,e)}isSignInWithEmailLink(e){return VN(this._delegate,e)}async getRedirectResult(){Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment");const e=await zD(this._delegate,Is);return e?Cn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){q2(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:a,complete:l}=EI(e,t,r);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,t,r){const{next:i,error:a,complete:l}=EI(e,t,r);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,t){return DN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return PN(this._delegate,e,t||void 0)}async setPersistence(e){eV(this._delegate,e);let t;switch(e){case Gn.SESSION:t=zo;break;case Gn.LOCAL:t=await Kn(Vc)._isAvailable()?Vc:e_;break;case Gn.NONE:t=yl;break;default:return rn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Cn(this._delegate,TN(this._delegate))}signInWithCredential(e){return Cn(this._delegate,Xf(this._delegate,e))}signInWithCustomToken(e){return Cn(this._delegate,RN(this._delegate,e))}signInWithEmailAndPassword(e,t){return Cn(this._delegate,NN(this._delegate,e,t))}signInWithEmailLink(e,t){return Cn(this._delegate,ON(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Wg(this._delegate,ED(this._delegate,e,t))}async signInWithPopup(e){return Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment"),Cn(this._delegate,bD(this._delegate,e,Is))}async signInWithRedirect(e){return Xu(Ig(),this._delegate,"operation-not-supported-in-this-environment"),await $g(this._delegate),LD(this._delegate,e,Is)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return CN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Hg.Persistence=Gn;function EI(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:l=>i(l&&ip.getOrCreate(l)),error:e,complete:t}}function aV(n,e){const t=tV(n,e);if(typeof self<"u"&&!t.includes(Vc)&&t.push(Vc),typeof window<"u")for(const r of[e_,zo])t.includes(r)||t.push(r);return t.includes(yl)||t.push(yl),t}class l_{static credential(e,t){return qo.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new qo(US(ur.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}l_.PHONE_SIGN_IN_METHOD=qo.PHONE_SIGN_IN_METHOD;l_.PROVIDER_ID=qo.PROVIDER_ID;const lV=te;class uV{constructor(e,t,r=ur.app()){lV(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new vD(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const cV="auth-compat";function hV(n){n.INTERNAL.registerComponent(new lr(cV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Hg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qa.EMAIL_SIGNIN,PASSWORD_RESET:Qa.PASSWORD_RESET,RECOVER_EMAIL:Qa.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Qa.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Qa.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Qa.VERIFY_EMAIL}},EmailAuthProvider:$s,FacebookAuthProvider:Qr,GithubAuthProvider:Yr,GoogleAuthProvider:Jr,OAuthProvider:hl,SAMLAuthProvider:If,PhoneAuthProvider:l_,PhoneMultiFactorGenerator:VS,RecaptchaVerifier:uV,TwitterAuthProvider:Xr,Auth:Hg,AuthCredential:zl,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion($2,W2)}hV(ur);var II=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xs,zS;(function(){var n;function e(b,R){function x(){}x.prototype=R.prototype,b.F=R.prototype,b.prototype=new x,b.prototype.constructor=b,b.D=function(O,V,F){for(var A=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)A[Ae-2]=arguments[Ae];return R.prototype[V].apply(O,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,R,x){x||(x=0);const O=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)O[V]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(V=0;V<16;++V)O[V]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=b.g[0],x=b.g[1],V=b.g[2];let F=b.g[3],A;A=R+(F^x&(V^F))+O[0]+3614090360&4294967295,R=x+(A<<7&4294967295|A>>>25),A=F+(V^R&(x^V))+O[1]+3905402710&4294967295,F=R+(A<<12&4294967295|A>>>20),A=V+(x^F&(R^x))+O[2]+606105819&4294967295,V=F+(A<<17&4294967295|A>>>15),A=x+(R^V&(F^R))+O[3]+3250441966&4294967295,x=V+(A<<22&4294967295|A>>>10),A=R+(F^x&(V^F))+O[4]+4118548399&4294967295,R=x+(A<<7&4294967295|A>>>25),A=F+(V^R&(x^V))+O[5]+1200080426&4294967295,F=R+(A<<12&4294967295|A>>>20),A=V+(x^F&(R^x))+O[6]+2821735955&4294967295,V=F+(A<<17&4294967295|A>>>15),A=x+(R^V&(F^R))+O[7]+4249261313&4294967295,x=V+(A<<22&4294967295|A>>>10),A=R+(F^x&(V^F))+O[8]+1770035416&4294967295,R=x+(A<<7&4294967295|A>>>25),A=F+(V^R&(x^V))+O[9]+2336552879&4294967295,F=R+(A<<12&4294967295|A>>>20),A=V+(x^F&(R^x))+O[10]+4294925233&4294967295,V=F+(A<<17&4294967295|A>>>15),A=x+(R^V&(F^R))+O[11]+2304563134&4294967295,x=V+(A<<22&4294967295|A>>>10),A=R+(F^x&(V^F))+O[12]+1804603682&4294967295,R=x+(A<<7&4294967295|A>>>25),A=F+(V^R&(x^V))+O[13]+4254626195&4294967295,F=R+(A<<12&4294967295|A>>>20),A=V+(x^F&(R^x))+O[14]+2792965006&4294967295,V=F+(A<<17&4294967295|A>>>15),A=x+(R^V&(F^R))+O[15]+1236535329&4294967295,x=V+(A<<22&4294967295|A>>>10),A=R+(V^F&(x^V))+O[1]+4129170786&4294967295,R=x+(A<<5&4294967295|A>>>27),A=F+(x^V&(R^x))+O[6]+3225465664&4294967295,F=R+(A<<9&4294967295|A>>>23),A=V+(R^x&(F^R))+O[11]+643717713&4294967295,V=F+(A<<14&4294967295|A>>>18),A=x+(F^R&(V^F))+O[0]+3921069994&4294967295,x=V+(A<<20&4294967295|A>>>12),A=R+(V^F&(x^V))+O[5]+3593408605&4294967295,R=x+(A<<5&4294967295|A>>>27),A=F+(x^V&(R^x))+O[10]+38016083&4294967295,F=R+(A<<9&4294967295|A>>>23),A=V+(R^x&(F^R))+O[15]+3634488961&4294967295,V=F+(A<<14&4294967295|A>>>18),A=x+(F^R&(V^F))+O[4]+3889429448&4294967295,x=V+(A<<20&4294967295|A>>>12),A=R+(V^F&(x^V))+O[9]+568446438&4294967295,R=x+(A<<5&4294967295|A>>>27),A=F+(x^V&(R^x))+O[14]+3275163606&4294967295,F=R+(A<<9&4294967295|A>>>23),A=V+(R^x&(F^R))+O[3]+4107603335&4294967295,V=F+(A<<14&4294967295|A>>>18),A=x+(F^R&(V^F))+O[8]+1163531501&4294967295,x=V+(A<<20&4294967295|A>>>12),A=R+(V^F&(x^V))+O[13]+2850285829&4294967295,R=x+(A<<5&4294967295|A>>>27),A=F+(x^V&(R^x))+O[2]+4243563512&4294967295,F=R+(A<<9&4294967295|A>>>23),A=V+(R^x&(F^R))+O[7]+1735328473&4294967295,V=F+(A<<14&4294967295|A>>>18),A=x+(F^R&(V^F))+O[12]+2368359562&4294967295,x=V+(A<<20&4294967295|A>>>12),A=R+(x^V^F)+O[5]+4294588738&4294967295,R=x+(A<<4&4294967295|A>>>28),A=F+(R^x^V)+O[8]+2272392833&4294967295,F=R+(A<<11&4294967295|A>>>21),A=V+(F^R^x)+O[11]+1839030562&4294967295,V=F+(A<<16&4294967295|A>>>16),A=x+(V^F^R)+O[14]+4259657740&4294967295,x=V+(A<<23&4294967295|A>>>9),A=R+(x^V^F)+O[1]+2763975236&4294967295,R=x+(A<<4&4294967295|A>>>28),A=F+(R^x^V)+O[4]+1272893353&4294967295,F=R+(A<<11&4294967295|A>>>21),A=V+(F^R^x)+O[7]+4139469664&4294967295,V=F+(A<<16&4294967295|A>>>16),A=x+(V^F^R)+O[10]+3200236656&4294967295,x=V+(A<<23&4294967295|A>>>9),A=R+(x^V^F)+O[13]+681279174&4294967295,R=x+(A<<4&4294967295|A>>>28),A=F+(R^x^V)+O[0]+3936430074&4294967295,F=R+(A<<11&4294967295|A>>>21),A=V+(F^R^x)+O[3]+3572445317&4294967295,V=F+(A<<16&4294967295|A>>>16),A=x+(V^F^R)+O[6]+76029189&4294967295,x=V+(A<<23&4294967295|A>>>9),A=R+(x^V^F)+O[9]+3654602809&4294967295,R=x+(A<<4&4294967295|A>>>28),A=F+(R^x^V)+O[12]+3873151461&4294967295,F=R+(A<<11&4294967295|A>>>21),A=V+(F^R^x)+O[15]+530742520&4294967295,V=F+(A<<16&4294967295|A>>>16),A=x+(V^F^R)+O[2]+3299628645&4294967295,x=V+(A<<23&4294967295|A>>>9),A=R+(V^(x|~F))+O[0]+4096336452&4294967295,R=x+(A<<6&4294967295|A>>>26),A=F+(x^(R|~V))+O[7]+1126891415&4294967295,F=R+(A<<10&4294967295|A>>>22),A=V+(R^(F|~x))+O[14]+2878612391&4294967295,V=F+(A<<15&4294967295|A>>>17),A=x+(F^(V|~R))+O[5]+4237533241&4294967295,x=V+(A<<21&4294967295|A>>>11),A=R+(V^(x|~F))+O[12]+1700485571&4294967295,R=x+(A<<6&4294967295|A>>>26),A=F+(x^(R|~V))+O[3]+2399980690&4294967295,F=R+(A<<10&4294967295|A>>>22),A=V+(R^(F|~x))+O[10]+4293915773&4294967295,V=F+(A<<15&4294967295|A>>>17),A=x+(F^(V|~R))+O[1]+2240044497&4294967295,x=V+(A<<21&4294967295|A>>>11),A=R+(V^(x|~F))+O[8]+1873313359&4294967295,R=x+(A<<6&4294967295|A>>>26),A=F+(x^(R|~V))+O[15]+4264355552&4294967295,F=R+(A<<10&4294967295|A>>>22),A=V+(R^(F|~x))+O[6]+2734768916&4294967295,V=F+(A<<15&4294967295|A>>>17),A=x+(F^(V|~R))+O[13]+1309151649&4294967295,x=V+(A<<21&4294967295|A>>>11),A=R+(V^(x|~F))+O[4]+4149444226&4294967295,R=x+(A<<6&4294967295|A>>>26),A=F+(x^(R|~V))+O[11]+3174756917&4294967295,F=R+(A<<10&4294967295|A>>>22),A=V+(R^(F|~x))+O[2]+718787259&4294967295,V=F+(A<<15&4294967295|A>>>17),A=x+(F^(V|~R))+O[9]+3951481745&4294967295,b.g[0]=b.g[0]+R&4294967295,b.g[1]=b.g[1]+(V+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+V&4294967295,b.g[3]=b.g[3]+F&4294967295}r.prototype.v=function(b,R){R===void 0&&(R=b.length);const x=R-this.blockSize,O=this.C;let V=this.h,F=0;for(;F<R;){if(V==0)for(;F<=x;)i(this,b,F),F+=this.blockSize;if(typeof b=="string"){for(;F<R;)if(O[V++]=b.charCodeAt(F++),V==this.blockSize){i(this,O),V=0;break}}else for(;F<R;)if(O[V++]=b[F++],V==this.blockSize){i(this,O),V=0;break}}this.h=V,this.o+=R},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var R=1;R<b.length-8;++R)b[R]=0;R=this.o*8;for(var x=b.length-8;x<b.length;++x)b[x]=R&255,R/=256;for(this.v(b),b=Array(16),R=0,x=0;x<4;++x)for(let O=0;O<32;O+=8)b[R++]=this.g[x]>>>O&255;return b};function a(b,R){var x=h;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=R(b)}function l(b,R){this.h=R;const x=[];let O=!0;for(let V=b.length-1;V>=0;V--){const F=b[V]|0;O&&F==R||(x[V]=F,O=!1)}this.g=x}var h={};function f(b){return-128<=b&&b<128?a(b,function(R){return new l([R|0],R<0?-1:0)}):new l([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return v;if(b<0)return N(p(-b));const R=[];let x=1;for(let O=0;b>=x;O++)R[O]=b/x|0,x*=4294967296;return new l(R,0)}function g(b,R){if(b.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(b.charAt(0)=="-")return N(g(b.substring(1),R));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=p(Math.pow(R,8));let O=v;for(let F=0;F<b.length;F+=8){var V=Math.min(8,b.length-F);const A=parseInt(b.substring(F,F+V),R);V<8?(V=p(Math.pow(R,V)),O=O.j(V).add(p(A))):(O=O.j(x),O=O.add(p(A)))}return O}var v=f(0),I=f(1),C=f(16777216);n=l.prototype,n.m=function(){if(j(this))return-N(this).m();let b=0,R=1;for(let x=0;x<this.g.length;x++){const O=this.i(x);b+=(O>=0?O:4294967296+O)*R,R*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(k(this))return"0";if(j(this))return"-"+N(this).toString(b);const R=p(Math.pow(b,6));var x=this;let O="";for(;;){const V=de(x,R).g;x=q(x,V.j(R));let F=((x.g.length>0?x.g[0]:x.h)>>>0).toString(b);if(x=V,k(x))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function k(b){if(b.h!=0)return!1;for(let R=0;R<b.g.length;R++)if(b.g[R]!=0)return!1;return!0}function j(b){return b.h==-1}n.l=function(b){return b=q(this,b),j(b)?-1:k(b)?0:1};function N(b){const R=b.g.length,x=[];for(let O=0;O<R;O++)x[O]=~b.g[O];return new l(x,~b.h).add(I)}n.abs=function(){return j(this)?N(this):this},n.add=function(b){const R=Math.max(this.g.length,b.g.length),x=[];let O=0;for(let V=0;V<=R;V++){let F=O+(this.i(V)&65535)+(b.i(V)&65535),A=(F>>>16)+(this.i(V)>>>16)+(b.i(V)>>>16);O=A>>>16,F&=65535,A&=65535,x[V]=A<<16|F}return new l(x,x[x.length-1]&-2147483648?-1:0)};function q(b,R){return b.add(N(R))}n.j=function(b){if(k(this)||k(b))return v;if(j(this))return j(b)?N(this).j(N(b)):N(N(this).j(b));if(j(b))return N(this.j(N(b)));if(this.l(C)<0&&b.l(C)<0)return p(this.m()*b.m());const R=this.g.length+b.g.length,x=[];for(var O=0;O<2*R;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<b.g.length;V++){const F=this.i(O)>>>16,A=this.i(O)&65535,Ae=b.i(V)>>>16,at=b.i(V)&65535;x[2*O+2*V]+=A*at,oe(x,2*O+2*V),x[2*O+2*V+1]+=F*at,oe(x,2*O+2*V+1),x[2*O+2*V+1]+=A*Ae,oe(x,2*O+2*V+1),x[2*O+2*V+2]+=F*Ae,oe(x,2*O+2*V+2)}for(b=0;b<R;b++)x[b]=x[2*b+1]<<16|x[2*b];for(b=R;b<2*R;b++)x[b]=0;return new l(x,0)};function oe(b,R){for(;(b[R]&65535)!=b[R];)b[R+1]+=b[R]>>>16,b[R]&=65535,R++}function ee(b,R){this.g=b,this.h=R}function de(b,R){if(k(R))throw Error("division by zero");if(k(b))return new ee(v,v);if(j(b))return R=de(N(b),R),new ee(N(R.g),N(R.h));if(j(R))return R=de(b,N(R)),new ee(N(R.g),R.h);if(b.g.length>30){if(j(b)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var x=I,O=R;O.l(b)<=0;)x=ve(x),O=ve(O);var V=ye(x,1),F=ye(O,1);for(O=ye(O,2),x=ye(x,2);!k(O);){var A=F.add(O);A.l(b)<=0&&(V=V.add(x),F=A),O=ye(O,1),x=ye(x,1)}return R=q(b,V.j(R)),new ee(V,R)}for(V=v;b.l(R)>=0;){for(x=Math.max(1,Math.floor(b.m()/R.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=p(x),A=F.j(R);j(A)||A.l(b)>0;)x-=O,F=p(x),A=F.j(R);k(F)&&(F=I),V=V.add(F),b=q(b,A)}return new ee(V,b)}n.B=function(b){return de(this,b).h},n.and=function(b){const R=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<R;O++)x[O]=this.i(O)&b.i(O);return new l(x,this.h&b.h)},n.or=function(b){const R=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<R;O++)x[O]=this.i(O)|b.i(O);return new l(x,this.h|b.h)},n.xor=function(b){const R=Math.max(this.g.length,b.g.length),x=[];for(let O=0;O<R;O++)x[O]=this.i(O)^b.i(O);return new l(x,this.h^b.h)};function ve(b){const R=b.g.length+1,x=[];for(let O=0;O<R;O++)x[O]=b.i(O)<<1|b.i(O-1)>>>31;return new l(x,b.h)}function ye(b,R){const x=R>>5;R%=32;const O=b.g.length-x,V=[];for(let F=0;F<O;F++)V[F]=R>0?b.i(F+x)>>>R|b.i(F+x+1)<<32-R:b.i(F+x);return new l(V,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,xs=l}).apply(typeof II<"u"?II:typeof self<"u"?self:typeof window<"u"?window:{});var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var qS,lc,$S,ef,Gg,WS,HS,GS;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ud=="object"&&Ud];for(var _=0;_<c.length;++_){var w=c[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(c,_){if(_)e:{var w=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in w))break e;w=w[z]}c=c[c.length-1],S=w[c],_=_(S),_!=S&&_!=null&&e(w,c,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(_){var w=[],S;for(S in _)Object.prototype.hasOwnProperty.call(_,S)&&w.push([S,_[S]]);return w}});var a=a||{},l=this||self;function h(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function f(c,_,w){return c.call.apply(c.bind,arguments)}function p(c,_,w){return p=f,p.apply(null,arguments)}function g(c,_){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function v(c,_){function w(){}w.prototype=_.prototype,c.Z=_.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(S,z,G){for(var se=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)se[ke-2]=arguments[ke];return _.prototype[z].apply(S,se)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function C(c){const _=c.length;if(_>0){const w=Array(_);for(let S=0;S<_;S++)w[S]=c[S];return w}return[]}function k(c,_){for(let S=1;S<arguments.length;S++){const z=arguments[S];var w=typeof z;if(w=w!="object"?w:z?Array.isArray(z)?"array":w:"null",w=="array"||w=="object"&&typeof z.length=="number"){w=c.length||0;const G=z.length||0;c.length=w+G;for(let se=0;se<G;se++)c[w+se]=z[se]}else c.push(z)}}class j{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function N(c){l.setTimeout(()=>{throw c},0)}function q(){var c=b;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class oe{constructor(){this.h=this.g=null}add(_,w){const S=ee.get();S.set(_,w),this.h?this.h.next=S:this.g=S,this.h=S}}var ee=new j(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,ye=!1,b=new oe,R=()=>{const c=Promise.resolve(void 0);ve=()=>{c.then(x)}};function x(){for(var c;c=q();){try{c.h.call(c.g)}catch(w){N(w)}var _=ee;_.j(c),_.h<100&&(_.h++,c.next=_.g,_.g=c)}ye=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};l.addEventListener("test",w,_),l.removeEventListener("test",w,_)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function Ae(c,_){V.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,_)}v(Ae,V),Ae.prototype.init=function(c,_){const w=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget,_||(w=="mouseover"?_=c.fromElement:w=="mouseout"&&(_=c.toElement)),this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var at="closure_listenable_"+(Math.random()*1e6|0),Ze=0;function et(c,_,w,S,z){this.listener=c,this.proxy=null,this.src=_,this.type=w,this.capture=!!S,this.ha=z,this.key=++Ze,this.da=this.fa=!1}function ie(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ee(c,_,w){for(const S in c)_.call(w,c[S],S,c)}function he(c,_){for(const w in c)_.call(void 0,c[w],w,c)}function M(c){const _={};for(const w in c)_[w]=c[w];return _}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(c,_){let w,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(w in S)c[w]=S[w];for(let G=0;G<Q.length;G++)w=Q[G],Object.prototype.hasOwnProperty.call(S,w)&&(c[w]=S[w])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,_,w,S,z){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const se=Fe(c,_,S,z);return se>-1?(_=c[se],w||(_.fa=!1)):(_=new et(_,this.src,G,!!S,z),_.fa=w,c.push(_)),_};function Ve(c,_){const w=_.type;if(w in c.g){var S=c.g[w],z=Array.prototype.indexOf.call(S,_,void 0),G;(G=z>=0)&&Array.prototype.splice.call(S,z,1),G&&(ie(_),c.g[w].length==0&&(delete c.g[w],c.h--))}}function Fe(c,_,w,S){for(let z=0;z<c.length;++z){const G=c[z];if(!G.da&&G.listener==_&&G.capture==!!w&&G.ha==S)return z}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),qe={};function tt(c,_,w,S,z){if(Array.isArray(_)){for(let G=0;G<_.length;G++)tt(c,_[G],w,S,z);return null}return w=tu(w),c&&c[at]?c.J(_,w,h(S)?!!S.capture:!1,z):gn(c,_,w,!1,S,z)}function gn(c,_,w,S,z,G){if(!_)throw Error("Invalid event type");const se=h(z)?!!z.capture:!!z;let ke=ua(c);if(ke||(c[Ke]=ke=new Re(c)),w=ke.add(_,w,S,se,G),w.proxy)return w;if(S=aa(),w.proxy=S,S.src=c,S.listener=w,c.addEventListener)F||(z=se),z===void 0&&(z=!1),c.addEventListener(_.toString(),S,z);else if(c.attachEvent)c.attachEvent(la(_.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function aa(){function c(w){return _.call(c.src,c.listener,w)}const _=Th;return c}function eu(c,_,w,S,z){if(Array.isArray(_))for(var G=0;G<_.length;G++)eu(c,_[G],w,S,z);else S=h(S)?!!S.capture:!!S,w=tu(w),c&&c[at]?(c=c.i,G=String(_).toString(),G in c.g&&(_=c.g[G],w=Fe(_,w,S,z),w>-1&&(ie(_[w]),Array.prototype.splice.call(_,w,1),_.length==0&&(delete c.g[G],c.h--)))):c&&(c=ua(c))&&(_=c.g[_.toString()],c=-1,_&&(c=Fe(_,w,S,z)),(w=c>-1?_[c]:null)&&Ui(w))}function Ui(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[at])Ve(_.i,c);else{var w=c.type,S=c.proxy;_.removeEventListener?_.removeEventListener(w,S,c.capture):_.detachEvent?_.detachEvent(la(w),S):_.addListener&&_.removeListener&&_.removeListener(S),(w=ua(_))?(Ve(w,c),w.h==0&&(w.src=null,_[Ke]=null)):ie(c)}}}function la(c){return c in qe?qe[c]:qe[c]="on"+c}function Th(c,_){if(c.da)c=!0;else{_=new Ae(_,this);const w=c.listener,S=c.ha||c.src;c.fa&&Ui(c),c=w.call(S,_)}return c}function ua(c){return c=c[Ke],c instanceof Re?c:null}var Js="__closure_events_fn_"+(Math.random()*1e9>>>0);function tu(c){return typeof c=="function"?c:(c[Js]||(c[Js]=function(_){return c.handleEvent(_)}),c[Js])}function Dt(){O.call(this),this.i=new Re(this),this.M=this,this.G=null}v(Dt,O),Dt.prototype[at]=!0,Dt.prototype.removeEventListener=function(c,_,w,S){eu(this,c,_,w,S)};function Rt(c,_){var w,S=c.G;if(S)for(w=[];S;S=S.G)w.push(S);if(c=c.M,S=_.type||_,typeof _=="string")_=new V(_,c);else if(_ instanceof V)_.target=_.target||c;else{var z=_;_=new V(S,c),xe(_,z)}z=!0;let G,se;if(w)for(se=w.length-1;se>=0;se--)G=_.g=w[se],z=hr(G,S,!0,_)&&z;if(G=_.g=c,z=hr(G,S,!0,_)&&z,z=hr(G,S,!1,_)&&z,w)for(se=0;se<w.length;se++)G=_.g=w[se],z=hr(G,S,!1,_)&&z}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var c=this.i;for(const _ in c.g){const w=c.g[_];for(let S=0;S<w.length;S++)ie(w[S]);delete c.g[_],c.h--}}this.G=null},Dt.prototype.J=function(c,_,w,S){return this.i.add(String(c),_,!1,w,S)},Dt.prototype.K=function(c,_,w,S){return this.i.add(String(c),_,!0,w,S)};function hr(c,_,w,S){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();let z=!0;for(let G=0;G<_.length;++G){const se=_[G];if(se&&!se.da&&se.capture==w){const ke=se.listener,Pt=se.ha||se.src;se.fa&&Ve(c.i,se),z=ke.call(Pt,S)!==!1&&z}}return z&&!S.defaultPrevented}function nu(c,_){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(c,_||0)}function ru(c){c.g=nu(()=>{c.g=null,c.i&&(c.i=!1,ru(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class Sh extends O{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(c){O.call(this),this.h=c,this.g={}}v(Bi,O);var iu=[];function ca(c){Ee(c.g,function(_,w){this.g.hasOwnProperty(w)&&Ui(_)},c),c.g={}}Bi.prototype.N=function(){Bi.Z.N.call(this),ca(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zi=l.JSON.stringify,Ah=l.JSON.parse,Ys=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function qi(){}function Rh(){}var $i={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ha(){V.call(this,"d")}v(ha,V);function su(){V.call(this,"c")}v(su,V);var dr={},da=null;function Wi(){return da=da||new Dt}dr.Ia="serverreachability";function fa(c){V.call(this,dr.Ia,c)}v(fa,V);function li(c){const _=Wi();Rt(_,new fa(_))}dr.STAT_EVENT="statevent";function ui(c,_){V.call(this,dr.STAT_EVENT,c),this.stat=_}v(ui,V);function Et(c){const _=Wi();Rt(_,new ui(_,c))}dr.Ja="timingevent";function ou(c,_){V.call(this,dr.Ja,c),this.size=_}v(ou,V);function Hi(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},_)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function Ph(c,_,w,S,z,G){c.info(function(){if(c.g)if(G){var se="",ke=G.split("&");for(let Je=0;Je<ke.length;Je++){var Pt=ke[Je].split("=");if(Pt.length>1){const Vt=Pt[0];Pt=Pt[1];const zn=Vt.split("_");se=zn.length>=2&&zn[1]=="type"?se+(Vt+"="+Pt+"&"):se+(Vt+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+w+`
`+se})}function xh(c,_,w,S,z,G,se){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+w+`
`+G+" "+se})}function Pr(c,_,w,S){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+Xs(c,w)+(S?" "+S:"")})}function bh(c,_){c.info(function(){return"TIMEOUT: "+_})}Gi.prototype.info=function(){};function Xs(c,_){if(!c.g)return _;if(!_)return null;try{const G=JSON.parse(_);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var w=G[c];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let se=1;se<S.length;se++)S[se]=""}}}}return zi(G)}catch{return _}}var Ki={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ch;function ci(){}v(ci,qi),ci.prototype.g=function(){return new XMLHttpRequest},Ch=new ci;function xr(c){return encodeURIComponent(String(c))}function pa(c){var _=1;c=c.split(":");const w=[];for(;_>0&&c.length;)w.push(c.shift()),_--;return c.length&&w.push(c.join(":")),w}function Xn(c,_,w,S){this.j=c,this.i=_,this.l=w,this.S=S||1,this.V=new Bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kh}function kh(){this.i=null,this.g="",this.h=!1}var Nh={},au={};function fr(c,_,w){c.M=1,c.A=di(Zn(_)),c.u=w,c.R=!0,lu(c,null)}function lu(c,_){c.F=Date.now(),Zs(c),c.B=Zn(c.A);var w=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),_u(w.i,"t",S),c.C=0,w=c.j.L,c.h=new kh,c.g=zh(c.j,w?_:null,!c.u),c.P>0&&(c.O=new Sh(p(c.Y,c,c.g),c.P)),_=c.V,w=c.g,S=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(iu[0]=z.toString()),z=iu);for(let G=0;G<z.length;G++){const se=tt(w,z[G],S||_.handleEvent,!1,_.h||_);if(!se)break;_.g[se.key]=se}_=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,_)):(c.v="GET",c.g.ea(c.B,c.v,null,_)),li(),Ph(c.i,c.v,c.B,c.l,c.S,c.u)}Xn.prototype.ba=function(c){c=c.target;const _=this.O;_&&Or(c)==3?_.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const ke=Or(this.g),Pt=this.g.ya(),Je=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Uh(this.g)))){this.K||ke!=4||Pt==7||(Pt==8||Je<=0?li(3):li(2)),ma(this);var _=this.g.ca();this.X=_;var w=Dh(this);if(this.o=_==200,xh(this.i,this.v,this.B,this.l,this.S,ke,_),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(S)){var G=S;break t}}G=null}if(c=G)Pr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lt(this,c);else{this.o=!1,this.m=3,Et(12),hi(this),eo(this);break e}}if(this.R){c=!0;let Vt;for(;!this.K&&this.C<w.length;)if(Vt=Oh(this,w),Vt==au){ke==4&&(this.m=4,Et(14),c=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Nh){this.m=4,Et(15),Pr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else Pr(this.i,this.l,Vt,null),lt(this,Vt);if(Vh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||w.length!=0||this.h.h||(this.m=1,Et(16),c=!1),this.o=this.o&&c,!c)Pr(this.i,this.l,w,"[Invalid Chunked Response]"),hi(this),eo(this);else if(w.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),uo(se),se.P=!0,Et(11))}}else Pr(this.i,this.l,w,null),lt(this,w);ke==4&&hi(this),this.o&&!this.K&&(ke==4?Aa(this.j,this):(this.o=!1,Zs(this)))}else wu(this.g),_==400&&w.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),hi(this),eo(this)}}}catch{}};function Dh(c){if(!Vh(c))return c.g.la();const _=Uh(c.g);if(_==="")return"";let w="";const S=_.length,z=Or(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return hi(c),eo(c),"";c.h.i=new l.TextDecoder}for(let G=0;G<S;G++)c.h.h=!0,w+=c.h.i.decode(_[G],{stream:!(z&&G==S-1)});return _.length=0,c.h.g+=w,c.C=0,c.h.g}function Vh(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Oh(c,_){var w=c.C,S=_.indexOf(`
`,w);return S==-1?au:(w=Number(_.substring(w,S)),isNaN(w)?Nh:(S+=1,S+w>_.length?au:(_=_.slice(S,S+w),c.C=S+w,_)))}Xn.prototype.cancel=function(){this.K=!0,hi(this)};function Zs(c){c.T=Date.now()+c.H,uu(c,c.H)}function uu(c,_){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Hi(p(c.aa,c),_)}function ma(c){c.D&&(l.clearTimeout(c.D),c.D=null)}Xn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(bh(this.i,this.B),this.M!=2&&(li(),Et(17)),hi(this),this.m=2,eo(this)):uu(this,this.T-c)};function eo(c){c.j.I==0||c.K||Aa(c.j,c)}function hi(c){ma(c);var _=c.O;_&&typeof _.dispose=="function"&&_.dispose(),c.O=null,ca(c.V),c.g&&(_=c.g,c.g=null,_.abort(),_.dispose())}function lt(c,_){try{var w=c.j;if(w.I!=0&&(w.g==c||hu(w.h,c))){if(!c.L&&hu(w.h,c)&&w.I==3){try{var S=w.Ba.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Sa(w),Un(w);else break e;Fr(w),Et(18)}}else w.xa=z[1],0<w.xa-w.K&&z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Hi(p(w.Va,w),6e3));to(w.h)<=1&&w.ta&&(w.ta=void 0)}else Bn(w,11)}else if((c.L||w.g==c)&&Sa(w),!A(_))for(z=w.Ba.g.parse(_),_=0;_<z.length;_++){let Je=z[_];const Vt=Je[0];if(!(Vt<=w.K))if(w.K=Vt,Je=Je[1],w.I==2)if(Je[0]=="c"){w.M=Je[1],w.ba=Je[2];const zn=Je[3];zn!=null&&(w.ka=zn,w.j.info("VER="+w.ka));const yi=Je[4];yi!=null&&(w.za=yi,w.j.info("SVER="+w.za));const jr=Je[5];jr!=null&&typeof jr=="number"&&jr>0&&(S=1.5*jr,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const Ur=c.g;if(Ur){const xa=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var G=S.h;G.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ya(G,G.h),G.h=null))}if(S.G){const Tu=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Tu&&(S.wa=Tu,Ge(S.J,S.G,Tu))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var se=c;if(S.na=Iu(S,S.L?S.ba:null,S.W),se.L){no(S.h,se);var ke=se,Pt=S.O;Pt&&(ke.H=Pt),ke.D&&(ma(ke),Zs(ke)),S.g=se}else sn(S);w.i.length>0&&gi(w)}else Je[0]!="stop"&&Je[0]!="close"||Bn(w,7);else w.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Bn(w,7):Ia(w):Je[0]!="noop"&&w.l&&w.l.qa(Je),w.A=0)}}li(4)}catch{}}var Fp=class{constructor(c,_){this.g=c,this.map=_}};function ga(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function to(c){return c.h?1:c.g?c.g.size:0}function hu(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function ya(c,_){c.g?c.g.add(_):c.h=_}function no(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}ga.prototype.cancel=function(){if(this.i=Mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Mn(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const w of c.g.values())_=_.concat(w.G);return _}return C(c.i)}var Lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fn(c,_){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const S=c[w].indexOf("=");let z,G=null;S>=0?(z=c[w].substring(0,S),G=c[w].substring(S+1)):z=c[w],_(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function br(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;c instanceof br?(this.l=c.l,ro(this,c.j),this.o=c.o,this.g=c.g,Cr(this,c.u),this.h=c.h,Ji(this,vu(c.i)),this.m=c.m):c&&(_=String(c).match(Lh))?(this.l=!1,ro(this,_[1]||"",!0),this.o=io(_[2]||""),this.g=io(_[3]||"",!0),Cr(this,_[4]),this.h=io(_[5]||"",!0),Ji(this,_[6]||"",!0),this.m=io(_[7]||"")):(this.l=!1,this.i=new Be(null,this.l))}br.prototype.toString=function(){const c=[];var _=this.j;_&&c.push(so(_,fu,!0),":");var w=this.g;return(w||_=="file")&&(c.push("//"),(_=this.o)&&c.push(so(_,fu,!0),"@"),c.push(xr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(so(w,w.charAt(0)=="/"?oo:pu,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",so(w,mu)),c.join("")},br.prototype.resolve=function(c){const _=Zn(this);let w=!!c.j;w?ro(_,c.j):w=!!c.o,w?_.o=c.o:w=!!c.g,w?_.g=c.g:w=c.u!=null;var S=c.h;if(w)Cr(_,c.u);else if(w=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=_.h.lastIndexOf("/");z!=-1&&(S=_.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let se=0;se<z.length;){const ke=z[se++];ke=="."?S&&se==z.length&&G.push(""):ke==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&se==z.length&&G.push("")):(G.push(ke),S=!0)}S=G.join("/")}else S=z}return w?_.h=S:w=c.i.toString()!=="",w?Ji(_,vu(c.i)):w=!!c.m,w&&(_.m=c.m),_};function Zn(c){return new br(c)}function ro(c,_,w){c.j=w?io(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function Cr(c,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);c.u=_}else c.u=null}function Ji(c,_,w){_ instanceof Be?(c.i=_,va(c.i,c.l)):(w||(_=so(_,jp)),c.i=new Be(_,c.l))}function Ge(c,_,w){c.i.set(_,w)}function di(c){return Ge(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function io(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function so(c,_,w){return typeof c=="string"?(c=encodeURI(c).replace(_,du),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function du(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fu=/[#\/\?@]/g,pu=/[#\?:]/g,oo=/[#\?]/g,jp=/[#\?@]/g,mu=/#/g;function Be(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function kr(c){c.g||(c.g=new Map,c.h=0,c.i&&Fn(c.i,function(_,w){c.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}n=Be.prototype,n.add=function(c,_){kr(this),this.i=null,c=Nr(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(_),this.h+=1,this};function gu(c,_){kr(c),_=Nr(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function _a(c,_){return kr(c),_=Nr(c,_),c.g.has(_)}n.forEach=function(c,_){kr(this),this.g.forEach(function(w,S){w.forEach(function(z){c.call(_,z,S,this)},this)},this)};function yu(c,_){kr(c);let w=[];if(typeof _=="string")_a(c,_)&&(w=w.concat(c.g.get(Nr(c,_))));else for(c=Array.from(c.g.values()),_=0;_<c.length;_++)w=w.concat(c[_]);return w}n.set=function(c,_){return kr(this),this.i=null,c=Nr(this,c),_a(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},n.get=function(c,_){return c?(c=yu(this,c),c.length>0?String(c[0]):_):_};function _u(c,_,w){gu(c,_),w.length>0&&(c.i=null,c.g.set(Nr(c,_),C(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(let S=0;S<_.length;S++){var w=_[S];const z=xr(w);w=yu(this,w);for(let G=0;G<w.length;G++){let se=z;w[G]!==""&&(se+="="+xr(w[G])),c.push(se)}}return this.i=c.join("&")};function vu(c){const _=new Be;return _.i=c.i,c.g&&(_.g=new Map(c.g),_.h=c.h),_}function Nr(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function va(c,_){_&&!c.j&&(kr(c),c.i=null,c.g.forEach(function(w,S){const z=S.toLowerCase();S!=z&&(gu(this,S),_u(this,z,w))},c)),c.j=_}function Dr(c,_){const w=new Gi;if(l.Image){const S=new Image;S.onload=g(Jt,w,"TestLoadImage: loaded",!0,_,S),S.onerror=g(Jt,w,"TestLoadImage: error",!1,_,S),S.onabort=g(Jt,w,"TestLoadImage: abort",!1,_,S),S.ontimeout=g(Jt,w,"TestLoadImage: timeout",!1,_,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else _(!1)}function Vr(c,_){const w=new Gi,S=new AbortController,z=setTimeout(()=>{S.abort(),Jt(w,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:S.signal}).then(G=>{clearTimeout(z),G.ok?Jt(w,"TestPingServer: ok",!0,_):Jt(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),Jt(w,"TestPingServer: error",!1,_)})}function Jt(c,_,w,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(w)}catch{}}function ao(){this.g=new Ys}function fi(c){this.i=c.Sb||null,this.h=c.ab||!1}v(fi,qi),fi.prototype.g=function(){return new jn(this.i,this.h)};function jn(c,_){Dt.call(this),this.H=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(jn,Dt),n=jn.prototype,n.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=_,this.readyState=1,pr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(_.body=c),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yi(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mh(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mh(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?Yi(this):pr(this),this.readyState==3&&Mh(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Yi(this))},n.Na=function(c){this.g&&(this.response=c,Yi(this))},n.ga=function(){this.g&&Yi(this)};function Yi(c){c.readyState=4,c.l=null,c.j=null,c.B=null,pr(c)}n.setRequestHeader=function(c,_){this.A.append(c,_)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=_.next();return c.join(`\r
`)};function pr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(jn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fh(c){let _="";return Ee(c,function(w,S){_+=S,_+=":",_+=w,_+=`\r
`}),_}function wa(c,_,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=Fh(w),typeof c=="string"?w!=null&&xr(w):Ge(c,_,w))}function nt(c){Dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(nt,Dt);var jh=/^https?$/i,Up=["POST","PUT"];n=nt.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,_,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ch.g(),this.g.onreadystatechange=I(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(G){Xi(this,G);return}if(c=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)w.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())w.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(G=>G.toLowerCase()=="content-type"),z=l.FormData&&c instanceof l.FormData,!(Array.prototype.indexOf.call(Up,_,void 0)>=0)||S||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of w)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Xi(this,G)}};function Xi(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.o=5,Zi(c),mi(c)}function Zi(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Rt(this,"complete"),Rt(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?pi(this):this.Xa())},n.Xa=function(){pi(this)};function pi(c){if(c.h&&typeof a<"u"){if(c.v&&Or(c)==4)setTimeout(c.Ca.bind(c),0);else if(Rt(c,"readystatechange"),Or(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var S;if(S=G===0){let se=String(c.D).match(Lh)[1]||null;!se&&l.self&&l.self.location&&(se=l.self.location.protocol.slice(0,-1)),S=!jh.test(se?se.toLowerCase():"")}w=S}if(w)Rt(c,"complete"),Rt(c,"success");else{c.o=6;try{var z=Or(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",Zi(c)}}finally{mi(c)}}}}function mi(c,_){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,_||Rt(c,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Or(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),Ah(_)}};function Uh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wu(c){const _={};c=(c.g&&Or(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(A(c[S]))continue;var w=pa(c[S]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const G=_[z]||[];_[z]=G,G.push(w)}he(_,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(c,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||_}function Ea(c){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Lr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Lr("baseRetryDelayMs",5e3,c),this.Za=Lr("retryDelaySeedMs",1e4,c),this.Ta=Lr("forwardChannelMaxRetries",2,c),this.va=Lr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(c&&c.concurrentRequestLimit),this.Ba=new ao,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ea.prototype,n.ka=8,n.I=1,n.connect=function(c,_,w,S){Et(0),this.W=c,this.H=_||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=Iu(this,null,this.W),gi(this)};function Ia(c){if(Ta(c),c.I==3){var _=c.V++,w=Zn(c.J);if(Ge(w,"SID",c.M),Ge(w,"RID",_),Ge(w,"TYPE","terminate"),Mr(c,w),_=new Xn(c,c.j,_),_.M=2,_.A=di(Zn(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=_.A,w=!0),w||(_.g=zh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Zs(_)}co(c)}function Un(c){c.g&&(uo(c),c.g.cancel(),c.g=null)}function Ta(c){Un(c),c.v&&(l.clearTimeout(c.v),c.v=null),Sa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&l.clearTimeout(c.m),c.m=null)}function gi(c){if(!cu(c.h)&&!c.m){c.m=!0;var _=c.Ea;ve||R(),ye||(ve(),ye=!0),b.add(_,c),c.D=0}}function Bh(c,_){return to(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=_.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Hi(p(c.Ea,c,_),Ra(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Xn(this,this.j,c);let G=this.o;if(this.U&&(G?(G=M(G),xe(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,_>4096){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=Eu(this,z,_),w=Zn(this.J),Ge(w,"RID",c),Ge(w,"CVER",22),this.G&&Ge(w,"X-HTTP-Session-Id",this.G),Mr(this,w),G&&(this.R?_="headers="+xr(Fh(G))+"&"+_:this.u&&wa(w,this.u,G)),ya(this.h,z),this.Ra&&Ge(w,"TYPE","init"),this.S?(Ge(w,"$req",_),Ge(w,"SID","null"),z.U=!0,fr(z,w,null)):fr(z,w,_),this.I=2}}else this.I==3&&(c?lo(this,c):this.i.length==0||cu(this.h)||lo(this))};function lo(c,_){var w;_?w=_.l:w=c.V++;const S=Zn(c.J);Ge(S,"SID",c.M),Ge(S,"RID",w),Ge(S,"AID",c.K),Mr(c,S),c.u&&c.o&&wa(S,c.u,c.o),w=new Xn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),_&&(c.i=_.G.concat(c.i)),_=Eu(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),ya(c.h,w),fr(w,S,_)}function Mr(c,_){c.H&&Ee(c.H,function(w,S){Ge(_,S,w)}),c.l&&Ee({},function(w,S){Ge(_,S,w)})}function Eu(c,_,w){w=Math.min(c.i.length,w);const S=c.l?p(c.l.Ka,c.l,c):null;e:{var z=c.i;let ke=-1;for(;;){const Pt=["count="+w];ke==-1?w>0?(ke=z[0].g,Pt.push("ofs="+ke)):ke=0:Pt.push("ofs="+ke);let Je=!0;for(let Vt=0;Vt<w;Vt++){var G=z[Vt].g;const zn=z[Vt].map;if(G-=ke,G<0)ke=Math.max(0,z[Vt].g-100),Je=!1;else try{G="req"+G+"_"||"";try{var se=zn instanceof Map?zn:Object.entries(zn);for(const[yi,jr]of se){let Ur=jr;h(jr)&&(Ur=zi(jr)),Pt.push(G+yi+"="+encodeURIComponent(Ur))}}catch(yi){throw Pt.push(G+"type="+encodeURIComponent("_badmap")),yi}}catch{S&&S(zn)}}if(Je){se=Pt.join("&");break e}}se=void 0}return c=c.i.splice(0,w),_.G=c,se}function sn(c){if(!c.g&&!c.v){c.Y=1;var _=c.Da;ve||R(),ye||(ve(),ye=!0),b.add(_,c),c.A=0}}function Fr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Hi(p(c.Da,c),Ra(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,es(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Hi(p(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Un(this),es(this))};function uo(c){c.B!=null&&(l.clearTimeout(c.B),c.B=null)}function es(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var _=Zn(c.na);Ge(_,"RID","rpc"),Ge(_,"SID",c.M),Ge(_,"AID",c.K),Ge(_,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ge(_,"TO",c.ia),Ge(_,"TYPE","xmlhttp"),Mr(c,_),c.u&&c.o&&wa(_,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=di(Zn(_)),w.u=null,w.R=!0,lu(w,c)}n.Va=function(){this.C!=null&&(this.C=null,Un(this),Fr(this),Et(19))};function Sa(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Aa(c,_){var w=null;if(c.g==_){Sa(c),uo(c),c.g=null;var S=2}else if(hu(c.h,_))w=_.G,no(c.h,_),S=1;else return;if(c.I!=0){if(_.o)if(S==1){w=_.u?_.u.length:0,_=Date.now()-_.F;var z=c.D;S=Wi(),Rt(S,new ou(S,w)),gi(c)}else sn(c);else if(z=_.m,z==3||z==0&&_.X>0||!(S==1&&Bh(c,_)||S==2&&Fr(c)))switch(w&&w.length>0&&(_=c.h,_.i=_.i.concat(w)),z){case 1:Bn(c,5);break;case 4:Bn(c,10);break;case 3:Bn(c,6);break;default:Bn(c,2)}}}function Ra(c,_){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*_}function Bn(c,_){if(c.j.info("Error code "+_),_==2){var w=p(c.bb,c),S=c.Ua;const z=!S;S=new br(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ro(S,"https"),di(S),z?Dr(S.toString(),w):Vr(S.toString(),w)}else Et(2);c.I=0,c.l&&c.l.pa(_),co(c),Ta(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function co(c){if(c.I=0,c.ja=[],c.l){const _=Mn(c.h);(_.length!=0||c.i.length!=0)&&(k(c.ja,_),k(c.ja,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.oa()}}function Iu(c,_,w){var S=w instanceof br?Zn(w):new br(w);if(S.g!="")_&&(S.g=_+"."+S.g),Cr(S,S.u);else{var z=l.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;const G=new br(null);S&&ro(G,S),_&&(G.g=_),z&&Cr(G,z),w&&(G.h=w),S=G}return w=c.G,_=c.wa,w&&_&&Ge(S,w,_),Ge(S,"VER",c.ka),Mr(c,S),S}function zh(c,_,w){if(_&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Aa&&!c.ma?new nt(new fi({ab:w})):new nt(c.ma),_.Fa(c.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}n=qh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Pa(){}Pa.prototype.g=function(c,_){return new Yt(c,_)};function Yt(c,_){Dt.call(this),this.g=new Ea(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(c?c["X-WebChannel-Client-Profile"]=_.sa:c={"X-WebChannel-Client-Profile":_.sa}),this.g.U=c,(c=_&&_.Qb)&&!A(c)&&(this.g.u=c),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!A(_)&&(this.g.G=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new ts(this)}v(Yt,Dt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ia(this.g)},Yt.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=zi(c),c=w);_.i.push(new Fp(_.Ya++,c)),_.I==3&&gi(_)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Yt.Z.N.call(this)};function $h(c){ha.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){e:{for(const w in _){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}v($h,ha);function Wh(){su.call(this),this.status=1}v(Wh,su);function ts(c){this.g=c}v(ts,qh),ts.prototype.ra=function(){Rt(this.g,"a")},ts.prototype.qa=function(c){Rt(this.g,new $h(c))},ts.prototype.pa=function(c){Rt(this.g,new Wh)},ts.prototype.oa=function(){Rt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,GS=function(){return new Pa},HS=function(){return Wi()},WS=dr,Gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,ef=Ki,Qi.COMPLETE="complete",$S=Qi,Rh.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,lc=Rh,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,qS=nt}).apply(typeof Ud<"u"?Ud:typeof self<"u"?self:typeof window<"u"?window:{});const TI="@firebase/firestore",SI="4.9.3";class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let $l="12.7.0";const Vs=new Gf("@firebase/firestore");function nl(){return Vs.logLevel}function dV(n){Vs.setLogLevel(n)}function X(n,...e){if(Vs.logLevel<=Le.DEBUG){const t=e.map(u_);Vs.debug(`Firestore (${$l}): ${n}`,...t)}}function bt(n,...e){if(Vs.logLevel<=Le.ERROR){const t=e.map(u_);Vs.error(`Firestore (${$l}): ${n}`,...t)}}function oi(n,...e){if(Vs.logLevel<=Le.WARN){const t=e.map(u_);Vs.warn(`Firestore (${$l}): ${n}`,...t)}}function u_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ue(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,KS(n,r,t)}function KS(n,e,t){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bt(r),new Error(r)}function me(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||KS(e,i,r)}function fV(n,e){n||ue(57014,e)}function le(n,e){return n}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Kt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class QS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class mV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gV{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new nn,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nn)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new QS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class yV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _V{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);const r=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,X("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class c_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wV(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Ce(n,e){return n<e?-1:n>e?1:0}function Kg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Tg(i)===Tg(a)?Ce(i,a):Tg(i)?1:-1}return Ce(n.length,e.length)}const EV=55296,IV=57343;function Tg(n){const e=n.charCodeAt(0);return e>=EV&&e<=IV}function vl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function JS(n){return n+"\0"}const RI="__name__";class Gr{constructor(e,t,r){t===void 0?t=0:t>e.length&&ue(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ue(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Gr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Ce(e.length,t.length)}static compareSegments(e,t){const r=Gr.isNumericId(e),i=Gr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Gr.extractNumericId(e).compare(Gr.extractNumericId(t)):Kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class Me extends Gr{construct(e,t,r){return new Me(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Me(t)}static emptyPath(){return new Me([])}}const TV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Gr{construct(e,t,r){return new mt(e,t,r)}static isValidIdentifier(e){return TV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RI}static keyField(){return new mt([RI])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new J(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new J(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new J(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(t)}static emptyPath(){return new mt([])}}class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Me.fromString(e))}static fromName(e){return new ae(Me.fromString(e).popFirst(5))}static empty(){return new ae(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Me(e.slice()))}}function h_(n,e,t){if(!t)throw new J(H.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YS(n,e,t,r){if(e===!0&&r===!0)throw new J(H.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PI(n){if(!ae.isDocumentKey(n))throw new J(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xI(n){if(ae.isDocumentKey(n))throw new J(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ue(12329,{type:typeof n})}function He(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sp(n);throw new J(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZS(n,e){if(e<=0)throw new J(H.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function ih(n,e){if(!XS(n))throw new J(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new J(H.INVALID_ARGUMENT,t);return!0}const bI=-62135596800,CI=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CI);return new Qe(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bI)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CI}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ft("string",Qe._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Qe(0,0))}static max(){return new we(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wl=-1;class Rf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qg(n){return n.fields.find((e=>e.kind===2))}function Ro(n){return n.fields.filter((e=>e.kind!==2))}Rf.UNKNOWN_ID=-1;class tf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oc(0,Yn.min())}}function eA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Yn(i,ae.empty(),e)}function tA(n){return new Yn(n.readTime,n.key,wl)}class Yn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yn(we.min(),ae.empty(),wl)}static max(){return new Yn(we.max(),ae.empty(),wl)}}function d_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ws(n){if(n.code!==H.FAILED_PRECONDITION||n.message!==nA)throw n;X("LocalStore","Unexpectedly lost primary lease")}class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new U(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof U?t:U.resolve(t)}catch(t){return U.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):U.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):U.reject(t)}static resolve(e){return new U(((t,r)=>{t(e)}))}static reject(e){return new U(((t,r)=>{r(e)}))}static waitFor(e){return new U(((t,r)=>{let i=0,a=0,l=!1;e.forEach((h=>{++i,h.next((()=>{++a,l&&a===i&&t()}),(f=>r(f)))})),l=!0,a===i&&t()}))}static or(e){let t=U.resolve(!1);for(const r of e)t=t.next((i=>i?U.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new U(((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((g=>{l[p]=g,++h,h===a&&r(l)}),(g=>i(g)))}}))}static doWhile(e,t){return new U(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const Hn="SimpleDb";class op{static open(e,t,r,i){try{return new op(t,e.transaction(i,r))}catch(a){throw new vc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new nn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new vc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=f_(r.target.error);this.S.reject(new vc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(X(Hn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AV(t)}}class ni{static delete(e){return X(Hn,"Removing database:",e),xo(Ny().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xc())return!1;if(ni.F())return!0;const e=vt(),t=ni.M(e),r=0<t&&t<10,i=iA(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ni.M(vt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(X(Hn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;t(l)},i.onblocked=()=>{r(new vc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new J(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new J(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new vc(e,l))},i.onupgradeneeded=a=>{X(Hn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{X(Hn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=op.open(this.db,e,a?"readonly":"readwrite",r),f=i(h).next((p=>(h.C(),p))).catch((p=>(h.abort(p),U.reject(p)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,p=f.name!=="FirebaseError"&&l<3;if(X(Hn,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class SV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return xo(this.U.delete())}}class vc extends J{constructor(e,t){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hs(n){return n.name==="IndexedDbTransactionError"}class AV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(X(Hn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(X(Hn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xo(r)}add(e){return X(Hn,"ADD",this.store.name,e,e),xo(this.store.add(e))}get(e){return xo(this.store.get(e)).next((t=>(t===void 0&&(t=null),X(Hn,"GET",this.store.name,e,t),t)))}delete(e){return X(Hn,"DELETE",this.store.name,e),xo(this.store.delete(e))}count(){return X(Hn,"COUNT",this.store.name),xo(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new U(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.H(a,((h,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new U(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){X(Hn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,l,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new U(((r,i)=>{t.onerror=a=>{const l=f_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():r()})):r()}}))}H(e,t){const r=[];return new U(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const f=new SV(h),p=t(h.primaryKey,h.value,f);if(p instanceof U){const g=p.catch((v=>(f.done(),U.reject(v))));r.push(g)}f.isDone?i():f.G===null?h.continue():h.continue(f.G)}})).next((()=>U.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xo(n){return new U(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=f_(r.target.error);t(i)}}))}let kI=!1;function f_(n){const e=ni.M(vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kI||(kI=!0,setTimeout((()=>{throw r}),0)),r}}return n}const wc="IndexBackfiller";class RV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){X(wc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();X(wc,`Documents written: ${t}`)}catch(t){Hs(t)?X(wc,"Ignoring IndexedDB error during index backfill: ",t):await Ws(t)}await this.re(6e4)}))}}class PV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return U.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return X(wc,`Processing collection: ${l}`),this.oe(e,l,i).next((h=>{i-=h,r.add(l)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((h=>(X(wc,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const l=tA(a);d_(l,r)>0&&(r=l)})),new Yn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kn.ce=-1;const bs=-1;function sh(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function sA(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Pf="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NI(e)),e=xV(n.get(t),e);return NI(e)}function xV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Pf:t+="";break;default:t+=a}}return t}function NI(n){return n+Pf+""}function ei(n){const e=n.length;if(me(e>=2,64408,{path:n}),e===2)return me(n.charAt(0)===Pf&&n.charAt(1)==="",56145,{path:n}),Me.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf(Pf,a);switch((l<0||l>t)&&ue(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;i.length===0?f=h:(i+=h,f=i,i=""),r.push(f);break;case"":i+=n.substring(a,l),i+="\0";break;case"":i+=n.substring(a,l+1);break;default:ue(61167,{path:n})}a=l+2}return new Me(r)}const Po="remoteDocuments",oh="owner",Ja="owner",Mc="mutationQueues",bV="userId",Er="mutations",DI="batchId",Vo="userMutationsIndex",VI=["userId","batchId"];function nf(n,e){return[n,pn(e)]}function oA(n,e,t){return[n,pn(e),t]}const CV={},El="documentMutations",xf="remoteDocumentsV14",kV=["prefixPath","collectionGroup","readTime","documentId"],rf="documentKeyIndex",NV=["prefixPath","collectionGroup","documentId"],aA="collectionGroupIndex",DV=["collectionGroup","readTime","prefixPath","documentId"],Fc="remoteDocumentGlobal",Jg="remoteDocumentGlobalKey",Il="targets",lA="queryTargetsIndex",VV=["canonicalId","targetId"],Tl="targetDocuments",OV=["targetId","path"],p_="documentTargetsIndex",LV=["path","targetId"],bf="targetGlobalKey",Uo="targetGlobal",jc="collectionParents",MV=["collectionId","parent"],Sl="clientMetadata",FV="clientId",ap="bundles",jV="bundleId",lp="namedQueries",UV="name",m_="indexConfiguration",BV="indexId",Yg="collectionGroupIndex",zV="collectionGroup",Ec="indexState",qV=["indexId","uid"],uA="sequenceNumberIndex",$V=["uid","sequenceNumber"],Ic="indexEntries",WV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cA="documentKeyIndex",HV=["indexId","uid","orderedDocumentKey"],up="documentOverlays",GV=["userId","collectionPath","documentId"],Xg="collectionPathOverlayIndex",KV=["userId","collectionPath","largestBatchId"],hA="collectionGroupOverlayIndex",QV=["userId","collectionGroup","largestBatchId"],g_="globals",JV="name",dA=[Mc,Er,El,Po,Il,oh,Uo,Tl,Sl,Fc,jc,ap,lp],YV=[...dA,up],fA=[Mc,Er,El,xf,Il,oh,Uo,Tl,Sl,Fc,jc,ap,lp,up],pA=fA,y_=[...pA,m_,Ec,Ic],XV=y_,mA=[...y_,g_],ZV=mA;class Zg extends rA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function zt(n,e){const t=le(n);return ni.O(t.le,e)}function OI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class st{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bd(this.root,e,this.comparator,!0)}}class Bd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??en.RED,this.left=i??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new en(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return en.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xe{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LI(this.data.getIterator())}getIteratorFrom(e){return new LI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xe(this.comparator);return t.data=e,t}}class LI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ya(n){return n.hasNext()?n.getNext():void 0}class Nn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new Xe(mt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class yA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function eO(){return typeof atob<"u"}class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new yA("Invalid base64 string: "+a):a}})(e);return new Tt(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(me(!!n,39018),typeof n=="string"){let e=0;const t=tO.exec(n);if(me(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Di(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}const _A="server_timestamp",vA="__type__",wA="__previous_value__",EA="__local_write_time__";function cp(n){return(n?.mapValue?.fields||{})[vA]?.stringValue===_A}function hp(n){const e=n.mapValue.fields[wA];return cp(e)?hp(e):e}function Uc(n){const e=Ni(n.mapValue.fields[EA].timestampValue);return new Qe(e.seconds,e.nanos)}class nO{constructor(e,t,r,i,a,l,h,f,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=g}}const ey="(default)";class Os{constructor(e,t){this.projectId=e,this.database=t||ey}static empty(){return new Os("","")}get isDefaultDatabase(){return this.database===ey}isEqual(e){return e instanceof Os&&e.projectId===this.projectId&&e.database===this.database}}const __="__type__",IA="__max__",Ts={mapValue:{fields:{__type__:{stringValue:IA}}}},v_="__vector__",Al="value",sf={nullValue:"NULL_VALUE"};function Ls(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cp(n)?4:TA(n)?9007199254740991:dp(n)?10:11:ue(28295,{value:n})}function ai(n,e){if(n===e)return!0;const t=Ls(n);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uc(n).isEqual(Uc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=Ni(i.timestampValue),h=Ni(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Di(i.bytesValue).isEqual(Di(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return pt(i.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return pt(i.integerValue)===pt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=pt(i.doubleValue),h=pt(a.doubleValue);return l===h?Lc(l)===Lc(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return vl(n.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(OI(l)!==OI(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!ai(l[f],h[f])))return!1;return!0})(n,e);default:return ue(52216,{left:n})}}function Bc(n,e){return(n.values||[]).find((t=>ai(t,e)))!==void 0}function Ms(n,e){if(n===e)return 0;const t=Ls(n),r=Ls(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=pt(a.integerValue||a.doubleValue),f=pt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return MI(n.timestampValue,e.timestampValue);case 4:return MI(Uc(n),Uc(e));case 5:return Kg(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Di(a),f=Di(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const g=Ce(h[p],f[p]);if(g!==0)return g}return Ce(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=Ce(pt(a.latitude),pt(l.latitude));return h!==0?h:Ce(pt(a.longitude),pt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FI(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},p=h[Al]?.arrayValue,g=f[Al]?.arrayValue,v=Ce(p?.values?.length||0,g?.values?.length||0);return v!==0?v:FI(p,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ts.mapValue&&l===Ts.mapValue)return 0;if(a===Ts.mapValue)return 1;if(l===Ts.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let v=0;v<f.length&&v<g.length;++v){const I=Kg(f[v],g[v]);if(I!==0)return I;const C=Ms(h[f[v]],p[g[v]]);if(C!==0)return C}return Ce(f.length,g.length)})(n.mapValue,e.mapValue);default:throw ue(23264,{he:t})}}function MI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);const t=Ni(n),r=Ni(e),i=Ce(t.seconds,r.seconds);return i!==0?i:Ce(t.nanos,r.nanos)}function FI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Ms(t[i],r[i]);if(a)return a}return Ce(t.length,r.length)}function Rl(n){return ty(n)}function ty(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ni(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Di(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=ty(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${ty(t.fields[l])}`;return i+"}"})(n.mapValue):ue(61005,{value:n})}function of(n){switch(Ls(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hp(n);return e?16+of(e):16;case 5:return 2*n.stringValue.length;case 6:return Di(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+of(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Gs(r.fields,((a,l)=>{i+=a.length+of(l)})),i})(n.mapValue);default:throw ue(13486,{value:n})}}function Wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ny(n){return!!n&&"integerValue"in n}function zc(n){return!!n&&"arrayValue"in n}function jI(n){return!!n&&"nullValue"in n}function UI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function af(n){return!!n&&"mapValue"in n}function dp(n){return(n?.mapValue?.fields||{})[__]?.stringValue===v_}function Tc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gs(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Tc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(n.arrayValue.values[t]);return e}return{...n}}function TA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===IA}const SA={mapValue:{fields:{[__]:{stringValue:v_},[Al]:{arrayValue:{}}}}};function rO(n){return"nullValue"in n?sf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Wo(Os.empty(),ae.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?dp(n)?SA:{mapValue:{}}:ue(35942,{value:n})}function iO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Wo(Os.empty(),ae.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?SA:"mapValue"in n?dp(n)?{mapValue:{}}:Ts:ue(61959,{value:n})}function BI(n,e){const t=Ms(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zI(n,e){const t=Ms(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=mt.emptyPath(),r={},i=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Tc(l):i.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gs(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new tn(Tc(this.value))}}function AA(n){const e=[];return Gs(n.fields,((t,r)=>{const i=new mt([t]);if(af(r)){const a=AA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Nn(e)}class ht{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new ht(e,0,we.min(),we.min(),we.min(),tn.empty(),0)}static newFoundDocument(e,t,r,i){return new ht(e,1,t,we.min(),r,i,0)}static newNoDocument(e,t){return new ht(e,2,t,we.min(),we.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,we.min(),we.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fs{constructor(e,t){this.position=e,this.inclusive=t}}function qI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=ae.comparator(ae.fromName(l.referenceValue),t.key):r=Ms(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $I(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ai(n.position[t],e.position[t]))return!1;return!0}class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class RA{}class Ue extends RA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oO(e,t,r):t==="array-contains"?new uO(e,r):t==="in"?new NA(e,r):t==="not-in"?new cO(e,r):t==="array-contains-any"?new hO(e,r):new Ue(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aO(e,r):new lO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ms(t,this.value)):t!==null&&Ls(this.value)===Ls(t)&&this.matchesComparison(Ms(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ye extends RA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ye(e,t)}matches(e){return Pl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pl(n){return n.op==="and"}function ry(n){return n.op==="or"}function w_(n){return PA(n)&&Pl(n)}function PA(n){for(const e of n.filters)if(e instanceof Ye)return!1;return!0}function iy(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+Rl(n.value);if(w_(n))return n.filters.map((e=>iy(e))).join(",");{const e=n.filters.map((t=>iy(t))).join(",");return`${n.op}(${e})`}}function xA(n,e){return n instanceof Ue?(function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&ai(r.value,i.value)})(n,e):n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,h)=>a&&xA(l,i.filters[h])),!0):!1})(n,e):void ue(19439)}function bA(n,e){const t=n.filters.concat(e);return Ye.create(t,n.op)}function CA(n){return n instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`})(n):n instanceof Ye?(function(t){return t.op.toString()+" {"+t.getFilters().map(CA).join(" ,")+"}"})(n):"Filter"}class oO extends Ue{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class aO extends Ue{constructor(e,t){super(e,"in",t),this.keys=kA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lO extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=kA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kA(n,e){return(e.arrayValue?.values||[]).map((t=>ae.fromName(t.referenceValue)))}class uO extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zc(t)&&Bc(t.arrayValue,this.value)}}class NA extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}}class cO extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bc(this.value.arrayValue,t)}}class hO extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Bc(this.value.arrayValue,r)))}}class dO{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function sy(n,e=null,t=[],r=[],i=null,a=null,l=null){return new dO(n,e,t,r,i,a,l)}function Ho(n){const e=le(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>iy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Rl(r))).join(",")),e.Te=t}return e.Te}function ah(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$I(n.startAt,e.startAt)&&$I(n.endAt,e.endAt)}function Cf(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function kf(n,e){return n.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function WI(n,e,t){let r=sf,i=!0;for(const a of kf(n,e)){let l=sf,h=!0;switch(a.op){case"<":case"<=":l=rO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=sf}BI({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];BI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function HI(n,e,t){let r=Ts,i=!0;for(const a of kf(n,e)){let l=Ts,h=!0;switch(a.op){case">=":case">":l=iO(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Ts}zI({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];zI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}class Li{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DA(n,e,t,r,i,a,l,h){return new Li(n,e,t,r,i,a,l,h)}function Wl(n){return new Li(n)}function GI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function E_(n){return n.collectionGroup!==null}function fl(n){const e=le(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Xe(mt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new qc(a,r))})),t.has(mt.keyField().canonicalString())||e.Ie.push(new qc(mt.keyField(),r))}return e.Ie}function En(n){const e=le(n);return e.Ee||(e.Ee=fO(e,fl(n))),e.Ee}function fO(n,e){if(n.limitType==="F")return sy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new qc(i.field,a)}));const t=n.endAt?new Fs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fs(n.startAt.position,n.startAt.inclusive):null;return sy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function oy(n,e){const t=n.filters.concat([e]);return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Nf(n,e,t){return new Li(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lh(n,e){return ah(En(n),En(e))&&n.limitType===e.limitType}function VA(n){return`${Ho(En(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>CA(i))).join(", ")}]`),sh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Rl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Rl(i))).join(",")),`Target(${r})`})(En(n))}; limitType=${n.limitType})`}function uh(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ae.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of fl(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,h,f){const p=qI(l,h,f);return l.inclusive?p<=0:p<0})(r.startAt,fl(r),i)||r.endAt&&!(function(l,h,f){const p=qI(l,h,f);return l.inclusive?p>=0:p>0})(r.endAt,fl(r),i))})(n,e)}function OA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LA(n){return(e,t)=>{let r=!1;for(const i of fl(n)){const a=pO(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function pO(n,e,t){const r=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Ms(f,p):ue(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:n.dir})}}class Mi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return gA(this.inner)}size(){return this.innerSize}}const mO=new st(ae.comparator);function Dn(){return mO}const MA=new st(ae.comparator);function uc(...n){let e=MA;for(const t of n)e=e.insert(t.key,t);return e}function FA(n){let e=MA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ti(){return Sc()}function jA(){return Sc()}function Sc(){return new Mi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const gO=new st(ae.comparator),yO=new Xe(ae.comparator);function De(...n){let e=yO;for(const t of n)e=e.add(t);return e}const _O=new Xe(Ce);function I_(){return _O}function T_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function UA(n){return{integerValue:""+n}}function BA(n,e){return sA(e)?UA(e):T_(n,e)}class fp{constructor(){this._=void 0}}function vO(n,e,t){return n instanceof xl?(function(i,a){const l={fields:{[vA]:{stringValue:_A},[EA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&cp(a)&&(a=hp(a)),a&&(l.fields[wA]=a),{mapValue:l}})(t,e):n instanceof Go?qA(n,e):n instanceof Ko?$A(n,e):(function(i,a){const l=zA(i,a),h=KI(l)+KI(i.Ae);return ny(l)&&ny(i.Ae)?UA(h):T_(i.serializer,h)})(n,e)}function wO(n,e,t){return n instanceof Go?qA(n,e):n instanceof Ko?$A(n,e):t}function zA(n,e){return n instanceof bl?(function(r){return ny(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class xl extends fp{}class Go extends fp{constructor(e){super(),this.elements=e}}function qA(n,e){const t=WA(e);for(const r of n.elements)t.some((i=>ai(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ko extends fp{constructor(e){super(),this.elements=e}}function $A(n,e){let t=WA(e);for(const r of n.elements)t=t.filter((i=>!ai(i,r)));return{arrayValue:{values:t}}}class bl extends fp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function KI(n){return pt(n.integerValue||n.doubleValue)}function WA(n){return zc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ch{constructor(e,t){this.field=e,this.transform=t}}function EO(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Go&&i instanceof Go||r instanceof Ko&&i instanceof Ko?vl(r.elements,i.elements,ai):r instanceof bl&&i instanceof bl?ai(r.Ae,i.Ae):r instanceof xl&&i instanceof xl})(n.transform,e.transform)}class IO{constructor(e,t){this.version=e,this.transformResults=t}}class gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class pp{}function HA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gl(n.key,gt.none()):new Hl(n.key,n.data,gt.none());{const t=n.data,r=tn.empty();let i=new Xe(mt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Fi(n.key,r,new Nn(i.toArray()),gt.none())}}function TO(n,e,t){n instanceof Hl?(function(i,a,l){const h=i.value.clone(),f=JI(i.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Fi?(function(i,a,l){if(!lf(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=JI(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(GA(i)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ac(n,e,t,r){return n instanceof Hl?(function(a,l,h,f){if(!lf(a.precondition,l))return h;const p=a.value.clone(),g=YI(a.fieldTransforms,f,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fi?(function(a,l,h,f){if(!lf(a.precondition,l))return h;const p=YI(a.fieldTransforms,f,l),g=l.data;return g.setAll(GA(a)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,l,h){return lf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function SO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=zA(r.transform,i||null);a!=null&&(t===null&&(t=tn.empty()),t.set(r.field,a))}return t||null}function QI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,((a,l)=>EO(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Hl extends pp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fi extends pp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function GA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function JI(n,e,t){const r=new Map;me(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,wO(l,h,t[i]))}return r}function YI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,vO(a,l,e))}return r}class Gl extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S_ extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class A_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&TO(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jA();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const f=HA(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(we.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,((t,r)=>QI(t,r)))&&vl(this.baseMutations,e.baseMutations,((t,r)=>QI(t,r)))}}class R_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){me(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gO})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new R_(e,t,r,i)}}class P_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lt,ze;function KA(n){switch(n){case H.OK:return ue(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ue(15467,{code:n})}}function QA(n){if(n===void 0)return bt("GRPC error has no .code"),H.UNKNOWN;switch(n){case Lt.OK:return H.OK;case Lt.CANCELLED:return H.CANCELLED;case Lt.UNKNOWN:return H.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return H.INTERNAL;case Lt.UNAVAILABLE:return H.UNAVAILABLE;case Lt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Lt.NOT_FOUND:return H.NOT_FOUND;case Lt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Lt.ABORTED:return H.ABORTED;case Lt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Lt.DATA_LOSS:return H.DATA_LOSS;default:return ue(39323,{code:n})}}(ze=Lt||(Lt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";function JA(){return new TextEncoder}const RO=new xs([4294967295,4294967295],0);function XI(n){const e=JA().encode(n),t=new zS;return t.update(e),new Uint8Array(t.digest())}function ZI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new xs([t,r],0),new xs([i,a],0)]}class x_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(r<0)throw new cc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(xs.fromNumber(r)));return i.compare(RO)===1&&(i=new xs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=XI(e),[r,i]=ZI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new x_(a,i,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=XI(e),[r,i]=ZI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hh{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hh(we.min(),i,new st(Ce),Dn(),De())}}class dh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dh(r,t,De(),De(),De())}}class uf{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class YA{constructor(e,t){this.targetId=e,this.Ce=t}}class XA{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:a})}})),new dh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=tT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.Je=zd(),this.He=zd(),this.Ye=new st(Ce)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Cf(a))if(r===0){const l=new ae(a.path);this.et(t,l,ht.newNoDocument(l,we.min()))}else me(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,h;try{l=Di(r).toUint8Array()}catch(f){if(f instanceof yA)return oi("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new x_(l,i,a)}catch(f){return oi(f instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Cf(h.target)){const f=new ae(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,ht.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=De();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new hh(e,t,this.Ye,this.je,r);return this.je=Dn(),this.Je=zd(),this.He=zd(),this.Ye=new st(Ce),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new eT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xe(Ce),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xe(Ce),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zd(){return new st(ae.comparator)}function tT(){return new st(ae.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},bO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CO={and:"AND",or:"OR"};class kO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ay(n,e){return n.useProto3Json||sh(e)?e:{value:e}}function Cl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NO(n,e){return Cl(n,e.toTimestamp())}function Ct(n){return me(!!n,49232),we.fromTimestamp((function(t){const r=Ni(t);return new Qe(r.seconds,r.nanos)})(n))}function b_(n,e){return ly(n,e).canonicalString()}function ly(n,e){const t=(function(i){return new Me(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function e1(n){const e=Me.fromString(n);return me(c1(e),10190,{key:e.toString()}),e}function $c(n,e){return b_(n.databaseId,e.path)}function ri(n,e){const t=e1(e);if(t.get(1)!==n.databaseId.projectId)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(r1(t))}function t1(n,e){return b_(n.databaseId,e)}function n1(n){const e=e1(n);return e.length===4?Me.emptyPath():r1(e)}function uy(n){return new Me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function r1(n){return me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nT(n,e,t){return{name:$c(n,e),fields:t.value.mapValue.fields}}function i1(n,e,t){const r=ri(n,e.name),i=Ct(e.updateTime),a=e.createTime?Ct(e.createTime):we.min(),l=new tn({mapValue:{fields:e.fields}}),h=ht.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function DO(n,e){return"found"in e?(function(r,i){me(!!i.found,43571),i.found.name,i.found.updateTime;const a=ri(r,i.found.name),l=Ct(i.found.updateTime),h=i.found.createTime?Ct(i.found.createTime):we.min(),f=new tn({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(a,l,h,f)})(n,e):"missing"in e?(function(r,i){me(!!i.missing,3894),me(!!i.readTime,22933);const a=ri(r,i.missing),l=Ct(i.readTime);return ht.newNoDocument(a,l)})(n,e):ue(7234,{result:e})}function VO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ue(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(p,g){return p.useProto3Json?(me(g===void 0||typeof g=="string",58123),Tt.fromBase64String(g||"")):(me(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Tt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(p){const g=p.code===void 0?H.UNKNOWN:QA(p.code);return new J(g,p.message||"")})(l);t=new XA(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ri(n,r.document.name),a=Ct(r.document.updateTime),l=r.document.createTime?Ct(r.document.createTime):we.min(),h=new tn({mapValue:{fields:r.document.fields}}),f=ht.newFoundDocument(i,a,l,h),p=r.targetIds||[],g=r.removedTargetIds||[];t=new uf(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ri(n,r.document),a=r.readTime?Ct(r.readTime):we.min(),l=ht.newNoDocument(i,a),h=r.removedTargetIds||[];t=new uf([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ri(n,r.document),a=r.removedTargetIds||[];t=new uf([],a,i,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new AO(i,a),h=r.targetId;t=new YA(h,l)}}return t}function Wc(n,e){let t;if(e instanceof Hl)t={update:nT(n,e.key,e.value)};else if(e instanceof Gl)t={delete:$c(n,e.key)};else if(e instanceof Fi)t={update:nT(n,e.key,e.data),updateMask:UO(e.fieldMask)};else{if(!(e instanceof S_))return ue(16599,{Vt:e.type});t={verify:$c(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof xl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Go)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ko)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bl)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ue(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:NO(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ue(27497)})(n,e.precondition)),t}function cy(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?gt.updateTime(Ct(a.updateTime)):a.exists!==void 0?gt.exists(a.exists):gt.none()})(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,h){let f=null;if("setToServerValue"in h)me(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new xl;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];f=new Go(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];f=new Ko(g)}else"increment"in h?f=new bl(l,h.increment):ue(16584,{proto:h});const p=mt.fromServerFormat(h.fieldPath);return new ch(p,f)})(n,i))):[];if(e.update){e.update.name;const i=ri(n,e.update.name),a=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new Nn(p.map((g=>mt.fromServerFormat(g))))})(e.updateMask);return new Fi(i,a,l,t,r)}return new Hl(i,a,t,r)}if(e.delete){const i=ri(n,e.delete);return new Gl(i,t)}if(e.verify){const i=ri(n,e.verify);return new S_(i,t)}return ue(1463,{proto:e})}function OO(n,e){return n&&n.length>0?(me(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?Ct(i.updateTime):Ct(a);return l.isEqual(we.min())&&(l=Ct(a)),new IO(l,i.transformResults||[])})(t,e)))):[]}function s1(n,e){return{documents:[t1(n,e.path)]}}function o1(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=t1(n,i);const a=(function(p){if(p.length!==0)return u1(Ye.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((g=>(function(I){return{field:il(I.field),direction:MO(I.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=ay(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function a1(n){let e=n1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){me(r===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(v){const I=l1(v);return I instanceof Ye&&w_(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((I=>(function(k){return new qc(sl(k.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(v){let I;return I=typeof v=="object"?v.value:v,sh(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(v){const I=!!v.before,C=v.values||[];return new Fs(C,I)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const I=!v.before,C=v.values||[];return new Fs(C,I)})(t.endAt)),DA(e,i,l,a,h,"F",f,p)}function LO(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=sl(t.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sl(t.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=sl(t.unaryFilter.field);return Ue.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=sl(t.unaryFilter.field);return Ue.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ue.create(sl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ye.create(t.compositeFilter.filters.map((r=>l1(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(t.compositeFilter.op))})(n):ue(30097,{filter:n})}function MO(n){return xO[n]}function FO(n){return bO[n]}function jO(n){return CO[n]}function il(n){return{fieldPath:n.canonicalString()}}function sl(n){return mt.fromServerFormat(n.fieldPath)}function u1(n){return n instanceof Ue?(function(t){if(t.op==="=="){if(UI(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(jI(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UI(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(jI(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:FO(t.op),value:t.value}}})(n):n instanceof Ye?(function(t){const r=t.getFilters().map((i=>u1(i)));return r.length===1?r[0]:{compositeFilter:{op:jO(t.op),filters:r}}})(n):ue(54877,{filter:n})}function UO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function c1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Pi{constructor(e,t,r,i,a=we.min(),l=we.min(),h=Tt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h1{constructor(e){this.yt=e}}function BO(n,e){let t;if(e.document)t=i1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ae.fromSegments(e.noDocument.path),i=Jo(e.noDocument.readTime);t=ht.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue(56709);{const r=ae.fromSegments(e.unknownDocument.path),i=Jo(e.unknownDocument.version);t=ht.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new Qe(i[0],i[1]);return we.fromTimestamp(a)})(e.readTime)),t}function rT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Df(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:$c(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Cl(a,l.version.toTimestamp()),createTime:Cl(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qo(e.version)};else{if(!e.isUnknownDocument())return ue(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Qo(e.version)}}return r}function Df(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jo(n){const e=new Qe(n.seconds,n.nanoseconds);return we.fromTimestamp(e)}function bo(n,e){const t=(e.baseMutations||[]).map((a=>cy(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>cy(n.yt,a))),i=Qe.fromMillis(e.localWriteTimeMs);return new A_(e.batchId,i,t,r)}function hc(n){const e=Jo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Jo(n.lastLimboFreeSnapshotVersion):we.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return me(l===1,1966,{count:l}),En(Wl(n1(a.documents[0])))})(n.query):(function(a){return En(a1(a))})(n.query),new Pi(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function d1(n,e){const t=Qo(e.snapshotVersion),r=Qo(e.lastLimboFreeSnapshotVersion);let i;i=Cf(e.target)?s1(n.yt,e.target):o1(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ho(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function C_(n){const e=a1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Nf(e,e.limit,"L"):e}function Sg(n,e){return new P_(e.largestBatchId,cy(n.yt,e.overlayMutation))}function iT(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function sT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Qo(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}class zO{getBundleMetadata(e,t){return oT(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Jo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return oT(e).put((function(i){return{bundleId:i.id,createTime:Qo(Ct(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return aT(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:C_(a.bundledQuery),readTime:Jo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return aT(e).put((function(i){return{name:i.name,readTime:Qo(Ct(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function oT(n){return zt(n,ap)}function aT(n){return zt(n,lp)}class mp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new mp(e,r)}getOverlay(e,t){return Zu(e).get(iT(this.userId,t)).next((r=>r?Sg(this.serializer,r):null))}getOverlays(e,t){const r=ti();return U.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,l)=>{const h=new P_(t,l);i.push(this.St(e,h))})),U.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add(pn(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Zu(e).Z(Xg,h))})),U.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ti(),a=pn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Zu(e).J(Xg,l).next((h=>{for(const f of h){const p=Sg(this.serializer,f);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=ti();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zu(e).ee({index:hA,range:h},((f,p,g)=>{const v=Sg(this.serializer,p);a.size()<i||v.largestBatchId===l?(a.set(v.getKey(),v),l=v.largestBatchId):g.done()})).next((()=>a))}St(e,t){return Zu(e).put((function(i,a,l){const[h,f,p]=iT(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Wc(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Zu(n){return zt(n,up)}class qO{bt(e){return zt(e,g_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Lc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ni(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Di(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?TA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):dp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ue(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=Al,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(pt(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ae.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Co.Kt=new Co;const Xa=255;function $O(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function lT(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=$O(255&r[a]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class WO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=lT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=lT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Xa),this.sn(255)}_n(){this.an(Xa),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Xa?(this.sn(Xa),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Xa?(this.an(Xa),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class GO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ec{constructor(){this.cn=new WO,this.ln=new HO(this.cn),this.hn=new GO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ko{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ko(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:cf(this.En),directionalValue:cf(this.dn),orderedDocumentKey:cf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function ys(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=uT(n.En,e.En),t!==0?t:(t=uT(n.dn,e.dn),t!==0?t:ae.comparator(n.In,e.In)))}function uT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function cf(n){return b0()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function cT(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class hT{constructor(e){this.mn=new Xe(((t,r)=>mt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(me(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Qg(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ro(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const f=r[a];if(!this.Sn(h,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new Xe(mt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new tf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new tf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new tf(r.field,r.dir==="asc"?0:1)));return new Rf(Rf.UNKNOWN_ID,this.collectionId,t,Oc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function f1(n){if(me(n instanceof Ue||n instanceof Ye,20012),n instanceof Ue){if(n instanceof NA){const t=n.value.arrayValue?.values?.map((r=>Ue.create(n.field,"==",r)))||[];return Ye.create(t,"or")}return n}const e=n.filters.map((t=>f1(t)));return Ye.create(e,n.op)}function KO(n){if(n.getFilters().length===0)return[];const e=fy(f1(n));return me(p1(e),7391),hy(e)||dy(e)?[e]:e.getFilters()}function hy(n){return n instanceof Ue}function dy(n){return n instanceof Ye&&w_(n)}function p1(n){return hy(n)||dy(n)||(function(t){if(t instanceof Ye&&ry(t)){for(const r of t.getFilters())if(!hy(r)&&!dy(r))return!1;return!0}return!1})(n)}function fy(n){if(me(n instanceof Ue||n instanceof Ye,34018),n instanceof Ue)return n;if(n.filters.length===1)return fy(n.filters[0]);const e=n.filters.map((r=>fy(r)));let t=Ye.create(e,n.op);return t=Vf(t),p1(t)?t:(me(t instanceof Ye,64498),me(Pl(t),40251),me(t.filters.length>1,57927),t.filters.reduce(((r,i)=>k_(r,i))))}function k_(n,e){let t;return me(n instanceof Ue||n instanceof Ye,38388),me(e instanceof Ue||e instanceof Ye,25473),t=n instanceof Ue?e instanceof Ue?(function(i,a){return Ye.create([i,a],"and")})(n,e):dT(n,e):e instanceof Ue?dT(e,n):(function(i,a){if(me(i.filters.length>0&&a.filters.length>0,48005),Pl(i)&&Pl(a))return bA(i,a.getFilters());const l=ry(i)?i:a,h=ry(i)?a:i,f=l.filters.map((p=>k_(p,h)));return Ye.create(f,"or")})(n,e),Vf(t)}function dT(n,e){if(Pl(e))return bA(e,n.getFilters());{const t=e.filters.map((r=>k_(n,r)));return Ye.create(t,"or")}}function Vf(n){if(me(n instanceof Ue||n instanceof Ye,11850),n instanceof Ue)return n;const e=n.getFilters();if(e.length===1)return Vf(e[0]);if(PA(n))return n;const t=e.map((i=>Vf(i))),r=[];return t.forEach((i=>{i instanceof Ue?r.push(i):i instanceof Ye&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ye.create(r,n.op)}class QO{constructor(){this.Cn=new N_}addToCollectionParentIndex(e,t){return this.Cn.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(Yn.min())}updateCollectionGroup(e,t,r){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}}class N_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xe(Me.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Me.comparator)).toArray()}}const fT="IndexedDbIndexManager",qd=new Uint8Array(0);class JO{constructor(e,t){this.databaseId=t,this.vn=new N_,this.Fn=new Mi((r=>Ho(r)),((r,i)=>ah(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:pn(i)};return pT(e).put(a)}return U.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[JS(t),""],!1,!0);return pT(e).J(i).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ei(l.parent))}return r}))}addFieldIndex(e,t){const r=tc(e),i=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const l=el(e);return a.next((h=>{l.put(sT(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=tc(e),i=el(e),a=Za(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=tc(e),r=Za(e),i=el(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return U.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new hT(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Za(e);let i=!0;const a=new Map;return U.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{i&&(i=!!h),a.set(l,h)})))).next((()=>{if(i){let l=De();const h=[];return U.forEach(a,((f,p)=>{X(fT,`Using index ${(function(ee){return`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map((de=>`${de.fieldPath}:${de.kind}`)).join(",")}`})(f)} to execute ${Ho(t)}`);const g=(function(ee,de){const ve=Qg(de);if(ve===void 0)return null;for(const ye of kf(ee,ve.fieldPath))switch(ye.op){case"array-contains-any":return ye.value.arrayValue.values||[];case"array-contains":return[ye.value]}return null})(p,f),v=(function(ee,de){const ve=new Map;for(const ye of Ro(de))for(const b of kf(ee,ye.fieldPath))switch(b.op){case"==":case"in":ve.set(ye.fieldPath.canonicalString(),b.value);break;case"not-in":case"!=":return ve.set(ye.fieldPath.canonicalString(),b.value),Array.from(ve.values())}return null})(p,f),I=(function(ee,de){const ve=[];let ye=!0;for(const b of Ro(de)){const R=b.kind===0?WI(ee,b.fieldPath,ee.startAt):HI(ee,b.fieldPath,ee.startAt);ve.push(R.value),ye&&(ye=R.inclusive)}return new Fs(ve,ye)})(p,f),C=(function(ee,de){const ve=[];let ye=!0;for(const b of Ro(de)){const R=b.kind===0?HI(ee,b.fieldPath,ee.endAt):WI(ee,b.fieldPath,ee.endAt);ve.push(R.value),ye&&(ye=R.inclusive)}return new Fs(ve,ye)})(p,f),k=this.On(f,p,I),j=this.On(f,p,C),N=this.Nn(f,p,v),q=this.Bn(f.indexId,g,k,I.inclusive,j,C.inclusive,N);return U.forEach(q,(oe=>r.Y(oe,t.limit).next((ee=>{ee.forEach((de=>{const ve=ae.fromSegments(de.documentKey);l.has(ve)||(l=l.add(ve),h.push(ve))}))}))))})).next((()=>h))}return U.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=KO(Ye.create(e.filters,"and")).map((r=>sy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,l,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),p=f/(t!=null?t.length:1),g=[];for(let v=0;v<f;++v){const I=t?this.Ln(t[v/p]):qd,C=this.kn(e,I,r[v%p],i),k=this.qn(e,I,a[v%p],l),j=h.map((N=>this.kn(e,I,N,!0)));g.push(...this.createRange(C,k,j))}return g}kn(e,t,r,i){const a=new ko(e,ae.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new ko(e,ae.empty(),t,r);return i?a.An():a}xn(e,t){const r=new hT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const h of a)r.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return U.forEach(i,(a=>this.xn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new Xe(mt.comparator),g=!1;for(const v of f.filters)for(const I of v.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?g=!0:p=p.add(I.field));for(const v of f.orderBy)v.field.isKeyField()||(p=p.add(v.field));return p.size+(g?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new ec;for(const i of Ro(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const l=r.Pn(i.kind);Co.Kt.Dt(a,l)}return r.un()}Ln(e){const t=new ec;return Co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new ec;return Co.Kt.Dt(Wo(this.databaseId,t),r.Pn((function(a){const l=Ro(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new ec);let a=0;for(const l of Ro(e)){const h=r[a++];for(const f of i)if(this.Un(t,l.fieldPath)&&zc(h))i=this.Kn(i,l,h);else{const p=f.Pn(l.kind);Co.Kt.Dt(h,p)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const f=new ec;f.seed(h.un()),Co.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof Ue&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=tc(e),i=el(e);return(t?r.J(Yg,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const l=[];return U.forEach(a,(h=>i.get([h.indexId,this.uid]).next((f=>{l.push((function(g,v){const I=v?new Oc(v.sequenceNumber,new Yn(Jo(v.readTime),new ae(ei(v.documentKey)),v.largestBatchId)):Oc.empty(),C=g.fields.map((([k,j])=>new tf(mt.fromServerFormat(k),j)));return new Rf(g.indexId,g.collectionGroup,C,I)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Ce(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=tc(e),a=el(e);return this.Gn(e).next((l=>i.J(Yg,IDBKeyRange.bound(t,t)).next((h=>U.forEach(h,(f=>a.put(sT(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return U.forEach(t,((i,a)=>{const l=r.get(i.collectionGroup);return(l?U.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((h=>(r.set(i.collectionGroup,h),U.forEach(h,(f=>this.zn(e,i,f).next((p=>{const g=this.jn(a,f);return p.isEqual(g)?U.resolve():this.Jn(e,a,f,p,g)})))))))}))}Hn(e,t,r,i){return Za(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Za(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Za(e);let a=new Xe(ys);return i.ee({index:cA,range:IDBKeyRange.only([r.indexId,this.uid,cf(this.$n(r,t))])},((l,h)=>{a=a.add(new ko(r.indexId,t,cT(h.arrayValue),cT(h.directionalValue)))})).next((()=>a))}jn(e,t){let r=new Xe(ys);const i=this.Qn(t,e);if(i==null)return r;const a=Qg(t);if(a!=null){const l=e.data.field(a.fieldPath);if(zc(l))for(const h of l.arrayValue.values||[])r=r.add(new ko(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new ko(t.indexId,e.key,qd,i));return r}Jn(e,t,r,i,a){X(fT,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,g,v,I){const C=f.getIterator(),k=p.getIterator();let j=Ya(C),N=Ya(k);for(;j||N;){let q=!1,oe=!1;if(j&&N){const ee=g(j,N);ee<0?oe=!0:ee>0&&(q=!0)}else j!=null?oe=!0:q=!0;q?(v(N),N=Ya(k)):oe?(I(j),j=Ya(C)):(j=Ya(C),N=Ya(k))}})(i,a,ys,(h=>{l.push(this.Hn(e,t,r,h))}),(h=>{l.push(this.Yn(e,t,r,h))})),U.waitFor(l)}Gn(e){let t=1;return el(e).ee({index:uA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,h)=>ys(l,h))).filter(((l,h,f)=>!h||ys(l,f[h-1])!==0));const i=[];i.push(e);for(const l of r){const h=ys(l,e),f=ys(l,t);if(h===0)i[0]=e.An();else if(h>0&&f<0)i.push(l),i.push(l.An());else if(f>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const h=i[l].Vn(this.uid,qd,ae.empty()),f=i[l+1].Vn(this.uid,qd,ae.empty());a.push(IDBKeyRange.bound(h,f))}return a}Zn(e,t){return ys(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mT)}getMinOffset(e,t){return U.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||ue(44426))))).next(mT)}}function pT(n){return zt(n,jc)}function Za(n){return zt(n,Ic)}function tc(n){return zt(n,m_)}function el(n){return zt(n,Ec)}function mT(n){me(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;d_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Yn(e.readTime,e.documentKey,t)}const gT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},m1=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function g1(n,e,t){const r=n.store(Er),i=n.store(El),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=r.ee({range:l},((g,v,I)=>(h++,I.delete())));a.push(f.next((()=>{me(h===1,47070,{batchId:t.batchId})})));const p=[];for(const g of t.mutations){const v=oA(e,g.key.path,t.batchId);a.push(i.delete(v)),p.push(g.key)}return U.waitFor(a).next((()=>p))}function Of(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ue(14731);e=n.noDocument}return JSON.stringify(e).length}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(m1,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class gp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){me(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new gp(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).ee({index:Vo,range:r},((i,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=ol(e),l=_s(e);return l.add({}).next((h=>{me(typeof h=="number",49019);const f=new A_(h,t,r,i),p=(function(C,k,j){const N=j.baseMutations.map((oe=>Wc(C.yt,oe))),q=j.mutations.map((oe=>Wc(C.yt,oe)));return{userId:k,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:N,mutations:q}})(this.serializer,this.userId,f),g=[];let v=new Xe(((I,C)=>Ce(I.canonicalString(),C.canonicalString())));for(const I of i){const C=oA(this.userId,I.key.path,h);v=v.add(I.key.path.popLast()),g.push(l.put(p)),g.push(a.put(C,CV))}return v.forEach((I=>{g.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),U.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return _s(e).get(t).next((r=>r?(me(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),bo(this.serializer,r)):null))}er(e,t){return this.Xn[t]?U.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return _s(e).ee({index:Vo,range:i},((l,h,f)=>{h.userId===this.userId&&(me(h.batchId>=r,47524,{tr:r}),a=bo(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=bs;return _s(e).ee({index:Vo,range:t,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bs],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).J(Vo,t).next((r=>r.map((i=>bo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ol(e).ee({range:i},((l,h,f)=>{const[p,g,v]=l,I=ei(g);if(p===this.userId&&t.path.isEqual(I))return _s(e).get(v).next((C=>{if(!C)throw ue(61480,{nr:l,batchId:v});me(C.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:C.userId,batchId:v}),a.push(bo(this.serializer,C))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ce);const i=[];return t.forEach((a=>{const l=nf(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=ol(e).ee({range:h},((p,g,v)=>{const[I,C,k]=p,j=ei(C);I===this.userId&&a.path.isEqual(j)?r=r.add(k):v.done()}));i.push(f)})),U.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=nf(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Xe(Ce);return ol(e).ee({range:l},((f,p,g)=>{const[v,I,C]=f,k=ei(I);v===this.userId&&r.isPrefixOf(k)?k.length===i&&(h=h.add(C)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(_s(e).get(a).next((l=>{if(l===null)throw ue(35274,{batchId:a});me(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(bo(this.serializer,l))})))})),U.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return g1(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),U.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return U.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return ol(e).ee({range:r},((a,l,h)=>{if(a[0]===this.userId){const f=ei(a[1]);i.push(f)}else h.done()})).next((()=>{me(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return y1(e,this.userId,t)}_r(e){return _1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:bs,lastStreamToken:""}))}}function y1(n,e,t){const r=nf(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return ol(n).ee({range:a,X:!0},((h,f,p)=>{const[g,v,I]=h;g===e&&v===i&&(l=!0),p.done()})).next((()=>l))}function _s(n){return zt(n,Er)}function ol(n){return zt(n,El)}function _1(n){return zt(n,Mc)}class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}class YO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Yo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>we.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>tl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(me(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return tl(e).ee(((l,h)=>{const f=hc(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))})).next((()=>U.waitFor(a))).next((()=>i))}forEachTarget(e,t){return tl(e).ee(((r,i)=>{const a=hc(i);t(a)}))}lr(e){return yT(e).get(bf).next((t=>(me(t!==null,2888),t)))}hr(e,t){return yT(e).put(bf,t)}Pr(e,t){return tl(e).put(d1(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ho(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return tl(e).ee({range:i,index:lA},((l,h,f)=>{const p=hc(h);ah(t,p.target)&&(a=p,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=Es(e);return t.forEach((l=>{const h=pn(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))})),U.waitFor(i)}removeMatchingKeys(e,t,r){const i=Es(e);return U.forEach(t,(a=>{const l=pn(a.path);return U.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=Es(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Es(e);let a=De();return i.ee({range:r,X:!0},((l,h,f)=>{const p=ei(l[1]),g=new ae(p);a=a.add(g)})).next((()=>a))}containsKey(e,t){const r=pn(t.path),i=IDBKeyRange.bound([r],[JS(r)],!1,!0);let a=0;return Es(e).ee({index:p_,X:!0,range:i},(([l,h],f,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,t){return tl(e).get(t).next((r=>r?hc(r):null))}}function tl(n){return zt(n,Il)}function yT(n){return zt(n,Uo)}function Es(n){return zt(n,Tl)}const _T="LruGarbageCollector",XO=1048576;function vT([n,e],[t,r]){const i=Ce(n,t);return i===0?Ce(e,r):i}class ZO{constructor(e){this.Ir=e,this.buffer=new Xe(vT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(_T,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hs(t)?X(_T,"Ignoring IndexedDB error during garbage collection: ",t):await Ws(t)}await this.Vr(3e5)}))}}class eL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return U.resolve(kn.ce);const r=new ZO(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(gT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,l,h,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,h=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(p=Date.now(),nl()<=Le.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function w1(n,e){return new eL(n,e)}class tL{constructor(e,t){this.db=e,this.garbageCollector=w1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return $d(e,r)}removeReference(e,t,r){return $d(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $d(e,t)}br(e,t){return(function(i,a){let l=!1;return _1(i).te((h=>y1(i,h,a).next((f=>(f&&(l=!0),U.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((l,h)=>{if(h<=t){const f=this.br(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,we.min()),Es(e).delete((function(v){return[0,pn(v.path)]})(l)))))}));i.push(f)}})).next((()=>U.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $d(e,t)}Sr(e,t){const r=Es(e);let i,a=kn.ce;return r.ee({index:p_},(([l,h],{path:f,sequenceNumber:p})=>{l===0?(a!==kn.ce&&t(new ae(ei(i)),a),a=p,i=f):a=kn.ce})).next((()=>{a!==kn.ce&&t(new ae(ei(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $d(n,e){return Es(n).put((function(r,i){return{targetId:0,path:pn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class E1{constructor(){this.changes=new Mi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?U.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return So(e).put(r)}removeEntry(e,t,r){return So(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Df(l),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=ht.newInvalidDocument(t);return So(e).ee({index:rf,range:IDBKeyRange.only(nc(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return So(e).ee({index:rf,range:IDBKeyRange.only(nc(t))},((i,a)=>{r={document:this.Cr(t,a),size:Of(a)}})).next((()=>r))}getEntries(e,t){let r=Dn();return this.Fr(e,t,((i,a)=>{const l=this.Cr(i,a);r=r.insert(i,l)})).next((()=>r))}Mr(e,t){let r=Dn(),i=new st(ae.comparator);return this.Fr(e,t,((a,l)=>{const h=this.Cr(a,l);r=r.insert(a,h),i=i.insert(a,Of(l))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return U.resolve();let i=new Xe(IT);t.forEach((f=>i=i.add(f)));const a=IDBKeyRange.bound(nc(i.first()),nc(i.last())),l=i.getIterator();let h=l.getNext();return So(e).ee({index:rf,range:a},((f,p,g)=>{const v=ae.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;h&&IT(h,v)<0;)r(h,null),h=l.getNext();h&&h.isEqual(v)&&(r(h,p),h=l.hasNext()?l.getNext():null),h?g.j(nc(h)):g.done()})).next((()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Df(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return So(e).J(IDBKeyRange.bound(h,f,!0)).next((p=>{a?.incrementDocumentReadCount(p.length);let g=Dn();for(const v of p){const I=this.Cr(ae.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);I.isFoundDocument()&&(uh(t,I)||i.has(I.key))&&(g=g.insert(I.key,I))}return g}))}getAllFromCollectionGroup(e,t,r,i){let a=Dn();const l=ET(t,r),h=ET(t,Yn.max());return So(e).ee({index:aA,range:IDBKeyRange.bound(l,h,!0)},((f,p,g)=>{const v=this.Cr(ae.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(v.key,v),a.size===i&&g.done()})).next((()=>a))}newChangeBuffer(e){return new rL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return wT(e).get(Jg).next((t=>(me(!!t,20021),t)))}Dr(e,t){return wT(e).put(Jg,t)}Cr(e,t){if(t){const r=BO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(we.min())))return r}return ht.newInvalidDocument(e)}}function I1(n){return new nL(n)}class rL extends E1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Mi((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Xe(((a,l)=>Ce(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=rT(this.Nr.serializer,l);i=i.add(a.path.popLast());const p=Of(f);r+=p-h.size,t.push(this.Nr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=rT(this.Nr.serializer,l.convertToNoDocument(we.min()));t.push(this.Nr.addEntry(e,a,f))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),U.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function wT(n){return zt(n,Fc)}function So(n){return zt(n,xf)}function nc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ET(n,e){const t=e.documentKey.path.toArray();return[n,Df(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ce(t[a],r[a]),i)return i;return i=Ce(t.length,r.length),i||(i=Ce(t[t.length-2],r[r.length-2]),i||Ce(t[t.length-1],r[r.length-1]))}class iL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class T1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Ac(r.mutation,i,Nn.empty(),Qe.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const i=ti();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=uc();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ti();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,i){let a=Dn();const l=Sc(),h=(function(){return Sc()})();return t.forEach(((f,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof Fi)?a=a.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),Ac(g.mutation,p,g.mutation.getFieldMask(),Qe.now())):l.set(p.key,Nn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,g)=>l.set(p,g))),t.forEach(((p,g)=>h.set(p,new iL(g,l.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Sc();let i=new st(((l,h)=>l-h)),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let g=r.get(f)||Nn.empty();g=h.applyToLocalView(p,g),r.set(f,g);const v=(i.get(h.batchId)||De()).add(f);i=i.insert(h.batchId,v)}))})).next((()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,g=f.value,v=jA();g.forEach((I=>{if(!a.has(I)){const C=HA(t.get(I),r.get(I));C!==null&&v.set(I,C),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return U.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):U.resolve(ti());let h=wl,f=a;return l.next((p=>U.forEach(p,((g,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),a.get(g)?U.resolve():this.remoteDocumentCache.getEntry(e,g).next((I=>{f=f.insert(g,I)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,De()))).next((g=>({batchId:h,changes:FA(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next((r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=uc();return this.indexManager.getCollectionParents(e,a).next((h=>U.forEach(h,(f=>{const p=(function(v,I){return new Li(I,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((g=>{g.forEach(((v,I)=>{l=l.insert(v,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((f,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,ht.newInvalidDocument(g)))}));let h=uc();return l.forEach(((f,p)=>{const g=a.get(f);g!==void 0&&Ac(g.mutation,p,Nn.empty(),Qe.now()),uh(t,p)&&(h=h.insert(f,p))})),h}))}}class sL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return U.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ct(i.createTime)}})(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:C_(i.bundledQuery),readTime:Ct(i.readTime)}})(t)),U.resolve()}}class oL{constructor(){this.overlays=new st(ae.comparator),this.qr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ti();return U.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),U.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,t,r){const i=ti(),a=t.length+1,l=new ae(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return U.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new st(((p,g)=>p-g));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=ti(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=ti(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,g)=>h.set(p,g))),!(h.size()>=i)););return U.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new P_(t,r));let a=this.qr.get(t);a===void 0&&(a=De(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class aL{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}}class D_{constructor(){this.Qr=new Xe(Ht.$r),this.Ur=new Xe(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ae(new Me([])),r=new Ht(t,e),i=new Ht(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ae(new Me([])),r=new Ht(t,e),i=new Ht(t,e+1);let a=De();return this.Ur.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ae.comparator(e.key,t.key)||Ce(e.Yr,t.Yr)}static Kr(e,t){return Ce(e.Yr,t.Yr)||ae.comparator(e.key,t.key)}}class lL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(Ht.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new A_(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new Ht(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return U.resolve(l)}lookupMutationBatch(e,t){return U.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?bs:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(l=>{const h=this.Xr(l.Yr);a.push(h)})),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xe(Ce);return t.forEach((i=>{const a=new Ht(i,0),l=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ae.isDocumentKey(a)||(a=a.child(""));const l=new Ht(new ae(a),0);let h=new Xe(Ce);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(h=h.add(f.Yr)),!0)}),l),U.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){me(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(t.mutations,(i=>{const a=new Ht(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uL{constructor(e){this.ri=e,this.docs=(function(){return new st(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return U.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ht.newInvalidDocument(i))})),U.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Dn();const l=t.path,h=new ae(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||d_(tA(g),r)<=0||(i.has(g.key)||uh(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ue(9500)}ii(e,t){return U.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new cL(this)}getSize(e){return U.resolve(this.size)}}class cL extends E1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),U.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hL{constructor(e){this.persistence=e,this.si=new Mi((t=>Ho(t)),ah),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new D_,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),U.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Pr(t),U.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),U.waitFor(a).next((()=>i))}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return U.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),U.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),U.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),U.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return U.resolve(r)}containsKey(e,t){return U.resolve(this._i.containsKey(t))}}class V_{constructor(e,t){this.ui={},this.overlays={},this.ci=new kn(0),this.li=!1,this.li=!0,this.hi=new aL,this.referenceDelegate=e(this),this.Pi=new hL(this),this.indexManager=new QO,this.remoteDocumentCache=(function(i){return new uL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new h1(t),this.Ii=new sL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);const i=new dL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return U.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dL extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Ri=new D_,this.Vi=null}static mi(e){return new yp(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),U.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),U.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,(r=>{const i=ae.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return U.or([()=>U.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.pi=new Mi((r=>pn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=w1(this,t)}static mi(e,t){return new Lf(e,t)}Ei(){}di(e){return U.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return U.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?U.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,we.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),U.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=of(e.data.value)),t}br(e,t,r){return U.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fL{constructor(e){this.serializer=e}k(e,t,r,i){const a=new op("createOrUpgrade",t);r<1&&i>=1&&((function(f){f.createObjectStore(oh)})(e),(function(f){f.createObjectStore(Mc,{keyPath:bV}),f.createObjectStore(Er,{keyPath:DI,autoIncrement:!0}).createIndex(Vo,VI,{unique:!0}),f.createObjectStore(El)})(e),TT(e),(function(f){f.createObjectStore(Po)})(e));let l=U.resolve();return r<3&&i>=3&&(r!==0&&((function(f){f.deleteObjectStore(Tl),f.deleteObjectStore(Il),f.deleteObjectStore(Uo)})(e),TT(e)),l=l.next((()=>(function(f){const p=f.store(Uo),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:we.min().toTimestamp(),targetCount:0};return p.put(bf,g)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(Er).J().next((v=>{f.deleteObjectStore(Er),f.createObjectStore(Er,{keyPath:DI,autoIncrement:!0}).createIndex(Vo,VI,{unique:!0});const I=p.store(Er),C=v.map((k=>I.put(k)));return U.waitFor(C)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Sl,{keyPath:FV})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.yi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Fc)})(e),this.wi(a))))),r<7&&i>=7&&(l=l.next((()=>this.Si(a)))),r<8&&i>=8&&(l=l.next((()=>this.bi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.Di(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(ap,{keyPath:jV})})(e),(function(f){f.createObjectStore(lp,{keyPath:UV})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(up,{keyPath:GV});p.createIndex(Xg,KV,{unique:!1}),p.createIndex(hA,QV,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(xf,{keyPath:kV});p.createIndex(rf,NV),p.createIndex(aA,DV)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Po)))),r<14&&i>=14&&(l=l.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(f){f.createObjectStore(m_,{keyPath:BV,autoIncrement:!0}).createIndex(Yg,zV,{unique:!1}),f.createObjectStore(Ec,{keyPath:qV}).createIndex(uA,$V,{unique:!1}),f.createObjectStore(Ic,{keyPath:WV}).createIndex(cA,HV,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(Ec).clear()})).next((()=>{t.objectStore(Ic).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(g_,{keyPath:JV})})(e)}))),r<18&&i>=18&&b0()&&(l=l.next((()=>{t.objectStore(Ec).clear()})).next((()=>{t.objectStore(Ic).clear()}))),l}wi(e){let t=0;return e.store(Po).ee(((r,i)=>{t+=Of(i)})).next((()=>{const r={byteSize:t};return e.store(Fc).put(Jg,r)}))}yi(e){const t=e.store(Mc),r=e.store(Er);return t.J().next((i=>U.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,bs],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Vo,l).next((h=>U.forEach(h,(f=>{me(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=bo(this.serializer,f);return g1(e,a.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Tl),r=e.store(Po);return e.store(Uo).get(bf).next((i=>{const a=[];return r.ee(((l,h)=>{const f=new Me(l),p=(function(v){return[0,pn(v)]})(f);a.push(t.get(p).next((g=>g?U.resolve():(v=>t.put({targetId:0,path:pn(v),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>U.waitFor(a)))}))}bi(e,t){e.createObjectStore(jc,{keyPath:MV});const r=t.store(jc),i=new N_,a=l=>{if(i.add(l)){const h=l.lastSegment(),f=l.popLast();return r.put({collectionId:h,parent:pn(f)})}};return t.store(Po).ee({X:!0},((l,h)=>{const f=new Me(l);return a(f.popLast())})).next((()=>t.store(El).ee({X:!0},(([l,h,f],p)=>{const g=ei(h);return a(g.popLast())}))))}Di(e){const t=e.store(Il);return t.ee(((r,i)=>{const a=hc(i),l=d1(this.serializer,a);return t.put(l)}))}Ci(e,t){const r=t.store(Po),i=[];return r.ee(((a,l)=>{const h=t.store(xf),f=(function(v){return v.document?new ae(Me.fromString(v.document.name).popFirst(5)):v.noDocument?ae.fromSegments(v.noDocument.path):v.unknownDocument?ae.fromSegments(v.unknownDocument.path):ue(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(p))})).next((()=>U.waitFor(i)))}Fi(e,t){const r=t.store(Er),i=I1(this.serializer),a=new V_(yp.mi,this.serializer.yt);return r.J().next((l=>{const h=new Map;return l.forEach((f=>{let p=h.get(f.userId)??De();bo(this.serializer,f).keys().forEach((g=>p=p.add(g))),h.set(f.userId,p)})),U.forEach(h,((f,p)=>{const g=new Gt(p),v=mp.wt(this.serializer,g),I=a.getIndexManager(g),C=gp.wt(g,this.serializer,I,a.referenceDelegate);return new T1(i,C,v,I).recalculateAndSaveOverlaysForDocumentKeys(new Zg(t,kn.ce),f).next()}))}))}}function TT(n){n.createObjectStore(Tl,{keyPath:OV}).createIndex(p_,LV,{unique:!0}),n.createObjectStore(Il,{keyPath:"targetId"}).createIndex(lA,VV,{unique:!0}),n.createObjectStore(Uo)}const vs="IndexedDbPersistence",Ag=18e5,Rg=5e3,Pg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",S1="main";class O_{constructor(e,t,r,i,a,l,h,f,p,g,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=l,this.document=h,this.xi=p,this.Oi=g,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!O_.v())throw new J(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tL(this,i),this.$i=t+S1,this.serializer=new h1(f),this.Ui=new ni(this.$i,this.Ni,new fL(this.serializer)),this.hi=new qO,this.Pi=new YO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=I1(this.serializer),this.Ii=new zO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&bt(vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Pg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new kn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Hs(e))return X(vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X(vs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return rc(e).get(Ja).next((t=>U.resolve(this.es(t))))}ts(e){return Wd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ag)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=zt(t,Sl);return r.J().next((i=>{const a=this.ss(i,Ag),l=i.filter((h=>a.indexOf(h)===-1));return U.forEach(l,(h=>r.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?U.resolve(!0):rc(e).get(Ja).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new J(H.FAILED_PRECONDITION,Pg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wd(e).J().next((r=>this.ss(r,Rg).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&X(vs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[oh,Sl],(e=>{const t=new Zg(e,kn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Wd(e).J().next((t=>this.ss(t,Ag).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return gp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return mp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){X(vs,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?ZV:f===17?mA:f===16?XV:f===15?y_:f===14?pA:f===13?fA:f===12?YV:f===11?dA:void ue(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,a,(h=>(l=new Zg(h,this.ci?this.ci.next():kn.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new J(H.FAILED_PRECONDITION,nA);return r(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>r(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return rc(e).get(Ja).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Rg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new J(H.FAILED_PRECONDITION,Pg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rc(e).put(Ja,t)}static v(){return ni.v()}Zi(e){const t=rc(e);return t.get(Ja).next((r=>this.es(r)?(X(vs,"Releasing primary lease."),t.delete(Ja)):U.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;x0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return X(vs,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(vs,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rc(n){return zt(n,oh)}function Wd(n){return zt(n,Sl)}function L_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class M_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=De(),i=De();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new M_(e,t.fromCache,r,i)}}class pL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class A1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return x0()?8:iA(vt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new pL;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(nl()<=Le.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(nl()<=Le.DEBUG&&X("QueryEngine","Query:",rl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(nl()<=Le.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):U.resolve())}ys(e,t){if(GI(t))return U.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Nf(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=De(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,h);return this.Cs(t,p,l,f.readTime)?this.ys(e,Nf(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,i){return GI(t)||i.isEqual(we.min())?U.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,i)?U.resolve(null):(nl()<=Le.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rl(t)),this.vs(e,l,t,eA(i,wl)).next((h=>h)))}))}Ds(e,t){let r=new Xe(LA(e));return t.forEach(((i,a)=>{uh(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return nl()<=Le.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",rl(t)),this.ps.getDocumentsMatchingQuery(e,t,Yn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const F_="LocalStore",mL=3e8;class gL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new st(Ce),this.xs=new Mi((a=>Ho(a)),ah),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function R1(n,e,t,r){return new gL(n,e,t,r)}async function P1(n,e){const t=le(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=De();for(const p of i){l.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of a){h.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:l,addedBatchIds:h})))}))}))}function yL(n,e){const t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,p,g){const v=p.batch,I=v.keys();let C=U.resolve();return I.forEach((k=>{C=C.next((()=>g.getEntry(f,k))).next((j=>{const N=p.docVersions.get(k);me(N!==null,48541),j.version.compareTo(N)<0&&(v.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),g.addEntry(j)))}))})),C.next((()=>h.mutationQueue.removeMutationBatch(f,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=De();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function x1(n){const e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _L(n,e){const t=le(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach(((g,v)=>{const I=i.get(v);if(!I)return;h.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,v))));let C=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?C=C.withResumeToken(Tt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),i=i.insert(v,C),(function(j,N,q){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=mL?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(I,C,g)&&h.push(t.Pi.updateTargetData(a,C))}));let f=Dn(),p=De();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),h.push(b1(a,l,e.documentUpdates).next((g=>{f=g.ks,p=g.qs}))),!r.isEqual(we.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(g)}return U.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function b1(n,e,t){let r=De(),i=De();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Dn();return t.forEach(((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(we.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):X(F_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)})),{ks:l,qs:i}}))}function vL(n,e){const t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bs),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function kl(n,e){const t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,U.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new Pi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Nl(n,e,t){const r=le(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Hs(l))throw l;X(F_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Mf(n,e,t){const r=le(n);let i=we.min(),a=De();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,g){const v=le(f),I=v.xs.get(g);return I!==void 0?U.resolve(v.Ms.get(I)):v.Pi.getTargetData(p,g)})(r,l,En(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:we.min(),t?a:De()))).next((h=>(N1(r,OA(e),h),{documents:h,Qs:a})))))}function C1(n,e){const t=le(n),r=le(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function k1(n,e){const t=le(n),r=t.Os.get(e)||we.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,eA(r,wl),Number.MAX_SAFE_INTEGER))).then((i=>(N1(t,e,i),i)))}function N1(n,e,t){let r=n.Os.get(e)||we.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}async function wL(n,e,t,r){const i=le(n);let a=De(),l=Dn();for(const p of t){const g=e.$s(p.metadata.name);p.document&&(a=a.add(g));const v=e.Us(p);v.setReadTime(e.Ks(p.metadata.readTime)),l=l.insert(g,v)}const h=i.Ns.newChangeBuffer({trackRemovals:!0}),f=await kl(i,(function(g){return En(Wl(Me.fromString(`__bundle__/docs/${g}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(p=>b1(p,h,l).next((g=>(h.apply(p),g))).next((g=>i.Pi.removeMatchingKeysForTargetId(p,f.targetId).next((()=>i.Pi.addMatchingKeys(p,a,f.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(p,g.ks,g.qs))).next((()=>g.ks))))))}async function EL(n,e,t=De()){const r=await kl(n,En(C_(e.bundledQuery))),i=le(n);return i.persistence.runTransaction("Save named query","readwrite",(a=>{const l=Ct(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ii.saveNamedQuery(a,e);const h=r.withResumeToken(Tt.EMPTY_BYTE_STRING,l);return i.Ms=i.Ms.insert(h.targetId,h),i.Pi.updateTargetData(a,h).next((()=>i.Pi.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>i.Pi.addMatchingKeys(a,t,r.targetId))).next((()=>i.Ii.saveNamedQuery(a,e)))}))}const D1="firestore_clients";function ST(n,e){return`${D1}_${n}_${e}`}const V1="firestore_mutations";function AT(n,e,t){let r=`${V1}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const O1="firestore_targets";function xg(n,e){return`${O1}_${n}_${e}`}const Kr="SharedClientState";class Ff{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new J(i.error.code,i.error.message))),l?new Ff(e,t,i.state,a):(bt(Kr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new J(r.error.code,r.error.message))),a?new Rc(e,r.state,i):(bt(Kr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=I_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=sA(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new jf(e,a):(bt(Kr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class j_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new j_(t.clientId,t.onlineState):(bt(Kr,`Failed to parse online state: ${e}`),null)}}class py{constructor(){this.activeTargetIds=I_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bg{constructor(e,t,r,i,a){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new st(Ce),this.started=!1,this.Xs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=ST(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new py),this.ro=new RegExp(`^${D1}_${l}_([^_]*)$`),this.io=new RegExp(`^${V1}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${O1}_${l}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(ST(this.persistenceKey,r));if(i){const a=jf.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(xg(this.persistenceKey,e));if(i){const a=Rc.Ws(e,i);a&&(r=a.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return X(Kr,"READ",e,t),t}setItem(e,t){X(Kr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){X(Kr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(X(Kr,"EVENT",t.key,t.newValue),t.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(a){let l=kn.ce;if(a!=null)try{const h=JSON.parse(a);me(typeof h=="number",30636,{So:a}),l=h}catch(h){bt(Kr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);r!==kn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new Ff(this.currentUser,e,t,r),a=AT(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const t=AT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=xg(this.persistenceKey,e),a=new Rc(e,t,r);this.setItem(i,a.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return jf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Ff.Ws(new Gt(a),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return Rc.Ws(i,t)}uo(e){return j_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);X(Kr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),l=[],h=[];return a.forEach((f=>{i.has(f)||l.push(f)})),i.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=I_();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class L1{constructor(){this.Mo=new py,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new py,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IL{Oo(e){}shutdown(){}}const RT="ConnectivityMonitor";class PT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(RT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(RT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hd=null;function my(){return Hd===null?Hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hd++,"0x"+Hd.toString(16)}const Cg="RestConnection",TL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ey?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const l=my(),h=this.zo(e,t.toUriEncodedString());X(Cg,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:p}=new URL(h),g=zs(p);return this.Jo(e,h,f,r,g).then((v=>(X(Cg,`Received RPC '${e}' ${l}: `,v),v)),(v=>{throw oi(Cg,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v}))}Ho(e,t,r,i,a,l){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=TL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class AL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cn="WebChannelConnection";class RL extends SL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const l=my();return new Promise(((h,f)=>{const p=new qS;p.setWithCredentials(!0),p.listenOnce($S.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ef.NO_ERROR:const v=p.getResponseJson();X(cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case ef.TIMEOUT:X(cn,`RPC '${e}' ${l} timed out`),f(new J(H.DEADLINE_EXCEEDED,"Request time out"));break;case ef.HTTP_ERROR:const I=p.getStatus();if(X(cn,`RPC '${e}' ${l} failed with status:`,I,"response text:",p.getResponseText()),I>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const k=C?.error;if(k&&k.status&&k.message){const j=(function(q){const oe=q.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(oe)>=0?oe:H.UNKNOWN})(k.status);f(new J(j,k.message))}else f(new J(H.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new J(H.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{X(cn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(i);X(cn,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const i=my(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=GS(),h=HS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const g=a.join("");X(cn,`Creating RPC '${e}' stream ${i}: ${g}`,f);const v=l.createWebChannel(g,f);this.I_(v);let I=!1,C=!1;const k=new AL({Yo:N=>{C?X(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(I||(X(cn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),I=!0),X(cn,`RPC '${e}' stream ${i} sending:`,N),v.send(N))},Zo:()=>v.close()}),j=(N,q,oe)=>{N.listen(q,(ee=>{try{oe(ee)}catch(de){setTimeout((()=>{throw de}),0)}}))};return j(v,lc.EventType.OPEN,(()=>{C||(X(cn,`RPC '${e}' stream ${i} transport opened.`),k.o_())})),j(v,lc.EventType.CLOSE,(()=>{C||(C=!0,X(cn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(v))})),j(v,lc.EventType.ERROR,(N=>{C||(C=!0,oi(cn,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),k.a_(new J(H.UNAVAILABLE,"The operation could not be completed")))})),j(v,lc.EventType.MESSAGE,(N=>{if(!C){const q=N.data[0];me(!!q,16349);const oe=q,ee=oe?.error||oe[0]?.error;if(ee){X(cn,`RPC '${e}' stream ${i} received error:`,ee);const de=ee.status;let ve=(function(R){const x=Lt[R];if(x!==void 0)return QA(x)})(de),ye=ee.message;ve===void 0&&(ve=H.INTERNAL,ye="Unknown error status: "+de+" with message "+ee.message),C=!0,k.a_(new J(ve,ye)),v.close()}else X(cn,`RPC '${e}' stream ${i} received:`,q),k.u_(q)}})),j(h,WS.STAT_EVENT,(N=>{N.stat===Gg.PROXY?X(cn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Gg.NOPROXY&&X(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function M1(){return typeof window<"u"?window:null}function hf(){return typeof document<"u"?document:null}function fh(n){return new kO(n,!0)}class U_{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const xT="PersistentStream";class F1{constructor(e,t,r,i,a,l,h,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new J(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return X(xT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(X(xT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PL extends F1{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=VO(this.serializer,e),r=(function(a){if(!("targetChange"in a))return we.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?we.min():l.readTime?Ct(l.readTime):we.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=uy(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=Cf(f)?{documents:s1(a,f)}:{query:o1(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=ZA(a,l.resumeToken);const p=ay(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(we.min())>0){h.readTime=Cl(a,l.snapshotVersion.toTimestamp());const p=ay(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const r=LO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=uy(this.serializer),t.removeTarget=e,this.q_(t)}}class xL extends F1{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OO(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=uy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Wc(this.serializer,r)))};this.q_(t)}}class bL{}class CL extends bL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,ly(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(H.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,ly(t,r),i,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new J(H.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):X("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xo="RemoteStore";class NL{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Ks(this)&&(X(Xo,"Restarting streams for network reachability change."),await(async function(f){const p=le(f);p.Ea.add(4),await Kl(p),p.Ra.set("Unknown"),p.Ea.delete(4),await ph(p)})(this))}))})),this.Ra=new kL(r,i)}}async function ph(n){if(Ks(n))for(const e of n.da)await e(!0)}async function Kl(n){for(const e of n.da)await e(!1)}function _p(n,e){const t=le(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),q_(t)?z_(t):Jl(t).O_()&&B_(t,e))}function Dl(n,e){const t=le(n),r=Jl(t);t.Ia.delete(e),r.O_()&&j1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ks(t)&&t.Ra.set("Unknown"))}function B_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jl(n).Y_(e)}function j1(n,e){n.Va.Ue(e),Jl(n).Z_(e)}function z_(n){n.Va=new PO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Jl(n).start(),n.Ra.ua()}function q_(n){return Ks(n)&&!Jl(n).x_()&&n.Ia.size>0}function Ks(n){return le(n).Ea.size===0}function U1(n){n.Va=void 0}async function DL(n){n.Ra.set("Online")}async function VL(n){n.Ia.forEach(((e,t)=>{B_(n,e)}))}async function OL(n,e){U1(n),q_(n)?(n.Ra.ha(e),z_(n)):n.Ra.set("Unknown")}async function LL(n,e,t){if(n.Ra.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))})(n,e)}catch(r){X(Xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uf(n,r)}else if(e instanceof uf?n.Va.Ze(e):e instanceof YA?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const r=await x1(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(p);g&&a.Ia.set(p,g.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,p)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(Tt.EMPTY_BYTE_STRING,g.snapshotVersion)),j1(a,f);const v=new Pi(g.target,f,p,g.sequenceNumber);B_(a,v)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){X(Xo,"Failed to raise snapshot:",r),await Uf(n,r)}}async function Uf(n,e,t){if(!Hs(e))throw e;n.Ea.add(1),await Kl(n),n.Ra.set("Offline"),t||(t=()=>x1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{X(Xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ph(n)}))}function B1(n,e){return e().catch((t=>Uf(n,t,e)))}async function Ql(n){const e=le(n),t=js(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bs;for(;ML(e);)try{const i=await vL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,FL(e,i)}catch(i){await Uf(e,i)}z1(e)&&q1(e)}function ML(n){return Ks(n)&&n.Ta.length<10}function FL(n,e){n.Ta.push(e);const t=js(n);t.O_()&&t.X_&&t.ea(e.mutations)}function z1(n){return Ks(n)&&!js(n).x_()&&n.Ta.length>0}function q1(n){js(n).start()}async function jL(n){js(n).ra()}async function UL(n){const e=js(n);for(const t of n.Ta)e.ea(t.mutations)}async function BL(n,e,t){const r=n.Ta.shift(),i=R_.from(r,e,t);await B1(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Ql(n)}async function zL(n,e){e&&js(n).X_&&await(async function(r,i){if((function(l){return KA(l)&&l!==H.ABORTED})(i.code)){const a=r.Ta.shift();js(r).B_(),await B1(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Ql(r)}})(n,e),z1(n)&&q1(n)}async function bT(n,e){const t=le(n);t.asyncQueue.verifyOperationInProgress(),X(Xo,"RemoteStore received new credentials");const r=Ks(t);t.Ea.add(3),await Kl(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ph(t)}async function gy(n,e){const t=le(n);e?(t.Ea.delete(2),await ph(t)):e||(t.Ea.add(2),await Kl(t),t.Ra.set("Unknown"))}function Jl(n){return n.ma||(n.ma=(function(t,r,i){const a=le(t);return a.sa(),new PL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:DL.bind(null,n),t_:VL.bind(null,n),r_:OL.bind(null,n),H_:LL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),q_(n)?z_(n):n.Ra.set("Unknown")):(await n.ma.stop(),U1(n))}))),n.ma}function js(n){return n.fa||(n.fa=(function(t,r,i){const a=le(t);return a.sa(),new xL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:jL.bind(null,n),r_:zL.bind(null,n),ta:UL.bind(null,n),na:BL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ql(n)):(await n.fa.stop(),n.Ta.length>0&&(X(Xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new $_(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yl(n,e){if(bt("AsyncQueue",`${e}: ${n}`),Hs(n))return new J(H.UNAVAILABLE,`${e}: ${n}`);throw n}class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=uc(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CT{constructor(){this.ga=new st(ae.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Vl{constructor(e,t,r,i,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new Vl(e,t,pl.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $L{constructor(){this.queries=kT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=le(t),a=i.queries;i.queries=kT(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new J(H.ABORTED,"Firestore shutting down"))}}function kT(){return new Mi((n=>VA(n)),lh)}async function W_(n,e){const t=le(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new qL,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const h=Yl(l,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&G_(t)}async function H_(n,e){const t=le(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WL(n,e){const t=le(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&G_(t)}function HL(n,e,t){const r=le(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function G_(n){n.Ca.forEach((e=>{e.next()}))}var yy,NT;(NT=yy||(yy={})).Ma="default",NT.Cache="cache";class K_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yy.Cache}}class GL{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class DT{constructor(e){this.serializer=e}$s(e){return ri(this.serializer,e)}Us(e){return e.metadata.exists?i1(this.serializer,e.document,!1):ht.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ct(e)}}class KL{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=$1(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=Me.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new DT(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.$s(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||De()).add(a);t.set(l,h)}}return t}async ja(e){const t=await wL(e,new DT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await EL(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function $1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class W1{constructor(e){this.key=e}}class H1{constructor(e){this.key=e}}class G1{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=LA(e),this.tu=new pl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new CT,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,v)=>{const I=i.get(g),C=uh(this.query,v)?v:null,k=!!I&&this.mutatedKeys.has(I.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let N=!1;I&&C?I.data.isEqual(C.data)?k!==j&&(r.track({type:3,doc:C}),N=!0):this.su(I,C)||(r.track({type:2,doc:C}),N=!0,(f&&this.eu(C,f)>0||p&&this.eu(C,p)<0)&&(h=!0)):!I&&C?(r.track({type:0,doc:C}),N=!0):I&&!C&&(r.track({type:1,doc:I}),N=!0,(f||p)&&(h=!0)),N&&(C?(l=l.add(C),a=j?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,v)=>(function(C,k){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:N})}};return j(C)-j(k)})(g.type,v.type)||this.eu(g.doc,v.doc))),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,p=f!==this.Za;return this.Za=f,l.length!==0||p?{snapshot:new Vl(this.query,e.tu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new H1(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new W1(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qs="SyncEngine";class QL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JL{constructor(e){this.key=e,this.hu=!1}}class YL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Mi((h=>VA(h)),lh),this.Iu=new Map,this.Eu=new Set,this.du=new st(ae.comparator),this.Au=new Map,this.Ru=new D_,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XL(n,e,t=!0){const r=vp(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await K1(r,e,t,!0),i}async function ZL(n,e){const t=vp(n);await K1(t,e,!0,!1)}async function K1(n,e,t,r){const i=await kl(n.localStore,En(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await Q_(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&_p(n.remoteStore,i),h}async function Q_(n,e,t,r,i){n.pu=(v,I,C)=>(async function(j,N,q,oe){let ee=N.view.ru(q);ee.Cs&&(ee=await Mf(j.localStore,N.query,!1).then((({documents:b})=>N.view.ru(b,ee))));const de=oe&&oe.targetChanges.get(N.targetId),ve=oe&&oe.targetMismatches.get(N.targetId)!=null,ye=N.view.applyChanges(ee,j.isPrimaryClient,de,ve);return _y(j,N.targetId,ye.au),ye.snapshot})(n,v,I,C);const a=await Mf(n.localStore,e,!0),l=new G1(e,a.Qs),h=l.ru(a.documents),f=dh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(h,n.isPrimaryClient,f);_y(n,t,p.au);const g=new QL(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function eM(n,e,t){const r=le(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!lh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Nl(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Dl(r.remoteStore,i.targetId),Ol(r,i.targetId)})).catch(Ws)):(Ol(r,i.targetId),await Nl(r.localStore,i.targetId,!0))}async function tM(n,e){const t=le(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Dl(t.remoteStore,r.targetId))}async function nM(n,e,t){const r=Z_(n);try{const i=await(function(l,h){const f=le(l),p=Qe.now(),g=h.reduce(((C,k)=>C.add(k.key)),De());let v,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let k=Dn(),j=De();return f.Ns.getEntries(C,g).next((N=>{k=N,k.forEach(((q,oe)=>{oe.isValidDocument()||(j=j.add(q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(C,k))).next((N=>{v=N;const q=[];for(const oe of h){const ee=SO(oe,v.get(oe.key).overlayedDocument);ee!=null&&q.push(new Fi(oe.key,ee,AA(ee.value.mapValue),gt.exists(!0)))}return f.mutationQueue.addMutationBatch(C,p,q,h)})).next((N=>{I=N;const q=N.applyToLocalDocumentSet(v,j);return f.documentOverlayCache.saveOverlays(C,N.batchId,q)}))})).then((()=>({batchId:I.batchId,changes:FA(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,h,f){let p=l.Vu[l.currentUser.toKey()];p||(p=new st(Ce)),p=p.insert(h,f),l.Vu[l.currentUser.toKey()]=p})(r,i.batchId,t),await ji(r,i.changes),await Ql(r.remoteStore)}catch(i){const a=Yl(i,"Failed to persist write");t.reject(a)}}async function Q1(n,e){const t=le(n);try{const r=await _L(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?me(l.hu,14607):i.removedDocuments.size>0&&(me(l.hu,42227),l.hu=!1))})),await ji(t,r,e)}catch(r){await Ws(r)}}function VT(n,e,t){const r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(l,h){const f=le(l);f.onlineState=h;let p=!1;f.queries.forEach(((g,v)=>{for(const I of v.Sa)I.va(h)&&(p=!0)})),p&&G_(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rM(n,e,t){const r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new st(ae.comparator);l=l.insert(a,ht.newNoDocument(a,we.min()));const h=De().add(a),f=new hh(we.min(),new Map,new st(Ce),l,h);await Q1(r,f),r.du=r.du.remove(a),r.Au.delete(e),X_(r)}else await Nl(r.localStore,e,!1).then((()=>Ol(r,e,t))).catch(Ws)}async function iM(n,e){const t=le(n),r=e.batch.batchId;try{const i=await yL(t.localStore,e);Y_(t,r,null),J_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ji(t,i)}catch(i){await Ws(i)}}async function sM(n,e,t){const r=le(n);try{const i=await(function(l,h){const f=le(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return f.mutationQueue.lookupMutationBatch(p,h).next((v=>(me(v!==null,37113),g=v.keys(),f.mutationQueue.removeMutationBatch(p,v)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>f.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);Y_(r,e,t),J_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ji(r,i)}catch(i){await Ws(i)}}async function oM(n,e){const t=le(n);Ks(t.remoteStore)||X(Qs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const h=le(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>h.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(r===bs)return void e.resolve();const i=t.mu.get(r)||[];i.push(e),t.mu.set(r,i)}catch(r){const i=Yl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function J_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Y_(n,e,t){const r=le(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ol(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||J1(n,r)}))}function J1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Dl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),X_(n))}function _y(n,e,t){for(const r of t)r instanceof W1?(n.Ru.addReference(r.key,e),aM(n,r)):r instanceof H1?(X(Qs,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||J1(n,r.key)):ue(19791,{wu:r})}function aM(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(X(Qs,"New document in limbo: "+t),n.Eu.add(r),X_(n))}function X_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ae(Me.fromString(e)),r=n.fu.next();n.Au.set(r,new JL(t)),n.du=n.du.insert(t,r),_p(n.remoteStore,new Pi(En(Wl(t.path)),r,"TargetPurposeLimboResolution",kn.ce))}}async function ji(n,e,t){const r=le(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{l.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(p){i.push(p);const g=M_.As(f.targetId,p);a.push(g)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(f,p){const g=le(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>U.forEach(p,(I=>U.forEach(I.Es,(C=>g.persistence.referenceDelegate.addReference(v,I.targetId,C))).next((()=>U.forEach(I.ds,(C=>g.persistence.referenceDelegate.removeReference(v,I.targetId,C)))))))))}catch(v){if(!Hs(v))throw v;X(F_,"Failed to update sequence numbers: "+v)}for(const v of p){const I=v.targetId;if(!v.fromCache){const C=g.Ms.get(I),k=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(I,j)}}})(r.localStore,a))}async function lM(n,e){const t=le(n);if(!t.currentUser.isEqual(e)){X(Qs,"User change. New user:",e.toKey());const r=await P1(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new J(H.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ji(t,r.Ls)}}function uM(n,e){const t=le(n),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let i=De();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const h=t.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}async function cM(n,e){const t=le(n),r=await Mf(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&_y(t,e.targetId,i.au),i}async function hM(n,e){const t=le(n);return k1(t.localStore,e).then((r=>ji(t,r)))}async function dM(n,e,t,r){const i=le(n),a=await(function(h,f){const p=le(h),g=le(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(v=>g.er(v,f).next((I=>I?p.localDocuments.getDocuments(v,I):U.resolve(null)))))})(i.localStore,e);a!==null?(t==="pending"?await Ql(i.remoteStore):t==="acknowledged"||t==="rejected"?(Y_(i,e,r||null),J_(i,e),(function(h,f){le(le(h).mutationQueue).ir(f)})(i.localStore,e)):ue(6720,"Unknown batchState",{Su:t}),await ji(i,a)):X(Qs,"Cannot apply mutation batch with id: "+e)}async function fM(n,e){const t=le(n);if(vp(t),Z_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await OT(t,r.toArray());t.gu=!0,await gy(t.remoteStore,!0);for(const a of i)_p(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then((()=>(Ol(t,l),Nl(t.localStore,l,!0)))),Dl(t.remoteStore,l)})),await i,await OT(t,r),(function(l){const h=le(l);h.Au.forEach(((f,p)=>{Dl(h.remoteStore,p)})),h.Ru.Jr(),h.Au=new Map,h.du=new st(ae.comparator)})(t),t.gu=!1,await gy(t.remoteStore,!1)}}async function OT(n,e,t){const r=le(n),i=[],a=[];for(const l of e){let h;const f=r.Iu.get(l);if(f&&f.length!==0){h=await kl(r.localStore,En(f[0]));for(const p of f){const g=r.Tu.get(p),v=await cM(r,g);v.snapshot&&a.push(v.snapshot)}}else{const p=await C1(r.localStore,l);h=await kl(r.localStore,p),await Q_(r,Y1(p),l,!1,h.resumeToken)}i.push(h)}return r.Pu.H_(a),i}function Y1(n){return DA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pM(n){return(function(t){return le(le(t).persistence).Ts()})(le(n).localStore)}async function mM(n,e,t,r){const i=le(n);if(i.gu)return void X(Qs,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await k1(i.localStore,OA(a[0])),h=hh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);await ji(i,l,h);break}case"rejected":await Nl(i.localStore,e,!0),Ol(i,e,r);break;default:ue(64155,t)}}async function gM(n,e,t){const r=vp(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){X(Qs,"Adding an already active target "+i);continue}const a=await C1(r.localStore,i),l=await kl(r.localStore,a);await Q_(r,Y1(a),l.targetId,!1,l.resumeToken),_p(r.remoteStore,l)}for(const i of t)r.Iu.has(i)&&await Nl(r.localStore,i,!1).then((()=>{Dl(r.remoteStore,i),Ol(r,i)})).catch(Ws)}}function vp(n){const e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rM.bind(null,e),e.Pu.H_=WL.bind(null,e.eventManager),e.Pu.yu=HL.bind(null,e.eventManager),e}function Z_(n){const e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sM.bind(null,e),e}function yM(n,e,t){const r=le(n);(async function(a,l,h){try{const f=await l.getMetadata();if(await(function(C,k){const j=le(C),N=Ct(k.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",(q=>j.Ii.getBundleMetadata(q,k.id))).then((q=>!!q&&q.createTime.compareTo(N)>=0))})(a.localStore,f))return await l.close(),h._completeWith((function(C){return{taskState:"Success",documentsLoaded:C.totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}})(f)),Promise.resolve(new Set);h._updateProgress($1(f));const p=new KL(f,l.serializer);let g=await l.bu();for(;g;){const I=await p.Ga(g);I&&h._updateProgress(I),g=await l.bu()}const v=await p.ja(a.localStore);return await ji(a,v.Ha,void 0),await(function(C,k){const j=le(C);return j.persistence.runTransaction("Save bundle","readwrite",(N=>j.Ii.saveBundleMetadata(N,k)))})(a.localStore,f),h._completeWith(v.progress),Promise.resolve(v.Ja)}catch(f){return oi(Qs,`Loading bundle failed with ${f}`),h._failWith(f),Promise.resolve(new Set)}})(r,e,t).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return R1(this.persistence,new A1,e.initialUser,this.serializer)}Cu(e){return new V_(yp.mi,this.serializer)}Du(e){return new L1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class _M extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){me(this.persistence.referenceDelegate instanceof Lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new v1(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new V_((r=>Lf.mi(r,t)),this.serializer)}}class X1 extends Hc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Z_(this.xu.syncEngine),await Ql(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return R1(this.persistence,new A1,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new v1(r,e.asyncQueue,t)}Mu(e,t){const r=new PV(t,this.persistence);return new RV(e.asyncQueue,r)}Cu(e){const t=L_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new O_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,M1(),hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new L1}}class vM extends X1{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof bg&&(this.sharedClientState.syncEngine={Co:dM.bind(null,t),vo:mM.bind(null,t),Fo:gM.bind(null,t),Ts:pM.bind(null,t),Do:hM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await fM(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=M1();if(!bg.v(t))throw new J(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=L_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lM.bind(null,this.syncEngine),await gy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $L})()}createDatastore(e){const t=fh(e.databaseInfo.databaseId),r=(function(a){return new RL(a)})(e.databaseInfo);return(function(a,l,h,f){return new CL(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,h){return new NL(r,i,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>VT(this.syncEngine,t,0)),(function(){return PT.v()?new PT:new IL})())}createSyncEngine(e,t){return(function(i,a,l,h,f,p,g){const v=new YL(i,a,l,h,f,p);return g&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=le(t);X(Xo,"RemoteStore shutting down."),r.Ea.add(5),await Kl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Gc.provider={build:()=>new Gc};function LT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class wM{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new nn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(r);return new GL(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class EM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const l=le(i),h={documents:a.map((v=>$c(l.serializer,v)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,Me.emptyPath(),h,a.length),p=new Map;f.forEach((v=>{const I=DO(l.serializer,v);p.set(I.key.toString(),I)}));const g=[];return a.forEach((v=>{const I=p.get(v.toString());me(!!I,55234,{key:v}),g.push(I)})),g})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=ae.fromPath(r);this.mutations.push(new S_(i,this.precondition(i)))})),await(async function(r,i){const a=le(r),l={writes:i.map((h=>Wc(a.serializer,h)))};await a.Go("Commit",a.serializer.databaseId,Me.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ue(50498,{Gu:e.constructor.name});t=we.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new J(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(we.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(we.min()))throw new J(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IM{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new U_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new EM(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!sh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!KA(t)}return!1}}const Us="FirestoreClient";class TM{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=c_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{X(Us,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(X(Us,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Yl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kg(n,e){n.asyncQueue.verifyOperationInProgress(),X(Us,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await P1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function MT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ev(n);X(Us,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>bT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>bT(e.remoteStore,i))),n._onlineComponents=e}async function ev(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(Us,"Using user provided OfflineComponentProvider");try{await kg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===H.FAILED_PRECONDITION||i.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;oi("Error using user provided cache. Falling back to memory cache: "+t),await kg(n,new Hc)}}else X(Us,"Using default OfflineComponentProvider"),await kg(n,new _M(void 0));return n._offlineComponents}async function Ep(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(Us,"Using user provided OnlineComponentProvider"),await MT(n,n._uninitializedComponentsProvider._online)):(X(Us,"Using default OnlineComponentProvider"),await MT(n,new Gc))),n._onlineComponents}function Z1(n){return ev(n).then((e=>e.persistence))}function tv(n){return ev(n).then((e=>e.localStore))}function eR(n){return Ep(n).then((e=>e.remoteStore))}function nv(n){return Ep(n).then((e=>e.syncEngine))}function SM(n){return Ep(n).then((e=>e.datastore))}async function Ll(n){const e=await Ep(n),t=e.eventManager;return t.onListen=XL.bind(null,e.syncEngine),t.onUnlisten=eM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tM.bind(null,e.syncEngine),t}function AM(n){return n.asyncQueue.enqueue((async()=>{const e=await Z1(n),t=await eR(n);return e.setNetworkEnabled(!0),(function(i){const a=le(i);return a.Ea.delete(0),ph(a)})(t)}))}function RM(n){return n.asyncQueue.enqueue((async()=>{const e=await Z1(n),t=await eR(n);return e.setNetworkEnabled(!1),(async function(i){const a=le(i);a.Ea.add(0),await Kl(a),a.Ra.set("Offline")})(t)}))}function PM(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const h=await(function(p,g){const v=le(p);return v.persistence.runTransaction("read document","readonly",(I=>v.localDocuments.getDocument(I,g)))})(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new J(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const f=Yl(h,`Failed to get document '${a} from cache`);l.reject(f)}})(await tv(n),e,t))),t.promise}function tR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const g=new wp({next:I=>{g.Nu(),l.enqueueAndForget((()=>H_(a,v)));const C=I.docs.has(h);!C&&I.fromCache?p.reject(new J(H.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&I.fromCache&&f&&f.source==="server"?p.reject(new J(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(I)},error:I=>p.reject(I)}),v=new K_(Wl(h.path),g,{includeMetadataChanges:!0,qa:!0});return W_(a,v)})(await Ll(n),n.asyncQueue,e,t,r))),r.promise}function xM(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const h=await Mf(i,a,!0),f=new G1(a,h.Qs),p=f.ru(h.documents),g=f.applyChanges(p,!1);l.resolve(g.snapshot)}catch(h){const f=Yl(h,`Failed to execute query '${a} against cache`);l.reject(f)}})(await tv(n),e,t))),t.promise}function nR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,p){const g=new wp({next:I=>{g.Nu(),l.enqueueAndForget((()=>H_(a,v))),I.fromCache&&f.source==="server"?p.reject(new J(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(I)},error:I=>p.reject(I)}),v=new K_(h,g,{includeMetadataChanges:!0,qa:!0});return W_(a,v)})(await Ll(n),n.asyncQueue,e,t,r))),r.promise}function bM(n,e){const t=new wp(e);return n.asyncQueue.enqueueAndForget((async()=>(function(i,a){le(i).Ca.add(a),a.next()})(await Ll(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(i,a){le(i).Ca.delete(a)})(await Ll(n),t)))}}function CM(n,e,t,r){const i=(function(l,h){let f;return f=typeof l=="string"?JA().encode(l):l,(function(g,v){return new wM(g,v)})((function(g,v){if(g instanceof Uint8Array)return LT(g,v);if(g instanceof ArrayBuffer)return LT(new Uint8Array(g),v);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),h)})(t,fh(e));n.asyncQueue.enqueueAndForget((async()=>{yM(await nv(n),i,r)}))}function kM(n,e){return n.asyncQueue.enqueue((async()=>(function(r,i){const a=le(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Ii.getNamedQuery(l,i)))})(await tv(n),e)))}function rR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const FT=new Map;const iR="firestore.googleapis.com",jT=!0;class UT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iR,this.ssl=jT}else this.host=e.host,this.ssl=e.ssl??jT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=m1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XO)throw new J(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pV;switch(r.type){case"firstParty":return new _V(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=FT.get(t);r&&(X("ComponentProvider","Removing Datastore"),FT.delete(t),r.terminate())})(this),Promise.resolve()}}function NM(n,e,t,r={}){n=He(n,mh);const i=zs(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(Oy(`https://${h}`),Ly("Firestore",!0)),a.host!==iR&&a.host!==h&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:i,emulatorOptions:r};if(!ks(f,l)&&(n._setSettings(f),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Gt.MOCK_USER;else{p=kb(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new J(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Gt(v)}n._authCredentials=new mV(new QS(p,g))}}let In=class sR{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sR(this.firestore,e,this._query)}},it=class dc{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dc(this.firestore,e,this._key)}toJSON(){return{type:dc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ih(t,dc._jsonSchema))return new dc(e,r||null,new ae(Me.fromString(t.referencePath)))}};it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:Ft("string",it._jsonSchemaVersion),referencePath:Ft("string")};let Cs=class oR extends In{constructor(e,t,r){super(e,t,Wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ae(e))}withConverter(e){return new oR(this.firestore,e,this._path)}};function aR(n,e,...t){if(n=Ie(n),h_("collection","path",e),n instanceof mh){const r=Me.fromString(e,...t);return xI(r),new Cs(n,null,r)}{if(!(n instanceof it||n instanceof Cs))throw new J(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Me.fromString(e,...t));return xI(r),new Cs(n.firestore,null,r)}}function DM(n,e){if(n=He(n,mh),h_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new In(n,null,(function(r){return new Li(Me.emptyPath(),r)})(e))}function Bf(n,e,...t){if(n=Ie(n),arguments.length===1&&(e=c_.newId()),h_("doc","path",e),n instanceof mh){const r=Me.fromString(e,...t);return PI(r),new it(n,null,new ae(r))}{if(!(n instanceof it||n instanceof Cs))throw new J(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Me.fromString(e,...t));return PI(r),new it(n.firestore,n instanceof Cs?n.converter:null,new ae(r))}}function lR(n,e){return n=Ie(n),e=Ie(e),(n instanceof it||n instanceof Cs)&&(e instanceof it||e instanceof Cs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uR(n,e){return n=Ie(n),e=Ie(e),n instanceof In&&e instanceof In&&n.firestore===e.firestore&&lh(n._query,e._query)&&n.converter===e.converter}const BT="AsyncQueue";class zT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U_(this,"async_queue_retry"),this._c=()=>{const r=hf();r&&X(BT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new nn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hs(e))throw e;X(BT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",qT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=$_.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ue(47125,{Pc:qT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function qT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function vy(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class VM{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const OM=-1;let kt=class extends mh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zT(e),this._firestoreClient=void 0,await e}}};function mn(n){if(n._terminated)throw new J(H.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cR(n),n._firestoreClient}function cR(n){const e=n._freezeSettings(),t=(function(i,a,l,h){return new nO(i,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function LM(n,e){oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return hR(n,Gc.provider,{build:r=>new X1(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function MM(n){oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();hR(n,Gc.provider,{build:t=>new vM(t,e.cacheSizeBytes)})}function hR(n,e,t){if((n=He(n,kt))._firestoreClient||n._terminated)throw new J(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new J(H.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cR(n)}function FM(n){if(n._initialized&&!n._terminated)throw new J(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!ni.v())return Promise.resolve();const i=r+S1;await ni.delete(i)})(L_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function jM(n){return(function(t){const r=new nn;return t.asyncQueue.enqueueAndForget((async()=>oM(await nv(t),r))),r.promise})(mn(n=He(n,kt)))}function UM(n){return AM(mn(n=He(n,kt)))}function BM(n){return RM(mn(n=He(n,kt)))}function zM(n,e){const t=mn(n=He(n,kt)),r=new VM;return CM(t,n._databaseId,e,r),r}function qM(n,e){return kM(mn(n=He(n,kt)),e).then((t=>t?new In(n,null,t.query):null))}class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(Tt.fromBase64String(e))}catch(t){throw new J(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dn(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:Ft("string",dn._jsonSchemaVersion),bytes:Ft("string")};let Bs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let ra=class{constructor(e){this._methodName=e}};class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(ih(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:Ft("string",Tr._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class ii{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ii(e.vectorValues);throw new J(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ii._jsonSchemaVersion="firestore/vectorValue/1.0",ii._jsonSchema={type:Ft("string",ii._jsonSchemaVersion),vectorValues:Ft("object")};const $M=/^__.*__$/;class WM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hl(e,this.data,t,this.fieldTransforms)}}class dR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:n})}}class Ip{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fR(this.Ac)&&$M.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fh(e)}Cc(e,t,r,i=!1){return new Ip({Ac:e,methodName:t,Dc:r,path:mt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ia(n){const e=n._freezeSettings(),t=fh(n._databaseId);return new HM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tp(n,e,t,r,i,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);uv("Data must be an object, but it was:",l,r);const h=gR(r,l);let f,p;if(a.merge)f=new Nn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const I=wy(e,v,t);if(!l.contains(I))throw new J(H.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);_R(g,I)||g.push(I)}f=new Nn(g),p=l.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,p=l.fieldTransforms;return new WM(new tn(h),f,p)}class gh extends ra{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function pR(n,e,t){return new Ip({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rv extends ra{_toFieldTransform(e){return new ch(e.path,new xl)}isEqual(e){return e instanceof rv}}class iv extends ra{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pR(this,e,!0),r=this.vc.map((a=>sa(a,t))),i=new Go(r);return new ch(e.path,i)}isEqual(e){return e instanceof iv&&ks(this.vc,e.vc)}}class sv extends ra{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=pR(this,e,!0),r=this.vc.map((a=>sa(a,t))),i=new Ko(r);return new ch(e.path,i)}isEqual(e){return e instanceof sv&&ks(this.vc,e.vc)}}class ov extends ra{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bl(e.serializer,BA(e.serializer,this.Fc));return new ch(e.path,t)}isEqual(e){return e instanceof ov&&this.Fc===e.Fc}}function av(n,e,t,r){const i=n.Cc(1,e,t);uv("Data must be an object, but it was:",i,r);const a=[],l=tn.empty();Gs(r,((f,p)=>{const g=cv(e,f,t);p=Ie(p);const v=i.yc(g);if(p instanceof gh)a.push(g);else{const I=sa(p,v);I!=null&&(a.push(g),l.set(g,I))}}));const h=new Nn(a);return new dR(l,h,i.fieldTransforms)}function lv(n,e,t,r,i,a){const l=n.Cc(1,e,t),h=[wy(e,r,t)],f=[i];if(a.length%2!=0)throw new J(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(wy(e,a[I])),f.push(a[I+1]);const p=[],g=tn.empty();for(let I=h.length-1;I>=0;--I)if(!_R(p,h[I])){const C=h[I];let k=f[I];k=Ie(k);const j=l.yc(C);if(k instanceof gh)p.push(C);else{const N=sa(k,j);N!=null&&(p.push(C),g.set(C,N))}}const v=new Nn(p);return new dR(g,v,l.fieldTransforms)}function mR(n,e,t,r=!1){return sa(t,n.Cc(r?4:3,e))}function sa(n,e){if(yR(n=Ie(n)))return uv("Unsupported field value:",e,n),gR(n,e);if(n instanceof ra)return(function(r,i){if(!fR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const h of r){let f=sa(h,i.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Qe.fromDate(r);return{timestampValue:Cl(i.serializer,a)}}if(r instanceof Qe){const a=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cl(i.serializer,a)}}if(r instanceof Tr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:ZA(i.serializer,r._byteString)};if(r instanceof it){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:b_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ii)return(function(l,h){return{mapValue:{fields:{[__]:{stringValue:v_},[Al]:{arrayValue:{values:l.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return T_(h.serializer,p)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${sp(r)}`)})(n,e)}function gR(n,e){const t={};return gA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(n,((r,i)=>{const a=sa(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function yR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof Tr||n instanceof dn||n instanceof it||n instanceof ra||n instanceof ii)}function uv(n,e,t){if(!yR(t)||!XS(t)){const r=sp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function wy(n,e,t){if((e=Ie(e))instanceof Bs)return e._internalPath;if(typeof e=="string")return cv(n,e);throw zf("Field path arguments must be of type string or ",n,!1,void 0,t)}const GM=new RegExp("[~\\*/\\[\\]]");function cv(n,e,t){if(e.search(GM)>=0)throw zf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bs(...e.split("."))._internalPath}catch{throw zf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zf(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new J(H.INVALID_ARGUMENT,h+n+f)}function _R(n,e){return n.some((t=>t.isEqual(e)))}class Kc{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KM extends Kc{data(){return super.data()}}function Sp(n,e){return typeof e=="string"?cv(n,e):e instanceof Bs?e._internalPath:e._delegate._internalPath}function vR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class yh extends hv{}function ws(n,e,...t){let r=[];e instanceof hv&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof dv)).length,h=a.filter((f=>f instanceof Ap)).length;if(l>1||l>0&&h>0)throw new J(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Ap extends yh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ap(e,t,r)}_apply(e){const t=this._parse(e);return ER(e._query,t),new In(e.firestore,e.converter,oy(e._query,t))}_parse(e){const t=ia(e.firestore);return(function(a,l,h,f,p,g,v){let I;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new J(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){WT(v,g);const k=[];for(const j of v)k.push($T(f,a,j));I={arrayValue:{values:k}}}else I=$T(f,a,v)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||WT(v,g),I=mR(h,l,v,g==="in"||g==="not-in");return Ue.create(p,g,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function QM(n,e,t){const r=e,i=Sp("where",n);return Ap._create(i,r,t)}class dv extends hv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Ye.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const h=a.getFlattenedFilters();for(const f of h)ER(l,f),l=oy(l,f)})(e._query,t),new In(e.firestore,e.converter,oy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fv extends yh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fv(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qc(a,l)})(e._query,this._field,this._direction);return new In(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Li(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function JM(n,e="asc"){const t=e,r=Sp("orderBy",n);return fv._create(r,t)}class Rp extends yh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){return new In(e.firestore,e.converter,Nf(e._query,this._limit,this._limitType))}}function YM(n){return ZS("limit",n),Rp._create("limit",n,"F")}function XM(n){return ZS("limitToLast",n),Rp._create("limitToLast",n,"L")}class Pp extends yh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){const t=wR(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(i,a){return new Li(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,t))}}function ZM(...n){return Pp._create("startAt",n,!0)}function e4(...n){return Pp._create("startAfter",n,!1)}class xp extends yh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new xp(e,t,r)}_apply(e){const t=wR(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(i,a){return new Li(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,t))}}function t4(...n){return xp._create("endBefore",n,!1)}function n4(...n){return xp._create("endAt",n,!0)}function wR(n,e,t,r){if(t[0]=Ie(t[0]),t[0]instanceof Kc)return(function(a,l,h,f,p){if(!f)throw new J(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const g=[];for(const v of fl(a))if(v.field.isKeyField())g.push(Wo(l,f.key));else{const I=f.data.field(v.field);if(cp(I))throw new J(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const C=v.field.canonicalString();throw new J(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${C}' (used as the orderBy) does not exist.`)}g.push(I)}return new Fs(g,p)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ia(n.firestore);return(function(l,h,f,p,g,v){const I=l.explicitOrderBy;if(g.length>I.length)throw new J(H.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const C=[];for(let k=0;k<g.length;k++){const j=g[k];if(I[k].field.isKeyField()){if(typeof j!="string")throw new J(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!E_(l)&&j.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const N=l.path.child(Me.fromString(j));if(!ae.isDocumentKey(N))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const q=new ae(N);C.push(Wo(h,q))}else{const N=mR(f,p,j);C.push(N)}}return new Fs(C,v)})(n._query,n.firestore._databaseId,i,e,t,r)}}function $T(n,e,t){if(typeof(t=Ie(t))=="string"){if(t==="")throw new J(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E_(e)&&t.indexOf("/")!==-1)throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Me.fromString(t));if(!ae.isDocumentKey(r))throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wo(n,new ae(r))}if(t instanceof it)return Wo(n,t._key);throw new J(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sp(t)}.`)}function WT(n,e){if(!Array.isArray(n)||n.length===0)throw new J(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ER(n,e){const t=(function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class pv{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gs(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Al].arrayValue?.values?.map((r=>pt(r.doubleValue)));return new ii(t)}convertGeoPoint(e){return new Tr(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=hp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uc(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Me.fromString(e);me(c1(r),9688,{name:e});const i=new Os(r.get(1),r.get(3)),a=new ae(r.popFirst(5));return i.isEqual(t)||bt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function bp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class r4 extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}class Oo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ar=class IR extends Kc{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Sp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=IR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",ar._jsonSchema={type:Ft("string",ar._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};let Pc=class extends ar{data(e={}){return super.data(e)}},Sr=class TR{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Oo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Pc(this._firestore,this._userDataWriter,r.key,r,new Oo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((h=>{const f=new Pc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Oo(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Pc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Oo(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:i4(h.type),doc:f,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=TR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=c_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function i4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:n})}}function SR(n,e){return n instanceof ar&&e instanceof ar?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sr&&e instanceof Sr&&n._firestore===e._firestore&&uR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function s4(n){n=He(n,it);const e=He(n.firestore,kt);return tR(mn(e),n._key).then((t=>mv(e,n,t)))}Sr._jsonSchemaVersion="firestore/querySnapshot/1.0",Sr._jsonSchema={type:Ft("string",Sr._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class oa extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}function o4(n){n=He(n,it);const e=He(n.firestore,kt),t=mn(e),r=new oa(e);return PM(t,n._key).then((i=>new ar(e,r,n._key,i,new Oo(i!==null&&i.hasLocalMutations,!0),n.converter)))}function a4(n){n=He(n,it);const e=He(n.firestore,kt);return tR(mn(e),n._key,{source:"server"}).then((t=>mv(e,n,t)))}function l4(n){n=He(n,In);const e=He(n.firestore,kt),t=mn(e),r=new oa(e);return vR(n._query),nR(t,n._query).then((i=>new Sr(e,r,n,i)))}function u4(n){n=He(n,In);const e=He(n.firestore,kt),t=mn(e),r=new oa(e);return xM(t,n._query).then((i=>new Sr(e,r,n,i)))}function c4(n){n=He(n,In);const e=He(n.firestore,kt),t=mn(e),r=new oa(e);return nR(t,n._query,{source:"server"}).then((i=>new Sr(e,r,n,i)))}function HT(n,e,t){n=He(n,it);const r=He(n.firestore,kt),i=bp(n.converter,e,t);return _h(r,[Tp(ia(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function GT(n,e,t,...r){n=He(n,it);const i=He(n.firestore,kt),a=ia(i);let l;return l=typeof(e=Ie(e))=="string"||e instanceof Bs?lv(a,"updateDoc",n._key,e,t,r):av(a,"updateDoc",n._key,e),_h(i,[l.toMutation(n._key,gt.exists(!0))])}function h4(n){return _h(He(n.firestore,kt),[new Gl(n._key,gt.none())])}function d4(n,e){const t=He(n.firestore,kt),r=Bf(n),i=bp(n.converter,e);return _h(t,[Tp(ia(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then((()=>r))}function AR(n,...e){n=Ie(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||vy(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(vy(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,l,h;if(n instanceof it)l=He(n.firestore,kt),h=Wl(n._key.path),a={next:f=>{e[r]&&e[r](mv(l,n,f))},error:e[r+1],complete:e[r+2]};else{const f=He(n,In);l=He(f.firestore,kt),h=f._query;const p=new oa(l);a={next:g=>{e[r]&&e[r](new Sr(l,p,f,g))},error:e[r+1],complete:e[r+2]},vR(n._query)}return(function(p,g,v,I){const C=new wp(I),k=new K_(g,C,v);return p.asyncQueue.enqueueAndForget((async()=>W_(await Ll(p),k))),()=>{C.Nu(),p.asyncQueue.enqueueAndForget((async()=>H_(await Ll(p),k)))}})(mn(l),h,i,a)}function f4(n,e){return bM(mn(n=He(n,kt)),vy(e)?e:{next:e})}function _h(n,e){return(function(r,i){const a=new nn;return r.asyncQueue.enqueueAndForget((async()=>nM(await nv(r),i,a))),a.promise})(mn(n),e)}function mv(n,e,t){const r=t.docs.get(e._key),i=new oa(n);return new ar(n,i,e._key,r,new Oo(t.hasPendingWrites,t.fromCache),e.converter)}const p4={maxAttempts:5};let m4=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ia(e)}set(e,t,r){this._verifyNotCommitted();const i=Ss(e,this._firestore),a=bp(i.converter,t,r),l=Tp(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ss(e,this._firestore);let l;return l=typeof(t=Ie(t))=="string"||t instanceof Bs?lv(this._dataReader,"WriteBatch.update",a._key,t,r,i):av(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ss(e,this._firestore);return this._mutations=this._mutations.concat(new Gl(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ss(n,e){if((n=Ie(n)).firestore!==e)throw new J(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class g4{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ia(e)}get(e){const t=Ss(e,this._firestore),r=new r4(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return ue(24041);const a=i[0];if(a.isFoundDocument())return new Kc(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Kc(this._firestore,r,t._key,null,t.converter);throw ue(18433,{doc:a})}))}set(e,t,r){const i=Ss(e,this._firestore),a=bp(i.converter,t,r),l=Tp(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Ss(e,this._firestore);let l;return l=typeof(t=Ie(t))=="string"||t instanceof Bs?lv(this._dataReader,"Transaction.update",a._key,t,r,i):av(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Ss(e,this._firestore);return this._transaction.delete(t._key),this}}let y4=class extends g4{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ss(e,this._firestore),r=new oa(this._firestore);return super.get(e).then((i=>new ar(this._firestore,r,t._key,i._document,new Oo(!1,!1),t.converter)))}};function _4(n,e,t){n=He(n,kt);const r={...p4,...t};return(function(a){if(a.maxAttempts<1)throw new J(H.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,l,h){const f=new nn;return a.asyncQueue.enqueueAndForget((async()=>{const p=await SM(a);new IM(a.asyncQueue,p,h,l,f).ju()})),f.promise})(mn(n),(i=>e(new y4(n,i))),r)}function v4(){return new gh("deleteField")}function w4(){return new rv("serverTimestamp")}function E4(...n){return new iv("arrayUnion",n)}function I4(...n){return new sv("arrayRemove",n)}function T4(n){return new ov("increment",n)}(function(e,t=!0){(function(i){$l=i})(qs),Ci(new lr("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new kt(new gV(r.getProvider("auth-internal")),new vV(l,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new J(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(p.options.projectId,g)})(l,i),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Jn(TI,SI,e),Jn(TI,SI,"esm2020")})();const S4="@firebase/firestore-compat",A4="0.4.3";function gv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KT(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function QT(){if(!eO())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}let RR=class Ey{constructor(e){this._delegate=e}static fromBase64String(e){return QT(),new Ey(dn.fromBase64String(e))}static fromUint8Array(e){return KT(),new Ey(dn.fromUint8Array(e))}toBase64(){return QT(),this._delegate.toBase64()}toUint8Array(){return KT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Iy(n){return R4(n,["next","error","complete"])}function R4(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class P4{enableIndexedDbPersistence(e,t){return LM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return MM(e._delegate)}clearIndexedDbPersistence(e){return FM(e._delegate)}}class PR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Os||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){NM(this._delegate,e,t,r)}enableNetwork(){return UM(this._delegate)}disableNetwork(){return BM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return jM(this._delegate)}onSnapshotsInSync(e){return f4(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ml(this,aR(this._delegate,e))}catch(t){throw wn(t,"collection()","Firestore.collection()")}}doc(e){try{return new or(this,Bf(this._delegate,e))}catch(t){throw wn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vn(this,DM(this._delegate,e))}catch(t){throw wn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return _4(this._delegate,t=>e(new xR(this,t)))}batch(){return mn(this._delegate),new bR(new m4(this._delegate,e=>_h(this._delegate,e)))}loadBundle(e){return zM(this._delegate,e)}namedQuery(e){return qM(this._delegate,e).then(t=>t?new vn(this,t):null)}}class Cp extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new RR(new dn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return or.forKey(t,this.firestore,null)}}function x4(n){dV(n)}class xR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}get(e){const t=Lo(e);return this._delegate.get(t).then(r=>new Qc(this._firestore,new ar(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Lo(e);return r?(gv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lo(e);return this._delegate.delete(t),this}}class bR{constructor(e){this._delegate=e}set(e,t,r){const i=Lo(e);return r?(gv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Lo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Lo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zo{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Zo(e,new Cp(e),t),i.set(t,a)),a}}Zo.INSTANCES=new WeakMap;class or{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new or(t,new it(t._delegate,r,new ae(e)))}static forKey(e,t,r){return new or(t,new it(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ml(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ml(this.firestore,aR(this._delegate,e))}catch(t){throw wn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ie(e),e instanceof it?lR(this._delegate,e):!1}set(e,t){t=gv("DocumentReference.set",t);try{return t?HT(this._delegate,e,t):HT(this._delegate,e)}catch(r){throw wn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?GT(this._delegate,e):GT(this._delegate,e,t,...r)}catch(i){throw wn(i,"updateDoc()","DocumentReference.update()")}}delete(){return h4(this._delegate)}onSnapshot(...e){const t=CR(e),r=kR(e,i=>new Qc(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return AR(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=o4(this._delegate):e?.source==="server"?t=a4(this._delegate):t=s4(this._delegate),t.then(r=>new Qc(this.firestore,new ar(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new or(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wn(n,e,t){return n.message=n.message.replace(e,t),n}function CR(n){for(const e of n)if(typeof e=="object"&&!Iy(e))return e;return{}}function kR(n,e){let t;return Iy(n[0])?t=n[0]:Iy(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Qc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SR(this._delegate,e._delegate)}}class Jc extends Qc{data(e){const t=this._delegate.data(e);return this._delegate._converter||fV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class vn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cp(e)}where(e,t,r){try{return new vn(this.firestore,ws(this._delegate,QM(e,t,r)))}catch(i){throw wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vn(this.firestore,ws(this._delegate,JM(e,t)))}catch(r){throw wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vn(this.firestore,ws(this._delegate,YM(e)))}catch(t){throw wn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vn(this.firestore,ws(this._delegate,XM(e)))}catch(t){throw wn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vn(this.firestore,ws(this._delegate,ZM(...e)))}catch(t){throw wn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vn(this.firestore,ws(this._delegate,e4(...e)))}catch(t){throw wn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vn(this.firestore,ws(this._delegate,t4(...e)))}catch(t){throw wn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vn(this.firestore,ws(this._delegate,n4(...e)))}catch(t){throw wn(t,"endAt()","Query.endAt()")}}isEqual(e){return uR(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=u4(this._delegate):e?.source==="server"?t=c4(this._delegate):t=l4(this._delegate),t.then(r=>new Ty(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CR(e),r=kR(e,i=>new Ty(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return AR(this._delegate,t,r)}withConverter(e){return new vn(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class b4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ty{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new b4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jc(this._firestore,r))})}isEqual(e){return SR(this._delegate,e._delegate)}}class Ml extends vn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new or(this.firestore,e):null}doc(e){try{return e===void 0?new or(this.firestore,Bf(this._delegate)):new or(this.firestore,Bf(this._delegate,e))}catch(t){throw wn(t,"doc()","CollectionReference.doc()")}}add(e){return d4(this._delegate,e).then(t=>new or(this.firestore,t))}isEqual(e){return lR(this._delegate,e._delegate)}withConverter(e){return new Ml(this.firestore,e?this._delegate.withConverter(Zo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Lo(n){return He(n,it)}class yv{constructor(...e){this._delegate=new Bs(...e)}static documentId(){return new yv(mt.keyField().canonicalString())}isEqual(e){return e=Ie(e),e instanceof Bs?this._delegate._internalPath.isEqual(e._internalPath):!1}}class No{static serverTimestamp(){const e=w4();return e._methodName="FieldValue.serverTimestamp",new No(e)}static delete(){const e=v4();return e._methodName="FieldValue.delete",new No(e)}static arrayUnion(...e){const t=E4(...e);return t._methodName="FieldValue.arrayUnion",new No(t)}static arrayRemove(...e){const t=I4(...e);return t._methodName="FieldValue.arrayRemove",new No(t)}static increment(e){const t=T4(e);return t._methodName="FieldValue.increment",new No(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const C4={Firestore:PR,GeoPoint:Tr,Timestamp:Qe,Blob:RR,Transaction:xR,WriteBatch:bR,DocumentReference:or,DocumentSnapshot:Qc,Query:vn,QueryDocumentSnapshot:Jc,QuerySnapshot:Ty,CollectionReference:Ml,FieldPath:yv,FieldValue:No,setLogLevel:x4,CACHE_SIZE_UNLIMITED:OM};function k4(n,e){n.INTERNAL.registerComponent(new lr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...C4}))}function N4(n){k4(n,(e,t)=>new PR(e,t,new P4)),n.registerVersion(S4,A4)}N4(ur);const D4="type.googleapis.com/google.protobuf.Int64Value",V4="type.googleapis.com/google.protobuf.UInt64Value";function NR(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function qf(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>qf(e));if(typeof n=="function"||typeof n=="object")return NR(n,e=>qf(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Fl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case D4:case V4:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Fl(e)):typeof n=="function"||typeof n=="object"?NR(n,e=>Fl(e)):n}const DR="functions";const JT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vn extends Kt{constructor(e,t,r){super(`${DR}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Vn.prototype)}}function O4(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $f(n,e){let t=O4(n),r=t,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!JT[l])return new Vn("internal","internal");t=JT[l],r=l}const h=a.message;typeof h=="string"&&(r=h),i=a.details,i!==void 0&&(i=Fl(i))}}catch{}return t==="ok"?null:new Vn(t,r,i)}class L4{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,dt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const YT="us-central1",M4=/^data: (.*?)(?:\n|$)/;function F4(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Vn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let j4=class{constructor(e,t,r,i,a=YT,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new L4(e,t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=YT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function U4(n,e,t){const r=zs(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Oy(n.emulatorOrigin+"/backends"),Ly("Functions",!0))}function B4(n,e,t){const r=i=>$4(n,e,i,t||{});return r.stream=(i,a)=>W4(n,e,i,a),r}function z4(n,e,t){const r=i=>LR(n,e,i,t||{});return r.stream=(i,a)=>MR(n,e,i,a||{}),r}function VR(n){return n.emulatorOrigin&&zs(n.emulatorOrigin)?"include":void 0}async function q4(n,e,t,r,i){t["Content-Type"]="application/json";let a;try{a=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:VR(i)})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function OR(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function $4(n,e,t,r){const i=n._url(e);return LR(n,i,t,r)}async function LR(n,e,t,r){t=qf(t);const i={data:t},a=await OR(n,r),l=r.timeout||7e4,h=F4(l),f=await Promise.race([q4(e,i,a,n.fetchImpl,n),h.promise,n.cancelAllRequests]);if(h.cancel(),!f)throw new Vn("cancelled","Firebase Functions instance was deleted.");const p=$f(f.status,f.json);if(p)throw p;if(!f.json)throw new Vn("internal","Response is not valid JSON object.");let g=f.json.data;if(typeof g>"u"&&(g=f.json.result),typeof g>"u")throw new Vn("internal","Response is missing data field.");return{data:Fl(g)}}function W4(n,e,t,r){const i=n._url(e);return MR(n,i,t,r||{})}async function MR(n,e,t,r){t=qf(t);const i={data:t},a=await OR(n,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:VR(n)})}catch(I){if(I instanceof Error&&I.name==="AbortError"){const k=new Vn("cancelled","Request was cancelled.");return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}const C=$f(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let h,f;const p=new Promise((I,C)=>{h=I,f=C});r?.signal?.addEventListener("abort",()=>{const I=new Vn("cancelled","Request was cancelled.");f(I)});const g=l.body.getReader(),v=H4(g,h,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const I=v.getReader();return{async next(){const{value:C,done:k}=await I.read();return{value:C,done:k}},async return(){return await I.cancel(),{done:!0,value:void 0}}}}},data:p}}function H4(n,e,t,r){const i=(l,h)=>{const f=l.match(M4);if(!f)return;const p=f[1];try{const g=JSON.parse(p);if("result"in g){e(Fl(g.result));return}if("message"in g){h.enqueue(Fl(g.message));return}if("error"in g){const v=$f(0,g);h.error(v),t(v);return}}catch(g){if(g instanceof Vn){h.error(g),t(g);return}}},a=new TextDecoder;return new ReadableStream({start(l){let h="";return f();async function f(){if(r?.aborted){const p=new Vn("cancelled","Request was cancelled");return l.error(p),t(p),Promise.resolve()}try{const{value:p,done:g}=await n.read();if(g){h.trim()&&i(h.trim(),l),l.close();return}if(r?.aborted){const I=new Vn("cancelled","Request was cancelled");l.error(I),t(I),await n.cancel();return}h+=a.decode(p,{stream:!0});const v=h.split(`
`);h=v.pop()||"";for(const I of v)I.trim()&&i(I.trim(),l);return f()}catch(p){const g=p instanceof Vn?p:$f(0,null);l.error(g),t(g)}}},cancel(){return n.cancel()}})}const XT="@firebase/functions",ZT="0.13.1";const G4="auth-internal",K4="app-check-internal",Q4="messaging-internal";function J4(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(G4),l=t.getProvider(Q4),h=t.getProvider(K4);return new j4(i,a,l,h,r)};Ci(new lr(DR,e,"PUBLIC").setMultipleInstances(!0)),Jn(XT,ZT,n),Jn(XT,ZT,"esm2020")}function e0(n,e,t){U4(Ie(n),e,t)}function Y4(n,e,t){return B4(Ie(n),e,t)}function X4(n,e,t){return z4(Ie(n),e,t)}J4();const Z4="@firebase/functions-compat",eF="0.4.1";class FR{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return Y4(this._delegate,e,t)}httpsCallableFromURL(e,t){return X4(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Kt("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Kt("functions","Port missing in origin provided to useFunctionsEmulator()");return e0(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return e0(this._delegate,e,t)}}const tF="us-central1",nF=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??tF});return new FR(t,r)};function rF(){const n={Functions:FR};ur.INTERNAL.registerComponent(new lr("functions-compat",nF,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}rF();ur.registerVersion(Z4,eF);const iF={apiKey:"AIzaSyDummyKeyForEmulatorOnly",projectId:"schoolbook-290b6"};ur.apps.length||ur.initializeApp(iF);const bn=ur.firestore(),ll=ur.auth(),_v=ur.functions(),t0=window.location.hostname;(t0==="localhost"||t0==="127.0.0.1")&&(console.log("Using Firebase Emulators"),bn.useEmulator("127.0.0.1",8085),ll.useEmulator("http://127.0.0.1:9099",{disableWarnings:!0}),_v.useEmulator("127.0.0.1",5001));const Gd=Object.freeze(Object.defineProperty({__proto__:null,auth:ll,db:bn,functions:_v},Symbol.toStringTag,{value:"Module"})),df={onAuthStateChanged(n){return ll.onAuthStateChanged(n)},async signUp(n,e){return ll.createUserWithEmailAndPassword(n,e)},async login(n,e){return ll.signInWithEmailAndPassword(n,e)},async logout(){return ll.signOut()},async completeProfile(n){return _v.httpsCallable("completeProfile")(n)},onProfileSnapshot(n,e){return bn.collection("users").doc(n).onSnapshot(e)}},sF="modulepreload",oF=function(n){return"/"+n},n0={},Kd=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var l=p;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");i=p(t.map(g=>{if(g=oF(g),g in n0)return;n0[g]=!0;const v=g.endsWith(".css"),I=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${I}`))return;const C=document.createElement("link");if(C.rel=v?"stylesheet":sF,v||(C.as="script"),C.crossOrigin="",C.href=g,f&&C.setAttribute("nonce",f),document.head.appendChild(C),v)return new Promise((k,j)=>{C.addEventListener("load",k),C.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return i.then(h=>{for(const f of h||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};function jR(n,e){return function(){return n.apply(e,arguments)}}const{toString:aF}=Object.prototype,{getPrototypeOf:vv}=Object,{iterator:kp,toStringTag:UR}=Symbol,Np=(n=>e=>{const t=aF.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rr=n=>(n=n.toLowerCase(),e=>Np(e)===n),Dp=n=>e=>typeof e===n,{isArray:Xl}=Array,jl=Dp("undefined");function vh(n){return n!==null&&!jl(n)&&n.constructor!==null&&!jl(n.constructor)&&On(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const BR=Rr("ArrayBuffer");function lF(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&BR(n.buffer),e}const uF=Dp("string"),On=Dp("function"),zR=Dp("number"),wh=n=>n!==null&&typeof n=="object",cF=n=>n===!0||n===!1,ff=n=>{if(Np(n)!=="object")return!1;const e=vv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(UR in n)&&!(kp in n)},hF=n=>{if(!wh(n)||vh(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},dF=Rr("Date"),fF=Rr("File"),pF=Rr("Blob"),mF=Rr("FileList"),gF=n=>wh(n)&&On(n.pipe),yF=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||On(n.append)&&((e=Np(n))==="formdata"||e==="object"&&On(n.toString)&&n.toString()==="[object FormData]"))},_F=Rr("URLSearchParams"),[vF,wF,EF,IF]=["ReadableStream","Request","Response","Headers"].map(Rr),TF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Xl(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(vh(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let h;for(r=0;r<l;r++)h=a[r],e.call(null,n[h],h,n)}}function qR(n,e){if(vh(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Mo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$R=n=>!jl(n)&&n!==Mo;function Sy(){const{caseless:n,skipUndefined:e}=$R(this)&&this||{},t={},r=(i,a)=>{const l=n&&qR(t,a)||a;ff(t[l])&&ff(i)?t[l]=Sy(t[l],i):ff(i)?t[l]=Sy({},i):Xl(i)?t[l]=i.slice():(!e||!jl(i))&&(t[l]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Eh(arguments[i],r);return t}const SF=(n,e,t,{allOwnKeys:r}={})=>(Eh(e,(i,a)=>{t&&On(i)?n[a]=jR(i,t):n[a]=i},{allOwnKeys:r}),n),AF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),RF=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},PF=(n,e,t,r)=>{let i,a,l;const h={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)l=i[a],(!r||r(l,n,e))&&!h[l]&&(e[l]=n[l],h[l]=!0);n=t!==!1&&vv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},xF=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},bF=n=>{if(!n)return null;if(Xl(n))return n;let e=n.length;if(!zR(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},CF=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&vv(Uint8Array)),kF=(n,e)=>{const r=(n&&n[kp]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},NF=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},DF=Rr("HTMLFormElement"),VF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),r0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),OF=Rr("RegExp"),WR=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Eh(t,(i,a)=>{let l;(l=e(i,a,n))!==!1&&(r[a]=l||i)}),Object.defineProperties(n,r)},LF=n=>{WR(n,(e,t)=>{if(On(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(On(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},MF=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return Xl(n)?r(n):r(String(n).split(e)),t},FF=()=>{},jF=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function UF(n){return!!(n&&On(n.append)&&n[UR]==="FormData"&&n[kp])}const BF=n=>{const e=new Array(10),t=(r,i)=>{if(wh(r)){if(e.indexOf(r)>=0)return;if(vh(r))return r;if(!("toJSON"in r)){e[i]=r;const a=Xl(r)?[]:{};return Eh(r,(l,h)=>{const f=t(l,i+1);!jl(f)&&(a[h]=f)}),e[i]=void 0,a}}return r};return t(n,0)},zF=Rr("AsyncFunction"),qF=n=>n&&(wh(n)||On(n))&&On(n.then)&&On(n.catch),HR=((n,e)=>n?setImmediate:e?((t,r)=>(Mo.addEventListener("message",({source:i,data:a})=>{i===Mo&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Mo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",On(Mo.postMessage)),$F=typeof queueMicrotask<"u"?queueMicrotask.bind(Mo):typeof process<"u"&&process.nextTick||HR,WF=n=>n!=null&&On(n[kp]),K={isArray:Xl,isArrayBuffer:BR,isBuffer:vh,isFormData:yF,isArrayBufferView:lF,isString:uF,isNumber:zR,isBoolean:cF,isObject:wh,isPlainObject:ff,isEmptyObject:hF,isReadableStream:vF,isRequest:wF,isResponse:EF,isHeaders:IF,isUndefined:jl,isDate:dF,isFile:fF,isBlob:pF,isRegExp:OF,isFunction:On,isStream:gF,isURLSearchParams:_F,isTypedArray:CF,isFileList:mF,forEach:Eh,merge:Sy,extend:SF,trim:TF,stripBOM:AF,inherits:RF,toFlatObject:PF,kindOf:Np,kindOfTest:Rr,endsWith:xF,toArray:bF,forEachEntry:kF,matchAll:NF,isHTMLForm:DF,hasOwnProperty:r0,hasOwnProp:r0,reduceDescriptors:WR,freezeMethods:LF,toObjectSet:MF,toCamelCase:VF,noop:FF,toFiniteNumber:jF,findKey:qR,global:Mo,isContextDefined:$R,isSpecCompliantForm:UF,toJSONObject:BF,isAsyncFn:zF,isThenable:qF,setImmediate:HR,asap:$F,isIterable:WF};function Ne(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}K.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const GR=Ne.prototype,KR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{KR[n]={value:n}});Object.defineProperties(Ne,KR);Object.defineProperty(GR,"isAxiosError",{value:!0});Ne.from=(n,e,t,r,i,a)=>{const l=Object.create(GR);K.toFlatObject(n,l,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const h=n&&n.message?n.message:"Error",f=e==null&&n?n.code:e;return Ne.call(l,h,f,t,r,i),n&&l.cause==null&&Object.defineProperty(l,"cause",{value:n,configurable:!0}),l.name=n&&n.name||"Error",a&&Object.assign(l,a),l};const HF=null;function Ay(n){return K.isPlainObject(n)||K.isArray(n)}function QR(n){return K.endsWith(n,"[]")?n.slice(0,-2):n}function i0(n,e,t){return n?n.concat(e).map(function(i,a){return i=QR(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function GF(n){return K.isArray(n)&&!n.some(Ay)}const KF=K.toFlatObject(K,{},null,function(e){return/^is[A-Z]/.test(e)});function Vp(n,e,t){if(!K.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=K.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,N){return!K.isUndefined(N[j])});const r=t.metaTokens,i=t.visitor||g,a=t.dots,l=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(e);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function p(k){if(k===null)return"";if(K.isDate(k))return k.toISOString();if(K.isBoolean(k))return k.toString();if(!f&&K.isBlob(k))throw new Ne("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(k)||K.isTypedArray(k)?f&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function g(k,j,N){let q=k;if(k&&!N&&typeof k=="object"){if(K.endsWith(j,"{}"))j=r?j:j.slice(0,-2),k=JSON.stringify(k);else if(K.isArray(k)&&GF(k)||(K.isFileList(k)||K.endsWith(j,"[]"))&&(q=K.toArray(k)))return j=QR(j),q.forEach(function(ee,de){!(K.isUndefined(ee)||ee===null)&&e.append(l===!0?i0([j],de,a):l===null?j:j+"[]",p(ee))}),!1}return Ay(k)?!0:(e.append(i0(N,j,a),p(k)),!1)}const v=[],I=Object.assign(KF,{defaultVisitor:g,convertValue:p,isVisitable:Ay});function C(k,j){if(!K.isUndefined(k)){if(v.indexOf(k)!==-1)throw Error("Circular reference detected in "+j.join("."));v.push(k),K.forEach(k,function(q,oe){(!(K.isUndefined(q)||q===null)&&i.call(e,q,K.isString(oe)?oe.trim():oe,j,I))===!0&&C(q,j?j.concat(oe):[oe])}),v.pop()}}if(!K.isObject(n))throw new TypeError("data must be an object");return C(n),e}function s0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function wv(n,e){this._pairs=[],n&&Vp(n,this,e)}const JR=wv.prototype;JR.append=function(e,t){this._pairs.push([e,t])};JR.toString=function(e){const t=e?function(r){return e.call(this,r,s0)}:s0;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function QF(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function YR(n,e,t){if(!e)return n;const r=t&&t.encode||QF;K.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=K.isURLSearchParams(e)?e.toString():new wv(e,t).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class o0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,function(r){r!==null&&e(r)})}}const XR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JF=typeof URLSearchParams<"u"?URLSearchParams:wv,YF=typeof FormData<"u"?FormData:null,XF=typeof Blob<"u"?Blob:null,ZF={isBrowser:!0,classes:{URLSearchParams:JF,FormData:YF,Blob:XF},protocols:["http","https","file","blob","url","data"]},Ev=typeof window<"u"&&typeof document<"u",Ry=typeof navigator=="object"&&navigator||void 0,e5=Ev&&(!Ry||["ReactNative","NativeScript","NS"].indexOf(Ry.product)<0),t5=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",n5=Ev&&window.location.href||"http://localhost",r5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ev,hasStandardBrowserEnv:e5,hasStandardBrowserWebWorkerEnv:t5,navigator:Ry,origin:n5},Symbol.toStringTag,{value:"Module"})),fn={...r5,...ZF};function i5(n,e){return Vp(n,new fn.classes.URLSearchParams,{visitor:function(t,r,i,a){return fn.isNode&&K.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function s5(n){return K.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function o5(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function ZR(n){function e(t,r,i,a){let l=t[a++];if(l==="__proto__")return!0;const h=Number.isFinite(+l),f=a>=t.length;return l=!l&&K.isArray(i)?i.length:l,f?(K.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!h):((!i[l]||!K.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],a)&&K.isArray(i[l])&&(i[l]=o5(i[l])),!h)}if(K.isFormData(n)&&K.isFunction(n.entries)){const t={};return K.forEachEntry(n,(r,i)=>{e(s5(r),i,t,0)}),t}return null}function a5(n,e,t){if(K.isString(n))try{return(e||JSON.parse)(n),K.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ih={transitional:XR,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=K.isObject(e);if(a&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return i?JSON.stringify(ZR(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return i5(e,this.formSerializer).toString();if((h=K.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Vp(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),a5(e)):e}],transformResponse:[function(e){const t=this.transitional||Ih.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(h){if(l)throw h.name==="SyntaxError"?Ne.from(h,Ne.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],n=>{Ih.headers[n]={}});const l5=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),u5=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&l5[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},a0=Symbol("internals");function ic(n){return n&&String(n).trim().toLowerCase()}function pf(n){return n===!1||n==null?n:K.isArray(n)?n.map(pf):String(n)}function c5(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const h5=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Ng(n,e,t,r,i){if(K.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!K.isString(e)){if(K.isString(r))return e.indexOf(r)!==-1;if(K.isRegExp(r))return r.test(e)}}function d5(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function f5(n,e){const t=K.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,l){return this[r].call(this,e,i,a,l)},configurable:!0})})}let Ln=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(h,f,p){const g=ic(f);if(!g)throw new Error("header name must be a non-empty string");const v=K.findKey(i,g);(!v||i[v]===void 0||p===!0||p===void 0&&i[v]!==!1)&&(i[v||f]=pf(h))}const l=(h,f)=>K.forEach(h,(p,g)=>a(p,g,f));if(K.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(K.isString(e)&&(e=e.trim())&&!h5(e))l(u5(e),t);else if(K.isObject(e)&&K.isIterable(e)){let h={},f,p;for(const g of e){if(!K.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[p=g[0]]=(f=h[p])?K.isArray(f)?[...f,g[1]]:[f,g[1]]:g[1]}l(h,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=ic(e),e){const r=K.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return c5(i);if(K.isFunction(t))return t.call(this,i,r);if(K.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ic(e),e){const r=K.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Ng(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(l){if(l=ic(l),l){const h=K.findKey(r,l);h&&(!t||Ng(r,r[h],h,t))&&(delete r[h],i=!0)}}return K.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||Ng(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return K.forEach(this,(i,a)=>{const l=K.findKey(r,a);if(l){t[l]=pf(i),delete t[a];return}const h=e?d5(a):String(a).trim();h!==a&&delete t[a],t[h]=pf(i),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return K.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&K.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[a0]=this[a0]={accessors:{}}).accessors,i=this.prototype;function a(l){const h=ic(l);r[h]||(f5(i,l),r[h]=!0)}return K.isArray(e)?e.forEach(a):a(e),this}};Ln.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(Ln.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});K.freezeMethods(Ln);function Dg(n,e){const t=this||Ih,r=e||t,i=Ln.from(r.headers);let a=r.data;return K.forEach(n,function(h){a=h.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function eP(n){return!!(n&&n.__CANCEL__)}function Zl(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}K.inherits(Zl,Ne,{__CANCEL__:!0});function tP(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function p5(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function m5(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,l;return e=e!==void 0?e:1e3,function(f){const p=Date.now(),g=r[a];l||(l=p),t[i]=f,r[i]=p;let v=a,I=0;for(;v!==i;)I+=t[v++],v=v%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),p-l<e)return;const C=g&&p-g;return C?Math.round(I*1e3/C):void 0}}function g5(n,e){let t=0,r=1e3/e,i,a;const l=(p,g=Date.now())=>{t=g,i=null,a&&(clearTimeout(a),a=null),n(...p)};return[(...p)=>{const g=Date.now(),v=g-t;v>=r?l(p,g):(i=p,a||(a=setTimeout(()=>{a=null,l(i)},r-v)))},()=>i&&l(i)]}const Wf=(n,e,t=3)=>{let r=0;const i=m5(50,250);return g5(a=>{const l=a.loaded,h=a.lengthComputable?a.total:void 0,f=l-r,p=i(f),g=l<=h;r=l;const v={loaded:l,total:h,progress:h?l/h:void 0,bytes:f,rate:p||void 0,estimated:p&&h&&g?(h-l)/p:void 0,event:a,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(v)},t)},l0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},u0=n=>(...e)=>K.asap(()=>n(...e)),y5=fn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,fn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,_5=fn.hasStandardBrowserEnv?{write(n,e,t,r,i,a,l){if(typeof document>"u")return;const h=[`${n}=${encodeURIComponent(e)}`];K.isNumber(t)&&h.push(`expires=${new Date(t).toUTCString()}`),K.isString(r)&&h.push(`path=${r}`),K.isString(i)&&h.push(`domain=${i}`),a===!0&&h.push("secure"),K.isString(l)&&h.push(`SameSite=${l}`),document.cookie=h.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function v5(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function w5(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function nP(n,e,t){let r=!v5(e);return n&&(r||t==!1)?w5(n,e):e}const c0=n=>n instanceof Ln?{...n}:n;function ea(n,e){e=e||{};const t={};function r(p,g,v,I){return K.isPlainObject(p)&&K.isPlainObject(g)?K.merge.call({caseless:I},p,g):K.isPlainObject(g)?K.merge({},g):K.isArray(g)?g.slice():g}function i(p,g,v,I){if(K.isUndefined(g)){if(!K.isUndefined(p))return r(void 0,p,v,I)}else return r(p,g,v,I)}function a(p,g){if(!K.isUndefined(g))return r(void 0,g)}function l(p,g){if(K.isUndefined(g)){if(!K.isUndefined(p))return r(void 0,p)}else return r(void 0,g)}function h(p,g,v){if(v in e)return r(p,g);if(v in n)return r(void 0,p)}const f={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:h,headers:(p,g,v)=>i(c0(p),c0(g),v,!0)};return K.forEach(Object.keys({...n,...e}),function(g){const v=f[g]||i,I=v(n[g],e[g],g);K.isUndefined(I)&&v!==h||(t[g]=I)}),t}const rP=n=>{const e=ea({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:h}=e;if(e.headers=l=Ln.from(l),e.url=YR(nP(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&l.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),K.isFormData(t)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(K.isFunction(t.getHeaders)){const f=t.getHeaders(),p=["content-type","content-length"];Object.entries(f).forEach(([g,v])=>{p.includes(g.toLowerCase())&&l.set(g,v)})}}if(fn.hasStandardBrowserEnv&&(r&&K.isFunction(r)&&(r=r(e)),r||r!==!1&&y5(e.url))){const f=i&&a&&_5.read(a);f&&l.set(i,f)}return e},E5=typeof XMLHttpRequest<"u",I5=E5&&function(n){return new Promise(function(t,r){const i=rP(n);let a=i.data;const l=Ln.from(i.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:p}=i,g,v,I,C,k;function j(){C&&C(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let N=new XMLHttpRequest;N.open(i.method.toUpperCase(),i.url,!0),N.timeout=i.timeout;function q(){if(!N)return;const ee=Ln.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),ve={data:!h||h==="text"||h==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:ee,config:n,request:N};tP(function(b){t(b),j()},function(b){r(b),j()},ve),N=null}"onloadend"in N?N.onloadend=q:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(q)},N.onabort=function(){N&&(r(new Ne("Request aborted",Ne.ECONNABORTED,n,N)),N=null)},N.onerror=function(de){const ve=de&&de.message?de.message:"Network Error",ye=new Ne(ve,Ne.ERR_NETWORK,n,N);ye.event=de||null,r(ye),N=null},N.ontimeout=function(){let de=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ve=i.transitional||XR;i.timeoutErrorMessage&&(de=i.timeoutErrorMessage),r(new Ne(de,ve.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,N)),N=null},a===void 0&&l.setContentType(null),"setRequestHeader"in N&&K.forEach(l.toJSON(),function(de,ve){N.setRequestHeader(ve,de)}),K.isUndefined(i.withCredentials)||(N.withCredentials=!!i.withCredentials),h&&h!=="json"&&(N.responseType=i.responseType),p&&([I,k]=Wf(p,!0),N.addEventListener("progress",I)),f&&N.upload&&([v,C]=Wf(f),N.upload.addEventListener("progress",v),N.upload.addEventListener("loadend",C)),(i.cancelToken||i.signal)&&(g=ee=>{N&&(r(!ee||ee.type?new Zl(null,n,N):ee),N.abort(),N=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const oe=p5(i.url);if(oe&&fn.protocols.indexOf(oe)===-1){r(new Ne("Unsupported protocol "+oe+":",Ne.ERR_BAD_REQUEST,n));return}N.send(a||null)})},T5=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(p){if(!i){i=!0,h();const g=p instanceof Error?p:this.reason;r.abort(g instanceof Ne?g:new Zl(g instanceof Error?g.message:g))}};let l=e&&setTimeout(()=>{l=null,a(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const h=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),n=null)};n.forEach(p=>p.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>K.asap(h),f}},S5=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},A5=async function*(n,e){for await(const t of R5(n))yield*S5(t,e)},R5=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},h0=(n,e,t,r)=>{const i=A5(n,e);let a=0,l,h=f=>{l||(l=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:p,value:g}=await i.next();if(p){h(),f.close();return}let v=g.byteLength;if(t){let I=a+=v;t(I)}f.enqueue(new Uint8Array(g))}catch(p){throw h(p),p}},cancel(f){return h(f),i.return()}},{highWaterMark:2})},d0=64*1024,{isFunction:Qd}=K,P5=(({Request:n,Response:e})=>({Request:n,Response:e}))(K.global),{ReadableStream:f0,TextEncoder:p0}=K.global,m0=(n,...e)=>{try{return!!n(...e)}catch{return!1}},x5=n=>{n=K.merge.call({skipUndefined:!0},P5,n);const{fetch:e,Request:t,Response:r}=n,i=e?Qd(e):typeof fetch=="function",a=Qd(t),l=Qd(r);if(!i)return!1;const h=i&&Qd(f0),f=i&&(typeof p0=="function"?(k=>j=>k.encode(j))(new p0):async k=>new Uint8Array(await new t(k).arrayBuffer())),p=a&&h&&m0(()=>{let k=!1;const j=new t(fn.origin,{body:new f0,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!j}),g=l&&h&&m0(()=>K.isReadableStream(new r("").body)),v={stream:g&&(k=>k.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!v[k]&&(v[k]=(j,N)=>{let q=j&&j[k];if(q)return q.call(j);throw new Ne(`Response type '${k}' is not supported`,Ne.ERR_NOT_SUPPORT,N)})});const I=async k=>{if(k==null)return 0;if(K.isBlob(k))return k.size;if(K.isSpecCompliantForm(k))return(await new t(fn.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(K.isArrayBufferView(k)||K.isArrayBuffer(k))return k.byteLength;if(K.isURLSearchParams(k)&&(k=k+""),K.isString(k))return(await f(k)).byteLength},C=async(k,j)=>{const N=K.toFiniteNumber(k.getContentLength());return N??I(j)};return async k=>{let{url:j,method:N,data:q,signal:oe,cancelToken:ee,timeout:de,onDownloadProgress:ve,onUploadProgress:ye,responseType:b,headers:R,withCredentials:x="same-origin",fetchOptions:O}=rP(k),V=e||fetch;b=b?(b+"").toLowerCase():"text";let F=T5([oe,ee&&ee.toAbortSignal()],de),A=null;const Ae=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let at;try{if(ye&&p&&N!=="get"&&N!=="head"&&(at=await C(R,q))!==0){let M=new t(j,{method:"POST",body:q,duplex:"half"}),Q;if(K.isFormData(q)&&(Q=M.headers.get("content-type"))&&R.setContentType(Q),M.body){const[xe,Re]=l0(at,Wf(u0(ye)));q=h0(M.body,d0,xe,Re)}}K.isString(x)||(x=x?"include":"omit");const Ze=a&&"credentials"in t.prototype,et={...O,signal:F,method:N.toUpperCase(),headers:R.normalize().toJSON(),body:q,duplex:"half",credentials:Ze?x:void 0};A=a&&new t(j,et);let ie=await(a?V(A,O):V(j,et));const Ee=g&&(b==="stream"||b==="response");if(g&&(ve||Ee&&Ae)){const M={};["status","statusText","headers"].forEach(Ve=>{M[Ve]=ie[Ve]});const Q=K.toFiniteNumber(ie.headers.get("content-length")),[xe,Re]=ve&&l0(Q,Wf(u0(ve),!0))||[];ie=new r(h0(ie.body,d0,xe,()=>{Re&&Re(),Ae&&Ae()}),M)}b=b||"text";let he=await v[K.findKey(v,b)||"text"](ie,k);return!Ee&&Ae&&Ae(),await new Promise((M,Q)=>{tP(M,Q,{data:he,headers:Ln.from(ie.headers),status:ie.status,statusText:ie.statusText,config:k,request:A})})}catch(Ze){throw Ae&&Ae(),Ze&&Ze.name==="TypeError"&&/Load failed|fetch/i.test(Ze.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,k,A),{cause:Ze.cause||Ze}):Ne.from(Ze,Ze&&Ze.code,k,A)}}},b5=new Map,iP=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:i}=e,a=[r,i,t];let l=a.length,h=l,f,p,g=b5;for(;h--;)f=a[h],p=g.get(f),p===void 0&&g.set(f,p=h?new Map:x5(e)),g=p;return p};iP();const Iv={http:HF,xhr:I5,fetch:{get:iP}};K.forEach(Iv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const g0=n=>`- ${n}`,C5=n=>K.isFunction(n)||n===null||n===!1;function k5(n,e){n=K.isArray(n)?n:[n];const{length:t}=n;let r,i;const a={};for(let l=0;l<t;l++){r=n[l];let h;if(i=r,!C5(r)&&(i=Iv[(h=String(r)).toLowerCase()],i===void 0))throw new Ne(`Unknown adapter '${h}'`);if(i&&(K.isFunction(i)||(i=i.get(e))))break;a[h||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=t?l.length>1?`since :
`+l.map(g0).join(`
`):" "+g0(l[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return i}const sP={getAdapter:k5,adapters:Iv};function Vg(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Zl(null,n)}function y0(n){return Vg(n),n.headers=Ln.from(n.headers),n.data=Dg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),sP.getAdapter(n.adapter||Ih.adapter,n)(n).then(function(r){return Vg(n),r.data=Dg.call(n,n.transformResponse,r),r.headers=Ln.from(r.headers),r},function(r){return eP(r)||(Vg(n),r&&r.response&&(r.response.data=Dg.call(n,n.transformResponse,r.response),r.response.headers=Ln.from(r.response.headers))),Promise.reject(r)})}const oP="1.13.2",Op={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Op[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const _0={};Op.transitional=function(e,t,r){function i(a,l){return"[Axios v"+oP+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,h)=>{if(e===!1)throw new Ne(i(l," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!_0[l]&&(_0[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,h):!0}};Op.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N5(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],l=e[a];if(l){const h=n[a],f=h===void 0||l(h,a,n);if(f!==!0)throw new Ne("option "+a+" must be "+f,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+a,Ne.ERR_BAD_OPTION)}}const mf={assertOptions:N5,validators:Op},Wr=mf.validators;let Bo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new o0,response:new o0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ea(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&mf.assertOptions(r,{silentJSONParsing:Wr.transitional(Wr.boolean),forcedJSONParsing:Wr.transitional(Wr.boolean),clarifyTimeoutError:Wr.transitional(Wr.boolean)},!1),i!=null&&(K.isFunction(i)?t.paramsSerializer={serialize:i}:mf.assertOptions(i,{encode:Wr.function,serialize:Wr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mf.assertOptions(t,{baseUrl:Wr.spelling("baseURL"),withXsrfToken:Wr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&K.merge(a.common,a[t.method]);a&&K.forEach(["delete","get","head","post","put","patch","common"],k=>{delete a[k]}),t.headers=Ln.concat(l,a);const h=[];let f=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(f=f&&j.synchronous,h.unshift(j.fulfilled,j.rejected))});const p=[];this.interceptors.response.forEach(function(j){p.push(j.fulfilled,j.rejected)});let g,v=0,I;if(!f){const k=[y0.bind(this),void 0];for(k.unshift(...h),k.push(...p),I=k.length,g=Promise.resolve(t);v<I;)g=g.then(k[v++],k[v++]);return g}I=h.length;let C=t;for(;v<I;){const k=h[v++],j=h[v++];try{C=k(C)}catch(N){j.call(this,N);break}}try{g=y0.call(this,C)}catch(k){return Promise.reject(k)}for(v=0,I=p.length;v<I;)g=g.then(p[v++],p[v++]);return g}getUri(e){e=ea(this.defaults,e);const t=nP(e.baseURL,e.url,e.allowAbsoluteUrls);return YR(t,e.params,e.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(e){Bo.prototype[e]=function(t,r){return this.request(ea(r||{},{method:e,url:t,data:(r||{}).data}))}});K.forEach(["post","put","patch"],function(e){function t(r){return function(a,l,h){return this.request(ea(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Bo.prototype[e]=t(),Bo.prototype[e+"Form"]=t(!0)});let D5=class aP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(h=>{r.subscribe(h),a=h}).then(i);return l.cancel=function(){r.unsubscribe(a)},l},e(function(a,l,h){r.reason||(r.reason=new Zl(a,l,h),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new aP(function(i){e=i}),cancel:e}}};function V5(n){return function(t){return n.apply(null,t)}}function O5(n){return K.isObject(n)&&n.isAxiosError===!0}const Py={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Py).forEach(([n,e])=>{Py[e]=n});function lP(n){const e=new Bo(n),t=jR(Bo.prototype.request,e);return K.extend(t,Bo.prototype,e,{allOwnKeys:!0}),K.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return lP(ea(n,i))},t}const Nt=lP(Ih);Nt.Axios=Bo;Nt.CanceledError=Zl;Nt.CancelToken=D5;Nt.isCancel=eP;Nt.VERSION=oP;Nt.toFormData=Vp;Nt.AxiosError=Ne;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=V5;Nt.isAxiosError=O5;Nt.mergeConfig=ea;Nt.AxiosHeaders=Ln;Nt.formToJSON=n=>ZR(K.isHTMLForm(n)?new FormData(n):n);Nt.getAdapter=sP.getAdapter;Nt.HttpStatusCode=Py;Nt.default=Nt;const{Axios:l3,AxiosError:u3,CanceledError:c3,isCancel:h3,CancelToken:d3,VERSION:f3,all:p3,Cancel:m3,isAxiosError:g3,spread:y3,toFormData:_3,AxiosHeaders:v3,HttpStatusCode:w3,formToJSON:E3,getAdapter:I3,mergeConfig:T3}=Nt,Hr={onBooksSnapshot(n){return bn.collection("books").onSnapshot(e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));n(t)})},async createBook(n){return bn.collection("books").add({...n,status:"Available"})},async deleteBook(n){return bn.collection("books").doc(n).delete()},async reserveBook(n,e,t,r){try{return(await Nt.post("http://127.0.0.1:5001/schoolbook-290b6/us-central1/handleBookTransaction",{bookId:n,buyerId:e,agreedPrice:Number(t),meetingTime:r})).data}catch(i){throw i}},async startTransaction(n,e,t){if(!e)return alert("");if(e.uid===n.sellerId)return alert("");try{const r=bn.collection("transactions"),a=await r.where("bookId","==",n.id).where("buyerId","==",e.uid).get();if(!a.empty)t(a.docs[0].id);else{const l=await r.add({bookId:n.id,bookTitle:n.title,sellerId:n.sellerId,buyerId:e.uid,price:n.price,status:"Pending",timestamp:new Date});t(l.id)}}catch(r){console.error(r),alert(": "+r.message)}},async confirmTransactionTime(n){const{functions:e}=await Kd(async()=>{const{functions:r}=await Promise.resolve().then(()=>Gd);return{functions:r}},void 0);return e.httpsCallable("confirmTransactionTime")({transactionId:n})},getUserTransactions(n,e){return bn.collection("transactions").where("buyerId","==",n).onSnapshot(e)},getSellerTransactions(n,e){return bn.collection("transactions").where("sellerId","==",n).onSnapshot(e)},async updateTransactionStatus(n,e){const{functions:t}=await Kd(async()=>{const{functions:i}=await Promise.resolve().then(()=>Gd);return{functions:i}},void 0);return t.httpsCallable("updateTransactionStatus")({transactionId:n,newStatus:e})},async requestReschedule(n,e,t){const{functions:r}=await Kd(async()=>{const{functions:a}=await Promise.resolve().then(()=>Gd);return{functions:a}},void 0);return r.httpsCallable("requestReschedule")({transactionId:n,newTime:e,reason:t})},async respondToReschedule(n,e){const{functions:t}=await Kd(async()=>{const{functions:i}=await Promise.resolve().then(()=>Gd);return{functions:i}},void 0);return t.httpsCallable("respondToReschedule")({transactionId:n,response:e})},onWishesSnapshot(n){return bn.collection("wishes").orderBy("timestamp","desc").onSnapshot(e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));n(t)})},async addWish({content:n,user:e,avatarId:t}){return bn.collection("wishes").add({uid:"anonymous",user:e||"",avatarId:t||"default",content:n,timestamp:new Date})},async addBook(n){return bn.collection("books").add({...n,status:"Available",timestamp:new Date})},recordCheckIn(){localStorage.setItem("lastCheckIn",new Date().toDateString())},hasCheckedInToday(){return localStorage.getItem("lastCheckIn")===new Date().toDateString()}},v0={async sendMessage(n,e,t,r){if(r.trim())try{await bn.collection("transactions").doc(n).collection("messages").add({senderId:e,senderName:t,content:r.trim(),timestamp:new Date})}catch(i){throw console.error("Error sending message:",i),i}},subscribeToMessages(n,e){return bn.collection("transactions").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(r=>{const i=r.docs.map(a=>({id:a.id,...a.data()}));e(i)},r=>{console.error("Error subscribing to messages:",r)})}},Lp={fontFamily:'"Noto Sans TC", "PMingLiU", sans-serif'},je={whiteBucks:"#E8E3DF",fossilGray:"#C9C3B6",brushwood:"#9E9081",chocolateBubble:"#A58976",brownWindmill:"#756256",bgLight:"#F9F7F5"},L5=["","","","","","",""],M5=["","","","","","","","","",""],F5=["","",""],j5=[{id:"all",name:""},{id:"chi",name:""},{id:"eng",name:""},{id:"math",name:""},{id:"sci",name:""},{id:"soc",name:""},{id:"extra",name:""},{id:"exam",name:""}],As=[{id:"default",name:"",price:0,src:"https://i.postimg.cc/9fW28Bc0/niu.jpg"},{id:"special1",name:"",price:100,src:"https://i.postimg.cc/zyP43KbN/tu-zi.jpg"},{id:"special2",name:"",price:100,src:"https://i.postimg.cc/pd2vGBP9/zhu.jpg"},{id:"special3",name:"",price:100,src:"https://i.postimg.cc/wB6zfk97/gou.jpg"},{id:"special4",name:"",price:100,src:"https://i.postimg.cc/qNvyYNG3/EE1D91FC-D76E-4FBA-A85F-33F8D82EAFEB.jpg"},{id:"special5",name:"",price:100,src:"https://i.postimg.cc/VkjgJMr4/84AD5380-E492-4603-B7C7-4BD68372B94A.jpg"},{id:"cat",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cat&backgroundColor=FFD700"},{id:"glasses",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=glasses&backgroundColor=4ADE80"},{id:"cool",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cool&backgroundColor=A58976"},{id:"artist",name:"",price:100,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=artist&backgroundColor=FFB6C1"},{id:"robot",name:"",price:100,src:"https://api.dicebear.com/7.x/bottts/svg?seed=robot&backgroundColor=E0E0E0"}],Mp=({type:n,price:e,originalPrice:t,large:r=!1})=>n==="exchange"?T.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:je.brushwood},children:[T.jsx(rb,{size:r?20:14}),T.jsx("span",{children:""})]}):n==="gift"?T.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:je.chocolateBubble},children:[T.jsx(Gx,{size:r?20:14}),T.jsx("span",{children:""})]}):T.jsxs("div",{className:"flex flex-col",children:[T.jsxs("div",{className:`font-bold ${r?"text-3xl":"text-lg"}`,style:{color:je.brownWindmill},children:["NT$ ",e]}),t&&T.jsxs("span",{className:"text-xs line-through",style:{color:je.fossilGray},children:[" $",t]})]}),U5=({items:n,onNavigate:e})=>{const[t,r]=be.useState(0),i=(n||[]).slice(0,5);if(be.useEffect(()=>{if(i.length===0)return;const l=setInterval(()=>{r(h=>(h+1)%i.length)},4e3);return()=>clearInterval(l)},[i.length]),i.length===0)return null;const a=i[t];return T.jsxs("div",{className:"h-full",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[T.jsx("span",{className:"bg-orange-500 text-white p-1 rounded-full",children:T.jsx(Wx,{size:12,fill:"currentColor"})}),T.jsxs("h2",{className:"text-sm font-bold tracking-wide flex items-center gap-2",style:{color:je.brownWindmill},children:[" ",T.jsx("span",{className:"text-xs font-normal px-2 py-0.5 rounded-full bg-orange-100 text-orange-600",children:""})]})]}),T.jsxs("div",{className:"relative w-full h-[calc(100%-32px)] bg-white rounded-xl shadow-sm overflow-hidden border cursor-pointer group",style:{borderColor:je.whiteBucks},onClick:()=>e("product",a),children:[T.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-xl opacity-30 animate-pulse-slow transition-all duration-1000 transform scale-110",style:{backgroundImage:`url(${a.cover||a.imageBase64})`}},a.id+"-bg"),T.jsxs("div",{className:"absolute inset-0 flex items-center p-4 z-10",children:[T.jsx("div",{className:"w-28 h-36 flex-shrink-0 rounded-lg overflow-hidden shadow-lg border border-white transform transition-transform duration-500 hover:scale-105 animate-fade-in-up",children:T.jsx("img",{src:a.cover||a.imageBase64,alt:a.title,className:"w-full h-full object-cover"})},a.id+"-img"),T.jsxs("div",{className:"flex-1 ml-4 flex flex-col justify-center h-full animate-fade-in-right",children:[T.jsxs("div",{className:"flex items-start justify-between mb-1",children:[T.jsx("span",{className:"text-xs font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-md",children:"HOT"}),T.jsxs("span",{className:"text-xs text-gray-400",children:[t+1," / ",i.length]})]}),T.jsx("h3",{className:"font-bold text-lg text-[#5D4037] line-clamp-2 leading-tight mb-2",children:a.title}),T.jsxs("div",{className:"mt-auto",children:[T.jsx("p",{className:"text-xs text-gray-500 mb-1",children:a.author}),T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx(Mp,{type:a.type,price:a.price,originalPrice:a.originalPrice}),T.jsx("div",{className:"w-8 h-8 rounded-full bg-[#756256] text-white flex items-center justify-center shadow-md transform translate-x-10 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 transition-all duration-300",children:T.jsx(Cx,{size:16})})]})]})]},a.id+"-text")]}),T.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 z-20",children:i.map((l,h)=>T.jsx("div",{className:`h-1 rounded-full overflow-hidden transition-all duration-300 ${h===t?"w-6 bg-gray-200":"w-1.5 bg-gray-300"}`,children:h===t&&T.jsx("div",{className:"h-full bg-[#756256] animate-progress-fill",style:{width:"100%"}})},h))})]}),T.jsx("style",{children:`
        @keyframes progress-fill { from { width: 0%; } to { width: 100%; } }
        .animate-progress-fill { animation: progress-fill 4s linear; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
        @keyframes fade-in-right { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
        .animate-fade-in-right { animation: fade-in-right 0.5s ease-out forwards; }
      `})]})},B5=({coins:n,isCheckedIn:e,onCheckIn:t,onGoToStore:r,examCountdown:i,isLoading:a,books:l,onNavigate:h})=>{const[f,p]=be.useState(0),[g,v]=be.useState(0),[I,C]=be.useState(!1),[k,j]=be.useState({title:"",date:new Date().toISOString().slice(0,10).replace(/-/g,"")}),N=i?.exams||[],q=N.length>0,oe=(l||[]).slice(0,5).map(x=>{const O=!x.grade||x.grade===""||x.grade==="all"?"":x.grade+" ",V=x.seller?.name||"";return{time:"",content:`${O}${V} ${x.title}`}}),ee=oe.length>0?oe:[{time:"",content:" SchoolBookExchange"},{time:"",content:""}];be.useEffect(()=>{const x=setInterval(()=>{v(O=>(O+1)%ee.length)},3500);return()=>clearInterval(x)},[ee.length]);const de=ee[g]||ee[0],ve=()=>{if(f==="custom"){const x=new Date(k.date),O=new Date;O.setHours(0,0,0,0),x.setHours(0,0,0,0);const V=x-O,F=Math.ceil(V/(1e3*60*60*24));return{title:`${k.title}`,days:Math.max(0,F)}}return N&&N.length>0&&N[f]?{title:`${N[f].title}`,days:N[f].daysLeft}:{title:a?"...":" ()",days:a?"--":300}},{title:ye,days:b}=ve(),R=()=>T.jsxs("div",{className:"flex items-center text-xs text-gray-400 relative z-20 w-full justify-center",children:[T.jsx("span",{className:"mr-1 flex-shrink-0",children:""}),T.jsxs("div",{className:"relative inline-block group max-w-[85%]",children:[T.jsx("select",{value:f,onChange:x=>{const O=x.target.value;C(!1),p(Number(O))},className:"appearance-none bg-transparent pr-4 outline-none cursor-pointer hover:text-gray-600 font-medium text-gray-500 truncate",disabled:!q,children:q?N.map((x,O)=>T.jsx("option",{value:O,children:x.title},O)):T.jsx("option",{children:a?"":""})}),T.jsx(Ux,{size:10,className:"absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"})]})]});return T.jsxs("div",{className:"mx-4 mt-4 mb-6 space-y-3",children:[T.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[T.jsx("div",{className:"col-span-2 h-44",children:T.jsx(U5,{items:l,onNavigate:h})}),T.jsxs("div",{className:"col-span-1 h-44 flex flex-col gap-2",children:[T.jsxs("div",{className:"flex-1 bg-white p-2 rounded-xl border flex flex-col items-center relative overflow-hidden",style:{borderColor:je.whiteBucks},children:[T.jsx("div",{className:"absolute top-0 right-0 w-12 h-12 bg-red-50 rounded-full -mr-5 -mt-5 z-0"}),T.jsxs("div",{className:"relative z-10 w-full flex flex-col justify-between h-full",children:[T.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 font-bold justify-center",children:[T.jsx(Lx,{size:12,className:"text-red-500"})," "]}),T.jsxs("div",{className:"flex flex-col items-center justify-center -mt-1",children:[T.jsx("div",{className:"text-3xl font-bold text-gray-800 tracking-tighter leading-none",children:b}),T.jsx("div",{className:"text-[10px] text-gray-500 font-bold",children:""})]}),T.jsx("div",{className:"w-full text-center",children:T.jsx(R,{})})]})]}),T.jsxs("div",{className:"h-16 bg-white p-2 rounded-xl border flex flex-col justify-between relative overflow-hidden cursor-pointer hover:bg-yellow-50 transition-colors",style:{borderColor:je.whiteBucks},onClick:t,children:[T.jsx("div",{className:"flex justify-between items-center",children:T.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold text-[#756256]",children:[T.jsx(gf,{size:12,className:"text-yellow-500"})," ",n]})}),T.jsx("div",{className:"text-[10px] text-gray-400 text-center font-bold",children:""})]})]})]}),T.jsxs("div",{className:"bg-white rounded-lg border px-3 py-2 flex items-center gap-3 shadow-sm",style:{borderColor:je.whiteBucks},children:[T.jsx("div",{className:"bg-red-50 text-red-500 p-1 rounded-md",children:T.jsx(wb,{size:14,fill:"currentColor"})}),T.jsx("div",{className:"flex-1 overflow-hidden h-5 relative",children:T.jsxs("div",{className:"absolute animate-slide-up text-xs font-medium text-gray-600 w-full truncate",children:[T.jsx("span",{className:"font-bold text-[#756256] mr-1",children:de.time}),de.content]},g)})]})]})},z5=({wishes:n,onAddWish:e,currentUser:t,currentAvatar:r})=>{const[i,a]=be.useState(!1),[l,h]=be.useState(""),f=()=>{l.trim()&&(e(l),h(""),a(!1))};return T.jsxs("div",{className:"mb-8 px-4",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[T.jsx("span",{className:"bg-yellow-400 text-white p-1 rounded-full",children:T.jsx(fb,{size:16,fill:"currentColor"})}),T.jsx("h2",{className:"text-lg font-bold tracking-wide",style:{color:je.brownWindmill},children:""})]}),T.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",style:{borderColor:je.whiteBucks},children:[n.map(p=>{const g=As.find(v=>v.id===p.avatarId)||As[0];return T.jsxs("div",{className:"flex gap-3 border-b last:border-0 pb-3 last:pb-0",style:{borderColor:je.bgLight},children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:T.jsx("img",{src:g.src,alt:"avatar",className:"w-full h-full object-cover"})}),T.jsxs("div",{className:"flex-1",children:[T.jsxs("div",{className:"flex justify-between items-center mb-1",children:[T.jsx("span",{className:"text-sm font-bold text-[#756256]",children:p.user}),T.jsx("span",{className:"text-xs font-normal text-gray-400",children:p.time})]}),T.jsx("p",{className:"text-sm text-[#9E9081]",children:p.content})]})]},p.id)}),T.jsxs("button",{onClick:()=>a(!0),className:"w-full py-2 mt-2 text-xs font-bold text-[#9E9081] border border-dashed hover:bg-[#F9F7F5] rounded-lg transition-colors flex items-center justify-center gap-1",style:{borderColor:je.fossilGray},children:[T.jsx(by,{size:14})," "]})]}),i&&T.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:T.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl overflow-hidden shadow-2xl animate-scale-up flex flex-col h-[60vh] md:h-auto",children:[T.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:je.whiteBucks},children:[T.jsx("button",{onClick:()=>a(!1),className:"p-1",children:T.jsx(Cy,{size:24,className:"text-gray-600"})}),T.jsx("span",{className:"font-bold text-[#756256] text-lg",children:""}),T.jsx("button",{onClick:f,className:"text-blue-500 font-bold text-sm px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!l.trim(),children:""})]}),T.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden border border-gray-100",children:T.jsx("img",{src:r?.src,alt:"avatar",className:"w-full h-full object-cover"})}),T.jsx("span",{className:"font-bold text-[#5D4037]",children:t?.name||""})]}),T.jsx("textarea",{className:"flex-1 w-full resize-none outline-none text-[#5D4037] placeholder-gray-400 text-lg leading-relaxed",placeholder:"...",value:l,onChange:p=>h(p.target.value),autoFocus:!0})]})]})})]})},q5=({onLogin:n})=>{const[e,t]=be.useState(!1),[r,i]=be.useState(!1),[a,l]=be.useState(""),[h,f]=be.useState(""),[p,g]=be.useState(""),[v,I]=be.useState(""),[C,k]=be.useState(""),j=async N=>{if(N.preventDefault(),i(!0),e){if(!a.endsWith("@shsh.tw")){alert(" @shsh.tw "),i(!1);return}if(!p||!v||!C){alert(""),i(!1);return}}try{if(e){await df.signUp(a,h);try{await df.completeProfile({realName:p,studentId:v,nickname:C}),alert("")}catch(q){console.error("Profile completion failed",q),alert("")}alert(""),t(!1)}else await df.login(a,h)}catch(q){console.error(q),alert((e?": ":": ")+q.message)}finally{i(!1)}};return r?T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#F9F7F5]",children:T.jsx("div",{className:"text-[#756256] font-bold",children:"..."})}):T.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Lp,backgroundColor:je.bgLight,color:je.brownWindmill},children:T.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border",style:{borderColor:je.whiteBucks},children:[T.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:je.brownWindmill},children:e?"":""}),T.jsx("p",{className:"text-sm mb-6",style:{color:je.brushwood},children:e?"":""}),T.jsxs("form",{onSubmit:j,className:"space-y-3 mb-4",children:[e&&T.jsxs(T.Fragment,{children:[T.jsx("input",{type:"text",value:p,onChange:N=>g(N.target.value),placeholder:" ()",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0}),T.jsx("input",{type:"text",value:v,onChange:N=>I(N.target.value),placeholder:"",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0}),T.jsx("input",{type:"text",value:C,onChange:N=>k(N.target.value),placeholder:"",className:"w-full p-3 border rounded-xl bg-gray-50",required:!0})]}),T.jsx("input",{type:"email",value:a,onChange:N=>l(N.target.value),placeholder:"Email (@shsh.tw)",className:"w-full p-3 border rounded-xl",required:!0}),T.jsx("input",{type:"password",value:h,onChange:N=>f(N.target.value),placeholder:"Password",className:"w-full p-3 border rounded-xl",required:!0}),T.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 rounded-xl border-2 font-bold mb-3 hover:bg-gray-50 flex items-center justify-center gap-2",style:{borderColor:je.whiteBucks,color:je.brownWindmill},children:r?"...":e?"":""})]}),T.jsx("button",{onClick:()=>t(!e),className:"text-xs text-gray-400 hover:underline",children:e?"":" ()"})]})})},$5=({product:n,onBack:e,onContact:t,currentUser:r})=>{if(!n)return null;const i=r?.uid===n.sellerId;return T.jsxs("div",{className:"min-h-screen pb-24 bg-white",style:Lp,children:[T.jsxs("nav",{className:"fixed top-0 w-full z-50 flex justify-between items-center px-4 py-3 bg-white/80 backdrop-blur-md border-b",style:{borderColor:je.whiteBucks},children:[T.jsx("button",{onClick:e,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200",children:T.jsx(zx,{size:20,color:je.brownWindmill})}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:T.jsx(hb,{size:20,color:je.brownWindmill})}),T.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:T.jsx(Qx,{size:20,color:je.brownWindmill})})]})]}),T.jsxs("div",{className:"pt-16 pb-6 md:pt-20 md:pb-12 md:px-8 max-w-6xl mx-auto md:flex md:gap-10 md:items-start",children:[T.jsx("div",{className:"aspect-[4/3] bg-gray-100 relative md:w-1/2 md:aspect-square md:rounded-2xl md:overflow-hidden md:shadow-sm md:sticky md:top-24",children:T.jsx("img",{src:n.cover||n.imageBase64||"https://dummyimage.com/600x400/eee/aaa",alt:n.title,className:"w-full h-full object-contain bg-[#F9F7F5]"})}),T.jsxs("div",{className:"px-5 mt-6 md:w-1/2 md:px-0 md:mt-0",children:[T.jsxs("div",{className:"flex gap-2 mb-2",children:[T.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.subject}),n.grade&&n.grade!==""&&T.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.grade})]}),T.jsx("h1",{className:"text-2xl md:text-3xl font-bold mt-4 mb-2 leading-tight",style:{color:je.brownWindmill},children:n.title}),T.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[n.author,"  ",n.publisher]}),T.jsx("div",{className:"flex items-end gap-3 mb-6 pb-6 border-b",style:{borderColor:je.whiteBucks},children:T.jsx(Mp,{type:n.type,price:n.price,originalPrice:n.originalPrice,large:!0})}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg inline-block border border-gray-100",children:n.conditionLevel}),T.jsx("p",{className:"text-gray-700 mt-2",children:n.location?n.location:""})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:n.description||""})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),T.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-[#F9F7F5] border border-stone-100",children:[T.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white shadow-sm",children:T.jsx(I0,{size:24,className:"text-gray-500"})}),T.jsxs("div",{children:[T.jsxs("div",{className:"font-bold text-[#756256] text-lg",children:[n.seller?.nickname||n.seller?.name||"",T.jsxs("span",{className:"text-sm text-gray-500 font-normal ml-2",children:["@",n.seller?.studentId||""]})]}),T.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[T.jsx(mb,{size:12,fill:"#fbbf24",className:"text-yellow-400"}),T.jsx("span",{className:"font-bold text-gray-700",children:n.seller?.score||5})]})]})]})]}),!i&&T.jsx("div",{className:"hidden md:block pt-4",children:T.jsxs("button",{onClick:t,className:"w-full py-4 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2 text-lg",children:[T.jsx(Og,{size:20}),"  / "]})})]})]})]}),!i&&T.jsx("div",{className:"fixed bottom-0 left-0 w-full p-4 bg-white border-t safe-area-bottom flex gap-3 md:hidden z-40",style:{borderColor:je.whiteBucks},children:T.jsxs("button",{onClick:t,className:"flex-1 py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-colors flex items-center justify-center gap-2",children:[T.jsx(Og,{size:18})," "]})})]})},W5=({transactionId:n,currentUser:e,title:t,onClose:r})=>{const[i,a]=be.useState([]),[l,h]=be.useState(""),f=be.useRef(null);be.useEffect(()=>{if(!n)return;const g=v0.subscribeToMessages(n,v=>{a(v),setTimeout(()=>f.current?.scrollIntoView({behavior:"smooth"}),100)});return()=>g&&g()},[n]);const p=async()=>{if(l.trim())try{await v0.sendMessage(n,e.uid,e.name||e.nickname||"",l),h("")}catch(g){console.error(g),alert(": "+g.message)}};return T.jsxs("div",{className:"fixed bottom-4 right-4 w-80 h-96 bg-white rounded-t-xl rounded-bl-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[T.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center shadow-md",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(Og,{size:18}),T.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:t||""})]}),T.jsx("button",{onClick:r,className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:T.jsx(Cy,{size:16})})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 bg-[#F9F7F5]",children:[i.length===0&&T.jsx("div",{className:"text-center text-xs text-gray-400 mt-4",children:""}),i.map(g=>{const v=g.senderId===e.uid;return T.jsx("div",{className:`flex ${v?"justify-end":"justify-start"}`,children:T.jsx("div",{className:`max-w-[80%] rounded-xl px-3 py-2 text-sm shadow-sm ${v?"bg-[#756256] text-white rounded-tr-none":"bg-white text-gray-700 rounded-tl-none border"}`,children:g.content})},g.id)}),T.jsx("div",{ref:f})]}),T.jsxs("div",{className:"p-3 bg-white border-t flex gap-2",children:[T.jsx("input",{type:"text",value:l,onChange:g=>h(g.target.value),onKeyDown:g=>g.key==="Enter"&&p(),placeholder:"...",className:"flex-1 bg-gray-100 rounded-full px-3 py-2 text-sm outline-none focus:ring-1 focus:ring-[#756256]"}),T.jsx("button",{onClick:p,className:"bg-[#756256] text-white p-2 rounded-full hover:bg-[#5D4E44] transition-colors",children:T.jsx(ab,{size:16})})]})]})},H5=({currentUser:n,onSelectChat:e,onClose:t})=>{const[r,i]=be.useState([]);return be.useEffect(()=>{if(!n)return;const a=new Map,l=p=>{p.forEach(g=>{a.set(g.id,{id:g.id,...g.data()})}),i(Array.from(a.values()).sort((g,v)=>{const I=g.timestamp?.toDate?g.timestamp.toDate():new Date(g.timestamp);return(v.timestamp?.toDate?v.timestamp.toDate():new Date(v.timestamp))-I}))},h=Hr.getUserTransactions(n.uid,l),f=Hr.getSellerTransactions(n.uid,l);return()=>{h(),f()}},[n]),T.jsxs("div",{className:"fixed bottom-20 right-4 w-80 max-h-96 bg-white rounded-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[T.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center",children:[T.jsx("span",{className:"font-bold",children:""}),T.jsx("button",{onClick:t,className:"hover:bg-white/20 rounded-full p-1",children:T.jsx(Cy,{size:16})})]}),T.jsxs("div",{className:"overflow-y-auto p-2 space-y-2 bg-[#F9F7F5] flex-1",children:[r.length===0&&T.jsx("div",{className:"text-center text-gray-400 py-4 text-sm",children:""}),r.map(a=>T.jsxs("div",{onClick:()=>e({transactionId:a.id,title:a.bookTitle}),className:"p-3 bg-white hover:bg-gray-50 rounded-lg cursor-pointer transition-colors shadow-sm border border-gray-100",children:[T.jsx("div",{className:"font-bold text-[#756256] text-sm truncate",children:a.bookTitle}),T.jsxs("div",{className:"text-xs text-gray-500 flex justify-between mt-1",children:[T.jsx("span",{children:a.buyerId===n.uid?"":""}),T.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] ${a.status==="Completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:a.status==="Pending"?"":a.status})]})]},a.id))]})]})},G5=({onClose:n,onConfirm:e,coins:t})=>T.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:T.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xs text-center shadow-2xl animate-scale-up",children:[T.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4 text-yellow-500",children:T.jsx(gf,{size:32})}),T.jsx("h3",{className:"text-xl font-bold text-[#5D4037] mb-2",children:""}),T.jsxs("p",{className:"text-gray-500 mb-6",children:[" ",t," "]}),T.jsx("button",{onClick:e,className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44]",children:""})]})}),K5=({currentUser:n,userBooks:e,onNavigate:t,onUpload:r,onBuyAvatar:i,onEquipAvatar:a,myAvatars:l,currentAvatar:h,coins:f})=>{const[p,g]=be.useState("shelf"),[v,I]=be.useState({title:"",author:"",publisher:"",subject:"",grade:"",price:"",originalPrice:"",type:"sell",conditionLevel:"",description:"",location:"",cover:null,imageBase64:null}),[C,k]=be.useState(null),j=q=>{const oe=q.target.files[0];if(oe){const ee=new FileReader;ee.onloadend=()=>I({...v,imageBase64:ee.result,cover:null}),ee.readAsDataURL(oe)}},N=q=>{if(q.preventDefault(),!v.title||!v.price)return alert("");r({...v,sellerId:n.uid,seller:{name:n.realName||n.displayName,studentId:n.studentId,score:5}}),alert(""),g("shelf"),I({...v,title:"",price:"",imageBase64:null})};return T.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] pb-24",style:Lp,children:[T.jsxs("div",{className:"bg-white p-6 pb-4 shadow-sm border-b relative overflow-hidden",style:{borderColor:je.whiteBucks},children:[T.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[T.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>g("store"),children:[T.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 border-4 border-white shadow-md overflow-hidden",children:T.jsx("img",{src:h?.src,alt:"avatar",className:"w-full h-full object-cover"})}),T.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-500 p-1 rounded-full border-2 border-white",children:T.jsx(ub,{size:12,className:"text-white"})})]}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-2xl font-bold",style:{color:je.brownWindmill},children:n.realName||n.displayName||""}),T.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["@",n.studentId||"unknown"]}),T.jsxs("div",{className:"flex gap-2 mt-2",children:[T.jsxs("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[T.jsx(gf,{size:10})," ",f]}),T.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full font-bold",children:" 5.0"})]})]})]}),T.jsx("div",{className:"flex mt-6 border-b",style:{borderColor:je.whiteBucks},children:[{id:"shelf",label:"",icon:Vx},{id:"upload",label:"",icon:by},{id:"store",label:"",icon:E0}].map(q=>T.jsxs("button",{onClick:()=>g(q.id),className:`flex-1 pb-3 text-center text-sm font-bold transition-colors relative ${p===q.id?"text-[#756256]":"text-gray-400"}`,children:[T.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[T.jsx(q.icon,{size:16})," ",q.label]}),p===q.id&&T.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-[#756256] rounded-t-full"})]},q.id))})]}),T.jsxs("div",{className:"p-4",children:[p==="shelf"&&T.jsx("div",{className:"space-y-4",children:e.length===0?T.jsx("div",{className:"text-center py-10 text-gray-400",children:""}):T.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.map(q=>T.jsxs("div",{onClick:()=>t("product",q),className:"bg-white rounded-lg shadow-sm border overflow-hidden cursor-pointer",children:[T.jsxs("div",{className:"aspect-[3/4] bg-gray-100 relative",children:[T.jsx("img",{src:q.cover||q.imageBase64||"https://dummyimage.com/300x400/eee/aaa",className:"w-full h-full object-cover"}),T.jsx("span",{className:"absolute top-1 right-1 bg-black/50 text-white text-[10px] px-1.5 py-0.5 rounded-md",children:""})]}),T.jsxs("div",{className:"p-2",children:[T.jsx("h3",{className:"font-bold text-sm text-[#5D4037] truncate",children:q.title}),T.jsx(Mp,{type:q.type,price:q.price})]})]},q.id))})}),p==="upload"&&T.jsxs("form",{onSubmit:N,className:"space-y-4 max-w-lg mx-auto bg-white p-6 rounded-xl shadow-sm border",style:{borderColor:je.whiteBucks},children:[T.jsxs("div",{className:"w-full aspect-video bg-gray-50 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer hover:bg-gray-100 transition-colors relative overflow-hidden",style:{borderColor:je.fossilGray},children:[T.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"absolute inset-0 opacity-0 cursor-pointer"}),v.imageBase64?T.jsx("img",{src:v.imageBase64,alt:"Preview",className:"w-full h-full object-contain"}):T.jsxs(T.Fragment,{children:[T.jsx(Fx,{size:32,className:"text-gray-400 mb-2"}),T.jsx("span",{className:"text-xs text-gray-400",children:""})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("input",{type:"text",placeholder:"",value:v.title,onChange:q=>I({...v,title:q.target.value}),className:"w-full p-2 border rounded-lg bg-[#F9F7F5] outline-none focus:ring-1 focus:ring-[#756256]"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:"",value:v.author,onChange:q=>I({...v,author:q.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]"}),T.jsxs("select",{value:v.publisher,onChange:q=>I({...v,publisher:q.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),L5.map(q=>T.jsx("option",{value:q,children:q},q))]})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsxs("select",{value:v.subject,onChange:q=>I({...v,subject:q.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),M5.map(q=>T.jsx("option",{value:q,children:q},q))]}),T.jsxs("select",{value:v.grade,onChange:q=>I({...v,grade:q.target.value}),className:"flex-1 p-2 border rounded-lg bg-[#F9F7F5]",children:[T.jsx("option",{value:"",children:""}),F5.map(q=>T.jsx("option",{value:q,children:q},q))]})]})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("div",{className:"flex gap-2",children:["sell","exchange","gift"].map(q=>T.jsx("button",{type:"button",onClick:()=>I({...v,type:q}),className:`flex-1 py-2 rounded-lg text-xs font-bold border ${v.type===q?"bg-[#756256] text-white":"bg-white text-gray-500"}`,children:q==="sell"?"":q==="exchange"?"":""},q))}),T.jsx("input",{type:"number",placeholder:"",value:v.price,onChange:q=>I({...v,price:q.target.value}),disabled:v.type!=="sell",className:"w-full p-2 border rounded-lg bg-[#F9F7F5]"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{className:"text-xs font-bold text-[#9E9081]",children:""}),T.jsx("textarea",{rows:3,placeholder:"...",value:v.description,onChange:q=>I({...v,description:q.target.value}),className:"w-full p-2 border rounded-lg bg-[#F9F7F5]"})]}),T.jsx("button",{type:"submit",className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44]",children:""})]}),p==="store"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-[#756256] mb-3",children:""}),T.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:l.map(q=>{const oe=As.find(de=>de.id===q)||As[0],ee=h?.id===q;return T.jsxs("div",{onClick:()=>a(q),className:`flex-shrink-0 w-16 flex flex-col items-center gap-1 cursor-pointer opacity-${ee?"100":"50 hover:opacity-100"}`,children:[T.jsx("div",{className:`w-14 h-14 rounded-full overflow-hidden border-2 p-0.5 ${ee?"border-[#756256]":"border-transparent"}`,children:T.jsx("img",{src:oe.src,className:"w-full h-full rounded-full bg-gray-100 object-cover"})}),ee&&T.jsx("span",{className:"text-[10px] bg-[#756256] text-white px-1.5 py-0.5 rounded-full",children:""})]},q)})})]}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-[#756256] mb-3",children:""}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[As.filter(q=>!l.includes(q.id)&&q.price>0).map(q=>T.jsxs("div",{onClick:()=>k(q),className:"bg-white p-3 rounded-xl border flex items-center gap-3 cursor-pointer hover:shadow-md transition-shadow",children:[T.jsx("img",{src:q.src,className:"w-12 h-12 rounded-full bg-gray-100"}),T.jsxs("div",{children:[T.jsx("div",{className:"font-bold text-[#5D4037] text-sm",children:q.name}),T.jsxs("div",{className:"text-yellow-600 font-bold text-xs flex items-center gap-1",children:[T.jsx(gf,{size:10})," ",q.price]})]})]},q.id)),As.filter(q=>!l.includes(q.id)&&q.price>0).length===0&&T.jsx("div",{className:"col-span-2 text-center text-gray-400 text-sm py-4",children:""})]})]})]})]}),C&&T.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-xs text-center shadow-xl",children:[T.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),T.jsx("img",{src:C.src,className:"w-20 h-20 mx-auto rounded-full my-4 bg-gray-100"}),T.jsxs("p",{className:"mb-4 text-sm text-gray-600",children:[" ",C.price," ",C.name,""]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>k(null),className:"flex-1 py-2 border rounded-lg font-bold text-gray-500",children:""}),T.jsx("button",{onClick:()=>{i(C),k(null)},className:"flex-1 py-2 bg-[#756256] text-white rounded-lg font-bold",children:""})]})]})})]})},Q5=()=>{const[n,e]=be.useState("login"),[t,r]=be.useState(null),[i,a]=be.useState(null),[l,h]=be.useState(null),[f,p]=be.useState([]),[g,v]=be.useState(100),[I,C]=be.useState([]),[k,j]=be.useState(["default"]),[N,q]=be.useState("default"),[oe,ee]=be.useState([]),[de,ve]=be.useState(null),[ye,b]=be.useState(!1);be.useEffect(()=>{const A=df.onAuthStateChanged(Ae=>{Ae?(a(Ae),e("home"),Hr.hasCheckedInToday()):(a(null),e("login"))});return()=>A()},[]),be.useEffect(()=>{if(!i)return;const A=Hr.onBooksSnapshot(at=>p(at)),Ae=Hr.onWishesSnapshot(at=>C(at));return()=>{A(),Ae()}},[i]),be.useEffect(()=>{i&&ve({exams:[{title:"",daysLeft:23},{title:"",daysLeft:180}]})},[i]);const R=(A,Ae=null)=>{Ae&&r(Ae),e(A),window.scrollTo(0,0)},x=()=>{if(Hr.hasCheckedInToday())return;const A=10;v(Ae=>Ae+A),Hr.recordCheckIn(),b(!0)},O=A=>{if(g<A.price)return alert("");if(k.includes(A.id))return alert("");v(Ae=>Ae-A.price),j(Ae=>[...Ae,A.id]),alert(` ${A.name}`)},V=As.find(A=>A.id===N)||As[0],F=()=>{switch(n){case"login":return T.jsx(q5,{onLogin:()=>{}});case"home":return T.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] pb-24",style:Lp,children:[T.jsxs("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md px-4 py-3 flex justify-between items-center shadow-sm",children:[T.jsxs("div",{className:"flex items-center gap-2 text-[#756256] font-bold text-xl",children:[T.jsx(E0,{})," "]}),T.jsx("div",{className:"flex gap-3",children:T.jsxs("button",{onClick:()=>{},className:"p-2 bg-white rounded-full shadow-sm text-gray-500 relative",children:[T.jsx(Nx,{size:20}),oe.length>0&&T.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white"})]})})]}),T.jsx(B5,{coins:g,isCheckedIn:!1,onCheckIn:x,examCountdown:de,isLoading:!de,books:f,onNavigate:R}),T.jsx("div",{className:"px-4 mb-4",children:T.jsxs("div",{className:"bg-white p-3 rounded-xl shadow-sm border flex items-center gap-2",style:{borderColor:je.whiteBucks},children:[T.jsx(sb,{size:18,className:"text-gray-400"}),T.jsx("input",{type:"text",placeholder:"...",className:"flex-1 outline-none text-gray-700 bg-transparent"})]})}),T.jsx("div",{className:"px-4 mb-6",children:T.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:j5.map(A=>T.jsx("button",{className:"px-4 py-2 bg-white rounded-full border text-sm font-bold whitespace-nowrap text-[#9E9081] shadow-sm",children:A.name},A.id))})}),T.jsx("div",{className:"px-4 grid grid-cols-2 gap-3",children:f.map(A=>T.jsxs("div",{onClick:()=>R("product",A),className:"bg-white rounded-xl overflow-hidden shadow-sm border animate-fade-in-up cursor-pointer",style:{borderColor:je.whiteBucks},children:[T.jsxs("div",{className:"aspect-[3/4] bg-gray-100 relative",children:[T.jsx("img",{src:A.cover||A.imageBase64||"https://dummyimage.com/300x400/eee/aaa",className:"w-full h-full object-cover",loading:"lazy"}),T.jsx("div",{className:"absolute bottom-2 right-2 bg-black/60 backdrop-blur-sm text-white text-[10px] px-2 py-1 rounded-full",children:A.conditionLevel})]}),T.jsxs("div",{className:"p-3",children:[T.jsx("h3",{className:"font-bold text-[#5D4037] text-sm line-clamp-2 mb-1",children:A.title}),T.jsx(Mp,{type:A.type,price:A.price}),T.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[10px] text-gray-400",children:[T.jsx(Zx,{size:10})," ",A.location||""]})]})]},A.id))}),T.jsx("div",{className:"mt-8",children:T.jsx(z5,{wishes:I,onAddWish:A=>Hr.addWish({content:A,user:i.nickname,avatarId:N}),currentUser:i,currentAvatar:V})})]});case"product":return T.jsx($5,{product:t,onBack:()=>e("home"),onContact:()=>Hr.startTransaction(t,i,A=>h({transactionId:A,title:t.title})),currentUser:i});case"profile":return T.jsx(K5,{currentUser:i,userBooks:f.filter(A=>A.sellerId===i.uid),onNavigate:R,onUpload:A=>Hr.addBook(A),onBuyAvatar:O,onEquipAvatar:q,myAvatars:k,currentAvatar:V,coins:g});default:return T.jsx("div",{children:"404 Not Found"})}};return T.jsxs(T.Fragment,{children:[F(),(n==="home"||n==="profile")&&T.jsxs("div",{className:"fixed bottom-0 w-full bg-white border-t py-3 px-6 flex justify-between items-center z-50 safe-area-bottom",style:{borderColor:je.whiteBucks},children:[T.jsxs("button",{onClick:()=>e("home"),className:`flex flex-col items-center gap-1 ${n==="home"?"text-[#756256]":"text-gray-400"}`,children:[T.jsx(Yx,{size:24,strokeWidth:n==="home"?2.5:2}),T.jsx("span",{className:"text-[10px] font-bold",children:""})]}),T.jsxs("button",{className:"flex flex-col items-center gap-1 text-gray-400 relative",children:[T.jsx("div",{className:"p-3 bg-[#756256] rounded-full -mt-8 shadow-lg border-4 border-[#F9F7F5] transform transition-transform hover:scale-105 active:scale-95 text-white",children:T.jsx(by,{size:24})}),T.jsx("span",{className:"text-[10px] font-bold mt-1",children:""})]}),T.jsxs("button",{onClick:()=>e("profile"),className:`flex flex-col items-center gap-1 ${n==="profile"?"text-[#756256]":"text-gray-400"}`,children:[T.jsx(I0,{size:24,strokeWidth:n==="profile"?2.5:2}),T.jsx("span",{className:"text-[10px] font-bold",children:""})]})]}),l&&T.jsx(W5,{transactionId:l.transactionId,title:l.title,currentUser:i,onClose:()=>h(null)}),i&&!l&&T.jsx(H5,{currentUser:i,onSelectChat:A=>h(A),onClose:()=>{}}),ye&&T.jsx(G5,{onClose:()=>b(!1),onConfirm:()=>b(!1),coins:10})]})};Tx.createRoot(document.getElementById("root")).render(T.jsx(be.StrictMode,{children:T.jsx(Q5,{})}));
