(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var sg={exports:{}},Qu={},og={exports:{}},Oe={};var PE;function cC(){if(PE)return Oe;PE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function I(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,F={};function O(M,Q,Pe){this.props=M,this.context=Q,this.refs=F,this.updater=Pe||b}O.prototype.isReactComponent={},O.prototype.setState=function(M,Q){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Q,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=O.prototype;function ae(M,Q,Pe){this.props=M,this.context=Q,this.refs=F,this.updater=Pe||b}var ne=ae.prototype=new K;ne.constructor=ae,x(ne,O.prototype),ne.isPureReactComponent=!0;var de=Array.isArray,ue=Object.prototype.hasOwnProperty,me={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function R(M,Q,Pe){var Ce,Ve={},je=null,Je=null;if(Q!=null)for(Ce in Q.ref!==void 0&&(Je=Q.ref),Q.key!==void 0&&(je=""+Q.key),Q)ue.call(Q,Ce)&&!k.hasOwnProperty(Ce)&&(Ve[Ce]=Q[Ce]);var $e=arguments.length-2;if($e===1)Ve.children=Pe;else if(1<$e){for(var nt=Array($e),gn=0;gn<$e;gn++)nt[gn]=arguments[gn+2];Ve.children=nt}if(M&&M.defaultProps)for(Ce in $e=M.defaultProps,$e)Ve[Ce]===void 0&&(Ve[Ce]=$e[Ce]);return{$$typeof:n,type:M,key:je,ref:Je,props:Ve,_owner:me.current}}function C(M,Q){return{$$typeof:n,type:M.type,key:Q,ref:M.ref,props:M.props,_owner:M._owner}}function L(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function D(M){var Q={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(Pe){return Q[Pe]})}var U=/\/+/g;function S(M,Q){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):Q.toString(36)}function Re(M,Q,Pe,Ce,Ve){var je=typeof M;(je==="undefined"||je==="boolean")&&(M=null);var Je=!1;if(M===null)Je=!0;else switch(je){case"string":case"number":Je=!0;break;case"object":switch(M.$$typeof){case n:case e:Je=!0}}if(Je)return Je=M,Ve=Ve(Je),M=Ce===""?"."+S(Je,0):Ce,de(Ve)?(Pe="",M!=null&&(Pe=M.replace(U,"$&/")+"/"),Re(Ve,Q,Pe,"",function(gn){return gn})):Ve!=null&&(L(Ve)&&(Ve=C(Ve,Pe+(!Ve.key||Je&&Je.key===Ve.key?"":(""+Ve.key).replace(U,"$&/")+"/")+M)),Q.push(Ve)),1;if(Je=0,Ce=Ce===""?".":Ce+":",de(M))for(var $e=0;$e<M.length;$e++){je=M[$e];var nt=Ce+S(je,$e);Je+=Re(je,Q,Pe,nt,Ve)}else if(nt=I(M),typeof nt=="function")for(M=nt.call(M),$e=0;!(je=M.next()).done;)je=je.value,nt=Ce+S(je,$e++),Je+=Re(je,Q,Pe,nt,Ve);else if(je==="object")throw Q=String(M),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Je}function Xe(M,Q,Pe){if(M==null)return M;var Ce=[],Ve=0;return Re(M,Ce,"","",function(je){return Q.call(Pe,je,Ve++)}),Ce}function Le(M){if(M._status===-1){var Q=M._result;Q=Q(),Q.then(function(Pe){(M._status===0||M._status===-1)&&(M._status=1,M._result=Pe)},function(Pe){(M._status===0||M._status===-1)&&(M._status=2,M._result=Pe)}),M._status===-1&&(M._status=0,M._result=Q)}if(M._status===1)return M._result.default;throw M._result}var Ue={current:null},re={transition:null},ve={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:re,ReactCurrentOwner:me};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:Xe,forEach:function(M,Q,Pe){Xe(M,function(){Q.apply(this,arguments)},Pe)},count:function(M){var Q=0;return Xe(M,function(){Q++}),Q},toArray:function(M){return Xe(M,function(Q){return Q})||[]},only:function(M){if(!L(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=O,Oe.Fragment=t,Oe.Profiler=i,Oe.PureComponent=ae,Oe.StrictMode=r,Oe.Suspense=f,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,Oe.act=ce,Oe.cloneElement=function(M,Q,Pe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Ce=x({},M.props),Ve=M.key,je=M.ref,Je=M._owner;if(Q!=null){if(Q.ref!==void 0&&(je=Q.ref,Je=me.current),Q.key!==void 0&&(Ve=""+Q.key),M.type&&M.type.defaultProps)var $e=M.type.defaultProps;for(nt in Q)ue.call(Q,nt)&&!k.hasOwnProperty(nt)&&(Ce[nt]=Q[nt]===void 0&&$e!==void 0?$e[nt]:Q[nt])}var nt=arguments.length-2;if(nt===1)Ce.children=Pe;else if(1<nt){$e=Array(nt);for(var gn=0;gn<nt;gn++)$e[gn]=arguments[gn+2];Ce.children=$e}return{$$typeof:n,type:M.type,key:Ve,ref:je,props:Ce,_owner:Je}},Oe.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},Oe.createElement=R,Oe.createFactory=function(M){var Q=R.bind(null,M);return Q.type=M,Q},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:h,render:M}},Oe.isValidElement=L,Oe.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:Le}},Oe.memo=function(M,Q){return{$$typeof:m,type:M,compare:Q===void 0?null:Q}},Oe.startTransition=function(M){var Q=re.transition;re.transition={};try{M()}finally{re.transition=Q}},Oe.unstable_act=ce,Oe.useCallback=function(M,Q){return Ue.current.useCallback(M,Q)},Oe.useContext=function(M){return Ue.current.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M){return Ue.current.useDeferredValue(M)},Oe.useEffect=function(M,Q){return Ue.current.useEffect(M,Q)},Oe.useId=function(){return Ue.current.useId()},Oe.useImperativeHandle=function(M,Q,Pe){return Ue.current.useImperativeHandle(M,Q,Pe)},Oe.useInsertionEffect=function(M,Q){return Ue.current.useInsertionEffect(M,Q)},Oe.useLayoutEffect=function(M,Q){return Ue.current.useLayoutEffect(M,Q)},Oe.useMemo=function(M,Q){return Ue.current.useMemo(M,Q)},Oe.useReducer=function(M,Q,Pe){return Ue.current.useReducer(M,Q,Pe)},Oe.useRef=function(M){return Ue.current.useRef(M)},Oe.useState=function(M){return Ue.current.useState(M)},Oe.useSyncExternalStore=function(M,Q,Pe){return Ue.current.useSyncExternalStore(M,Q,Pe)},Oe.useTransition=function(){return Ue.current.useTransition()},Oe.version="18.3.1",Oe}var CE;function Ay(){return CE||(CE=1,og.exports=cC()),og.exports}var kE;function hC(){if(kE)return Qu;kE=1;var n=Ay(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,m){var _,w={},I=null,b=null;m!==void 0&&(I=""+m),f.key!==void 0&&(I=""+f.key),f.ref!==void 0&&(b=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(w[_]=f[_]);if(h&&h.defaultProps)for(_ in f=h.defaultProps,f)w[_]===void 0&&(w[_]=f[_]);return{$$typeof:e,type:h,key:I,ref:b,props:w,_owner:i.current}}return Qu.Fragment=t,Qu.jsx=l,Qu.jsxs=l,Qu}var bE;function dC(){return bE||(bE=1,sg.exports=hC()),sg.exports}var A=dC(),He=Ay(),Bd={},ag={exports:{}},Cn={},lg={exports:{}},ug={};var xE;function fC(){return xE||(xE=1,(function(n){function e(re,ve){var ce=re.length;re.push(ve);e:for(;0<ce;){var M=ce-1>>>1,Q=re[M];if(0<i(Q,ve))re[M]=ve,re[ce]=Q,ce=M;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var ve=re[0],ce=re.pop();if(ce!==ve){re[0]=ce;e:for(var M=0,Q=re.length,Pe=Q>>>1;M<Pe;){var Ce=2*(M+1)-1,Ve=re[Ce],je=Ce+1,Je=re[je];if(0>i(Ve,ce))je<Q&&0>i(Je,Ve)?(re[M]=Je,re[je]=ce,M=je):(re[M]=Ve,re[Ce]=ce,M=Ce);else if(je<Q&&0>i(Je,ce))re[M]=Je,re[je]=ce,M=je;else break e}}return ve}function i(re,ve){var ce=re.sortIndex-ve.sortIndex;return ce!==0?ce:re.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],m=[],_=1,w=null,I=3,b=!1,x=!1,F=!1,O=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(re){for(var ve=t(m);ve!==null;){if(ve.callback===null)r(m);else if(ve.startTime<=re)r(m),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(m)}}function de(re){if(F=!1,ne(re),!x)if(t(f)!==null)x=!0,Le(ue);else{var ve=t(m);ve!==null&&Ue(de,ve.startTime-re)}}function ue(re,ve){x=!1,F&&(F=!1,K(R),R=-1),b=!0;var ce=I;try{for(ne(ve),w=t(f);w!==null&&(!(w.expirationTime>ve)||re&&!D());){var M=w.callback;if(typeof M=="function"){w.callback=null,I=w.priorityLevel;var Q=M(w.expirationTime<=ve);ve=n.unstable_now(),typeof Q=="function"?w.callback=Q:w===t(f)&&r(f),ne(ve)}else r(f);w=t(f)}if(w!==null)var Pe=!0;else{var Ce=t(m);Ce!==null&&Ue(de,Ce.startTime-ve),Pe=!1}return Pe}finally{w=null,I=ce,b=!1}}var me=!1,k=null,R=-1,C=5,L=-1;function D(){return!(n.unstable_now()-L<C)}function U(){if(k!==null){var re=n.unstable_now();L=re;var ve=!0;try{ve=k(!0,re)}finally{ve?S():(me=!1,k=null)}}else me=!1}var S;if(typeof ae=="function")S=function(){ae(U)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Xe=Re.port2;Re.port1.onmessage=U,S=function(){Xe.postMessage(null)}}else S=function(){O(U,0)};function Le(re){k=re,me||(me=!0,S())}function Ue(re,ve){R=O(function(){re(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){x||b||(x=!0,Le(ue))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(re){switch(I){case 1:case 2:case 3:var ve=3;break;default:ve=I}var ce=I;I=ve;try{return re()}finally{I=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,ve){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ce=I;I=re;try{return ve()}finally{I=ce}},n.unstable_scheduleCallback=function(re,ve,ce){var M=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?M+ce:M):ce=M,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ce+Q,re={id:_++,callback:ve,priorityLevel:re,startTime:ce,expirationTime:Q,sortIndex:-1},ce>M?(re.sortIndex=ce,e(m,re),t(f)===null&&re===t(m)&&(F?(K(R),R=-1):F=!0,Ue(de,ce-M))):(re.sortIndex=Q,e(f,re),x||b||(x=!0,Le(ue))),re},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(re){var ve=I;return function(){var ce=I;I=ve;try{return re.apply(this,arguments)}finally{I=ce}}}})(ug)),ug}var NE;function pC(){return NE||(NE=1,lg.exports=fC()),lg.exports}var DE;function mC(){if(DE)return Cn;DE=1;var n=Ay(),e=pC();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function I(s){return f.call(w,s)?!0:f.call(_,s)?!1:m.test(s)?w[s]=!0:(_[s]=!0,!1)}function b(s,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function x(s,o,u,d){if(o===null||typeof o>"u"||b(s,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function F(s,o,u,d,p,g,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=g,this.removeEmptyString=E}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){O[s]=new F(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];O[o]=new F(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){O[s]=new F(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){O[s]=new F(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){O[s]=new F(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){O[s]=new F(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){O[s]=new F(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){O[s]=new F(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){O[s]=new F(s,5,!1,s.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function ae(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(K,ae);O[o]=new F(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(K,ae);O[o]=new F(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(K,ae);O[o]=new F(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){O[s]=new F(s,1,!1,s.toLowerCase(),null,!1,!1)}),O.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){O[s]=new F(s,1,!1,s.toLowerCase(),null,!0,!0)});function ne(s,o,u,d){var p=O.hasOwnProperty(o)?O[o]:null;(p!==null?p.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,u,p,d)&&(u=null),d||p===null?I(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):p.mustUseProperty?s[p.propertyName]=u===null?p.type===3?!1:"":u:(o=p.attributeName,d=p.attributeNamespace,u===null?s.removeAttribute(o):(p=p.type,u=p===3||p===4&&u===!0?"":""+u,d?s.setAttributeNS(d,o,u):s.setAttribute(o,u))))}var de=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),me=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),re=Symbol.iterator;function ve(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var ce=Object.assign,M;function Q(s){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+s}var Pe=!1;function Ce(s,o){if(!s||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch($){var d=$}Reflect.construct(s,[],o)}else{try{o.call()}catch($){d=$}s.call(o.prototype)}else{try{throw Error()}catch($){d=$}s()}}catch($){if($&&d&&typeof $.stack=="string"){for(var p=$.stack.split(`
`),g=d.stack.split(`
`),E=p.length-1,P=g.length-1;1<=E&&0<=P&&p[E]!==g[P];)P--;for(;1<=E&&0<=P;E--,P--)if(p[E]!==g[P]){if(E!==1||P!==1)do if(E--,P--,0>P||p[E]!==g[P]){var N=`
`+p[E].replace(" at new "," at ");return s.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",s.displayName)),N}while(1<=E&&0<=P);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?Q(s):""}function Ve(s){switch(s.tag){case 5:return Q(s.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return s=Ce(s.type,!1),s;case 11:return s=Ce(s.type.render,!1),s;case 1:return s=Ce(s.type,!0),s;default:return""}}function je(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case me:return"Portal";case C:return"Profiler";case R:return"StrictMode";case S:return"Suspense";case Re:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case L:return(s._context.displayName||"Context")+".Provider";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Xe:return o=s.displayName||null,o!==null?o:je(s.type)||"Memo";case Le:o=s._payload,s=s._init;try{return je(s(o))}catch{}}return null}function Je(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function $e(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function nt(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function gn(s){var o=nt(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){d=""+E,g.call(this,E)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function la(s){s._valueTracker||(s._valueTracker=gn(s))}function tu(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=nt(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function Ui(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ua(s,o){var u=o.checked;return ce({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Rh(s,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=$e(o.value!=null?o.value:u),s._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ca(s,o){o=o.checked,o!=null&&ne(s,"checked",o,!1)}function Ks(s,o){ca(s,o);var u=$e(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Dt(s,o.type,u):o.hasOwnProperty("defaultValue")&&Dt(s,o.type,$e(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function nu(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Dt(s,o,u){(o!=="number"||Ui(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Rt=Array.isArray;function cr(s,o,u,d){if(s=s.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<s.length;u++)p=o.hasOwnProperty("$"+s[u].value),s[u].selected!==p&&(s[u].selected=p),p&&d&&(s[u].defaultSelected=!0)}else{for(u=""+$e(u),o=null,p=0;p<s.length;p++){if(s[p].value===u){s[p].selected=!0,d&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function ru(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function iu(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Rt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:$e(u)}}function Ph(s,o){var u=$e(o.value),d=$e(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),d!=null&&(s.defaultValue=""+d)}function ji(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function su(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ha(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?su(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Bi,Ch=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,p){MSApp.execUnsafeLocalFunction(function(){return s(o,u,d,p)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Bi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Qs(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kh=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(s){kh.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),zi[o]=zi[s]})});function qi(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||zi.hasOwnProperty(s)&&zi[s]?(""+o).trim():o+"px"}function da(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,p=qi(u,o[u],d);u==="float"&&(u="cssFloat"),d?s.setProperty(u,p):s[u]=p}}var ou=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(s,o){if(o){if(ou[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function fa(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $i=null;function pa(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ai=null,li=null,Et=null;function au(s){if(s=Vu(s)){if(typeof ai!="function")throw Error(t(280));var o=s.stateNode;o&&(o=nd(o),ai(s.stateNode,s.type,o))}}function Wi(s){li?Et?Et.push(s):Et=[s]:li=s}function Hi(){if(li){var s=li,o=Et;if(Et=li=null,au(s),o)for(s=0;s<o.length;s++)au(o[s])}}function bh(s,o){return s(o)}function xh(){}var Rr=!1;function Nh(s,o,u){if(Rr)return s(o,u);Rr=!0;try{return bh(s,o,u)}finally{Rr=!1,(li!==null||Et!==null)&&(xh(),Hi())}}function Js(s,o){var u=s.stateNode;if(u===null)return null;var d=nd(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Gi=!1;if(h)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Gi=!1}function Dh(s,o,u,d,p,g,E,P,N){var $=Array.prototype.slice.call(arguments,3);try{o.apply(u,$)}catch(Z){this.onError(Z)}}var ui=!1,Pr=null,ma=!1,Yn=null,Vh={onError:function(s){ui=!0,Pr=s}};function Oh(s,o,u,d,p,g,E,P,N){ui=!1,Pr=null,Dh.apply(Vh,arguments)}function lu(s,o,u,d,p,g,E,P,N){if(Oh.apply(this,arguments),ui){if(ui){var $=Pr;ui=!1,Pr=null}else throw Error(t(198));ma||(ma=!0,Yn=$)}}function dr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function uu(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Lh(s){if(dr(s)!==s)throw Error(t(188))}function Mh(s){var o=s.alternate;if(!o){if(o=dr(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,d=o;;){var p=u.return;if(p===null)break;var g=p.alternate;if(g===null){if(d=p.return,d!==null){u=d;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===u)return Lh(p),s;if(g===d)return Lh(p),o;g=g.sibling}throw Error(t(188))}if(u.return!==d.return)u=p,d=g;else{for(var E=!1,P=p.child;P;){if(P===u){E=!0,u=p,d=g;break}if(P===d){E=!0,d=p,u=g;break}P=P.sibling}if(!E){for(P=g.child;P;){if(P===u){E=!0,u=g,d=p;break}if(P===d){E=!0,d=g,u=p;break}P=P.sibling}if(!E)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Fh(s){return s=Mh(s),s!==null?Ys(s):null}function Ys(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Ys(s);if(o!==null)return o;s=s.sibling}return null}var cu=e.unstable_scheduleCallback,ga=e.unstable_cancelCallback,Xs=e.unstable_shouldYield,ci=e.unstable_requestPaint,lt=e.unstable_now,Lp=e.unstable_getCurrentPriorityLevel,ya=e.unstable_ImmediatePriority,hu=e.unstable_UserBlockingPriority,Zs=e.unstable_NormalPriority,du=e.unstable_LowPriority,_a=e.unstable_IdlePriority,eo=null,Ln=null;function Uh(s){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(eo,s,void 0,(s.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:to,Cr=Math.log,Xn=Math.LN2;function to(s){return s>>>=0,s===0?32:31-(Cr(s)/Xn|0)|0}var kr=64,Qi=4194304;function Qe(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function hi(s,o){var u=s.pendingLanes;if(u===0)return 0;var d=0,p=s.suspendedLanes,g=s.pingedLanes,E=u&268435455;if(E!==0){var P=E&~p;P!==0?d=Qe(P):(g&=E,g!==0&&(d=Qe(g)))}else E=u&~p,E!==0?d=Qe(E):g!==0&&(d=Qe(g));if(d===0)return 0;if(o!==0&&o!==d&&(o&p)===0&&(p=d&-d,g=o&-o,p>=g||p===16&&(g&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)u=31-Mn(o),p=1<<u,d|=s[u],o&=~p;return d}function no(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,p=s.expirationTimes,g=s.pendingLanes;0<g;){var E=31-Mn(g),P=1<<E,N=p[E];N===-1?((P&u)===0||(P&d)!==0)&&(p[E]=no(P,o)):N<=o&&(s.expiredLanes|=P),g&=~P}}function fu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function pu(){var s=kr;return kr<<=1,(kr&4194240)===0&&(kr=64),s}function mu(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function io(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-Mn(o),s[o]=u}function Mp(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<u;){var p=31-Mn(u),g=1<<p;o[p]=0,d[p]=-1,s[p]=-1,u&=~g}}function gu(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-Mn(u),p=1<<d;p&o|s[d]&o&&(s[d]|=o),u&=~p}}var ze=0;function br(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var yu,va,_u,vu,wu,xr=!1,wa=[],Nr=null,Dr=null,Jt=null,so=new Map,di=new Map,Fn=[],jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ji(s,o){switch(s){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":so.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(o.pointerId)}}function fr(s,o,u,d,p,g){return s===null||s.nativeEvent!==g?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:g,targetContainers:[p]},o!==null&&(o=Vu(o),o!==null&&va(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function Bh(s,o,u,d,p){switch(o){case"focusin":return Nr=fr(Nr,s,o,u,d,p),!0;case"dragenter":return Dr=fr(Dr,s,o,u,d,p),!0;case"mouseover":return Jt=fr(Jt,s,o,u,d,p),!0;case"pointerover":var g=p.pointerId;return so.set(g,fr(so.get(g)||null,s,o,u,d,p)),!0;case"gotpointercapture":return g=p.pointerId,di.set(g,fr(di.get(g)||null,s,o,u,d,p)),!0}return!1}function Ea(s){var o=uo(s.target);if(o!==null){var u=dr(o);if(u!==null){if(o=u.tag,o===13){if(o=uu(u),o!==null){s.blockedOn=o,wu(s.priority,function(){_u(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rt(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ia(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);$i=d,u.target.dispatchEvent(d),$i=null}else return o=Vu(u),o!==null&&va(o),s.blockedOn=u,!1;o.shift()}return!0}function zh(s,o,u){rt(s)&&u.delete(o)}function Fp(){xr=!1,Nr!==null&&rt(Nr)&&(Nr=null),Dr!==null&&rt(Dr)&&(Dr=null),Jt!==null&&rt(Jt)&&(Jt=null),so.forEach(zh),di.forEach(zh)}function Yi(s,o){s.blockedOn===o&&(s.blockedOn=null,xr||(xr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fp)))}function Xi(s){function o(p){return Yi(p,s)}if(0<wa.length){Yi(wa[0],s);for(var u=1;u<wa.length;u++){var d=wa[u];d.blockedOn===s&&(d.blockedOn=null)}}for(Nr!==null&&Yi(Nr,s),Dr!==null&&Yi(Dr,s),Jt!==null&&Yi(Jt,s),so.forEach(o),di.forEach(o),u=0;u<Fn.length;u++)d=Fn[u],d.blockedOn===s&&(d.blockedOn=null);for(;0<Fn.length&&(u=Fn[0],u.blockedOn===null);)Ea(u),u.blockedOn===null&&Fn.shift()}var fi=de.ReactCurrentBatchConfig,pi=!0;function Vr(s,o,u,d){var p=ze,g=fi.transition;fi.transition=null;try{ze=1,Eu(s,o,u,d)}finally{ze=p,fi.transition=g}}function qh(s,o,u,d){var p=ze,g=fi.transition;fi.transition=null;try{ze=4,Eu(s,o,u,d)}finally{ze=p,fi.transition=g}}function Eu(s,o,u,d){if(pi){var p=Ia(s,o,u,d);if(p===null)Qp(s,o,d,Or,u),Ji(s,d);else if(Bh(p,s,o,u,d))d.stopPropagation();else if(Ji(s,d),o&4&&-1<jh.indexOf(s)){for(;p!==null;){var g=Vu(p);if(g!==null&&yu(g),g=Ia(s,o,u,d),g===null&&Qp(s,o,d,Or,u),g===p)break;p=g}p!==null&&d.stopPropagation()}else Qp(s,o,d,null,u)}}var Or=null;function Ia(s,o,u,d){if(Or=null,s=pa(d),s=uo(s),s!==null)if(o=dr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=uu(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Or=s,null}function Ta(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lp()){case ya:return 1;case hu:return 4;case Zs:case du:return 16;case _a:return 536870912;default:return 16}default:return 16}}var Un=null,Sa=null,mi=null;function $h(){if(mi)return mi;var s,o=Sa,u=o.length,d,p="value"in Un?Un.value:Un.textContent,g=p.length;for(s=0;s<u&&o[s]===p[s];s++);var E=u-s;for(d=1;d<=E&&o[u-d]===p[g-d];d++);return mi=p.slice(s,1<d?1-d:void 0)}function oo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Lr(){return!0}function Iu(){return!1}function sn(s){function o(u,d,p,g,E){this._reactName=u,this._targetInst=p,this.type=d,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(u=s[P],this[P]=u?u(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Lr:Iu,this.isPropagationStopped=Iu,this}return ce(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),o}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=sn(Mr),Zi=ce({},Mr,{view:0,detail:0}),Aa=sn(Zi),Ra,Pa,jn,lo=ce({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xe,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jn&&(jn&&s.type==="mousemove"?(Ra=s.screenX-jn.screenX,Pa=s.screenY-jn.screenY):Pa=Ra=0,jn=s),Ra)},movementY:function(s){return"movementY"in s?s.movementY:Pa}}),Tu=sn(lo),Wh=ce({},lo,{dataTransfer:0}),Hh=sn(Wh),Ca=ce({},Zi,{relatedTarget:0}),Yt=sn(Ca),Gh=ce({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kh=sn(Gh),es=ce({},Mr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),c=sn(es),y=ce({},Mr,{data:0}),v=sn(y),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=H[s])?!!o[s]:!1}function xe(){return se}var Pt=ce({},Zi,{key:function(s){if(s.key){var o=T[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=oo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?z[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xe,charCode:function(s){return s.type==="keypress"?oo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?oo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ze=sn(Pt),Vt=ce({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bn=sn(Vt),gi=ce({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xe}),Fr=sn(gi),Ur=ce({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ka=sn(Ur),Su=ce({},lo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),iP=sn(Su),sP=[9,13,27,32],Up=h&&"CompositionEvent"in window,Au=null;h&&"documentMode"in document&&(Au=document.documentMode);var oP=h&&"TextEvent"in window&&!Au,vv=h&&(!Up||Au&&8<Au&&11>=Au),wv=" ",Ev=!1;function Iv(s,o){switch(s){case"keyup":return sP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ba=!1;function aP(s,o){switch(s){case"compositionend":return Tv(o);case"keypress":return o.which!==32?null:(Ev=!0,wv);case"textInput":return s=o.data,s===wv&&Ev?null:s;default:return null}}function lP(s,o){if(ba)return s==="compositionend"||!Up&&Iv(s,o)?(s=$h(),mi=Sa=Un=null,ba=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vv&&o.locale!=="ko"?null:o.data;default:return null}}var uP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sv(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!uP[s.type]:o==="textarea"}function Av(s,o,u,d){Wi(d),o=Zh(o,"onChange"),0<o.length&&(u=new ao("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var Ru=null,Pu=null;function cP(s){qv(s,0)}function Qh(s){var o=Oa(s);if(tu(o))return s}function hP(s,o){if(s==="change")return o}var Rv=!1;if(h){var jp;if(h){var Bp="oninput"in document;if(!Bp){var Pv=document.createElement("div");Pv.setAttribute("oninput","return;"),Bp=typeof Pv.oninput=="function"}jp=Bp}else jp=!1;Rv=jp&&(!document.documentMode||9<document.documentMode)}function Cv(){Ru&&(Ru.detachEvent("onpropertychange",kv),Pu=Ru=null)}function kv(s){if(s.propertyName==="value"&&Qh(Pu)){var o=[];Av(o,Pu,s,pa(s)),Nh(cP,o)}}function dP(s,o,u){s==="focusin"?(Cv(),Ru=o,Pu=u,Ru.attachEvent("onpropertychange",kv)):s==="focusout"&&Cv()}function fP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qh(Pu)}function pP(s,o){if(s==="click")return Qh(o)}function mP(s,o){if(s==="input"||s==="change")return Qh(o)}function gP(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var pr=typeof Object.is=="function"?Object.is:gP;function Cu(s,o){if(pr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var p=u[d];if(!f.call(o,p)||!pr(s[p],o[p]))return!1}return!0}function bv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function xv(s,o){var u=bv(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=bv(u)}}function Nv(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Nv(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Dv(){for(var s=window,o=Ui();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Ui(s.document)}return o}function zp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function yP(s){var o=Dv(),u=s.focusedElem,d=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&Nv(u.ownerDocument.documentElement,u)){if(d!==null&&zp(u)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var p=u.textContent.length,g=Math.min(d.start,p);d=d.end===void 0?g:Math.min(d.end,p),!s.extend&&g>d&&(p=d,d=g,g=p),p=xv(u,g);var E=xv(u,d);p&&E&&(s.rangeCount!==1||s.anchorNode!==p.node||s.anchorOffset!==p.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),s.removeAllRanges(),g>d?(s.addRange(o),s.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var _P=h&&"documentMode"in document&&11>=document.documentMode,xa=null,qp=null,ku=null,$p=!1;function Vv(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$p||xa==null||xa!==Ui(d)||(d=xa,"selectionStart"in d&&zp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ku&&Cu(ku,d)||(ku=d,d=Zh(qp,"onSelect"),0<d.length&&(o=new ao("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=xa)))}function Jh(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Na={animationend:Jh("Animation","AnimationEnd"),animationiteration:Jh("Animation","AnimationIteration"),animationstart:Jh("Animation","AnimationStart"),transitionend:Jh("Transition","TransitionEnd")},Wp={},Ov={};h&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Yh(s){if(Wp[s])return Wp[s];if(!Na[s])return s;var o=Na[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ov)return Wp[s]=o[u];return s}var Lv=Yh("animationend"),Mv=Yh("animationiteration"),Fv=Yh("animationstart"),Uv=Yh("transitionend"),jv=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(s,o){jv.set(s,o),a(o,[s])}for(var Hp=0;Hp<Bv.length;Hp++){var Gp=Bv[Hp],vP=Gp.toLowerCase(),wP=Gp[0].toUpperCase()+Gp.slice(1);ts(vP,"on"+wP)}ts(Lv,"onAnimationEnd"),ts(Mv,"onAnimationIteration"),ts(Fv,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(Uv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EP=new Set("cancel close invalid load scroll toggle".split(" ").concat(bu));function zv(s,o,u){var d=s.type||"unknown-event";s.currentTarget=u,lu(d,o,void 0,s),s.currentTarget=null}function qv(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],p=d.event;d=d.listeners;e:{var g=void 0;if(o)for(var E=d.length-1;0<=E;E--){var P=d[E],N=P.instance,$=P.currentTarget;if(P=P.listener,N!==g&&p.isPropagationStopped())break e;zv(p,P,$),g=N}else for(E=0;E<d.length;E++){if(P=d[E],N=P.instance,$=P.currentTarget,P=P.listener,N!==g&&p.isPropagationStopped())break e;zv(p,P,$),g=N}}}if(ma)throw s=Yn,ma=!1,Yn=null,s}function ut(s,o){var u=o[tm];u===void 0&&(u=o[tm]=new Set);var d=s+"__bubble";u.has(d)||($v(o,s,2,!1),u.add(d))}function Kp(s,o,u){var d=0;o&&(d|=4),$v(u,s,d,o)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function xu(s){if(!s[Xh]){s[Xh]=!0,r.forEach(function(u){u!=="selectionchange"&&(EP.has(u)||Kp(u,!1,s),Kp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Xh]||(o[Xh]=!0,Kp("selectionchange",!1,o))}}function $v(s,o,u,d){switch(Ta(o)){case 1:var p=Vr;break;case 4:p=qh;break;default:p=Eu}u=p.bind(null,o,u,s),p=void 0,!Gi||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),d?p!==void 0?s.addEventListener(o,u,{capture:!0,passive:p}):s.addEventListener(o,u,!0):p!==void 0?s.addEventListener(o,u,{passive:p}):s.addEventListener(o,u,!1)}function Qp(s,o,u,d,p){var g=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var P=d.stateNode.containerInfo;if(P===p||P.nodeType===8&&P.parentNode===p)break;if(E===4)for(E=d.return;E!==null;){var N=E.tag;if((N===3||N===4)&&(N=E.stateNode.containerInfo,N===p||N.nodeType===8&&N.parentNode===p))return;E=E.return}for(;P!==null;){if(E=uo(P),E===null)return;if(N=E.tag,N===5||N===6){d=g=E;continue e}P=P.parentNode}}d=d.return}Nh(function(){var $=g,Z=pa(u),te=[];e:{var Y=jv.get(s);if(Y!==void 0){var fe=ao,ge=s;switch(s){case"keypress":if(oo(u)===0)break e;case"keydown":case"keyup":fe=Ze;break;case"focusin":ge="focus",fe=Yt;break;case"focusout":ge="blur",fe=Yt;break;case"beforeblur":case"afterblur":fe=Yt;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Fr;break;case Lv:case Mv:case Fv:fe=Kh;break;case Uv:fe=ka;break;case"scroll":fe=Aa;break;case"wheel":fe=iP;break;case"copy":case"cut":case"paste":fe=c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Bn}var _e=(o&4)!==0,Ct=!_e&&s==="scroll",B=_e?Y!==null?Y+"Capture":null:Y;_e=[];for(var V=$,q;V!==null;){q=V;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,B!==null&&(ie=Js(V,B),ie!=null&&_e.push(Nu(V,ie,q)))),Ct)break;V=V.return}0<_e.length&&(Y=new fe(Y,ge,null,u,Z),te.push({event:Y,listeners:_e}))}}if((o&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",Y&&u!==$i&&(ge=u.relatedTarget||u.fromElement)&&(uo(ge)||ge[yi]))break e;if((fe||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,fe?(ge=u.relatedTarget||u.toElement,fe=$,ge=ge?uo(ge):null,ge!==null&&(Ct=dr(ge),ge!==Ct||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=$),fe!==ge)){if(_e=Tu,ie="onMouseLeave",B="onMouseEnter",V="mouse",(s==="pointerout"||s==="pointerover")&&(_e=Bn,ie="onPointerLeave",B="onPointerEnter",V="pointer"),Ct=fe==null?Y:Oa(fe),q=ge==null?Y:Oa(ge),Y=new _e(ie,V+"leave",fe,u,Z),Y.target=Ct,Y.relatedTarget=q,ie=null,uo(Z)===$&&(_e=new _e(B,V+"enter",ge,u,Z),_e.target=q,_e.relatedTarget=Ct,ie=_e),Ct=ie,fe&&ge)t:{for(_e=fe,B=ge,V=0,q=_e;q;q=Da(q))V++;for(q=0,ie=B;ie;ie=Da(ie))q++;for(;0<V-q;)_e=Da(_e),V--;for(;0<q-V;)B=Da(B),q--;for(;V--;){if(_e===B||B!==null&&_e===B.alternate)break t;_e=Da(_e),B=Da(B)}_e=null}else _e=null;fe!==null&&Wv(te,Y,fe,_e,!1),ge!==null&&Ct!==null&&Wv(te,Ct,ge,_e,!0)}}e:{if(Y=$?Oa($):window,fe=Y.nodeName&&Y.nodeName.toLowerCase(),fe==="select"||fe==="input"&&Y.type==="file")var we=hP;else if(Sv(Y))if(Rv)we=mP;else{we=fP;var Se=dP}else(fe=Y.nodeName)&&fe.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(we=pP);if(we&&(we=we(s,$))){Av(te,we,u,Z);break e}Se&&Se(s,Y,$),s==="focusout"&&(Se=Y._wrapperState)&&Se.controlled&&Y.type==="number"&&Dt(Y,"number",Y.value)}switch(Se=$?Oa($):window,s){case"focusin":(Sv(Se)||Se.contentEditable==="true")&&(xa=Se,qp=$,ku=null);break;case"focusout":ku=qp=xa=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,Vv(te,u,Z);break;case"selectionchange":if(_P)break;case"keydown":case"keyup":Vv(te,u,Z)}var Ae;if(Up)e:{switch(s){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ba?Iv(s,u)&&(ke="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(ke="onCompositionStart");ke&&(vv&&u.locale!=="ko"&&(ba||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ba&&(Ae=$h()):(Un=Z,Sa="value"in Un?Un.value:Un.textContent,ba=!0)),Se=Zh($,ke),0<Se.length&&(ke=new v(ke,s,null,u,Z),te.push({event:ke,listeners:Se}),Ae?ke.data=Ae:(Ae=Tv(u),Ae!==null&&(ke.data=Ae)))),(Ae=oP?aP(s,u):lP(s,u))&&($=Zh($,"onBeforeInput"),0<$.length&&(Z=new v("onBeforeInput","beforeinput",null,u,Z),te.push({event:Z,listeners:$}),Z.data=Ae))}qv(te,o)})}function Nu(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Zh(s,o){for(var u=o+"Capture",d=[];s!==null;){var p=s,g=p.stateNode;p.tag===5&&g!==null&&(p=g,g=Js(s,u),g!=null&&d.unshift(Nu(s,g,p)),g=Js(s,o),g!=null&&d.push(Nu(s,g,p))),s=s.return}return d}function Da(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Wv(s,o,u,d,p){for(var g=o._reactName,E=[];u!==null&&u!==d;){var P=u,N=P.alternate,$=P.stateNode;if(N!==null&&N===d)break;P.tag===5&&$!==null&&(P=$,p?(N=Js(u,g),N!=null&&E.unshift(Nu(u,N,P))):p||(N=Js(u,g),N!=null&&E.push(Nu(u,N,P)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var IP=/\r\n?/g,TP=/\u0000|\uFFFD/g;function Hv(s){return(typeof s=="string"?s:""+s).replace(IP,`
`).replace(TP,"")}function ed(s,o,u){if(o=Hv(o),Hv(s)!==o&&u)throw Error(t(425))}function td(){}var Jp=null,Yp=null;function Xp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,SP=typeof clearTimeout=="function"?clearTimeout:void 0,Gv=typeof Promise=="function"?Promise:void 0,AP=typeof queueMicrotask=="function"?queueMicrotask:typeof Gv<"u"?function(s){return Gv.resolve(null).then(s).catch(RP)}:Zp;function RP(s){setTimeout(function(){throw s})}function em(s,o){var u=o,d=0;do{var p=u.nextSibling;if(s.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(d===0){s.removeChild(p),Xi(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=p}while(u);Xi(o)}function ns(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Kv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Va=Math.random().toString(36).slice(2),jr="__reactFiber$"+Va,Du="__reactProps$"+Va,yi="__reactContainer$"+Va,tm="__reactEvents$"+Va,PP="__reactListeners$"+Va,CP="__reactHandles$"+Va;function uo(s){var o=s[jr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[yi]||u[jr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Kv(s);s!==null;){if(u=s[jr])return u;s=Kv(s)}return o}s=u,u=s.parentNode}return null}function Vu(s){return s=s[jr]||s[yi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Oa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function nd(s){return s[Du]||null}var nm=[],La=-1;function rs(s){return{current:s}}function ct(s){0>La||(s.current=nm[La],nm[La]=null,La--)}function it(s,o){La++,nm[La]=s.current,s.current=o}var is={},on=rs(is),Tn=rs(!1),co=is;function Ma(s,o){var u=s.type.contextTypes;if(!u)return is;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var p={},g;for(g in u)p[g]=o[g];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=p),p}function Sn(s){return s=s.childContextTypes,s!=null}function rd(){ct(Tn),ct(on)}function Qv(s,o,u){if(on.current!==is)throw Error(t(168));it(on,o),it(Tn,u)}function Jv(s,o,u){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var p in d)if(!(p in o))throw Error(t(108,Je(s)||"Unknown",p));return ce({},u,d)}function id(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||is,co=on.current,it(on,s),it(Tn,Tn.current),!0}function Yv(s,o,u){var d=s.stateNode;if(!d)throw Error(t(169));u?(s=Jv(s,o,co),d.__reactInternalMemoizedMergedChildContext=s,ct(Tn),ct(on),it(on,s)):ct(Tn),it(Tn,u)}var _i=null,sd=!1,rm=!1;function Xv(s){_i===null?_i=[s]:_i.push(s)}function kP(s){sd=!0,Xv(s)}function ss(){if(!rm&&_i!==null){rm=!0;var s=0,o=ze;try{var u=_i;for(ze=1;s<u.length;s++){var d=u[s];do d=d(!0);while(d!==null)}_i=null,sd=!1}catch(p){throw _i!==null&&(_i=_i.slice(s+1)),cu(ya,ss),p}finally{ze=o,rm=!1}}return null}var Fa=[],Ua=0,od=null,ad=0,Zn=[],er=0,ho=null,vi=1,wi="";function fo(s,o){Fa[Ua++]=ad,Fa[Ua++]=od,od=s,ad=o}function Zv(s,o,u){Zn[er++]=vi,Zn[er++]=wi,Zn[er++]=ho,ho=s;var d=vi;s=wi;var p=32-Mn(d)-1;d&=~(1<<p),u+=1;var g=32-Mn(o)+p;if(30<g){var E=p-p%5;g=(d&(1<<E)-1).toString(32),d>>=E,p-=E,vi=1<<32-Mn(o)+p|u<<p|d,wi=g+s}else vi=1<<g|u<<p|d,wi=s}function im(s){s.return!==null&&(fo(s,1),Zv(s,1,0))}function sm(s){for(;s===od;)od=Fa[--Ua],Fa[Ua]=null,ad=Fa[--Ua],Fa[Ua]=null;for(;s===ho;)ho=Zn[--er],Zn[er]=null,wi=Zn[--er],Zn[er]=null,vi=Zn[--er],Zn[er]=null}var zn=null,qn=null,ft=!1,mr=null;function ew(s,o){var u=ir(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function tw(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,zn=s,qn=ns(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,zn=s,qn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ho!==null?{id:vi,overflow:wi}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=ir(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,zn=s,qn=null,!0):!1;default:return!1}}function om(s){return(s.mode&1)!==0&&(s.flags&128)===0}function am(s){if(ft){var o=qn;if(o){var u=o;if(!tw(s,o)){if(om(s))throw Error(t(418));o=ns(u.nextSibling);var d=zn;o&&tw(s,o)?ew(d,u):(s.flags=s.flags&-4097|2,ft=!1,zn=s)}}else{if(om(s))throw Error(t(418));s.flags=s.flags&-4097|2,ft=!1,zn=s}}}function nw(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;zn=s}function ld(s){if(s!==zn)return!1;if(!ft)return nw(s),ft=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Xp(s.type,s.memoizedProps)),o&&(o=qn)){if(om(s))throw rw(),Error(t(418));for(;o;)ew(s,o),o=ns(o.nextSibling)}if(nw(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){qn=ns(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}qn=null}}else qn=zn?ns(s.stateNode.nextSibling):null;return!0}function rw(){for(var s=qn;s;)s=ns(s.nextSibling)}function ja(){qn=zn=null,ft=!1}function lm(s){mr===null?mr=[s]:mr.push(s)}var bP=de.ReactCurrentBatchConfig;function Ou(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,s));var p=d,g=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===g?o.ref:(o=function(E){var P=p.refs;E===null?delete P[g]:P[g]=E},o._stringRef=g,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function ud(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function iw(s){var o=s._init;return o(s._payload)}function sw(s){function o(B,V){if(s){var q=B.deletions;q===null?(B.deletions=[V],B.flags|=16):q.push(V)}}function u(B,V){if(!s)return null;for(;V!==null;)o(B,V),V=V.sibling;return null}function d(B,V){for(B=new Map;V!==null;)V.key!==null?B.set(V.key,V):B.set(V.index,V),V=V.sibling;return B}function p(B,V){return B=fs(B,V),B.index=0,B.sibling=null,B}function g(B,V,q){return B.index=q,s?(q=B.alternate,q!==null?(q=q.index,q<V?(B.flags|=2,V):q):(B.flags|=2,V)):(B.flags|=1048576,V)}function E(B){return s&&B.alternate===null&&(B.flags|=2),B}function P(B,V,q,ie){return V===null||V.tag!==6?(V=Zm(q,B.mode,ie),V.return=B,V):(V=p(V,q),V.return=B,V)}function N(B,V,q,ie){var we=q.type;return we===k?Z(B,V,q.props.children,ie,q.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Le&&iw(we)===V.type)?(ie=p(V,q.props),ie.ref=Ou(B,V,q),ie.return=B,ie):(ie=Dd(q.type,q.key,q.props,null,B.mode,ie),ie.ref=Ou(B,V,q),ie.return=B,ie)}function $(B,V,q,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=eg(q,B.mode,ie),V.return=B,V):(V=p(V,q.children||[]),V.return=B,V)}function Z(B,V,q,ie,we){return V===null||V.tag!==7?(V=Eo(q,B.mode,ie,we),V.return=B,V):(V=p(V,q),V.return=B,V)}function te(B,V,q){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Zm(""+V,B.mode,q),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ue:return q=Dd(V.type,V.key,V.props,null,B.mode,q),q.ref=Ou(B,null,V),q.return=B,q;case me:return V=eg(V,B.mode,q),V.return=B,V;case Le:var ie=V._init;return te(B,ie(V._payload),q)}if(Rt(V)||ve(V))return V=Eo(V,B.mode,q,null),V.return=B,V;ud(B,V)}return null}function Y(B,V,q,ie){var we=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return we!==null?null:P(B,V,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case ue:return q.key===we?N(B,V,q,ie):null;case me:return q.key===we?$(B,V,q,ie):null;case Le:return we=q._init,Y(B,V,we(q._payload),ie)}if(Rt(q)||ve(q))return we!==null?null:Z(B,V,q,ie,null);ud(B,q)}return null}function fe(B,V,q,ie,we){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get(q)||null,P(V,B,""+ie,we);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ue:return B=B.get(ie.key===null?q:ie.key)||null,N(V,B,ie,we);case me:return B=B.get(ie.key===null?q:ie.key)||null,$(V,B,ie,we);case Le:var Se=ie._init;return fe(B,V,q,Se(ie._payload),we)}if(Rt(ie)||ve(ie))return B=B.get(q)||null,Z(V,B,ie,we,null);ud(V,ie)}return null}function ge(B,V,q,ie){for(var we=null,Se=null,Ae=V,ke=V=0,Wt=null;Ae!==null&&ke<q.length;ke++){Ae.index>ke?(Wt=Ae,Ae=null):Wt=Ae.sibling;var Ge=Y(B,Ae,q[ke],ie);if(Ge===null){Ae===null&&(Ae=Wt);break}s&&Ae&&Ge.alternate===null&&o(B,Ae),V=g(Ge,V,ke),Se===null?we=Ge:Se.sibling=Ge,Se=Ge,Ae=Wt}if(ke===q.length)return u(B,Ae),ft&&fo(B,ke),we;if(Ae===null){for(;ke<q.length;ke++)Ae=te(B,q[ke],ie),Ae!==null&&(V=g(Ae,V,ke),Se===null?we=Ae:Se.sibling=Ae,Se=Ae);return ft&&fo(B,ke),we}for(Ae=d(B,Ae);ke<q.length;ke++)Wt=fe(Ae,B,ke,q[ke],ie),Wt!==null&&(s&&Wt.alternate!==null&&Ae.delete(Wt.key===null?ke:Wt.key),V=g(Wt,V,ke),Se===null?we=Wt:Se.sibling=Wt,Se=Wt);return s&&Ae.forEach(function(ps){return o(B,ps)}),ft&&fo(B,ke),we}function _e(B,V,q,ie){var we=ve(q);if(typeof we!="function")throw Error(t(150));if(q=we.call(q),q==null)throw Error(t(151));for(var Se=we=null,Ae=V,ke=V=0,Wt=null,Ge=q.next();Ae!==null&&!Ge.done;ke++,Ge=q.next()){Ae.index>ke?(Wt=Ae,Ae=null):Wt=Ae.sibling;var ps=Y(B,Ae,Ge.value,ie);if(ps===null){Ae===null&&(Ae=Wt);break}s&&Ae&&ps.alternate===null&&o(B,Ae),V=g(ps,V,ke),Se===null?we=ps:Se.sibling=ps,Se=ps,Ae=Wt}if(Ge.done)return u(B,Ae),ft&&fo(B,ke),we;if(Ae===null){for(;!Ge.done;ke++,Ge=q.next())Ge=te(B,Ge.value,ie),Ge!==null&&(V=g(Ge,V,ke),Se===null?we=Ge:Se.sibling=Ge,Se=Ge);return ft&&fo(B,ke),we}for(Ae=d(B,Ae);!Ge.done;ke++,Ge=q.next())Ge=fe(Ae,B,ke,Ge.value,ie),Ge!==null&&(s&&Ge.alternate!==null&&Ae.delete(Ge.key===null?ke:Ge.key),V=g(Ge,V,ke),Se===null?we=Ge:Se.sibling=Ge,Se=Ge);return s&&Ae.forEach(function(uC){return o(B,uC)}),ft&&fo(B,ke),we}function Ct(B,V,q,ie){if(typeof q=="object"&&q!==null&&q.type===k&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case ue:e:{for(var we=q.key,Se=V;Se!==null;){if(Se.key===we){if(we=q.type,we===k){if(Se.tag===7){u(B,Se.sibling),V=p(Se,q.props.children),V.return=B,B=V;break e}}else if(Se.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Le&&iw(we)===Se.type){u(B,Se.sibling),V=p(Se,q.props),V.ref=Ou(B,Se,q),V.return=B,B=V;break e}u(B,Se);break}else o(B,Se);Se=Se.sibling}q.type===k?(V=Eo(q.props.children,B.mode,ie,q.key),V.return=B,B=V):(ie=Dd(q.type,q.key,q.props,null,B.mode,ie),ie.ref=Ou(B,V,q),ie.return=B,B=ie)}return E(B);case me:e:{for(Se=q.key;V!==null;){if(V.key===Se)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){u(B,V.sibling),V=p(V,q.children||[]),V.return=B,B=V;break e}else{u(B,V);break}else o(B,V);V=V.sibling}V=eg(q,B.mode,ie),V.return=B,B=V}return E(B);case Le:return Se=q._init,Ct(B,V,Se(q._payload),ie)}if(Rt(q))return ge(B,V,q,ie);if(ve(q))return _e(B,V,q,ie);ud(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,V!==null&&V.tag===6?(u(B,V.sibling),V=p(V,q),V.return=B,B=V):(u(B,V),V=Zm(q,B.mode,ie),V.return=B,B=V),E(B)):u(B,V)}return Ct}var Ba=sw(!0),ow=sw(!1),cd=rs(null),hd=null,za=null,um=null;function cm(){um=za=hd=null}function hm(s){var o=cd.current;ct(cd),s._currentValue=o}function dm(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function qa(s,o){hd=s,um=za=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(An=!0),s.firstContext=null)}function tr(s){var o=s._currentValue;if(um!==s)if(s={context:s,memoizedValue:o,next:null},za===null){if(hd===null)throw Error(t(308));za=s,hd.dependencies={lanes:0,firstContext:s}}else za=za.next=s;return o}var po=null;function fm(s){po===null?po=[s]:po.push(s)}function aw(s,o,u,d){var p=o.interleaved;return p===null?(u.next=u,fm(o)):(u.next=p.next,p.next=u),o.interleaved=u,Ei(s,d)}function Ei(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var os=!1;function pm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lw(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ii(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function as(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(We&2)!==0){var p=d.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),d.pending=o,Ei(s,u)}return p=d.interleaved,p===null?(o.next=o,fm(d)):(o.next=p.next,p.next=o),d.interleaved=o,Ei(s,u)}function dd(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,gu(s,u)}}function uw(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var p=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};g===null?p=g=E:g=g.next=E,u=u.next}while(u!==null);g===null?p=g=o:g=g.next=o}else p=g=o;u={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:d.shared,effects:d.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function fd(s,o,u,d){var p=s.updateQueue;os=!1;var g=p.firstBaseUpdate,E=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var N=P,$=N.next;N.next=null,E===null?g=$:E.next=$,E=N;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,P=Z.lastBaseUpdate,P!==E&&(P===null?Z.firstBaseUpdate=$:P.next=$,Z.lastBaseUpdate=N))}if(g!==null){var te=p.baseState;E=0,Z=$=N=null,P=g;do{var Y=P.lane,fe=P.eventTime;if((d&Y)===Y){Z!==null&&(Z=Z.next={eventTime:fe,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=s,_e=P;switch(Y=o,fe=u,_e.tag){case 1:if(ge=_e.payload,typeof ge=="function"){te=ge.call(fe,te,Y);break e}te=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_e.payload,Y=typeof ge=="function"?ge.call(fe,te,Y):ge,Y==null)break e;te=ce({},te,Y);break e;case 2:os=!0}}P.callback!==null&&P.lane!==0&&(s.flags|=64,Y=p.effects,Y===null?p.effects=[P]:Y.push(P))}else fe={eventTime:fe,lane:Y,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Z===null?($=Z=fe,N=te):Z=Z.next=fe,E|=Y;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;Y=P,P=Y.next,Y.next=null,p.lastBaseUpdate=Y,p.shared.pending=null}}while(!0);if(Z===null&&(N=te),p.baseState=N,p.firstBaseUpdate=$,p.lastBaseUpdate=Z,o=p.shared.interleaved,o!==null){p=o;do E|=p.lane,p=p.next;while(p!==o)}else g===null&&(p.shared.lanes=0);yo|=E,s.lanes=E,s.memoizedState=te}}function cw(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],p=d.callback;if(p!==null){if(d.callback=null,d=u,typeof p!="function")throw Error(t(191,p));p.call(d)}}}var Lu={},Br=rs(Lu),Mu=rs(Lu),Fu=rs(Lu);function mo(s){if(s===Lu)throw Error(t(174));return s}function mm(s,o){switch(it(Fu,o),it(Mu,s),it(Br,Lu),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ha(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=ha(o,s)}ct(Br),it(Br,o)}function $a(){ct(Br),ct(Mu),ct(Fu)}function hw(s){mo(Fu.current);var o=mo(Br.current),u=ha(o,s.type);o!==u&&(it(Mu,s),it(Br,u))}function gm(s){Mu.current===s&&(ct(Br),ct(Mu))}var yt=rs(0);function pd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ym=[];function _m(){for(var s=0;s<ym.length;s++)ym[s]._workInProgressVersionPrimary=null;ym.length=0}var md=de.ReactCurrentDispatcher,vm=de.ReactCurrentBatchConfig,go=0,_t=null,Ut=null,qt=null,gd=!1,Uu=!1,ju=0,xP=0;function an(){throw Error(t(321))}function wm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!pr(s[u],o[u]))return!1;return!0}function Em(s,o,u,d,p,g){if(go=g,_t=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,md.current=s===null||s.memoizedState===null?OP:LP,s=u(d,p),Uu){g=0;do{if(Uu=!1,ju=0,25<=g)throw Error(t(301));g+=1,qt=Ut=null,o.updateQueue=null,md.current=MP,s=u(d,p)}while(Uu)}if(md.current=vd,o=Ut!==null&&Ut.next!==null,go=0,qt=Ut=_t=null,gd=!1,o)throw Error(t(300));return s}function Im(){var s=ju!==0;return ju=0,s}function zr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?_t.memoizedState=qt=s:qt=qt.next=s,qt}function nr(){if(Ut===null){var s=_t.alternate;s=s!==null?s.memoizedState:null}else s=Ut.next;var o=qt===null?_t.memoizedState:qt.next;if(o!==null)qt=o,Ut=s;else{if(s===null)throw Error(t(310));Ut=s,s={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},qt===null?_t.memoizedState=qt=s:qt=qt.next=s}return qt}function Bu(s,o){return typeof o=="function"?o(s):o}function Tm(s){var o=nr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var d=Ut,p=d.baseQueue,g=u.pending;if(g!==null){if(p!==null){var E=p.next;p.next=g.next,g.next=E}d.baseQueue=p=g,u.pending=null}if(p!==null){g=p.next,d=d.baseState;var P=E=null,N=null,$=g;do{var Z=$.lane;if((go&Z)===Z)N!==null&&(N=N.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:s(d,$.action);else{var te={lane:Z,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};N===null?(P=N=te,E=d):N=N.next=te,_t.lanes|=Z,yo|=Z}$=$.next}while($!==null&&$!==g);N===null?E=d:N.next=P,pr(d,o.memoizedState)||(An=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=N,u.lastRenderedState=d}if(s=u.interleaved,s!==null){p=s;do g=p.lane,_t.lanes|=g,yo|=g,p=p.next;while(p!==s)}else p===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Sm(s){var o=nr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var d=u.dispatch,p=u.pending,g=o.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do g=s(g,E.action),E=E.next;while(E!==p);pr(g,o.memoizedState)||(An=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),u.lastRenderedState=g}return[g,d]}function dw(){}function fw(s,o){var u=_t,d=nr(),p=o(),g=!pr(d.memoizedState,p);if(g&&(d.memoizedState=p,An=!0),d=d.queue,Am(gw.bind(null,u,d,s),[s]),d.getSnapshot!==o||g||qt!==null&&qt.memoizedState.tag&1){if(u.flags|=2048,zu(9,mw.bind(null,u,d,p,o),void 0,null),$t===null)throw Error(t(349));(go&30)!==0||pw(u,o,p)}return p}function pw(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function mw(s,o,u,d){o.value=u,o.getSnapshot=d,yw(o)&&_w(s)}function gw(s,o,u){return u(function(){yw(o)&&_w(s)})}function yw(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!pr(s,u)}catch{return!0}}function _w(s){var o=Ei(s,1);o!==null&&vr(o,s,1,-1)}function vw(s){var o=zr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:s},o.queue=s,s=s.dispatch=VP.bind(null,_t,s),[o.memoizedState,s]}function zu(s,o,u,d){return s={tag:s,create:o,destroy:u,deps:d,next:null},o=_t.updateQueue,o===null?(o={lastEffect:null,stores:null},_t.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s)),s}function ww(){return nr().memoizedState}function yd(s,o,u,d){var p=zr();_t.flags|=s,p.memoizedState=zu(1|o,u,void 0,d===void 0?null:d)}function _d(s,o,u,d){var p=nr();d=d===void 0?null:d;var g=void 0;if(Ut!==null){var E=Ut.memoizedState;if(g=E.destroy,d!==null&&wm(d,E.deps)){p.memoizedState=zu(o,u,g,d);return}}_t.flags|=s,p.memoizedState=zu(1|o,u,g,d)}function Ew(s,o){return yd(8390656,8,s,o)}function Am(s,o){return _d(2048,8,s,o)}function Iw(s,o){return _d(4,2,s,o)}function Tw(s,o){return _d(4,4,s,o)}function Sw(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Aw(s,o,u){return u=u!=null?u.concat([s]):null,_d(4,4,Sw.bind(null,o,s),u)}function Rm(){}function Rw(s,o){var u=nr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&wm(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function Pw(s,o){var u=nr();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&wm(o,d[1])?d[0]:(s=s(),u.memoizedState=[s,o],s)}function Cw(s,o,u){return(go&21)===0?(s.baseState&&(s.baseState=!1,An=!0),s.memoizedState=u):(pr(u,o)||(u=pu(),_t.lanes|=u,yo|=u,s.baseState=!0),o)}function NP(s,o){var u=ze;ze=u!==0&&4>u?u:4,s(!0);var d=vm.transition;vm.transition={};try{s(!1),o()}finally{ze=u,vm.transition=d}}function kw(){return nr().memoizedState}function DP(s,o,u){var d=hs(s);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},bw(s))xw(o,u);else if(u=aw(s,o,u,d),u!==null){var p=_n();vr(u,s,d,p),Nw(u,o,d)}}function VP(s,o,u){var d=hs(s),p={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(bw(s))xw(o,p);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var E=o.lastRenderedState,P=g(E,u);if(p.hasEagerState=!0,p.eagerState=P,pr(P,E)){var N=o.interleaved;N===null?(p.next=p,fm(o)):(p.next=N.next,N.next=p),o.interleaved=p;return}}catch{}u=aw(s,o,p,d),u!==null&&(p=_n(),vr(u,s,d,p),Nw(u,o,d))}}function bw(s){var o=s.alternate;return s===_t||o!==null&&o===_t}function xw(s,o){Uu=gd=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Nw(s,o,u){if((u&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,gu(s,u)}}var vd={readContext:tr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},OP={readContext:tr,useCallback:function(s,o){return zr().memoizedState=[s,o===void 0?null:o],s},useContext:tr,useEffect:Ew,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,yd(4194308,4,Sw.bind(null,o,s),u)},useLayoutEffect:function(s,o){return yd(4194308,4,s,o)},useInsertionEffect:function(s,o){return yd(4,2,s,o)},useMemo:function(s,o){var u=zr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var d=zr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=DP.bind(null,_t,s),[d.memoizedState,s]},useRef:function(s){var o=zr();return s={current:s},o.memoizedState=s},useState:vw,useDebugValue:Rm,useDeferredValue:function(s){return zr().memoizedState=s},useTransition:function(){var s=vw(!1),o=s[0];return s=NP.bind(null,s[1]),zr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var d=_t,p=zr();if(ft){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),$t===null)throw Error(t(349));(go&30)!==0||pw(d,o,u)}p.memoizedState=u;var g={value:u,getSnapshot:o};return p.queue=g,Ew(gw.bind(null,d,g,s),[s]),d.flags|=2048,zu(9,mw.bind(null,d,g,u,o),void 0,null),u},useId:function(){var s=zr(),o=$t.identifierPrefix;if(ft){var u=wi,d=vi;u=(d&~(1<<32-Mn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=ju++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=xP++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},LP={readContext:tr,useCallback:Rw,useContext:tr,useEffect:Am,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:Tw,useMemo:Pw,useReducer:Tm,useRef:ww,useState:function(){return Tm(Bu)},useDebugValue:Rm,useDeferredValue:function(s){var o=nr();return Cw(o,Ut.memoizedState,s)},useTransition:function(){var s=Tm(Bu)[0],o=nr().memoizedState;return[s,o]},useMutableSource:dw,useSyncExternalStore:fw,useId:kw,unstable_isNewReconciler:!1},MP={readContext:tr,useCallback:Rw,useContext:tr,useEffect:Am,useImperativeHandle:Aw,useInsertionEffect:Iw,useLayoutEffect:Tw,useMemo:Pw,useReducer:Sm,useRef:ww,useState:function(){return Sm(Bu)},useDebugValue:Rm,useDeferredValue:function(s){var o=nr();return Ut===null?o.memoizedState=s:Cw(o,Ut.memoizedState,s)},useTransition:function(){var s=Sm(Bu)[0],o=nr().memoizedState;return[s,o]},useMutableSource:dw,useSyncExternalStore:fw,useId:kw,unstable_isNewReconciler:!1};function gr(s,o){if(s&&s.defaultProps){o=ce({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Pm(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:ce({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var wd={isMounted:function(s){return(s=s._reactInternals)?dr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var d=_n(),p=hs(s),g=Ii(d,p);g.payload=o,u!=null&&(g.callback=u),o=as(s,g,p),o!==null&&(vr(o,s,p,d),dd(o,s,p))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=_n(),p=hs(s),g=Ii(d,p);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=as(s,g,p),o!==null&&(vr(o,s,p,d),dd(o,s,p))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=_n(),d=hs(s),p=Ii(u,d);p.tag=2,o!=null&&(p.callback=o),o=as(s,p,d),o!==null&&(vr(o,s,d,u),dd(o,s,d))}};function Dw(s,o,u,d,p,g,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,g,E):o.prototype&&o.prototype.isPureReactComponent?!Cu(u,d)||!Cu(p,g):!0}function Vw(s,o,u){var d=!1,p=is,g=o.contextType;return typeof g=="object"&&g!==null?g=tr(g):(p=Sn(o)?co:on.current,d=o.contextTypes,g=(d=d!=null)?Ma(s,p):is),o=new o(u,g),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wd,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=p,s.__reactInternalMemoizedMaskedChildContext=g),o}function Ow(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&wd.enqueueReplaceState(o,o.state,null)}function Cm(s,o,u,d){var p=s.stateNode;p.props=u,p.state=s.memoizedState,p.refs={},pm(s);var g=o.contextType;typeof g=="object"&&g!==null?p.context=tr(g):(g=Sn(o)?co:on.current,p.context=Ma(s,g)),p.state=s.memoizedState,g=o.getDerivedStateFromProps,typeof g=="function"&&(Pm(s,o,g,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&wd.enqueueReplaceState(p,p.state,null),fd(s,u,p,d),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308)}function Wa(s,o){try{var u="",d=o;do u+=Ve(d),d=d.return;while(d);var p=u}catch(g){p=`
Error generating stack: `+g.message+`
`+g.stack}return{value:s,source:o,stack:p,digest:null}}function km(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function bm(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var FP=typeof WeakMap=="function"?WeakMap:Map;function Lw(s,o,u){u=Ii(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Pd||(Pd=!0,Wm=d),bm(s,o)},u}function Mw(s,o,u){u=Ii(-1,u),u.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=o.value;u.payload=function(){return d(p)},u.callback=function(){bm(s,o)}}var g=s.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(u.callback=function(){bm(s,o),typeof d!="function"&&(us===null?us=new Set([this]):us.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function Fw(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new FP;var p=new Set;d.set(o,p)}else p=d.get(o),p===void 0&&(p=new Set,d.set(o,p));p.has(u)||(p.add(u),s=XP.bind(null,s,o,u),o.then(s,s))}function Uw(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function jw(s,o,u,d,p){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Ii(-1,1),o.tag=2,as(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=p,s)}var UP=de.ReactCurrentOwner,An=!1;function yn(s,o,u,d){o.child=s===null?ow(o,null,u,d):Ba(o,s.child,u,d)}function Bw(s,o,u,d,p){u=u.render;var g=o.ref;return qa(o,p),d=Em(s,o,u,d,g,p),u=Im(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Ti(s,o,p)):(ft&&u&&im(o),o.flags|=1,yn(s,o,d,p),o.child)}function zw(s,o,u,d,p){if(s===null){var g=u.type;return typeof g=="function"&&!Xm(g)&&g.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=g,qw(s,o,g,d,p)):(s=Dd(u.type,null,d,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(g=s.child,(s.lanes&p)===0){var E=g.memoizedProps;if(u=u.compare,u=u!==null?u:Cu,u(E,d)&&s.ref===o.ref)return Ti(s,o,p)}return o.flags|=1,s=fs(g,d),s.ref=o.ref,s.return=o,o.child=s}function qw(s,o,u,d,p){if(s!==null){var g=s.memoizedProps;if(Cu(g,d)&&s.ref===o.ref)if(An=!1,o.pendingProps=d=g,(s.lanes&p)!==0)(s.flags&131072)!==0&&(An=!0);else return o.lanes=s.lanes,Ti(s,o,p)}return xm(s,o,u,d,p)}function $w(s,o,u){var d=o.pendingProps,p=d.children,g=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ga,$n),$n|=u;else{if((u&1073741824)===0)return s=g!==null?g.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,it(Ga,$n),$n|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:u,it(Ga,$n),$n|=d}else g!==null?(d=g.baseLanes|u,o.memoizedState=null):d=u,it(Ga,$n),$n|=d;return yn(s,o,p,u),o.child}function Ww(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function xm(s,o,u,d,p){var g=Sn(u)?co:on.current;return g=Ma(o,g),qa(o,p),u=Em(s,o,u,d,g,p),d=Im(),s!==null&&!An?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~p,Ti(s,o,p)):(ft&&d&&im(o),o.flags|=1,yn(s,o,u,p),o.child)}function Hw(s,o,u,d,p){if(Sn(u)){var g=!0;id(o)}else g=!1;if(qa(o,p),o.stateNode===null)Id(s,o),Vw(o,u,d),Cm(o,u,d,p),d=!0;else if(s===null){var E=o.stateNode,P=o.memoizedProps;E.props=P;var N=E.context,$=u.contextType;typeof $=="object"&&$!==null?$=tr($):($=Sn(u)?co:on.current,$=Ma(o,$));var Z=u.getDerivedStateFromProps,te=typeof Z=="function"||typeof E.getSnapshotBeforeUpdate=="function";te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==d||N!==$)&&Ow(o,E,d,$),os=!1;var Y=o.memoizedState;E.state=Y,fd(o,d,E,p),N=o.memoizedState,P!==d||Y!==N||Tn.current||os?(typeof Z=="function"&&(Pm(o,u,Z,d),N=o.memoizedState),(P=os||Dw(o,u,P,d,Y,N,$))?(te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=N),E.props=d,E.state=N,E.context=$,d=P):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,lw(s,o),P=o.memoizedProps,$=o.type===o.elementType?P:gr(o.type,P),E.props=$,te=o.pendingProps,Y=E.context,N=u.contextType,typeof N=="object"&&N!==null?N=tr(N):(N=Sn(u)?co:on.current,N=Ma(o,N));var fe=u.getDerivedStateFromProps;(Z=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P!==te||Y!==N)&&Ow(o,E,d,N),os=!1,Y=o.memoizedState,E.state=Y,fd(o,d,E,p);var ge=o.memoizedState;P!==te||Y!==ge||Tn.current||os?(typeof fe=="function"&&(Pm(o,u,fe,d),ge=o.memoizedState),($=os||Dw(o,u,$,d,Y,ge,N)||!1)?(Z||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,ge,N),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,ge,N)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ge),E.props=d,E.state=ge,E.context=N,d=$):(typeof E.componentDidUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),d=!1)}return Nm(s,o,u,d,g,p)}function Nm(s,o,u,d,p,g){Ww(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return p&&Yv(o,u,!1),Ti(s,o,g);d=o.stateNode,UP.current=o;var P=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=Ba(o,s.child,null,g),o.child=Ba(o,null,P,g)):yn(s,o,P,g),o.memoizedState=d.state,p&&Yv(o,u,!0),o.child}function Gw(s){var o=s.stateNode;o.pendingContext?Qv(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Qv(s,o.context,!1),mm(s,o.containerInfo)}function Kw(s,o,u,d,p){return ja(),lm(p),o.flags|=256,yn(s,o,u,d),o.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Vm(s){return{baseLanes:s,cachePool:null,transitions:null}}function Qw(s,o,u){var d=o.pendingProps,p=yt.current,g=!1,E=(o.flags&128)!==0,P;if((P=E)||(P=s!==null&&s.memoizedState===null?!1:(p&2)!==0),P?(g=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(p|=1),it(yt,p&1),s===null)return am(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,s=d.fallback,g?(d=o.mode,g=o.child,E={mode:"hidden",children:E},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=E):g=Vd(E,d,0,null),s=Eo(s,d,u,null),g.return=o,s.return=o,g.sibling=s,o.child=g,o.child.memoizedState=Vm(u),o.memoizedState=Dm,s):Om(o,E));if(p=s.memoizedState,p!==null&&(P=p.dehydrated,P!==null))return jP(s,o,E,d,P,p,u);if(g){g=d.fallback,E=o.mode,p=s.child,P=p.sibling;var N={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==p?(d=o.child,d.childLanes=0,d.pendingProps=N,o.deletions=null):(d=fs(p,N),d.subtreeFlags=p.subtreeFlags&14680064),P!==null?g=fs(P,g):(g=Eo(g,E,u,null),g.flags|=2),g.return=o,d.return=o,d.sibling=g,o.child=d,d=g,g=o.child,E=s.child.memoizedState,E=E===null?Vm(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},g.memoizedState=E,g.childLanes=s.childLanes&~u,o.memoizedState=Dm,d}return g=s.child,s=g.sibling,d=fs(g,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=d,o.memoizedState=null,d}function Om(s,o){return o=Vd({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Ed(s,o,u,d){return d!==null&&lm(d),Ba(o,s.child,null,u),s=Om(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function jP(s,o,u,d,p,g,E){if(u)return o.flags&256?(o.flags&=-257,d=km(Error(t(422))),Ed(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(g=d.fallback,p=o.mode,d=Vd({mode:"visible",children:d.children},p,0,null),g=Eo(g,p,E,null),g.flags|=2,d.return=o,g.return=o,d.sibling=g,o.child=d,(o.mode&1)!==0&&Ba(o,s.child,null,E),o.child.memoizedState=Vm(E),o.memoizedState=Dm,g);if((o.mode&1)===0)return Ed(s,o,E,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var P=d.dgst;return d=P,g=Error(t(419)),d=km(g,d,void 0),Ed(s,o,E,d)}if(P=(E&s.childLanes)!==0,An||P){if(d=$t,d!==null){switch(E&-E){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|E))!==0?0:p,p!==0&&p!==g.retryLane&&(g.retryLane=p,Ei(s,p),vr(d,s,p,-1))}return Ym(),d=km(Error(t(421))),Ed(s,o,E,d)}return p.data==="$?"?(o.flags|=128,o.child=s.child,o=ZP.bind(null,s),p._reactRetry=o,null):(s=g.treeContext,qn=ns(p.nextSibling),zn=o,ft=!0,mr=null,s!==null&&(Zn[er++]=vi,Zn[er++]=wi,Zn[er++]=ho,vi=s.id,wi=s.overflow,ho=o),o=Om(o,d.children),o.flags|=4096,o)}function Jw(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),dm(s.return,o,u)}function Lm(s,o,u,d,p){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:p}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=u,g.tailMode=p)}function Yw(s,o,u){var d=o.pendingProps,p=d.revealOrder,g=d.tail;if(yn(s,o,d.children,u),d=yt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Jw(s,u,o);else if(s.tag===19)Jw(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(it(yt,d),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(u=o.child,p=null;u!==null;)s=u.alternate,s!==null&&pd(s)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Lm(o,!1,p,u,g);break;case"backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&pd(s)===null){o.child=p;break}s=p.sibling,p.sibling=u,u=p,p=s}Lm(o,!0,u,null,g);break;case"together":Lm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Id(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Ti(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),yo|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=fs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=fs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function BP(s,o,u){switch(o.tag){case 3:Gw(o),ja();break;case 5:hw(o);break;case 1:Sn(o.type)&&id(o);break;case 4:mm(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,p=o.memoizedProps.value;it(cd,d._currentValue),d._currentValue=p;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(it(yt,yt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Qw(s,o,u):(it(yt,yt.current&1),s=Ti(s,o,u),s!==null?s.sibling:null);it(yt,yt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(s.flags&128)!==0){if(d)return Yw(s,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),it(yt,yt.current),d)break;return null;case 22:case 23:return o.lanes=0,$w(s,o,u)}return Ti(s,o,u)}var Xw,Mm,Zw,eE;Xw=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Mm=function(){},Zw=function(s,o,u,d){var p=s.memoizedProps;if(p!==d){s=o.stateNode,mo(Br.current);var g=null;switch(u){case"input":p=ua(s,p),d=ua(s,d),g=[];break;case"select":p=ce({},p,{value:void 0}),d=ce({},d,{value:void 0}),g=[];break;case"textarea":p=ru(s,p),d=ru(s,d),g=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=td)}hr(u,d);var E;u=null;for($ in p)if(!d.hasOwnProperty($)&&p.hasOwnProperty($)&&p[$]!=null)if($==="style"){var P=p[$];for(E in P)P.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in d){var N=d[$];if(P=p?.[$],d.hasOwnProperty($)&&N!==P&&(N!=null||P!=null))if($==="style")if(P){for(E in P)!P.hasOwnProperty(E)||N&&N.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in N)N.hasOwnProperty(E)&&P[E]!==N[E]&&(u||(u={}),u[E]=N[E])}else u||(g||(g=[]),g.push($,u)),u=N;else $==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,P=P?P.__html:void 0,N!=null&&P!==N&&(g=g||[]).push($,N)):$==="children"?typeof N!="string"&&typeof N!="number"||(g=g||[]).push($,""+N):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(i.hasOwnProperty($)?(N!=null&&$==="onScroll"&&ut("scroll",s),g||P===N||(g=[])):(g=g||[]).push($,N))}u&&(g=g||[]).push("style",u);var $=g;(o.updateQueue=$)&&(o.flags|=4)}},eE=function(s,o,u,d){u!==d&&(o.flags|=4)};function qu(s,o){if(!ft)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function ln(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var p=s.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)u|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function zP(s,o,u){var d=o.pendingProps;switch(sm(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(o),null;case 1:return Sn(o.type)&&rd(),ln(o),null;case 3:return d=o.stateNode,$a(),ct(Tn),ct(on),_m(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(ld(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,mr!==null&&(Km(mr),mr=null))),Mm(s,o),ln(o),null;case 5:gm(o);var p=mo(Fu.current);if(u=o.type,s!==null&&o.stateNode!=null)Zw(s,o,u,d,p),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return ln(o),null}if(s=mo(Br.current),ld(o)){d=o.stateNode,u=o.type;var g=o.memoizedProps;switch(d[jr]=o,d[Du]=g,s=(o.mode&1)!==0,u){case"dialog":ut("cancel",d),ut("close",d);break;case"iframe":case"object":case"embed":ut("load",d);break;case"video":case"audio":for(p=0;p<bu.length;p++)ut(bu[p],d);break;case"source":ut("error",d);break;case"img":case"image":case"link":ut("error",d),ut("load",d);break;case"details":ut("toggle",d);break;case"input":Rh(d,g),ut("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},ut("invalid",d);break;case"textarea":iu(d,g),ut("invalid",d)}hr(u,g),p=null;for(var E in g)if(g.hasOwnProperty(E)){var P=g[E];E==="children"?typeof P=="string"?d.textContent!==P&&(g.suppressHydrationWarning!==!0&&ed(d.textContent,P,s),p=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(g.suppressHydrationWarning!==!0&&ed(d.textContent,P,s),p=["children",""+P]):i.hasOwnProperty(E)&&P!=null&&E==="onScroll"&&ut("scroll",d)}switch(u){case"input":la(d),nu(d,g,!0);break;case"textarea":la(d),ji(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=td)}d=p,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=p.nodeType===9?p:p.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=su(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=E.createElement(u,{is:d.is}):(s=E.createElement(u),u==="select"&&(E=s,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):s=E.createElementNS(s,u),s[jr]=o,s[Du]=d,Xw(s,o,!1,!1),o.stateNode=s;e:{switch(E=fa(u,d),u){case"dialog":ut("cancel",s),ut("close",s),p=d;break;case"iframe":case"object":case"embed":ut("load",s),p=d;break;case"video":case"audio":for(p=0;p<bu.length;p++)ut(bu[p],s);p=d;break;case"source":ut("error",s),p=d;break;case"img":case"image":case"link":ut("error",s),ut("load",s),p=d;break;case"details":ut("toggle",s),p=d;break;case"input":Rh(s,d),p=ua(s,d),ut("invalid",s);break;case"option":p=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},p=ce({},d,{value:void 0}),ut("invalid",s);break;case"textarea":iu(s,d),p=ru(s,d),ut("invalid",s);break;default:p=d}hr(u,p),P=p;for(g in P)if(P.hasOwnProperty(g)){var N=P[g];g==="style"?da(s,N):g==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Ch(s,N)):g==="children"?typeof N=="string"?(u!=="textarea"||N!=="")&&Qs(s,N):typeof N=="number"&&Qs(s,""+N):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(i.hasOwnProperty(g)?N!=null&&g==="onScroll"&&ut("scroll",s):N!=null&&ne(s,g,N,E))}switch(u){case"input":la(s),nu(s,d,!1);break;case"textarea":la(s),ji(s);break;case"option":d.value!=null&&s.setAttribute("value",""+$e(d.value));break;case"select":s.multiple=!!d.multiple,g=d.value,g!=null?cr(s,!!d.multiple,g,!1):d.defaultValue!=null&&cr(s,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(s.onclick=td)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return ln(o),null;case 6:if(s&&o.stateNode!=null)eE(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=mo(Fu.current),mo(Br.current),ld(o)){if(d=o.stateNode,u=o.memoizedProps,d[jr]=o,(g=d.nodeValue!==u)&&(s=zn,s!==null))switch(s.tag){case 3:ed(d.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ed(d.nodeValue,u,(s.mode&1)!==0)}g&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[jr]=o,o.stateNode=d}return ln(o),null;case 13:if(ct(yt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ft&&qn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)rw(),ja(),o.flags|=98560,g=!1;else if(g=ld(o),d!==null&&d.dehydrated!==null){if(s===null){if(!g)throw Error(t(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[jr]=o}else ja(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ln(o),g=!1}else mr!==null&&(Km(mr),mr=null),g=!0;if(!g)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(yt.current&1)!==0?jt===0&&(jt=3):Ym())),o.updateQueue!==null&&(o.flags|=4),ln(o),null);case 4:return $a(),Mm(s,o),s===null&&xu(o.stateNode.containerInfo),ln(o),null;case 10:return hm(o.type._context),ln(o),null;case 17:return Sn(o.type)&&rd(),ln(o),null;case 19:if(ct(yt),g=o.memoizedState,g===null)return ln(o),null;if(d=(o.flags&128)!==0,E=g.rendering,E===null)if(d)qu(g,!1);else{if(jt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=pd(s),E!==null){for(o.flags|=128,qu(g,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)g=u,s=d,g.flags&=14680066,E=g.alternate,E===null?(g.childLanes=0,g.lanes=s,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=E.childLanes,g.lanes=E.lanes,g.child=E.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=E.memoizedProps,g.memoizedState=E.memoizedState,g.updateQueue=E.updateQueue,g.type=E.type,s=E.dependencies,g.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return it(yt,yt.current&1|2),o.child}s=s.sibling}g.tail!==null&&lt()>Ka&&(o.flags|=128,d=!0,qu(g,!1),o.lanes=4194304)}else{if(!d)if(s=pd(E),s!==null){if(o.flags|=128,d=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),qu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!ft)return ln(o),null}else 2*lt()-g.renderingStartTime>Ka&&u!==1073741824&&(o.flags|=128,d=!0,qu(g,!1),o.lanes=4194304);g.isBackwards?(E.sibling=o.child,o.child=E):(u=g.last,u!==null?u.sibling=E:o.child=E,g.last=E)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=lt(),o.sibling=null,u=yt.current,it(yt,d?u&1|2:u&1),o):(ln(o),null);case 22:case 23:return Jm(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?($n&1073741824)!==0&&(ln(o),o.subtreeFlags&6&&(o.flags|=8192)):ln(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function qP(s,o){switch(sm(o),o.tag){case 1:return Sn(o.type)&&rd(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return $a(),ct(Tn),ct(on),_m(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return gm(o),null;case 13:if(ct(yt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ja()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ct(yt),null;case 4:return $a(),null;case 10:return hm(o.type._context),null;case 22:case 23:return Jm(),null;case 24:return null;default:return null}}var Td=!1,un=!1,$P=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ha(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){It(s,o,d)}else u.current=null}function Fm(s,o,u){try{u()}catch(d){It(s,o,d)}}var tE=!1;function WP(s,o){if(Jp=pi,s=Dv(),zp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var p=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var E=0,P=-1,N=-1,$=0,Z=0,te=s,Y=null;t:for(;;){for(var fe;te!==u||p!==0&&te.nodeType!==3||(P=E+p),te!==g||d!==0&&te.nodeType!==3||(N=E+d),te.nodeType===3&&(E+=te.nodeValue.length),(fe=te.firstChild)!==null;)Y=te,te=fe;for(;;){if(te===s)break t;if(Y===u&&++$===p&&(P=E),Y===g&&++Z===d&&(N=E),(fe=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=fe}u=P===-1||N===-1?null:{start:P,end:N}}else u=null}u=u||{start:0,end:0}}else u=null;for(Yp={focusedElem:s,selectionRange:u},pi=!1,pe=o;pe!==null;)if(o=pe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,pe=s;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var _e=ge.memoizedProps,Ct=ge.memoizedState,B=o.stateNode,V=B.getSnapshotBeforeUpdate(o.elementType===o.type?_e:gr(o.type,_e),Ct);B.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){It(o,o.return,ie)}if(s=o.sibling,s!==null){s.return=o.return,pe=s;break}pe=o.return}return ge=tE,tE=!1,ge}function $u(s,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&s)===s){var g=p.destroy;p.destroy=void 0,g!==void 0&&Fm(o,u,g)}p=p.next}while(p!==d)}}function Sd(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Um(s){var o=s.ref;if(o!==null){var u=s.stateNode;s.tag,s=u,typeof o=="function"?o(s):o.current=s}}function nE(s){var o=s.alternate;o!==null&&(s.alternate=null,nE(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[jr],delete o[Du],delete o[tm],delete o[PP],delete o[CP])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function rE(s){return s.tag===5||s.tag===3||s.tag===4}function iE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jm(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=td));else if(d!==4&&(s=s.child,s!==null))for(jm(s,o,u),s=s.sibling;s!==null;)jm(s,o,u),s=s.sibling}function Bm(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Bm(s,o,u),s=s.sibling;s!==null;)Bm(s,o,u),s=s.sibling}var Xt=null,yr=!1;function ls(s,o,u){for(u=u.child;u!==null;)sE(s,o,u),u=u.sibling}function sE(s,o,u){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(eo,u)}catch{}switch(u.tag){case 5:un||Ha(u,o);case 6:var d=Xt,p=yr;Xt=null,ls(s,o,u),Xt=d,yr=p,Xt!==null&&(yr?(s=Xt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Xt.removeChild(u.stateNode));break;case 18:Xt!==null&&(yr?(s=Xt,u=u.stateNode,s.nodeType===8?em(s.parentNode,u):s.nodeType===1&&em(s,u),Xi(s)):em(Xt,u.stateNode));break;case 4:d=Xt,p=yr,Xt=u.stateNode.containerInfo,yr=!0,ls(s,o,u),Xt=d,yr=p;break;case 0:case 11:case 14:case 15:if(!un&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var g=p,E=g.destroy;g=g.tag,E!==void 0&&((g&2)!==0||(g&4)!==0)&&Fm(u,o,E),p=p.next}while(p!==d)}ls(s,o,u);break;case 1:if(!un&&(Ha(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(P){It(u,o,P)}ls(s,o,u);break;case 21:ls(s,o,u);break;case 22:u.mode&1?(un=(d=un)||u.memoizedState!==null,ls(s,o,u),un=d):ls(s,o,u);break;default:ls(s,o,u)}}function oE(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new $P),o.forEach(function(d){var p=eC.bind(null,s,d);u.has(d)||(u.add(d),d.then(p,p))})}}function _r(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var p=u[d];try{var g=s,E=o,P=E;e:for(;P!==null;){switch(P.tag){case 5:Xt=P.stateNode,yr=!1;break e;case 3:Xt=P.stateNode.containerInfo,yr=!0;break e;case 4:Xt=P.stateNode.containerInfo,yr=!0;break e}P=P.return}if(Xt===null)throw Error(t(160));sE(g,E,p),Xt=null,yr=!1;var N=p.alternate;N!==null&&(N.return=null),p.return=null}catch($){It(p,o,$)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)aE(o,s),o=o.sibling}function aE(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(_r(o,s),qr(s),d&4){try{$u(3,s,s.return),Sd(3,s)}catch(_e){It(s,s.return,_e)}try{$u(5,s,s.return)}catch(_e){It(s,s.return,_e)}}break;case 1:_r(o,s),qr(s),d&512&&u!==null&&Ha(u,u.return);break;case 5:if(_r(o,s),qr(s),d&512&&u!==null&&Ha(u,u.return),s.flags&32){var p=s.stateNode;try{Qs(p,"")}catch(_e){It(s,s.return,_e)}}if(d&4&&(p=s.stateNode,p!=null)){var g=s.memoizedProps,E=u!==null?u.memoizedProps:g,P=s.type,N=s.updateQueue;if(s.updateQueue=null,N!==null)try{P==="input"&&g.type==="radio"&&g.name!=null&&ca(p,g),fa(P,E);var $=fa(P,g);for(E=0;E<N.length;E+=2){var Z=N[E],te=N[E+1];Z==="style"?da(p,te):Z==="dangerouslySetInnerHTML"?Ch(p,te):Z==="children"?Qs(p,te):ne(p,Z,te,$)}switch(P){case"input":Ks(p,g);break;case"textarea":Ph(p,g);break;case"select":var Y=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!g.multiple;var fe=g.value;fe!=null?cr(p,!!g.multiple,fe,!1):Y!==!!g.multiple&&(g.defaultValue!=null?cr(p,!!g.multiple,g.defaultValue,!0):cr(p,!!g.multiple,g.multiple?[]:"",!1))}p[Du]=g}catch(_e){It(s,s.return,_e)}}break;case 6:if(_r(o,s),qr(s),d&4){if(s.stateNode===null)throw Error(t(162));p=s.stateNode,g=s.memoizedProps;try{p.nodeValue=g}catch(_e){It(s,s.return,_e)}}break;case 3:if(_r(o,s),qr(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Xi(o.containerInfo)}catch(_e){It(s,s.return,_e)}break;case 4:_r(o,s),qr(s);break;case 13:_r(o,s),qr(s),p=s.child,p.flags&8192&&(g=p.memoizedState!==null,p.stateNode.isHidden=g,!g||p.alternate!==null&&p.alternate.memoizedState!==null||($m=lt())),d&4&&oE(s);break;case 22:if(Z=u!==null&&u.memoizedState!==null,s.mode&1?(un=($=un)||Z,_r(o,s),un=$):_r(o,s),qr(s),d&8192){if($=s.memoizedState!==null,(s.stateNode.isHidden=$)&&!Z&&(s.mode&1)!==0)for(pe=s,Z=s.child;Z!==null;){for(te=pe=Z;pe!==null;){switch(Y=pe,fe=Y.child,Y.tag){case 0:case 11:case 14:case 15:$u(4,Y,Y.return);break;case 1:Ha(Y,Y.return);var ge=Y.stateNode;if(typeof ge.componentWillUnmount=="function"){d=Y,u=Y.return;try{o=d,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(_e){It(d,u,_e)}}break;case 5:Ha(Y,Y.return);break;case 22:if(Y.memoizedState!==null){cE(te);continue}}fe!==null?(fe.return=Y,pe=fe):cE(te)}Z=Z.sibling}e:for(Z=null,te=s;;){if(te.tag===5){if(Z===null){Z=te;try{p=te.stateNode,$?(g=p.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(P=te.stateNode,N=te.memoizedProps.style,E=N!=null&&N.hasOwnProperty("display")?N.display:null,P.style.display=qi("display",E))}catch(_e){It(s,s.return,_e)}}}else if(te.tag===6){if(Z===null)try{te.stateNode.nodeValue=$?"":te.memoizedProps}catch(_e){It(s,s.return,_e)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===s)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===s)break e;for(;te.sibling===null;){if(te.return===null||te.return===s)break e;Z===te&&(Z=null),te=te.return}Z===te&&(Z=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:_r(o,s),qr(s),d&4&&oE(s);break;case 21:break;default:_r(o,s),qr(s)}}function qr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(rE(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(Qs(p,""),d.flags&=-33);var g=iE(s);Bm(s,g,p);break;case 3:case 4:var E=d.stateNode.containerInfo,P=iE(s);jm(s,P,E);break;default:throw Error(t(161))}}catch(N){It(s,s.return,N)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function HP(s,o,u){pe=s,lE(s)}function lE(s,o,u){for(var d=(s.mode&1)!==0;pe!==null;){var p=pe,g=p.child;if(p.tag===22&&d){var E=p.memoizedState!==null||Td;if(!E){var P=p.alternate,N=P!==null&&P.memoizedState!==null||un;P=Td;var $=un;if(Td=E,(un=N)&&!$)for(pe=p;pe!==null;)E=pe,N=E.child,E.tag===22&&E.memoizedState!==null?hE(p):N!==null?(N.return=E,pe=N):hE(p);for(;g!==null;)pe=g,lE(g),g=g.sibling;pe=p,Td=P,un=$}uE(s)}else(p.subtreeFlags&8772)!==0&&g!==null?(g.return=p,pe=g):uE(s)}}function uE(s){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:un||Sd(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!un)if(u===null)d.componentDidMount();else{var p=o.elementType===o.type?u.memoizedProps:gr(o.type,u.memoizedProps);d.componentDidUpdate(p,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=o.updateQueue;g!==null&&cw(o,g,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}cw(o,E,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var N=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&u.focus();break;case"img":N.src&&(u.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var $=o.alternate;if($!==null){var Z=$.memoizedState;if(Z!==null){var te=Z.dehydrated;te!==null&&Xi(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}un||o.flags&512&&Um(o)}catch(Y){It(o,o.return,Y)}}if(o===s){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function cE(s){for(;pe!==null;){var o=pe;if(o===s){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function hE(s){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Sd(4,o)}catch(N){It(o,u,N)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var p=o.return;try{d.componentDidMount()}catch(N){It(o,p,N)}}var g=o.return;try{Um(o)}catch(N){It(o,g,N)}break;case 5:var E=o.return;try{Um(o)}catch(N){It(o,E,N)}}}catch(N){It(o,o.return,N)}if(o===s){pe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,pe=P;break}pe=o.return}}var GP=Math.ceil,Ad=de.ReactCurrentDispatcher,zm=de.ReactCurrentOwner,rr=de.ReactCurrentBatchConfig,We=0,$t=null,Ot=null,Zt=0,$n=0,Ga=rs(0),jt=0,Wu=null,yo=0,Rd=0,qm=0,Hu=null,Rn=null,$m=0,Ka=1/0,Si=null,Pd=!1,Wm=null,us=null,Cd=!1,cs=null,kd=0,Gu=0,Hm=null,bd=-1,xd=0;function _n(){return(We&6)!==0?lt():bd!==-1?bd:bd=lt()}function hs(s){return(s.mode&1)===0?1:(We&2)!==0&&Zt!==0?Zt&-Zt:bP.transition!==null?(xd===0&&(xd=pu()),xd):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Ta(s.type)),s)}function vr(s,o,u,d){if(50<Gu)throw Gu=0,Hm=null,Error(t(185));io(s,u,d),((We&2)===0||s!==$t)&&(s===$t&&((We&2)===0&&(Rd|=u),jt===4&&ds(s,Zt)),Pn(s,d),u===1&&We===0&&(o.mode&1)===0&&(Ka=lt()+500,sd&&ss()))}function Pn(s,o){var u=s.callbackNode;ro(s,o);var d=hi(s,s===$t?Zt:0);if(d===0)u!==null&&ga(u),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(u!=null&&ga(u),o===1)s.tag===0?kP(fE.bind(null,s)):Xv(fE.bind(null,s)),AP(function(){(We&6)===0&&ss()}),u=null;else{switch(br(d)){case 1:u=ya;break;case 4:u=hu;break;case 16:u=Zs;break;case 536870912:u=_a;break;default:u=Zs}u=EE(u,dE.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function dE(s,o){if(bd=-1,xd=0,(We&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Qa()&&s.callbackNode!==u)return null;var d=hi(s,s===$t?Zt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=Nd(s,d);else{o=d;var p=We;We|=2;var g=mE();($t!==s||Zt!==o)&&(Si=null,Ka=lt()+500,vo(s,o));do try{JP();break}catch(P){pE(s,P)}while(!0);cm(),Ad.current=g,We=p,Ot!==null?o=0:($t=null,Zt=0,o=jt)}if(o!==0){if(o===2&&(p=fu(s),p!==0&&(d=p,o=Gm(s,p))),o===1)throw u=Wu,vo(s,0),ds(s,d),Pn(s,lt()),u;if(o===6)ds(s,d);else{if(p=s.current.alternate,(d&30)===0&&!KP(p)&&(o=Nd(s,d),o===2&&(g=fu(s),g!==0&&(d=g,o=Gm(s,g))),o===1))throw u=Wu,vo(s,0),ds(s,d),Pn(s,lt()),u;switch(s.finishedWork=p,s.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:wo(s,Rn,Si);break;case 3:if(ds(s,d),(d&130023424)===d&&(o=$m+500-lt(),10<o)){if(hi(s,0)!==0)break;if(p=s.suspendedLanes,(p&d)!==d){_n(),s.pingedLanes|=s.suspendedLanes&p;break}s.timeoutHandle=Zp(wo.bind(null,s,Rn,Si),o);break}wo(s,Rn,Si);break;case 4:if(ds(s,d),(d&4194240)===d)break;for(o=s.eventTimes,p=-1;0<d;){var E=31-Mn(d);g=1<<E,E=o[E],E>p&&(p=E),d&=~g}if(d=p,d=lt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*GP(d/1960))-d,10<d){s.timeoutHandle=Zp(wo.bind(null,s,Rn,Si),d);break}wo(s,Rn,Si);break;case 5:wo(s,Rn,Si);break;default:throw Error(t(329))}}}return Pn(s,lt()),s.callbackNode===u?dE.bind(null,s):null}function Gm(s,o){var u=Hu;return s.current.memoizedState.isDehydrated&&(vo(s,o).flags|=256),s=Nd(s,o),s!==2&&(o=Rn,Rn=u,o!==null&&Km(o)),s}function Km(s){Rn===null?Rn=s:Rn.push.apply(Rn,s)}function KP(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var p=u[d],g=p.getSnapshot;p=p.value;try{if(!pr(g(),p))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ds(s,o){for(o&=~qm,o&=~Rd,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-Mn(o),d=1<<u;s[u]=-1,o&=~d}}function fE(s){if((We&6)!==0)throw Error(t(327));Qa();var o=hi(s,0);if((o&1)===0)return Pn(s,lt()),null;var u=Nd(s,o);if(s.tag!==0&&u===2){var d=fu(s);d!==0&&(o=d,u=Gm(s,d))}if(u===1)throw u=Wu,vo(s,0),ds(s,o),Pn(s,lt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,wo(s,Rn,Si),Pn(s,lt()),null}function Qm(s,o){var u=We;We|=1;try{return s(o)}finally{We=u,We===0&&(Ka=lt()+500,sd&&ss())}}function _o(s){cs!==null&&cs.tag===0&&(We&6)===0&&Qa();var o=We;We|=1;var u=rr.transition,d=ze;try{if(rr.transition=null,ze=1,s)return s()}finally{ze=d,rr.transition=u,We=o,(We&6)===0&&ss()}}function Jm(){$n=Ga.current,ct(Ga)}function vo(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,SP(u)),Ot!==null)for(u=Ot.return;u!==null;){var d=u;switch(sm(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&rd();break;case 3:$a(),ct(Tn),ct(on),_m();break;case 5:gm(d);break;case 4:$a();break;case 13:ct(yt);break;case 19:ct(yt);break;case 10:hm(d.type._context);break;case 22:case 23:Jm()}u=u.return}if($t=s,Ot=s=fs(s.current,null),Zt=$n=o,jt=0,Wu=null,qm=Rd=yo=0,Rn=Hu=null,po!==null){for(o=0;o<po.length;o++)if(u=po[o],d=u.interleaved,d!==null){u.interleaved=null;var p=d.next,g=u.pending;if(g!==null){var E=g.next;g.next=p,d.next=E}u.pending=d}po=null}return s}function pE(s,o){do{var u=Ot;try{if(cm(),md.current=vd,gd){for(var d=_t.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}gd=!1}if(go=0,qt=Ut=_t=null,Uu=!1,ju=0,zm.current=null,u===null||u.return===null){jt=1,Wu=o,Ot=null;break}e:{var g=s,E=u.return,P=u,N=o;if(o=Zt,P.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=N,Z=P,te=Z.tag;if((Z.mode&1)===0&&(te===0||te===11||te===15)){var Y=Z.alternate;Y?(Z.updateQueue=Y.updateQueue,Z.memoizedState=Y.memoizedState,Z.lanes=Y.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var fe=Uw(E);if(fe!==null){fe.flags&=-257,jw(fe,E,P,g,o),fe.mode&1&&Fw(g,$,o),o=fe,N=$;var ge=o.updateQueue;if(ge===null){var _e=new Set;_e.add(N),o.updateQueue=_e}else ge.add(N);break e}else{if((o&1)===0){Fw(g,$,o),Ym();break e}N=Error(t(426))}}else if(ft&&P.mode&1){var Ct=Uw(E);if(Ct!==null){(Ct.flags&65536)===0&&(Ct.flags|=256),jw(Ct,E,P,g,o),lm(Wa(N,P));break e}}g=N=Wa(N,P),jt!==4&&(jt=2),Hu===null?Hu=[g]:Hu.push(g),g=E;do{switch(g.tag){case 3:g.flags|=65536,o&=-o,g.lanes|=o;var B=Lw(g,N,o);uw(g,B);break e;case 1:P=N;var V=g.type,q=g.stateNode;if((g.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(us===null||!us.has(q)))){g.flags|=65536,o&=-o,g.lanes|=o;var ie=Mw(g,P,o);uw(g,ie);break e}}g=g.return}while(g!==null)}yE(u)}catch(we){o=we,Ot===u&&u!==null&&(Ot=u=u.return);continue}break}while(!0)}function mE(){var s=Ad.current;return Ad.current=vd,s===null?vd:s}function Ym(){(jt===0||jt===3||jt===2)&&(jt=4),$t===null||(yo&268435455)===0&&(Rd&268435455)===0||ds($t,Zt)}function Nd(s,o){var u=We;We|=2;var d=mE();($t!==s||Zt!==o)&&(Si=null,vo(s,o));do try{QP();break}catch(p){pE(s,p)}while(!0);if(cm(),We=u,Ad.current=d,Ot!==null)throw Error(t(261));return $t=null,Zt=0,jt}function QP(){for(;Ot!==null;)gE(Ot)}function JP(){for(;Ot!==null&&!Xs();)gE(Ot)}function gE(s){var o=wE(s.alternate,s,$n);s.memoizedProps=s.pendingProps,o===null?yE(s):Ot=o,zm.current=null}function yE(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=zP(u,o,$n),u!==null){Ot=u;return}}else{if(u=qP(u,o),u!==null){u.flags&=32767,Ot=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{jt=6,Ot=null;return}}if(o=o.sibling,o!==null){Ot=o;return}Ot=o=s}while(o!==null);jt===0&&(jt=5)}function wo(s,o,u){var d=ze,p=rr.transition;try{rr.transition=null,ze=1,YP(s,o,u,d)}finally{rr.transition=p,ze=d}return null}function YP(s,o,u,d){do Qa();while(cs!==null);if((We&6)!==0)throw Error(t(327));u=s.finishedWork;var p=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var g=u.lanes|u.childLanes;if(Mp(s,g),s===$t&&(Ot=$t=null,Zt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Cd||(Cd=!0,EE(Zs,function(){return Qa(),null})),g=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||g){g=rr.transition,rr.transition=null;var E=ze;ze=1;var P=We;We|=4,zm.current=null,WP(s,u),aE(u,s),yP(Yp),pi=!!Jp,Yp=Jp=null,s.current=u,HP(u),ci(),We=P,ze=E,rr.transition=g}else s.current=u;if(Cd&&(Cd=!1,cs=s,kd=p),g=s.pendingLanes,g===0&&(us=null),Uh(u.stateNode),Pn(s,lt()),o!==null)for(d=s.onRecoverableError,u=0;u<o.length;u++)p=o[u],d(p.value,{componentStack:p.stack,digest:p.digest});if(Pd)throw Pd=!1,s=Wm,Wm=null,s;return(kd&1)!==0&&s.tag!==0&&Qa(),g=s.pendingLanes,(g&1)!==0?s===Hm?Gu++:(Gu=0,Hm=s):Gu=0,ss(),null}function Qa(){if(cs!==null){var s=br(kd),o=rr.transition,u=ze;try{if(rr.transition=null,ze=16>s?16:s,cs===null)var d=!1;else{if(s=cs,cs=null,kd=0,(We&6)!==0)throw Error(t(331));var p=We;for(We|=4,pe=s.current;pe!==null;){var g=pe,E=g.child;if((pe.flags&16)!==0){var P=g.deletions;if(P!==null){for(var N=0;N<P.length;N++){var $=P[N];for(pe=$;pe!==null;){var Z=pe;switch(Z.tag){case 0:case 11:case 15:$u(8,Z,g)}var te=Z.child;if(te!==null)te.return=Z,pe=te;else for(;pe!==null;){Z=pe;var Y=Z.sibling,fe=Z.return;if(nE(Z),Z===$){pe=null;break}if(Y!==null){Y.return=fe,pe=Y;break}pe=fe}}}var ge=g.alternate;if(ge!==null){var _e=ge.child;if(_e!==null){ge.child=null;do{var Ct=_e.sibling;_e.sibling=null,_e=Ct}while(_e!==null)}}pe=g}}if((g.subtreeFlags&2064)!==0&&E!==null)E.return=g,pe=E;else e:for(;pe!==null;){if(g=pe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:$u(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,pe=B;break e}pe=g.return}}var V=s.current;for(pe=V;pe!==null;){E=pe;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,pe=q;else e:for(E=V;pe!==null;){if(P=pe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:Sd(9,P)}}catch(we){It(P,P.return,we)}if(P===E){pe=null;break e}var ie=P.sibling;if(ie!==null){ie.return=P.return,pe=ie;break e}pe=P.return}}if(We=p,ss(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(eo,s)}catch{}d=!0}return d}finally{ze=u,rr.transition=o}}return!1}function _E(s,o,u){o=Wa(u,o),o=Lw(s,o,1),s=as(s,o,1),o=_n(),s!==null&&(io(s,1,o),Pn(s,o))}function It(s,o,u){if(s.tag===3)_E(s,s,u);else for(;o!==null;){if(o.tag===3){_E(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(us===null||!us.has(d))){s=Wa(u,s),s=Mw(o,s,1),o=as(o,s,1),s=_n(),o!==null&&(io(o,1,s),Pn(o,s));break}}o=o.return}}function XP(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),o=_n(),s.pingedLanes|=s.suspendedLanes&u,$t===s&&(Zt&u)===u&&(jt===4||jt===3&&(Zt&130023424)===Zt&&500>lt()-$m?vo(s,0):qm|=u),Pn(s,o)}function vE(s,o){o===0&&((s.mode&1)===0?o=1:(o=Qi,Qi<<=1,(Qi&130023424)===0&&(Qi=4194304)));var u=_n();s=Ei(s,o),s!==null&&(io(s,o,u),Pn(s,u))}function ZP(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),vE(s,u)}function eC(s,o){var u=0;switch(s.tag){case 13:var d=s.stateNode,p=s.memoizedState;p!==null&&(u=p.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),vE(s,u)}var wE;wE=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||Tn.current)An=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return An=!1,BP(s,o,u);An=(s.flags&131072)!==0}else An=!1,ft&&(o.flags&1048576)!==0&&Zv(o,ad,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Id(s,o),s=o.pendingProps;var p=Ma(o,on.current);qa(o,u),p=Em(null,o,d,s,p,u);var g=Im();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Sn(d)?(g=!0,id(o)):g=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,pm(o),p.updater=wd,o.stateNode=p,p._reactInternals=o,Cm(o,d,s,u),o=Nm(null,o,d,!0,g,u)):(o.tag=0,ft&&g&&im(o),yn(null,o,p,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Id(s,o),s=o.pendingProps,p=d._init,d=p(d._payload),o.type=d,p=o.tag=nC(d),s=gr(d,s),p){case 0:o=xm(null,o,d,s,u);break e;case 1:o=Hw(null,o,d,s,u);break e;case 11:o=Bw(null,o,d,s,u);break e;case 14:o=zw(null,o,d,gr(d.type,s),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:gr(d,p),xm(s,o,d,p,u);case 1:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:gr(d,p),Hw(s,o,d,p,u);case 3:e:{if(Gw(o),s===null)throw Error(t(387));d=o.pendingProps,g=o.memoizedState,p=g.element,lw(s,o),fd(o,d,null,u);var E=o.memoizedState;if(d=E.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){p=Wa(Error(t(423)),o),o=Kw(s,o,d,u,p);break e}else if(d!==p){p=Wa(Error(t(424)),o),o=Kw(s,o,d,u,p);break e}else for(qn=ns(o.stateNode.containerInfo.firstChild),zn=o,ft=!0,mr=null,u=ow(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ja(),d===p){o=Ti(s,o,u);break e}yn(s,o,d,u)}o=o.child}return o;case 5:return hw(o),s===null&&am(o),d=o.type,p=o.pendingProps,g=s!==null?s.memoizedProps:null,E=p.children,Xp(d,p)?E=null:g!==null&&Xp(d,g)&&(o.flags|=32),Ww(s,o),yn(s,o,E,u),o.child;case 6:return s===null&&am(o),null;case 13:return Qw(s,o,u);case 4:return mm(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Ba(o,null,d,u):yn(s,o,d,u),o.child;case 11:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:gr(d,p),Bw(s,o,d,p,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,p=o.pendingProps,g=o.memoizedProps,E=p.value,it(cd,d._currentValue),d._currentValue=E,g!==null)if(pr(g.value,E)){if(g.children===p.children&&!Tn.current){o=Ti(s,o,u);break e}}else for(g=o.child,g!==null&&(g.return=o);g!==null;){var P=g.dependencies;if(P!==null){E=g.child;for(var N=P.firstContext;N!==null;){if(N.context===d){if(g.tag===1){N=Ii(-1,u&-u),N.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var Z=$.pending;Z===null?N.next=N:(N.next=Z.next,Z.next=N),$.pending=N}}g.lanes|=u,N=g.alternate,N!==null&&(N.lanes|=u),dm(g.return,u,o),P.lanes|=u;break}N=N.next}}else if(g.tag===10)E=g.type===o.type?null:g.child;else if(g.tag===18){if(E=g.return,E===null)throw Error(t(341));E.lanes|=u,P=E.alternate,P!==null&&(P.lanes|=u),dm(E,u,o),E=g.sibling}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===o){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}yn(s,o,p.children,u),o=o.child}return o;case 9:return p=o.type,d=o.pendingProps.children,qa(o,u),p=tr(p),d=d(p),o.flags|=1,yn(s,o,d,u),o.child;case 14:return d=o.type,p=gr(d,o.pendingProps),p=gr(d.type,p),zw(s,o,d,p,u);case 15:return qw(s,o,o.type,o.pendingProps,u);case 17:return d=o.type,p=o.pendingProps,p=o.elementType===d?p:gr(d,p),Id(s,o),o.tag=1,Sn(d)?(s=!0,id(o)):s=!1,qa(o,u),Vw(o,d,p),Cm(o,d,p,u),Nm(null,o,d,!0,s,u);case 19:return Yw(s,o,u);case 22:return $w(s,o,u)}throw Error(t(156,o.tag))};function EE(s,o){return cu(s,o)}function tC(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(s,o,u,d){return new tC(s,o,u,d)}function Xm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function nC(s){if(typeof s=="function")return Xm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===Xe)return 14}return 2}function fs(s,o){var u=s.alternate;return u===null?(u=ir(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Dd(s,o,u,d,p,g){var E=2;if(d=s,typeof s=="function")Xm(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case k:return Eo(u.children,p,g,o);case R:E=8,p|=8;break;case C:return s=ir(12,u,o,p|2),s.elementType=C,s.lanes=g,s;case S:return s=ir(13,u,o,p),s.elementType=S,s.lanes=g,s;case Re:return s=ir(19,u,o,p),s.elementType=Re,s.lanes=g,s;case Ue:return Vd(u,p,g,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case L:E=10;break e;case D:E=9;break e;case U:E=11;break e;case Xe:E=14;break e;case Le:E=16,d=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=ir(E,u,o,p),o.elementType=s,o.type=d,o.lanes=g,o}function Eo(s,o,u,d){return s=ir(7,s,d,o),s.lanes=u,s}function Vd(s,o,u,d){return s=ir(22,s,d,o),s.elementType=Ue,s.lanes=u,s.stateNode={isHidden:!1},s}function Zm(s,o,u){return s=ir(6,s,null,o),s.lanes=u,s}function eg(s,o,u){return o=ir(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function rC(s,o,u,d,p){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mu(0),this.expirationTimes=mu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mu(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function tg(s,o,u,d,p,g,E,P,N){return s=new rC(s,o,u,P,N),o===1?(o=1,g===!0&&(o|=8)):o=0,g=ir(3,null,null,o),s.current=g,g.stateNode=s,g.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},pm(g),s}function iC(s,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:me,key:d==null?null:""+d,children:s,containerInfo:o,implementation:u}}function IE(s){if(!s)return is;s=s._reactInternals;e:{if(dr(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Sn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Sn(u))return Jv(s,u,o)}return o}function TE(s,o,u,d,p,g,E,P,N){return s=tg(u,d,!0,s,p,g,E,P,N),s.context=IE(null),u=s.current,d=_n(),p=hs(u),g=Ii(d,p),g.callback=o??null,as(u,g,p),s.current.lanes=p,io(s,p,d),Pn(s,d),s}function Od(s,o,u,d){var p=o.current,g=_n(),E=hs(p);return u=IE(u),o.context===null?o.context=u:o.pendingContext=u,o=Ii(g,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=as(p,o,E),s!==null&&(vr(s,p,E,g),dd(s,p,E)),E}function Ld(s){return s=s.current,s.child?(s.child.tag===5,s.child.stateNode):null}function SE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function ng(s,o){SE(s,o),(s=s.alternate)&&SE(s,o)}function sC(){return null}var AE=typeof reportError=="function"?reportError:function(s){console.error(s)};function rg(s){this._internalRoot=s}Md.prototype.render=rg.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Od(s,o,null,null)},Md.prototype.unmount=rg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;_o(function(){Od(null,s,null,null)}),o[yi]=null}};function Md(s){this._internalRoot=s}Md.prototype.unstable_scheduleHydration=function(s){if(s){var o=vu();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Fn.length&&o!==0&&o<Fn[u].priority;u++);Fn.splice(u,0,s),u===0&&Ea(s)}};function ig(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Fd(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function RE(){}function oC(s,o,u,d,p){if(p){if(typeof d=="function"){var g=d;d=function(){var $=Ld(E);g.call($)}}var E=TE(o,d,s,0,null,!1,!1,"",RE);return s._reactRootContainer=E,s[yi]=E.current,xu(s.nodeType===8?s.parentNode:s),_o(),E}for(;p=s.lastChild;)s.removeChild(p);if(typeof d=="function"){var P=d;d=function(){var $=Ld(N);P.call($)}}var N=tg(s,0,!1,null,null,!1,!1,"",RE);return s._reactRootContainer=N,s[yi]=N.current,xu(s.nodeType===8?s.parentNode:s),_o(function(){Od(o,N,u,d)}),N}function Ud(s,o,u,d,p){var g=u._reactRootContainer;if(g){var E=g;if(typeof p=="function"){var P=p;p=function(){var N=Ld(E);P.call(N)}}Od(o,E,s,p)}else E=oC(u,o,s,p,d);return Ld(E)}yu=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Qe(o.pendingLanes);u!==0&&(gu(o,u|1),Pn(o,lt()),(We&6)===0&&(Ka=lt()+500,ss()))}break;case 13:_o(function(){var d=Ei(s,1);if(d!==null){var p=_n();vr(d,s,1,p)}}),ng(s,1)}},va=function(s){if(s.tag===13){var o=Ei(s,134217728);if(o!==null){var u=_n();vr(o,s,134217728,u)}ng(s,134217728)}},_u=function(s){if(s.tag===13){var o=hs(s),u=Ei(s,o);if(u!==null){var d=_n();vr(u,s,o,d)}ng(s,o)}},vu=function(){return ze},wu=function(s,o){var u=ze;try{return ze=s,o()}finally{ze=u}},ai=function(s,o,u){switch(o){case"input":if(Ks(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var p=nd(d);if(!p)throw Error(t(90));tu(d),Ks(d,p)}}}break;case"textarea":Ph(s,u);break;case"select":o=u.value,o!=null&&cr(s,!!u.multiple,o,!1)}},bh=Qm,xh=_o;var aC={usingClientEntryPoint:!1,Events:[Vu,Oa,nd,Wi,Hi,Qm]},Ku={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lC={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Fh(s),s===null?null:s.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||sC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{eo=jd.inject(lC),Ln=jd}catch{}}return Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC,Cn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ig(o))throw Error(t(200));return iC(s,o,null,u)},Cn.createRoot=function(s,o){if(!ig(s))throw Error(t(299));var u=!1,d="",p=AE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=tg(s,1,!1,null,null,u,!1,d,p),s[yi]=o.current,xu(s.nodeType===8?s.parentNode:s),new rg(o)},Cn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Fh(o),s=s===null?null:s.stateNode,s},Cn.flushSync=function(s){return _o(s)},Cn.hydrate=function(s,o,u){if(!Fd(o))throw Error(t(200));return Ud(null,s,o,!0,u)},Cn.hydrateRoot=function(s,o,u){if(!ig(s))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,p=!1,g="",E=AE;if(u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=TE(o,null,s,1,u??null,p,!1,g,E),s[yi]=o.current,xu(s),d)for(s=0;s<d.length;s++)u=d[s],p=u._getVersion,p=p(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,p]:o.mutableSourceEagerHydrationData.push(u,p);return new Md(o)},Cn.render=function(s,o,u){if(!Fd(o))throw Error(t(200));return Ud(null,s,o,!1,u)},Cn.unmountComponentAtNode=function(s){if(!Fd(s))throw Error(t(40));return s._reactRootContainer?(_o(function(){Ud(null,null,s,!1,function(){s._reactRootContainer=null,s[yi]=null})}),!0):!1},Cn.unstable_batchedUpdates=Qm,Cn.unstable_renderSubtreeIntoContainer=function(s,o,u,d){if(!Fd(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Ud(s,o,u,!1,d)},Cn.version="18.3.1-next-f1338f8080-20240426",Cn}var VE;function gC(){if(VE)return ag.exports;VE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ag.exports=mC(),ag.exports}var OE;function yC(){if(OE)return Bd;OE=1;var n=gC();return Bd.createRoot=n.createRoot,Bd.hydrateRoot=n.hydrateRoot,Bd}var _C=yC();const vC="modulepreload",wC=function(n){return"/"+n},LE={},xo=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let m=function(_){return Promise.all(_.map(w=>Promise.resolve(w).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};var l=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=h?.nonce||h?.getAttribute("nonce");i=m(t.map(_=>{if(_=wC(_),_ in LE)return;LE[_]=!0;const w=_.endsWith(".css"),I=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${I}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":vC,w||(b.as="script"),b.crossOrigin="",b.href=_,f&&b.setAttribute("nonce",f),document.head.appendChild(b),w)return new Promise((x,F)=>{b.addEventListener("load",x),b.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return i.then(h=>{for(const f of h||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};const EC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),ME=n=>{const e=IC(n);return e.charAt(0).toUpperCase()+e.slice(1)},g0=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),TC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var SC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const AC=He.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},f)=>He.createElement("svg",{ref:f,...SC,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:g0("lucide",i),...!a&&!TC(h)&&{"aria-hidden":"true"},...h},[...l.map(([m,_])=>He.createElement(m,_)),...Array.isArray(a)?a:[a]]));const at=(n,e)=>{const t=He.forwardRef(({className:r,...i},a)=>He.createElement(AC,{ref:a,iconNode:e,className:g0(`lucide-${EC(ME(n))}`,`lucide-${n}`,r),...i}));return t.displayName=ME(n),t};const RC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PC=at("arrow-right",RC);const CC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kC=at("bell",CC);const bC=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],xC=at("book",bC);const NC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],DC=at("calendar",NC);const VC=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],OC=at("camera",VC);const LC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],MC=at("chevron-down",LC);const FC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],UC=at("chevron-left",FC);const jC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],BC=at("circle-check-big",jC);const zC=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],bc=at("coins",zC);const qC=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Ry=at("gift",qC);const $C=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],WC=at("heart",$C);const HC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],GC=at("house",HC);const KC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],QC=at("image",KC);const JC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],YC=at("log-out",JC);const XC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ZC=at("message-circle",XC);const ek=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],tk=at("palette",ek);const nk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rk=at("plus",nk);const ik=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],sk=at("repeat",ik);const ok=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ak=at("search",ok);const lk=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],uk=at("share-2",lk);const ck=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hk=at("sparkles",ck);const dk=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],fk=at("store",dk);const pk=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mk=at("tag",pk);const gk=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yk=at("trash-2",gk);const _k=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],y0=at("x",_k);const vk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wk=at("zap",vk),Ek=()=>{};var FE={};const _0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Ik=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],h=n[t++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},v0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,h=l?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,_=a>>2,w=(a&3)<<4|h>>4;let I=(h&15)<<2|m>>6,b=m&63;f||(b=64,l||(I=64)),r.push(t[_],t[w],t[I],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ik(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const w=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||h==null||m==null||w==null)throw new Tk;const I=a<<2|h>>4;if(r.push(I),m!==64){const b=h<<4&240|m>>2;if(r.push(b),w!==64){const x=m<<6&192|w;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Tk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sk=function(n){const e=_0(n);return v0.encodeByteArray(e,!0)},gf=function(n){return Sk(n).replace(/\./g,"")},Py=function(n){try{return v0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yf(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Ak(t)||(n[t]=yf(n[t],e[t]));return n}function Ak(n){return n!=="__proto__"}function Cy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Rk=()=>Cy().__FIREBASE_DEFAULTS__,Pk=()=>{if(typeof process>"u"||typeof FE>"u")return;const n=FE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ck=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Py(n[1]);return e&&JSON.parse(e)},ky=()=>{try{return Ek()||Rk()||Pk()||Ck()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},by=()=>ky()?.config,kk=n=>ky()?.[`_${n}`];class bk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function js(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xy(n){return(await fetch(n,{credentials:"include"})).ok}function xk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[gf(JSON.stringify(t)),gf(JSON.stringify(l)),""].join(".")}const pc={};function Nk(){const n={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?n.emulator.push(e):n.prod.push(e);return n}function Dk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let UE=!1;function Ny(n,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||pc[n]===e||pc[n]||UE)return;pc[n]=e;function t(I){return`__firebase__banner__${I}`}const r="__firebase__banner",a=Nk().prod.length>0;function l(){const I=document.getElementById(r);I&&I.remove()}function h(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,b){I.setAttribute("width","24"),I.setAttribute("id",b),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function m(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{UE=!0,l()},I}function _(I,b){I.setAttribute("id",b),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function w(){const I=Dk(r),b=t("text"),x=document.getElementById(b)||document.createElement("span"),F=t("learnmore"),O=document.getElementById(F)||document.createElement("a"),K=t("preprendIcon"),ae=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ne=I.element;h(ne),_(O,F);const de=m();f(ae,K),ne.append(ae,x,O,de),document.body.appendChild(ne)}a?(x.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function Wf(){const n=ky()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ok(){return typeof window<"u"||w0()}function w0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I0(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function T0(){return!Wf()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S0(){return!Wf()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function xc(){try{return typeof indexedDB=="object"}catch{return!1}}function Mk(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const Fk="FirebaseError";class Kt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Fk,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,na.prototype.create)}}class na{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?Uk(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new Kt(i,h,r)}}function Uk(n,e){return n.replace(jk,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jk=/\{\$([^}]+)}/g;function jE(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ks(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(BE(a)&&BE(l)){if(!ks(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function BE(n){return n!==null&&typeof n=="object"}function Bl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ll(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function oc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function A0(n,e){const t=new zk(n,e);return t.subscribe.bind(t)}class zk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qk(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=cg),i.error===void 0&&(i.error=cg),i.complete===void 0&&(i.complete=cg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cg(){}function Te(n){return n&&n._delegate?n._delegate:n}class ar{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const To="[DEFAULT]";class $k{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new bk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hk(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Wk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Wk(n){return n===To?void 0:n}function Hk(n){return n.instantiationMode==="EAGER"}class R0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $k(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Vy=[];var Me;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Me||(Me={}));const P0={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},Gk=Me.INFO,Kk={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},Qk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Kk[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hf{constructor(e){this.name=e,this._logLevel=Gk,this._logHandler=Qk,this._userLogHandler=null,Vy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function Jk(n){Vy.forEach(e=>{e.setLogLevel(n)})}function Yk(n,e){for(const t of Vy){let r=null;e&&e.level&&(r=P0[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,a,...l)=>{const h=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(r??i.logLevel)&&n({level:Me[a].toLowerCase(),message:h,args:l,type:i.name})}}}const Xk=(n,e)=>e.some(t=>n instanceof t);let zE,qE;function Zk(){return zE||(zE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eb(){return qE||(qE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Dg=new WeakMap,k0=new WeakMap,hg=new WeakMap,Oy=new WeakMap;function tb(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ss(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&C0.set(t,n)}).catch(()=>{}),Oy.set(e,n),e}function nb(n){if(Dg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Dg.set(n,e)}let Vg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||k0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function rb(n){Vg=n(Vg)}function ib(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(dg(this),e,...t);return k0.set(r,e.sort?e.sort():[e]),Ss(r)}:eb().includes(n)?function(...e){return n.apply(dg(this),e),Ss(C0.get(this))}:function(...e){return Ss(n.apply(dg(this),e))}}function sb(n){return typeof n=="function"?ib(n):(n instanceof IDBTransaction&&nb(n),Xk(n,Zk())?new Proxy(n,Vg):n)}function Ss(n){if(n instanceof IDBRequest)return tb(n);if(hg.has(n))return hg.get(n);const e=sb(n);return e!==n&&(hg.set(n,e),Oy.set(e,n)),e}const dg=n=>Oy.get(n);function ob(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),h=Ss(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ss(l.result),f.oldVersion,f.newVersion,Ss(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const ab=["get","getKey","getAll","getAllKeys","count"],lb=["put","add","delete","clear"],fg=new Map;function $E(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fg.get(e))return fg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=lb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ab.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),i&&f.done]))[0]};return fg.set(e,a),a}rb(n=>({...n,get:(e,t,r)=>$E(e,t)||n.get(e,t,r),has:(e,t)=>!!$E(e,t)||n.has(e,t)}));class ub{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function cb(n){return n.getComponent()?.type==="VERSION"}const _f="@firebase/app",Og="0.14.6";const Ci=new Hf("@firebase/app"),hb="@firebase/app-compat",db="@firebase/analytics-compat",fb="@firebase/analytics",pb="@firebase/app-check-compat",mb="@firebase/app-check",gb="@firebase/auth",yb="@firebase/auth-compat",_b="@firebase/database",vb="@firebase/data-connect",wb="@firebase/database-compat",Eb="@firebase/functions",Ib="@firebase/functions-compat",Tb="@firebase/installations",Sb="@firebase/installations-compat",Ab="@firebase/messaging",Rb="@firebase/messaging-compat",Pb="@firebase/performance",Cb="@firebase/performance-compat",kb="@firebase/remote-config",bb="@firebase/remote-config-compat",xb="@firebase/storage",Nb="@firebase/storage-compat",Db="@firebase/firestore",Vb="@firebase/ai",Ob="@firebase/firestore-compat",Lb="firebase",Mb="12.6.0";const bs="[DEFAULT]",Fb={[_f]:"fire-core",[hb]:"fire-core-compat",[fb]:"fire-analytics",[db]:"fire-analytics-compat",[mb]:"fire-app-check",[pb]:"fire-app-check-compat",[gb]:"fire-auth",[yb]:"fire-auth-compat",[_b]:"fire-rtdb",[vb]:"fire-data-connect",[wb]:"fire-rtdb-compat",[Eb]:"fire-fn",[Ib]:"fire-fn-compat",[Tb]:"fire-iid",[Sb]:"fire-iid-compat",[Ab]:"fire-fcm",[Rb]:"fire-fcm-compat",[Pb]:"fire-perf",[Cb]:"fire-perf-compat",[kb]:"fire-rc",[bb]:"fire-rc-compat",[xb]:"fire-gcs",[Nb]:"fire-gcs-compat",[Db]:"fire-fst",[Ob]:"fire-fst-compat",[Vb]:"fire-vertex","fire-js":"fire-js",[Lb]:"fire-js-all"};const xs=new Map,gl=new Map,yl=new Map;function Nc(n,e){try{n.container.addComponent(e)}catch(t){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function b0(n,e){n.container.addOrOverwriteComponent(e)}function ki(n){const e=n.name;if(yl.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;yl.set(e,n);for(const t of xs.values())Nc(t,n);for(const t of gl.values())Nc(t,n);return!0}function x0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ub(n,e,t=bs){x0(n,e).clearInstance(t)}function Ly(n){return n.options!==void 0}function N0(n){return Ly(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function dt(n){return n==null?!1:n.settings!==void 0}function jb(){yl.clear()}const Bb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new na("app","Firebase",Bb);let D0=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}};function WE(n,e){const t=Py(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,a=new Date().getTime();i-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class zb extends D0{constructor(e,t,r,i){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:r,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,i);else{const h=e;super(h.options,l,i)}this._serverConfig={automaticDataCollectionEnabled:a,...t},this._serverConfig.authIdToken&&WE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&WE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Qn(_f,Og,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Fy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Kn.create("server-app-deleted")}}const Bs=Mb;function My(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:bs,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Kn.create("bad-app-name",{appName:String(i)});if(t||(t=by()),!t)throw Kn.create("no-options");const a=xs.get(i);if(a){if(ks(t,a.options)&&ks(r,a.config))return a;throw Kn.create("duplicate-app",{appName:i})}const l=new R0(i);for(const f of yl.values())l.addComponent(f);const h=new D0(t,r,l);return xs.set(i,h),h}function qb(n,e={}){if(Ok()&&!w0())throw Kn.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Ly(n)?t=n.options:N0(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=by()),!t)throw Kn.create("no-options");const i={...r,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const a=_=>[..._].reduce((w,I)=>Math.imul(31,w)+I.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Kn.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(i)),h=gl.get(l);if(h)return h.incRefCount(r.releaseOnDeref),h;const f=new R0(l);for(const _ of yl.values())f.addComponent(_);const m=new zb(t,r,l,f);return gl.set(l,m),m}function $b(n=bs){const e=xs.get(n);if(!e&&n===bs&&by())return My();if(!e)throw Kn.create("no-app",{appName:n});return e}function Wb(){return Array.from(xs.values())}async function Fy(n){let e=!1;const t=n.name;xs.has(t)?(e=!0,xs.delete(t)):gl.has(t)&&n.decRefCount()<=0&&(gl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function Qn(n,e,t){let r=Fb[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(l.join(" "));return}ki(new ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function V0(n,e){if(n!==null&&typeof n!="function")throw Kn.create("invalid-log-argument");Yk(n,e)}function O0(n){Jk(n)}const Hb="firebase-heartbeat-database",Gb=1,Dc="firebase-heartbeat-store";let pg=null;function L0(){return pg||(pg=ob(Hb,Gb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kn.create("idb-open",{originalErrorMessage:n.message})})),pg}async function Kb(n){try{const t=(await L0()).transaction(Dc),r=await t.objectStore(Dc).get(M0(n));return await t.done,r}catch(e){if(e instanceof Kt)Ci.warn(e.message);else{const t=Kn.create("idb-get",{originalErrorMessage:e?.message});Ci.warn(t.message)}}}async function HE(n,e){try{const r=(await L0()).transaction(Dc,"readwrite");await r.objectStore(Dc).put(e,M0(n)),await r.done}catch(t){if(t instanceof Kt)Ci.warn(t.message);else{const r=Kn.create("idb-set",{originalErrorMessage:t?.message});Ci.warn(r.message)}}}function M0(n){return`${n.name}!${n.options.appId}`}const Qb=1024,Jb=30;class Yb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Zb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=GE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Jb){const i=ex(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ci.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=GE(),{heartbeatsToSend:t,unsentEntries:r}=Xb(this._heartbeatsCache.heartbeats),i=gf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ci.warn(e),""}}}function GE(){return new Date().toISOString().substring(0,10)}function Xb(n,e=Qb){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),KE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xc()?Mk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Kb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KE(n){return gf(JSON.stringify({version:2,heartbeats:n})).length}function ex(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function tx(n){ki(new ar("platform-logger",e=>new ub(e),"PRIVATE")),ki(new ar("heartbeat",e=>new Yb(e),"PRIVATE")),Qn(_f,Og,n),Qn(_f,Og,"esm2020"),Qn("fire-js","")}tx("");const nx=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:Bs,_DEFAULT_ENTRY_NAME:bs,_addComponent:Nc,_addOrOverwriteComponent:b0,_apps:xs,_clearComponents:jb,_components:yl,_getProvider:x0,_isFirebaseApp:Ly,_isFirebaseServerApp:dt,_isFirebaseServerAppSettings:N0,_registerComponent:ki,_removeServiceInstance:Ub,_serverApps:gl,deleteApp:Fy,getApp:$b,getApps:Wb,initializeApp:My,initializeServerApp:qb,onLog:V0,registerVersion:Qn,setLogLevel:O0},Symbol.toStringTag,{value:"Module"}));class rx{constructor(e,t){this._delegate=e,this.firebase=t,Nc(e,new ar("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Fy(this._delegate)))}_getService(e,t=bs){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=bs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Nc(this._delegate,e)}_addOrOverwriteComponent(e){b0(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ix={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},QE=new na("app-compat","Firebase",ix);function sx(n){const e={},t={__esModule:!0,initializeApp:a,app:i,registerVersion:Qn,setLogLevel:O0,onLog:V0,apps:null,SDK_VERSION:Bs,INTERNAL:{registerComponent:h,removeApp:r,useAsService:f,modularAPIs:nx}};t.default=t,Object.defineProperty(t,"apps",{get:l});function r(m){delete e[m]}function i(m){if(m=m||bs,!jE(e,m))throw QE.create("no-app",{appName:m});return e[m]}i.App=n;function a(m,_={}){const w=My(m,_);if(jE(e,w.name))return e[w.name];const I=new n(w,t);return e[w.name]=I,I}function l(){return Object.keys(e).map(m=>e[m])}function h(m){const _=m.name,w=_.replace("-compat","");if(ki(m)&&m.type==="PUBLIC"){const I=(b=i())=>{if(typeof b[w]!="function")throw QE.create("invalid-app-argument",{appName:_});return b[w]()};m.serviceProps!==void 0&&yf(I,m.serviceProps),t[w]=I,n.prototype[w]=function(...b){return this._getService.bind(this,_).apply(this,m.multipleInstances?b:[])}}return m.type==="PUBLIC"?t[w]:null}function f(m,_){return _==="serverAuth"?null:_}return t}function F0(){const n=sx(rx);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:F0,extendNamespace:e,createSubscribe:A0,ErrorFactory:na,deepExtend:yf};function e(t){yf(n,t)}return n}const ox=F0();const JE=new Hf("@firebase/app-compat"),ax="@firebase/app-compat",lx="0.5.6";function ux(n){Qn(ax,lx,n)}try{const n=Cy();if(n.firebase!==void 0){JE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&JE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const lr=ox;ux();var cx="firebase",hx="12.7.0";lr.registerVersion(cx,hx,"app-compat");const Ju={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Ja={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function dx(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function U0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fx=dx,px=U0,j0=new na("auth","Firebase",U0());const vf=new Hf("@firebase/auth");function mx(n,...e){vf.logLevel<=Me.WARN&&vf.warn(`Auth (${Bs}): ${n}`,...e)}function Yd(n,...e){vf.logLevel<=Me.ERROR&&vf.error(`Auth (${Bs}): ${n}`,...e)}function rn(n,...e){throw jy(n,...e)}function Bt(n,...e){return jy(n,...e)}function Uy(n,e,t){const r={...px(),[e]:t};return new na("auth","Firebase",r).create(e,{appName:n.name})}function Qt(n){return Uy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zl(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&rn(n,"argument-error"),Uy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j0.create(n,...e)}function ee(n,e,...t){if(!n)throw jy(e,...t)}function Xr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Yd(e),new Error(e)}function Sr(n,e){n||Xr(e)}function Vc(){return typeof self<"u"&&self.location?.href||""}function By(){return YE()==="http:"||YE()==="https:"}function YE(){return typeof self<"u"&&self.location?.protocol||null}function gx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(By()||E0()||"connection"in navigator)?navigator.onLine:!0}function yx(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class eh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sr(t>e,"Short delay should be less than long delay!"),this.isMobile=Vk()||Dy()}get(){return gx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zy(n,e){Sr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class B0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _x={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wx=new eh(3e4,6e4);function St(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function At(n,e,t,r,i={}){return z0(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Bl({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...a};return Lk()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&js(n.emulatorConfig.host)&&(m.credentials="include"),B0.fetch()(await q0(n,n.config.apiHost,t,h),m)})}async function z0(n,e,t){n._canInitEmulator=!1;const r={..._x,...e};try{const i=new Ix(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ac(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ac(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw ac(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw ac(n,"user-disabled",l);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Uy(n,_,m);rn(n,_)}}catch(i){if(i instanceof Kt)throw i;rn(n,"network-request-failed",{message:String(i)})}}async function Di(n,e,t,r,i={}){const a=await At(n,e,t,r,i);return"mfaPendingCredential"in a&&rn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function q0(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?zy(n.config,i):`${n.config.apiScheme}://${i}`;return vx.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function Ex(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ix{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bt(this.auth,"network-request-failed")),wx.get())})}}function ac(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Bt(n,e,r);return i.customData._tokenResponse=t,i}function XE(n){return n!==void 0&&n.getResponse!==void 0}function ZE(n){return n!==void 0&&n.enterprise!==void 0}class $0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ex(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tx(n){return(await At(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function W0(n,e){return At(n,"GET","/v2/recaptchaConfig",St(n,e))}async function Sx(n,e){return At(n,"POST","/v1/accounts:delete",e)}async function Ax(n,e){return At(n,"POST","/v1/accounts:update",e)}async function wf(n,e){return At(n,"POST","/v1/accounts:lookup",e)}function mc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rx(n,e=!1){const t=Te(n),r=await t.getIdToken(e),i=Gf(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:mc(mg(i.auth_time)),issuedAtTime:mc(mg(i.iat)),expirationTime:mc(mg(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function mg(n){return Number(n)*1e3}function Gf(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Py(t);return i?JSON.parse(i):(Yd("Failed to decode base64 JWT payload"),null)}catch(i){return Yd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eI(n){const e=Gf(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function bi(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kt&&Px(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Px({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Cx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Lg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oc(n){const e=n.auth,t=await n.getIdToken(),r=await bi(n,wf(e,{idToken:t}));ee(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?H0(i.providerUserInfo):[],l=bx(n.providerData,a),h=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!l?.length,m=h?f:!1,_={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Lg(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,_)}async function kx(n){const e=Te(n);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bx(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function H0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function xx(n,e){const t=await z0(n,{},async()=>{const r=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await q0(n,i,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&js(n.emulatorConfig.host)&&(f.credentials="include"),B0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Nx(n,e){return At(n,"POST","/v2/accounts:revokeToken",St(n,e))}class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const t=eI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await xx(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new cl;return r&&(ee(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(ee(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Xr("not implemented")}}function ms(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Cx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bi(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Rx(this,e)}reload(){return kx(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Oc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dt(this.auth.app))return Promise.reject(Qt(this.auth));const e=await this.getIdToken();return await bi(this,Sx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:w,emailVerified:I,isAnonymous:b,providerData:x,stsTokenManager:F}=t;ee(w&&F,e,"internal-error");const O=cl.fromJSON(this.name,F);ee(typeof w=="string",e,"internal-error"),ms(r,e.name),ms(i,e.name),ee(typeof I=="boolean",e,"internal-error"),ee(typeof b=="boolean",e,"internal-error"),ms(a,e.name),ms(l,e.name),ms(h,e.name),ms(f,e.name),ms(m,e.name),ms(_,e.name);const K=new Er({uid:w,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:b,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:O,createdAt:m,lastLoginAt:_});return x&&Array.isArray(x)&&(K.providerData=x.map(ae=>({...ae}))),f&&(K._redirectEventId=f),K}static async _fromIdTokenResponse(e,t,r=!1){const i=new cl;i.updateFromServerResponse(t);const a=new Er({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Oc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ee(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?H0(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,h=new cl;h.updateFromIdToken(r);const f=new Er({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,m),f}}const tI=new Map;function Gn(n){Sr(n instanceof Function,"Expected a class definition");let e=tI.get(n);return e?(Sr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tI.set(n,e),e)}class G0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G0.type="NONE";const _l=G0;function Fo(n,e,t){return`firebase:${n}:${e}:${t}`}class hl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Fo(this.userKey,i.apiKey,a),this.fullPersistenceKey=Fo("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await wf(this.auth,{idToken:e}).catch(()=>{});return t?Er._fromGetAccountInfoResponse(this.auth,t,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new hl(Gn(_l),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||Gn(_l);const l=Fo(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(l);if(_){let w;if(typeof _=="string"){const I=await wf(e,{idToken:_}).catch(()=>{});if(!I)break;w=await Er._fromGetAccountInfoResponse(e,I,_)}else w=Er._fromJSON(e,_);m!==a&&(h=w),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new hl(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new hl(a,e,r))}}function nI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(K0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(X0(e))return"Blackberry";if(Z0(e))return"Webos";if(Q0(e))return"Safari";if((e.includes("chrome/")||J0(e))&&!e.includes("edge/"))return"Chrome";if(th(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function K0(n=vt()){return/firefox\//i.test(n)}function Q0(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J0(n=vt()){return/crios\//i.test(n)}function Y0(n=vt()){return/iemobile/i.test(n)}function th(n=vt()){return/android/i.test(n)}function X0(n=vt()){return/blackberry/i.test(n)}function Z0(n=vt()){return/webos/i.test(n)}function nh(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Dx(n=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function Vx(n=vt()){return nh(n)&&!!window.navigator?.standalone}function Ox(){return I0()&&document.documentMode===10}function eS(n=vt()){return nh(n)||th(n)||Z0(n)||X0(n)||/windows phone/i.test(n)||Y0(n)}function tS(n,e=[]){let t;switch(n){case"Browser":t=nI(vt());break;case"Worker":t=`${nI(vt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bs}/${r}`}class Lx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Mx(n,e={}){return At(n,"GET","/v2/passwordPolicy",St(n,e))}const Fx=6;class Ux{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Fx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class jx{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rI(this),this.idTokenSubscription=new rI(this),this.beforeStateQueue=new Lx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wf(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dt(this.app))return Promise.reject(Qt(this));const t=e?Te(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dt(this.app)?Promise.reject(Qt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dt(this.app)?Promise.reject(Qt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mx(this),t=new Ux(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new na("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Nx(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gn(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wt(n){return Te(n)}class rI{constructor(e){this.auth=e,this.observer=null,this.addObserver=A0(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Bx(n){rh=n}function qy(n){return rh.loadJS(n)}function zx(){return rh.recaptchaV2Script}function qx(){return rh.recaptchaEnterpriseScript}function $x(){return rh.gapiScript}function nS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Wx=500,Hx=6e4,zd=1e12;class Gx{constructor(e){this.auth=e,this.counter=zd,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new Jx(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||zd;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||zd;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||zd;return this._widgets.get(t)?.execute(),""}}class Kx{constructor(){this.enterprise=new Qx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Qx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Jx{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ee(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Yx(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Hx)},Wx))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Yx(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Xx="recaptcha-enterprise",gc="NO_RECAPTCHA";class rS{constructor(e){this.type=Xx,this.auth=wt(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{W0(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new $0(f);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,l(m.siteKey)}}).catch(f=>{h(f)})})}function i(a,l,h){const f=window.grecaptcha;ZE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(m=>{l(m)}).catch(()=>{l(gc)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Kx().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&ZE(window.grecaptcha))i(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=qx();f.length!==0&&(f+=h),qy(f).then(()=>{i(h,a,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function Yu(n,e,t,r=!1,i=!1){const a=new rS(n);let l;if(i)l=gc;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function As(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Yu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Yu(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const a=await Yu(n,e,t);return r(n,a).catch(async l=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const h=await Yu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(l)})}else{const a=await Yu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}async function Zx(n){const e=wt(n),t=await W0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new $0(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new rS(e).verify()}function eN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Gn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function tN(n,e,t){const r=wt(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,a=iS(e),{host:l,port:h}=nN(e),f=h===null?"":`:${h}`,m={url:`${a}//${l}${f}/`},_=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ks(m,r.config.emulator)&&ks(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,js(l)?(xy(`${a}//${l}${f}`),Ny("Auth",!0)):i||rN()}function iS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nN(n){const e=iS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:iI(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:iI(l)}}}function iI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class ql{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function sS(n,e){return At(n,"POST","/v1/accounts:resetPassword",St(n,e))}async function iN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function sN(n,e){return At(n,"POST","/v1/accounts:signUp",e)}async function oN(n,e){return At(n,"POST","/v1/accounts:update",St(n,e))}async function aN(n,e){return Di(n,"POST","/v1/accounts:signInWithPassword",St(n,e))}async function Kf(n,e){return At(n,"POST","/v1/accounts:sendOobCode",St(n,e))}async function lN(n,e){return Kf(n,e)}async function uN(n,e){return Kf(n,e)}async function cN(n,e){return Kf(n,e)}async function hN(n,e){return Kf(n,e)}async function dN(n,e){return Di(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}async function fN(n,e){return Di(n,"POST","/v1/accounts:signInWithEmailLink",St(n,e))}class Lc extends ql{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Lc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Lc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return As(e,t,"signInWithPassword",aN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dN(e,{email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return As(e,r,"signUpPassword",sN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return fN(e,{idToken:t,email:this._email,oobCode:this._password});default:rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pi(n,e){return Di(n,"POST","/v1/accounts:signInWithIdp",St(n,e))}const pN="http://localhost";class ii extends ql{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new ii(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Pi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pi(e,t)}buildRequest(){const e={requestUri:pN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Bl(t)}return e}}async function sI(n,e){return At(n,"POST","/v1/accounts:sendVerificationCode",St(n,e))}async function mN(n,e){return Di(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e))}async function gN(n,e){const t=await Di(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,e));if(t.temporaryProof)throw ac(n,"account-exists-with-different-credential",t);return t}const yN={USER_NOT_FOUND:"user-not-found"};async function _N(n,e){const t={...e,operation:"REAUTH"};return Di(n,"POST","/v1/accounts:signInWithPhoneNumber",St(n,t),yN)}class Uo extends ql{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Uo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Uo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return mN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return gN(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return _N(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!t&&!i&&!a?null:new Uo({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:a})}}function vN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wN(n){const e=ll(oc(n)).link,t=e?ll(oc(e)).deep_link_id:null,r=ll(oc(n)).deep_link_id;return(r?ll(oc(r)).link:null)||r||t||e||n}class Qf{constructor(e){const t=ll(oc(e)),r=t.apiKey??null,i=t.oobCode??null,a=vN(t.mode??null);ee(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wN(e);try{return new Qf(t)}catch{return null}}}class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,t){return Lc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Qf.parseLink(t);return ee(r,"argument-error"),Lc._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Vi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $l extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class dl extends $l{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ee("providerId"in t&&"signInMethod"in t,"argument-error"),ii._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ee(e.idToken||e.accessToken,"argument-error"),ii._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return dl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return dl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:h}=e;if(!r&&!i&&!t&&!a||!h)return null;try{return new dl(h)._credential({idToken:t,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}class Kr extends $l{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Kr.PROVIDER_ID="facebook.com";class Qr extends $l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ii._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Qr.credential(t,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";class Jr extends $l{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";const EN="http://localhost";class vl extends ql{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Pi(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pi(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=t;return!r||!i||!a||r!==i?null:new vl(r,a)}static _create(e,t){return new vl(e,t)}buildRequest(){return{requestUri:EN,returnSecureToken:!0,pendingToken:this.pendingToken}}}const IN="saml.";class Ef extends Vi{constructor(e){ee(e.startsWith(IN),"argument-error"),super(e)}static credentialFromResult(e){return Ef.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Ef.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vl.fromJSON(e);return ee(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return vl._create(r,t)}catch{return null}}}class Yr extends $l{constructor(){super("twitter.com")}static credential(e,t){return ii._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Yr.credential(t,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";async function oS(n,e){return Di(n,"POST","/v1/accounts:signUp",St(n,e))}class ur{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await Er._fromIdTokenResponse(e,r,i),l=oI(r);return new ur({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=oI(r);return new ur({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function oI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function TN(n){if(dt(n.app))return Promise.reject(Qt(n));const e=wt(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ur({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await oS(e,{returnSecureToken:!0}),r=await ur._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class If extends Kt{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new If(e,t,r,i)}}function aS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(n,a,e,r):a})}function lS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}async function SN(n,e){const t=Te(n);await Jf(!0,t,e);const{providerUserInfo:r}=await Ax(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=lS(r||[]);return t.providerData=t.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function $y(n,e,t=!1){const r=await bi(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ur._forOperation(n,"link",r)}async function Jf(n,e,t){await Oc(e);const r=lS(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";ee(r.has(t)===n,e.auth,i)}async function uS(n,e,t=!1){const{auth:r}=n;if(dt(r.app))return Promise.reject(Qt(r));const i="reauthenticate";try{const a=await bi(n,aS(r,i,e,n),t);ee(a.idToken,r,"internal-error");const l=Gf(a.idToken);ee(l,r,"internal-error");const{sub:h}=l;return ee(n.uid===h,r,"user-mismatch"),ur._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&rn(r,"user-mismatch"),a}}async function cS(n,e,t=!1){if(dt(n.app))return Promise.reject(Qt(n));const r="signIn",i=await aS(n,r,e),a=await ur._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function Yf(n,e){return cS(wt(n),e)}async function hS(n,e){const t=Te(n);return await Jf(!1,t,e.providerId),$y(t,e)}async function dS(n,e){return uS(Te(n),e)}async function AN(n,e){return Di(n,"POST","/v1/accounts:signInWithCustomToken",St(n,e))}async function RN(n,e){if(dt(n.app))return Promise.reject(Qt(n));const t=wt(n),r=await AN(t,{token:e,returnSecureToken:!0}),i=await ur._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}class ih{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Wy._fromServerResponse(e,t):"totpInfo"in t?Hy._fromServerResponse(e,t):rn(e,"internal-error")}}class Wy extends ih{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Wy(t)}}class Hy extends ih{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Hy(t)}}function Xf(n,e,t){ee(t.url?.length>0,n,"invalid-continue-uri"),ee(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),ee(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ee(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ee(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Gy(n){const e=wt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PN(n,e,t){const r=wt(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Xf(r,i,t),await As(r,i,"getOobCode",uN,"EMAIL_PASSWORD_PROVIDER")}async function CN(n,e,t){await sS(Te(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gy(n),r})}async function kN(n,e){await oN(Te(n),{oobCode:e})}async function fS(n,e){const t=Te(n),r=await sS(t,{oobCode:e}),i=r.requestType;switch(ee(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(r.mfaInfo,t,"internal-error");default:ee(r.email,t,"internal-error")}let a=null;return r.mfaInfo&&(a=ih._fromServerResponse(wt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function bN(n,e){const{data:t}=await fS(Te(n),e);return t.email}async function xN(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),l=await As(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oS,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Gy(n),f}),h=await ur._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function NN(n,e,t){return dt(n.app)?Promise.reject(Qt(n)):Yf(Te(n),zs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gy(n),r})}async function DN(n,e,t){const r=wt(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,h){ee(h.handleCodeInApp,r,"argument-error"),h&&Xf(r,l,h)}a(i,t),await As(r,i,"getOobCode",cN,"EMAIL_PASSWORD_PROVIDER")}function VN(n,e){return Qf.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function ON(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=Te(n),i=zs.credentialWithLink(e,t||Vc());return ee(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yf(r,i)}async function LN(n,e){return At(n,"POST","/v1/accounts:createAuthUri",St(n,e))}async function MN(n,e){const t=By()?Vc():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await LN(Te(n),r);return i||[]}async function FN(n,e){const t=Te(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Xf(t.auth,i,e);const{email:a}=await lN(t.auth,i);a!==n.email&&await n.reload()}async function UN(n,e,t){const r=Te(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Xf(r.auth,a,t);const{email:l}=await hN(r.auth,a);l!==n.email&&await n.reload()}async function jN(n,e){return At(n,"POST","/v1/accounts:update",e)}async function BN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Te(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await bi(r,jN(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const h=r.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function zN(n,e){const t=Te(n);return dt(t.auth.app)?Promise.reject(Qt(t.auth)):pS(t,e,null)}function qN(n,e){return pS(Te(n),null,e)}async function pS(n,e,t){const{auth:r}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const l=await bi(n,iN(r,a));await n._updateTokensIfNecessary(l,!0)}function $N(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const i=Gf(n.idToken)?.firebase?.sign_in_provider;if(i){const a=i!=="anonymous"&&i!=="custom"?i:null;return new fl(r,a)}}if(!e)return null;switch(e){case"facebook.com":return new WN(r,t);case"github.com":return new HN(r,t);case"google.com":return new GN(r,t);case"twitter.com":return new KN(r,t,n.screenName||null);case"custom":case"anonymous":return new fl(r,null);default:return new fl(r,e,t)}}class fl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class mS extends fl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class WN extends fl{constructor(e,t){super(e,"facebook.com",t)}}class HN extends mS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class GN extends fl{constructor(e,t){super(e,"google.com",t)}}class KN extends mS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function QN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:$N(t)}class No{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new No("enroll",e,t)}static _fromMfaPendingCredential(e){return new No("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return No._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return No._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ky{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=wt(e),i=t.customData._serverResponse,a=(i.mfaInfo||[]).map(h=>ih._fromServerResponse(r,h));ee(i.mfaPendingCredential,r,"internal-error");const l=No._fromMfaPendingCredential(i.mfaPendingCredential);return new Ky(l,a,async h=>{const f=await h._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const m={...i,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const _=await ur._fromIdTokenResponse(r,t.operationType,m);return await r._updateCurrentUser(_.user),_;case"reauthenticate":return ee(t.user,r,"internal-error"),ur._forOperation(t.user,t.operationType,m);default:rn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function JN(n,e){const t=Te(n),r=e;return ee(e.customData.operationType,t,"argument-error"),ee(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),Ky._fromError(t,r)}function aI(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:start",St(n,e))}function YN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:finalize",St(n,e))}function XN(n,e){return At(n,"POST","/v2/accounts/mfaEnrollment:withdraw",St(n,e))}class Qy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>ih._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Qy(e)}async getSession(){return No._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),a=await bi(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await bi(this.user,XN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const gg=new WeakMap;function ZN(n){const e=Te(n);return gg.has(e)||gg.set(e,Qy._fromUser(e)),gg.get(e)}const Tf="__sak";class gS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const eD=1e3,tD=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Ox()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tD):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const Jy=yS;class _S extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_S.type="SESSION";const qo=_S;function nD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async m=>m(t.origin,a)),f=await nD(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];function sh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class rD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const m=sh("",20);i.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Mt(){return window}function iD(n){Mt().location.href=n}function Yy(){return typeof Mt().WorkerGlobalScope<"u"&&typeof Mt().importScripts=="function"}async function sD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){return navigator?.serviceWorker?.controller||null}function aD(){return Yy()?self:null}const vS="firebaseLocalStorageDb",lD=1,Sf="firebaseLocalStorage",wS="fbase_key";class oh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ep(n,e){return n.transaction([Sf],e?"readwrite":"readonly").objectStore(Sf)}function uD(){const n=indexedDB.deleteDatabase(vS);return new oh(n).toPromise()}function Mg(){const n=indexedDB.open(vS,lD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Sf,{keyPath:wS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Sf)?e(r):(r.close(),await uD(),e(await Mg()))})})}async function lI(n,e,t){const r=ep(n,!0).put({[wS]:e,value:t});return new oh(r).toPromise()}async function cD(n,e){const t=ep(n,!1).get(e),r=await new oh(t).toPromise();return r===void 0?null:r.value}function uI(n,e){const t=ep(n,!0).delete(e);return new oh(t).toPromise()}const hD=800,dD=3;class ES{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>dD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(aD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new rD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await lI(e,Tf,"1"),await uI(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>cD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ep(i,!1).getAll();return new oh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ES.type="LOCAL";const Mc=ES;function cI(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:start",St(n,e))}function fD(n,e){return At(n,"POST","/v2/accounts/mfaSignIn:finalize",St(n,e))}const yg=nS("rcb"),pD=new eh(3e4,6e4);class mD{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mt().grecaptcha?.render}load(e,t=""){return ee(gD(t),e,"argument-error"),this.shouldResolveImmediately(t)&&XE(Mt().grecaptcha)?Promise.resolve(Mt().grecaptcha):new Promise((r,i)=>{const a=Mt().setTimeout(()=>{i(Bt(e,"network-request-failed"))},pD.get());Mt()[yg]=()=>{Mt().clearTimeout(a),delete Mt()[yg];const h=Mt().grecaptcha;if(!h||!XE(h)){i(Bt(e,"internal-error"));return}const f=h.render;h.render=(m,_)=>{const w=f(m,_);return this.counter++,w},this.hostLanguage=t,r(h)};const l=`${zx()}?${Bl({onload:yg,render:"explicit",hl:t})}`;qy(l).catch(()=>{clearTimeout(a),i(Bt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Mt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function gD(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class yD{async load(e){return new Gx(e)}clearedOneInstance(){}}const yc="recaptcha",_D={theme:"light",type:"image"};let vD=class{constructor(e,t,r={..._D}){this.parameters=r,this.type=yc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;ee(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new yD:new mD,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Mt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(By()&&!Yy(),this.auth,"internal-error"),await wD(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Tx(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function wD(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class Xy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Uo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ED(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),i=await tp(r,e,Te(t));return new Xy(i,a=>Yf(r,a))}async function ID(n,e,t){const r=Te(n);await Jf(!1,r,"phone");const i=await tp(r.auth,e,Te(t));return new Xy(i,a=>hS(r,a))}async function TD(n,e,t){const r=Te(n);if(dt(r.auth.app))return Promise.reject(Qt(r.auth));const i=await tp(r.auth,e,Te(t));return new Xy(i,a=>dS(r,a))}async function tp(n,e,t){if(!n._getRecaptchaConfig())try{await Zx(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const i=r.session;if("phoneNumber"in r){ee(i.type==="enroll",n,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await As(n,a,"mfaSmsEnrollment",async(m,_)=>{if(_.phoneEnrollmentInfo.captchaResponse===gc){ee(t?.type===yc,m,"argument-error");const w=await _g(m,_,t);return aI(m,w)}return aI(m,_)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneSessionInfo.sessionInfo}else{ee(i.type==="signin",n,"internal-error");const a=r.multiFactorHint?.uid||r.multiFactorUid;ee(a,n,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await As(n,l,"mfaSmsSignIn",async(_,w)=>{if(w.phoneSignInInfo.captchaResponse===gc){ee(t?.type===yc,_,"argument-error");const I=await _g(_,w,t);return cI(_,I)}return cI(_,w)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await As(n,i,"sendVerificationCode",async(f,m)=>{if(m.captchaResponse===gc){ee(t?.type===yc,f,"argument-error");const _=await _g(f,m,t);return sI(f,_)}return sI(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{t?._reset()}}async function SD(n,e){const t=Te(n);if(dt(t.auth.app))return Promise.reject(Qt(t.auth));await $y(t,e)}async function _g(n,e,t){ee(t.type===yc,n,"argument-error");const r=await t.verify();ee(typeof r=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const a=i.phoneEnrollmentInfo.phoneNumber,l=i.phoneEnrollmentInfo.captchaResponse,h=i.phoneEnrollmentInfo.clientType,f=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r,captchaResponse:l,clientType:h,recaptchaVersion:f}}),i}else if("phoneSignInInfo"in i){const a=i.phoneSignInInfo.captchaResponse,l=i.phoneSignInInfo.clientType,h=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:a,clientType:l,recaptchaVersion:h}}),i}else return Object.assign(i,{recaptchaToken:r}),i}let $o=class Xd{constructor(e){this.providerId=Xd.PROVIDER_ID,this.auth=wt(e)}verifyPhoneNumber(e,t){return tp(this.auth,e,Te(t))}static credential(e,t){return Uo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xd.credentialFromTaggedObject(t)}static credentialFromError(e){return Xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Uo._fromTokenResponse(t,r):null}};$o.PROVIDER_ID="phone";$o.PHONE_SIGN_IN_METHOD="phone";function ra(n,e){return e?Gn(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Zy extends ql{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AD(n){return cS(n.auth,new Zy(n),n.bypassAuthState)}function RD(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),uS(t,new Zy(n),n.bypassAuthState)}async function PD(n){const{auth:e,user:t}=n;return ee(t,e,"internal-error"),$y(t,new Zy(n),n.bypassAuthState)}class IS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AD;case"linkViaPopup":case"linkViaRedirect":return PD;case"reauthViaPopup":case"reauthViaRedirect":return RD;default:rn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CD=new eh(2e3,1e4);async function kD(n,e,t){if(dt(n.app))return Promise.reject(Bt(n,"operation-not-supported-in-this-environment"));const r=wt(n);zl(n,e,Vi);const i=ra(r,t);return new Ai(r,"signInViaPopup",e,i).executeNotNull()}async function bD(n,e,t){const r=Te(n);if(dt(r.auth.app))return Promise.reject(Bt(r.auth,"operation-not-supported-in-this-environment"));zl(r.auth,e,Vi);const i=ra(r.auth,t);return new Ai(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function xD(n,e,t){const r=Te(n);zl(r.auth,e,Vi);const i=ra(r.auth,t);return new Ai(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ai extends IS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ai.currentPopupAction&&Ai.currentPopupAction.cancel(),Ai.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=sh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ai.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CD.get())};e()}}Ai.currentPopupAction=null;const ND="pendingRedirect",_c=new Map;class DD extends IS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_c.get(this.auth._key());if(!e){try{const r=await VD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_c.set(this.auth._key(),e)}return this.bypassAuthState||_c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VD(n,e){const t=SS(e),r=TS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function e_(n,e){return TS(n)._set(SS(e),"true")}function OD(){_c.clear()}function t_(n,e){_c.set(n._key(),e)}function TS(n){return Gn(n._redirectPersistence)}function SS(n){return Fo(ND,n.config.apiKey,n.name)}function LD(n,e,t){return MD(n,e,t)}async function MD(n,e,t){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n);zl(n,e,Vi),await r._initializationPromise;const i=ra(r,t);return await e_(i,r),i._openRedirect(r,e,"signInViaRedirect")}function FD(n,e,t){return UD(n,e,t)}async function UD(n,e,t){const r=Te(n);if(zl(r.auth,e,Vi),dt(r.auth.app))return Promise.reject(Qt(r.auth));await r.auth._initializationPromise;const i=ra(r.auth,t);await e_(i,r.auth);const a=await AS(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function jD(n,e,t){return BD(n,e,t)}async function BD(n,e,t){const r=Te(n);zl(r.auth,e,Vi),await r.auth._initializationPromise;const i=ra(r.auth,t);await Jf(!1,r,e.providerId),await e_(i,r.auth);const a=await AS(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function zD(n,e){return await wt(n)._initializationPromise,np(n,e,!1)}async function np(n,e,t=!1){if(dt(n.app))return Promise.reject(Qt(n));const r=wt(n),i=ra(r,e),l=await new DD(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function AS(n){const e=sh(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}const qD=600*1e3;class RS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$D(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!PS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(hI(e))}saveEventToCache(e){this.cachedEventUids.add(hI(e)),this.lastProcessedEventTime=Date.now()}}function hI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $D(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PS(n);default:return!1}}async function CS(n,e={}){return At(n,"GET","/v1/projects",e)}const WD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HD=/^https?/;async function GD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await CS(n);for(const t of e)try{if(KD(t))return}catch{}rn(n,"unauthorized-domain")}function KD(n){const e=Vc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!HD.test(t))return!1;if(WD.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const QD=new eh(3e4,6e4);function dI(){const n=Mt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JD(n){return new Promise((e,t)=>{function r(){dI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dI(),t(Bt(n,"network-request-failed"))},timeout:QD.get()})}if(Mt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Mt().gapi?.load)r();else{const i=nS("iframefcb");return Mt()[i]=()=>{gapi.load?r():t(Bt(n,"network-request-failed"))},qy(`${$x()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Zd=null,e})}let Zd=null;function YD(n){return Zd=Zd||JD(n),Zd}const XD=new eh(5e3,15e3),ZD="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(n){const e=n.config;ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?zy(e,e2):`https://${n.config.authDomain}/${ZD}`,r={apiKey:e.apiKey,appName:n.name,v:Bs},i=n2.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Bl(r).slice(1)}`}async function i2(n){const e=await YD(n),t=Mt().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:r2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Bt(n,"network-request-failed"),h=Mt().setTimeout(()=>{a(l)},XD.get());function f(){Mt().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(l)})}))}const s2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o2=500,a2=600,l2="_blank",u2="http://localhost";class fI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c2(n,e,t,r=o2,i=a2){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f={...s2,width:r.toString(),height:i.toString(),top:a,left:l},m=vt().toLowerCase();t&&(h=J0(m)?l2:t),K0(m)&&(e=e||u2,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[b,x])=>`${I}${b}=${x},`,"");if(Vx(m)&&h!=="_self")return h2(e||"",h),new fI(null);const w=window.open(e||"",h,_);ee(w,n,"popup-blocked");try{w.focus()}catch{}return new fI(w)}function h2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const d2="__/auth/handler",f2="emulator/auth/handler",p2=encodeURIComponent("fac");async function Fg(n,e,t,r,i,a){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bs,eventId:i};if(e instanceof Vi){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Bk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries(a||{}))l[_]=w}if(e instanceof $l){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${p2}=${encodeURIComponent(f)}`:"";return`${m2(n)}?${Bl(h).slice(1)}${m}`}function m2({config:n}){return n.emulator?zy(n,f2):`https://${n.authDomain}/${d2}`}const vg="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qo,this._completeRedirectFn=np,this._overrideRedirectResult=t_}async _openPopup(e,t,r,i){Sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Fg(e,t,r,Vc(),i);return c2(e,a,sh())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Fg(e,t,r,Vc(),i);return iD(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Sr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await i2(e),r=new RS(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vg,{type:vg},i=>{const a=i?.[0]?.[vg];a!==void 0&&t(!!a),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eS()||Q0()||nh()}}const y2=g2;class _2{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Xr("unexpected MultiFactorSessionType")}}}class n_ extends _2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new n_(e)}_finalizeEnroll(e,t,r){return YN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return fD(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class kS{constructor(){}static assertion(e){return n_._fromCredential(e)}}kS.FACTOR_ID="phone";var pI="@firebase/auth",mI="1.12.0";class v2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function w2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E2(n){ki(new ar("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;ee(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tS(n)},m=new jx(r,i,a,f);return eN(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ki(new ar("auth-internal",e=>{const t=wt(e.getProvider("auth").getImmediate());return(r=>new v2(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(pI,mI,w2(n)),Qn(pI,mI,"esm2020")}const I2=300;kk("authIdTokenMaxAge");function T2(){return document.getElementsByTagName("head")?.[0]??document}Bx({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Bt("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",T2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E2("Browser");function Wo(){return window}const S2=2e3;async function A2(n,e,t){const{BuildInfo:r}=Wo();Sr(e.sessionId,"AuthEvent did not contain a session ID");const i=await b2(e.sessionId),a={};return nh()?a.ibi=r.packageName:th()?a.apn=r.packageName:rn(n,"operation-not-supported-in-this-environment"),r.displayName&&(a.appDisplayName=r.displayName),a.sessionId=i,Fg(n,t,e.type,void 0,e.eventId??void 0,a)}async function R2(n){const{BuildInfo:e}=Wo(),t={};nh()?t.iosBundleId=e.packageName:th()?t.androidPackageName=e.packageName:rn(n,"operation-not-supported-in-this-environment"),await CS(n,t)}function P2(n){const{cordova:e}=Wo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,Dx()?"_blank":"_system","location=yes"),t(i)})})}async function C2(n,e,t){const{cordova:r}=Wo();let i=()=>{};try{await new Promise((a,l)=>{let h=null;function f(){a();const w=r.plugins.browsertab?.close;typeof w=="function"&&w(),typeof t?.close=="function"&&t.close()}function m(){h||(h=window.setTimeout(()=>{l(Bt(n,"redirect-cancelled-by-user"))},S2))}function _(){document?.visibilityState==="visible"&&m()}e.addPassiveListener(f),document.addEventListener("resume",m,!1),th()&&document.addEventListener("visibilitychange",_,!1),i=()=>{e.removePassiveListener(f),document.removeEventListener("resume",m,!1),document.removeEventListener("visibilitychange",_,!1),h&&window.clearTimeout(h)}})}finally{i()}}function k2(n){const e=Wo();ee(typeof e?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof e?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee(typeof e?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function b2(n){const e=x2(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function x2(n){if(Sr(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}const N2=20;class D2 extends RS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function V2(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:M2(),postBody:null,tenantId:n.tenantId,error:Bt(n,"no-auth-event")}}function O2(n,e){return Ug()._set(jg(n),e)}async function gI(n){const e=await Ug()._get(jg(n));return e&&await Ug()._remove(jg(n)),e}function L2(n,e){const t=U2(e);if(t.includes("/__/auth/callback")){const r=ef(t),a=(r.firebaseError?F2(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],l=a?Bt(a):null;return l?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function M2(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<N2;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Ug(){return Gn(Jy)}function jg(n){return Fo("authEvent",n.config.apiKey,n.name)}function F2(n){try{return JSON.parse(n)}catch{return null}}function U2(n){const e=ef(n),t=e.link?decodeURIComponent(e.link):void 0,r=ef(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ef(i).link||i||r||t||n}function ef(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return ll(t.join("?"))}const j2=500;class B2{constructor(){this._redirectPersistence=qo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=np,this._overrideRedirectResult=t_}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new D2(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){rn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){k2(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),OD(),await this._originValidation(e);const l=V2(e,r,i);await O2(e,l);const h=await A2(e,l,t),f=await P2(h);return C2(e,a,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=R2(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=Wo(),l=setTimeout(async()=>{await gI(e),t.onEvent(yI())},j2),h=async _=>{clearTimeout(l);const w=await gI(e);let I=null;w&&_?.url&&(I=L2(w,_.url)),t.onEvent(I||yI())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,h);const f=i,m=`${a.packageName.toLowerCase()}://`;Wo().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(m)&&h({url:_}),typeof f=="function")try{f(_)}catch(w){console.error(w)}}}}const z2=B2;function yI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Bt("no-auth-event")}}function q2(n,e){wt(n)._logFramework(e)}var $2="@firebase/auth-compat",W2="0.6.2";const H2=1e3;function vc(){return self?.location?.protocol||null}function G2(){return vc()==="http:"||vc()==="https:"}function bS(n=vt()){return!!((vc()==="file:"||vc()==="ionic:"||vc()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function K2(){return Dy()||Wf()}function Q2(){return I0()&&document?.documentMode===11}function J2(n=vt()){return/Edge\/\d+/.test(n)}function Y2(n=vt()){return Q2()||J2(n)}function xS(){try{const n=self.localStorage,e=sh();if(n)return n.setItem(e,"1"),n.removeItem(e),Y2()?xc():!0}catch{return r_()&&xc()}return!1}function r_(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function wg(){return(G2()||E0()||bS())&&!K2()&&xS()&&!r_()}function NS(){return bS()&&typeof document<"u"}async function X2(){return NS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},H2);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function Z2(){return typeof window<"u"?window:null}const Hn={LOCAL:"local",NONE:"none",SESSION:"session"},Xu=ee,DS="persistence";function eV(n,e){if(Xu(Object.values(Hn).includes(e),n,"invalid-persistence-type"),Dy()){Xu(e!==Hn.SESSION,n,"unsupported-persistence-type");return}if(Wf()){Xu(e===Hn.NONE,n,"unsupported-persistence-type");return}if(r_()){Xu(e===Hn.NONE||e===Hn.LOCAL&&xc(),n,"unsupported-persistence-type");return}Xu(e===Hn.NONE||xS(),n,"unsupported-persistence-type")}async function Bg(n){await n._initializationPromise;const e=VS(),t=Fo(DS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function tV(n,e){const t=VS();if(!t)return[];const r=Fo(DS,n,e);switch(t.getItem(r)){case Hn.NONE:return[_l];case Hn.LOCAL:return[Mc,qo];case Hn.SESSION:return[qo];default:return[]}}function VS(){try{return Z2()?.sessionStorage||null}catch{return null}}const nV=ee;class Es{constructor(){this.browserResolver=Gn(y2),this.cordovaResolver=Gn(z2),this.underlyingResolver=null,this._redirectPersistence=qo,this._completeRedirectFn=np,this._overrideRedirectResult=t_}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return NS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await X2();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function OS(n){return n.unwrap()}function rV(n){return n.wrapped()}function iV(n){return LS(n)}function sV(n,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new oV(n,JN(n,e))}else if(t){const r=LS(e),i=e;r&&(i.credential=r,i.tenantId=t.tenantId||void 0,i.email=t.email||void 0,i.phoneNumber=t.phoneNumber||void 0)}}function LS(n){const{_tokenResponse:e}=n instanceof Kt?n.customData:n;if(!e)return null;if(!(n instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return $o.credentialFromResult(n);const t=e.providerId;if(!t||t===Ju.PASSWORD)return null;let r;switch(t){case Ju.GOOGLE:r=Qr;break;case Ju.FACEBOOK:r=Kr;break;case Ju.GITHUB:r=Jr;break;case Ju.TWITTER:r=Yr;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:h,nonce:f}=e;return!a&&!l&&!i&&!h?null:h?t.startsWith("saml.")?vl._create(t,h):ii._fromParams({providerId:t,signInMethod:t,pendingToken:h,idToken:i,accessToken:a}):new dl(t).credential({idToken:i,accessToken:a,rawNonce:f})}return n instanceof Kt?r.credentialFromError(n):r.credentialFromResult(n)}function kn(n,e){return e.catch(t=>{throw t instanceof Kt&&sV(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:iV(t),additionalUserInfo:QN(t),user:rp.getOrCreate(i)}})}async function zg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>kn(n,t.confirm(r))}}class oV{constructor(e,t){this.resolver=t,this.auth=rV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return kn(OS(this.auth),this.resolver.resolveSignIn(e))}}let rp=class lc{constructor(e){this._delegate=e,this.multiFactor=ZN(e)}static getOrCreate(e){return lc.USER_MAP.has(e)||lc.USER_MAP.set(e,new lc(e)),lc.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return kn(this.auth,hS(this._delegate,e))}async linkWithPhoneNumber(e,t){return zg(this.auth,ID(this._delegate,e,t))}async linkWithPopup(e){return kn(this.auth,xD(this._delegate,e,Es))}async linkWithRedirect(e){return await Bg(wt(this.auth)),jD(this._delegate,e,Es)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return kn(this.auth,dS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return zg(this.auth,TD(this._delegate,e,t))}reauthenticateWithPopup(e){return kn(this.auth,bD(this._delegate,e,Es))}async reauthenticateWithRedirect(e){return await Bg(wt(this.auth)),FD(this._delegate,e,Es)}sendEmailVerification(e){return FN(this._delegate,e)}async unlink(e){return await SN(this._delegate,e),this}updateEmail(e){return zN(this._delegate,e)}updatePassword(e){return qN(this._delegate,e)}updatePhoneNumber(e){return SD(this._delegate,e)}updateProfile(e){return BN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return UN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};rp.USER_MAP=new WeakMap;const Zu=ee;class qg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Zu(r,"invalid-api-key",{appName:e.name}),Zu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Es:void 0;this._delegate=t.initialize({options:{persistence:aV(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fx),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){tN(this._delegate,e,t)}applyActionCode(e){return kN(this._delegate,e)}checkActionCode(e){return fS(this._delegate,e)}confirmPasswordReset(e,t){return CN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return kn(this._delegate,xN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return MN(this._delegate,e)}isSignInWithEmailLink(e){return VN(this._delegate,e)}async getRedirectResult(){Zu(wg(),this._delegate,"operation-not-supported-in-this-environment");const e=await zD(this._delegate,Es);return e?kn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){q2(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:a,complete:l}=_I(e,t,r);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,t,r){const{next:i,error:a,complete:l}=_I(e,t,r);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,t){return DN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return PN(this._delegate,e,t||void 0)}async setPersistence(e){eV(this._delegate,e);let t;switch(e){case Hn.SESSION:t=qo;break;case Hn.LOCAL:t=await Gn(Mc)._isAvailable()?Mc:Jy;break;case Hn.NONE:t=_l;break;default:return rn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return kn(this._delegate,TN(this._delegate))}signInWithCredential(e){return kn(this._delegate,Yf(this._delegate,e))}signInWithCustomToken(e){return kn(this._delegate,RN(this._delegate,e))}signInWithEmailAndPassword(e,t){return kn(this._delegate,NN(this._delegate,e,t))}signInWithEmailLink(e,t){return kn(this._delegate,ON(this._delegate,e,t))}signInWithPhoneNumber(e,t){return zg(this._delegate,ED(this._delegate,e,t))}async signInWithPopup(e){return Zu(wg(),this._delegate,"operation-not-supported-in-this-environment"),kn(this._delegate,kD(this._delegate,e,Es))}async signInWithRedirect(e){return Zu(wg(),this._delegate,"operation-not-supported-in-this-environment"),await Bg(this._delegate),LD(this._delegate,e,Es)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return bN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}qg.Persistence=Hn;function _I(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:l=>i(l&&rp.getOrCreate(l)),error:e,complete:t}}function aV(n,e){const t=tV(n,e);if(typeof self<"u"&&!t.includes(Mc)&&t.push(Mc),typeof window<"u")for(const r of[Jy,qo])t.includes(r)||t.push(r);return t.includes(_l)||t.push(_l),t}class i_{static credential(e,t){return $o.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new $o(OS(lr.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}i_.PHONE_SIGN_IN_METHOD=$o.PHONE_SIGN_IN_METHOD;i_.PROVIDER_ID=$o.PROVIDER_ID;const lV=ee;class uV{constructor(e,t,r=lr.app()){lV(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new vD(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const cV="auth-compat";function hV(n){n.INTERNAL.registerComponent(new ar(cV,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new qg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ja.EMAIL_SIGNIN,PASSWORD_RESET:Ja.PASSWORD_RESET,RECOVER_EMAIL:Ja.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Ja.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Ja.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Ja.VERIFY_EMAIL}},EmailAuthProvider:zs,FacebookAuthProvider:Kr,GithubAuthProvider:Jr,GoogleAuthProvider:Qr,OAuthProvider:dl,SAMLAuthProvider:Ef,PhoneAuthProvider:i_,PhoneMultiFactorGenerator:kS,RecaptchaVerifier:uV,TwitterAuthProvider:Yr,Auth:qg,AuthCredential:ql,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion($2,W2)}hV(lr);var vI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Rs,MS;(function(){var n;function e(k,R){function C(){}C.prototype=R.prototype,k.F=R.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(L,D,U){for(var S=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)S[Re-2]=arguments[Re];return R.prototype[D].apply(L,S)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,R,C){C||(C=0);const L=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)L[D]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(D=0;D<16;++D)L[D]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=k.g[0],C=k.g[1],D=k.g[2];let U=k.g[3],S;S=R+(U^C&(D^U))+L[0]+3614090360&4294967295,R=C+(S<<7&4294967295|S>>>25),S=U+(D^R&(C^D))+L[1]+3905402710&4294967295,U=R+(S<<12&4294967295|S>>>20),S=D+(C^U&(R^C))+L[2]+606105819&4294967295,D=U+(S<<17&4294967295|S>>>15),S=C+(R^D&(U^R))+L[3]+3250441966&4294967295,C=D+(S<<22&4294967295|S>>>10),S=R+(U^C&(D^U))+L[4]+4118548399&4294967295,R=C+(S<<7&4294967295|S>>>25),S=U+(D^R&(C^D))+L[5]+1200080426&4294967295,U=R+(S<<12&4294967295|S>>>20),S=D+(C^U&(R^C))+L[6]+2821735955&4294967295,D=U+(S<<17&4294967295|S>>>15),S=C+(R^D&(U^R))+L[7]+4249261313&4294967295,C=D+(S<<22&4294967295|S>>>10),S=R+(U^C&(D^U))+L[8]+1770035416&4294967295,R=C+(S<<7&4294967295|S>>>25),S=U+(D^R&(C^D))+L[9]+2336552879&4294967295,U=R+(S<<12&4294967295|S>>>20),S=D+(C^U&(R^C))+L[10]+4294925233&4294967295,D=U+(S<<17&4294967295|S>>>15),S=C+(R^D&(U^R))+L[11]+2304563134&4294967295,C=D+(S<<22&4294967295|S>>>10),S=R+(U^C&(D^U))+L[12]+1804603682&4294967295,R=C+(S<<7&4294967295|S>>>25),S=U+(D^R&(C^D))+L[13]+4254626195&4294967295,U=R+(S<<12&4294967295|S>>>20),S=D+(C^U&(R^C))+L[14]+2792965006&4294967295,D=U+(S<<17&4294967295|S>>>15),S=C+(R^D&(U^R))+L[15]+1236535329&4294967295,C=D+(S<<22&4294967295|S>>>10),S=R+(D^U&(C^D))+L[1]+4129170786&4294967295,R=C+(S<<5&4294967295|S>>>27),S=U+(C^D&(R^C))+L[6]+3225465664&4294967295,U=R+(S<<9&4294967295|S>>>23),S=D+(R^C&(U^R))+L[11]+643717713&4294967295,D=U+(S<<14&4294967295|S>>>18),S=C+(U^R&(D^U))+L[0]+3921069994&4294967295,C=D+(S<<20&4294967295|S>>>12),S=R+(D^U&(C^D))+L[5]+3593408605&4294967295,R=C+(S<<5&4294967295|S>>>27),S=U+(C^D&(R^C))+L[10]+38016083&4294967295,U=R+(S<<9&4294967295|S>>>23),S=D+(R^C&(U^R))+L[15]+3634488961&4294967295,D=U+(S<<14&4294967295|S>>>18),S=C+(U^R&(D^U))+L[4]+3889429448&4294967295,C=D+(S<<20&4294967295|S>>>12),S=R+(D^U&(C^D))+L[9]+568446438&4294967295,R=C+(S<<5&4294967295|S>>>27),S=U+(C^D&(R^C))+L[14]+3275163606&4294967295,U=R+(S<<9&4294967295|S>>>23),S=D+(R^C&(U^R))+L[3]+4107603335&4294967295,D=U+(S<<14&4294967295|S>>>18),S=C+(U^R&(D^U))+L[8]+1163531501&4294967295,C=D+(S<<20&4294967295|S>>>12),S=R+(D^U&(C^D))+L[13]+2850285829&4294967295,R=C+(S<<5&4294967295|S>>>27),S=U+(C^D&(R^C))+L[2]+4243563512&4294967295,U=R+(S<<9&4294967295|S>>>23),S=D+(R^C&(U^R))+L[7]+1735328473&4294967295,D=U+(S<<14&4294967295|S>>>18),S=C+(U^R&(D^U))+L[12]+2368359562&4294967295,C=D+(S<<20&4294967295|S>>>12),S=R+(C^D^U)+L[5]+4294588738&4294967295,R=C+(S<<4&4294967295|S>>>28),S=U+(R^C^D)+L[8]+2272392833&4294967295,U=R+(S<<11&4294967295|S>>>21),S=D+(U^R^C)+L[11]+1839030562&4294967295,D=U+(S<<16&4294967295|S>>>16),S=C+(D^U^R)+L[14]+4259657740&4294967295,C=D+(S<<23&4294967295|S>>>9),S=R+(C^D^U)+L[1]+2763975236&4294967295,R=C+(S<<4&4294967295|S>>>28),S=U+(R^C^D)+L[4]+1272893353&4294967295,U=R+(S<<11&4294967295|S>>>21),S=D+(U^R^C)+L[7]+4139469664&4294967295,D=U+(S<<16&4294967295|S>>>16),S=C+(D^U^R)+L[10]+3200236656&4294967295,C=D+(S<<23&4294967295|S>>>9),S=R+(C^D^U)+L[13]+681279174&4294967295,R=C+(S<<4&4294967295|S>>>28),S=U+(R^C^D)+L[0]+3936430074&4294967295,U=R+(S<<11&4294967295|S>>>21),S=D+(U^R^C)+L[3]+3572445317&4294967295,D=U+(S<<16&4294967295|S>>>16),S=C+(D^U^R)+L[6]+76029189&4294967295,C=D+(S<<23&4294967295|S>>>9),S=R+(C^D^U)+L[9]+3654602809&4294967295,R=C+(S<<4&4294967295|S>>>28),S=U+(R^C^D)+L[12]+3873151461&4294967295,U=R+(S<<11&4294967295|S>>>21),S=D+(U^R^C)+L[15]+530742520&4294967295,D=U+(S<<16&4294967295|S>>>16),S=C+(D^U^R)+L[2]+3299628645&4294967295,C=D+(S<<23&4294967295|S>>>9),S=R+(D^(C|~U))+L[0]+4096336452&4294967295,R=C+(S<<6&4294967295|S>>>26),S=U+(C^(R|~D))+L[7]+1126891415&4294967295,U=R+(S<<10&4294967295|S>>>22),S=D+(R^(U|~C))+L[14]+2878612391&4294967295,D=U+(S<<15&4294967295|S>>>17),S=C+(U^(D|~R))+L[5]+4237533241&4294967295,C=D+(S<<21&4294967295|S>>>11),S=R+(D^(C|~U))+L[12]+1700485571&4294967295,R=C+(S<<6&4294967295|S>>>26),S=U+(C^(R|~D))+L[3]+2399980690&4294967295,U=R+(S<<10&4294967295|S>>>22),S=D+(R^(U|~C))+L[10]+4293915773&4294967295,D=U+(S<<15&4294967295|S>>>17),S=C+(U^(D|~R))+L[1]+2240044497&4294967295,C=D+(S<<21&4294967295|S>>>11),S=R+(D^(C|~U))+L[8]+1873313359&4294967295,R=C+(S<<6&4294967295|S>>>26),S=U+(C^(R|~D))+L[15]+4264355552&4294967295,U=R+(S<<10&4294967295|S>>>22),S=D+(R^(U|~C))+L[6]+2734768916&4294967295,D=U+(S<<15&4294967295|S>>>17),S=C+(U^(D|~R))+L[13]+1309151649&4294967295,C=D+(S<<21&4294967295|S>>>11),S=R+(D^(C|~U))+L[4]+4149444226&4294967295,R=C+(S<<6&4294967295|S>>>26),S=U+(C^(R|~D))+L[11]+3174756917&4294967295,U=R+(S<<10&4294967295|S>>>22),S=D+(R^(U|~C))+L[2]+718787259&4294967295,D=U+(S<<15&4294967295|S>>>17),S=C+(U^(D|~R))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+U&4294967295}r.prototype.v=function(k,R){R===void 0&&(R=k.length);const C=R-this.blockSize,L=this.C;let D=this.h,U=0;for(;U<R;){if(D==0)for(;U<=C;)i(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<R;)if(L[D++]=k.charCodeAt(U++),D==this.blockSize){i(this,L),D=0;break}}else for(;U<R;)if(L[D++]=k[U++],D==this.blockSize){i(this,L),D=0;break}}this.h=D,this.o+=R},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;R=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=R&255,R/=256;for(this.v(k),k=Array(16),R=0,C=0;C<4;++C)for(let L=0;L<32;L+=8)k[R++]=this.g[C]>>>L&255;return k};function a(k,R){var C=h;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=R(k)}function l(k,R){this.h=R;const C=[];let L=!0;for(let D=k.length-1;D>=0;D--){const U=k[D]|0;L&&U==R||(C[D]=U,L=!1)}this.g=C}var h={};function f(k){return-128<=k&&k<128?a(k,function(R){return new l([R|0],R<0?-1:0)}):new l([k|0],k<0?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return w;if(k<0)return O(m(-k));const R=[];let C=1;for(let L=0;k>=C;L++)R[L]=k/C|0,C*=4294967296;return new l(R,0)}function _(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return O(_(k.substring(1),R));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=m(Math.pow(R,8));let L=w;for(let U=0;U<k.length;U+=8){var D=Math.min(8,k.length-U);const S=parseInt(k.substring(U,U+D),R);D<8?(D=m(Math.pow(R,D)),L=L.j(D).add(m(S))):(L=L.j(C),L=L.add(m(S)))}return L}var w=f(0),I=f(1),b=f(16777216);n=l.prototype,n.m=function(){if(F(this))return-O(this).m();let k=0,R=1;for(let C=0;C<this.g.length;C++){const L=this.i(C);k+=(L>=0?L:4294967296+L)*R,R*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(F(this))return"-"+O(this).toString(k);const R=m(Math.pow(k,6));var C=this;let L="";for(;;){const D=de(C,R).g;C=K(C,D.j(R));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=D,x(C))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(let R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function F(k){return k.h==-1}n.l=function(k){return k=K(this,k),F(k)?-1:x(k)?0:1};function O(k){const R=k.g.length,C=[];for(let L=0;L<R;L++)C[L]=~k.g[L];return new l(C,~k.h).add(I)}n.abs=function(){return F(this)?O(this):this},n.add=function(k){const R=Math.max(this.g.length,k.g.length),C=[];let L=0;for(let D=0;D<=R;D++){let U=L+(this.i(D)&65535)+(k.i(D)&65535),S=(U>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);L=S>>>16,U&=65535,S&=65535,C[D]=S<<16|U}return new l(C,C[C.length-1]&-2147483648?-1:0)};function K(k,R){return k.add(O(R))}n.j=function(k){if(x(this)||x(k))return w;if(F(this))return F(k)?O(this).j(O(k)):O(O(this).j(k));if(F(k))return O(this.j(O(k)));if(this.l(b)<0&&k.l(b)<0)return m(this.m()*k.m());const R=this.g.length+k.g.length,C=[];for(var L=0;L<2*R;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(let D=0;D<k.g.length;D++){const U=this.i(L)>>>16,S=this.i(L)&65535,Re=k.i(D)>>>16,Xe=k.i(D)&65535;C[2*L+2*D]+=S*Xe,ae(C,2*L+2*D),C[2*L+2*D+1]+=U*Xe,ae(C,2*L+2*D+1),C[2*L+2*D+1]+=S*Re,ae(C,2*L+2*D+1),C[2*L+2*D+2]+=U*Re,ae(C,2*L+2*D+2)}for(k=0;k<R;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=R;k<2*R;k++)C[k]=0;return new l(C,0)};function ae(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function ne(k,R){this.g=k,this.h=R}function de(k,R){if(x(R))throw Error("division by zero");if(x(k))return new ne(w,w);if(F(k))return R=de(O(k),R),new ne(O(R.g),O(R.h));if(F(R))return R=de(k,O(R)),new ne(O(R.g),R.h);if(k.g.length>30){if(F(k)||F(R))throw Error("slowDivide_ only works with positive integers.");for(var C=I,L=R;L.l(k)<=0;)C=ue(C),L=ue(L);var D=me(C,1),U=me(L,1);for(L=me(L,2),C=me(C,2);!x(L);){var S=U.add(L);S.l(k)<=0&&(D=D.add(C),U=S),L=me(L,1),C=me(C,1)}return R=K(k,D.j(R)),new ne(D,R)}for(D=w;k.l(R)>=0;){for(C=Math.max(1,Math.floor(k.m()/R.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=m(C),S=U.j(R);F(S)||S.l(k)>0;)C-=L,U=m(C),S=U.j(R);x(U)&&(U=I),D=D.add(U),k=K(k,S)}return new ne(D,k)}n.B=function(k){return de(this,k).h},n.and=function(k){const R=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<R;L++)C[L]=this.i(L)&k.i(L);return new l(C,this.h&k.h)},n.or=function(k){const R=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<R;L++)C[L]=this.i(L)|k.i(L);return new l(C,this.h|k.h)},n.xor=function(k){const R=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<R;L++)C[L]=this.i(L)^k.i(L);return new l(C,this.h^k.h)};function ue(k){const R=k.g.length+1,C=[];for(let L=0;L<R;L++)C[L]=k.i(L)<<1|k.i(L-1)>>>31;return new l(C,k.h)}function me(k,R){const C=R>>5;R%=32;const L=k.g.length-C,D=[];for(let U=0;U<L;U++)D[U]=R>0?k.i(U+C)>>>R|k.i(U+C+1)<<32-R:k.i(U+C);return new l(D,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,MS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=_,Rs=l}).apply(typeof vI<"u"?vI:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var FS,uc,US,tf,$g,jS,BS,zS;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(c,y){if(y)e:{var v=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var z=c[T];if(!(z in v))break e;v=v[z]}c=c[c.length-1],T=v[c],y=y(T),y!=T&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(y){var v=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&v.push([T,y[T]]);return v}});var a=a||{},l=this||self;function h(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function f(c,y,v){return c.call.apply(c.bind,arguments)}function m(c,y,v){return m=f,m.apply(null,arguments)}function _(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function w(c,y){function v(){}v.prototype=y.prototype,c.Z=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(T,z,H){for(var se=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)se[xe-2]=arguments[xe];return y.prototype[z].apply(T,se)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function b(c){const y=c.length;if(y>0){const v=Array(y);for(let T=0;T<y;T++)v[T]=c[T];return v}return[]}function x(c,y){for(let T=1;T<arguments.length;T++){const z=arguments[T];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=c.length||0;const H=z.length||0;c.length=v+H;for(let se=0;se<H;se++)c[v+se]=z[se]}else c.push(z)}}class F{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(c){l.setTimeout(()=>{throw c},0)}function K(){var c=k;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class ae{constructor(){this.h=this.g=null}add(y,v){const T=ne.get();T.set(y,v),this.h?this.h.next=T:this.g=T,this.h=T}}var ne=new F(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,me=!1,k=new ae,R=()=>{const c=Promise.resolve(void 0);ue=()=>{c.then(C)}};function C(){for(var c;c=K();){try{c.h.call(c.g)}catch(v){O(v)}var y=ne;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}me=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};l.addEventListener("test",v,y),l.removeEventListener("test",v,y)}catch{}return c})();function S(c){return/^[\s\xa0]*$/.test(c)}function Re(c,y){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}w(Re,D),Re.prototype.init=function(c,y){const v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Le=0;function Ue(c,y,v,T,z){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!T,this.ha=z,this.key=++Le,this.da=this.fa=!1}function re(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ve(c,y,v){for(const T in c)y.call(v,c[T],T,c)}function ce(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function M(c){const y={};for(const v in c)y[v]=c[v];return y}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(c,y){let v,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(v in T)c[v]=T[v];for(let H=0;H<Q.length;H++)v=Q[H],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function Ce(c){this.src=c,this.g={},this.h=0}Ce.prototype.add=function(c,y,v,T,z){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const se=je(c,y,T,z);return se>-1?(y=c[se],v||(y.fa=!1)):(y=new Ue(y,this.src,H,!!T,z),y.fa=v,c.push(y)),y};function Ve(c,y){const v=y.type;if(v in c.g){var T=c.g[v],z=Array.prototype.indexOf.call(T,y,void 0),H;(H=z>=0)&&Array.prototype.splice.call(T,z,1),H&&(re(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function je(c,y,v,T){for(let z=0;z<c.length;++z){const H=c[z];if(!H.da&&H.listener==y&&H.capture==!!v&&H.ha==T)return z}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),$e={};function nt(c,y,v,T,z){if(Array.isArray(y)){for(let H=0;H<y.length;H++)nt(c,y[H],v,T,z);return null}return v=nu(v),c&&c[Xe]?c.J(y,v,h(T)?!!T.capture:!1,z):gn(c,y,v,!1,T,z)}function gn(c,y,v,T,z,H){if(!y)throw Error("Invalid event type");const se=h(z)?!!z.capture:!!z;let xe=ca(c);if(xe||(c[Je]=xe=new Ce(c)),v=xe.add(y,v,T,se,H),v.proxy)return v;if(T=la(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)U||(z=se),z===void 0&&(z=!1),c.addEventListener(y.toString(),T,z);else if(c.attachEvent)c.attachEvent(ua(y.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function la(){function c(v){return y.call(c.src,c.listener,v)}const y=Rh;return c}function tu(c,y,v,T,z){if(Array.isArray(y))for(var H=0;H<y.length;H++)tu(c,y[H],v,T,z);else T=h(T)?!!T.capture:!!T,v=nu(v),c&&c[Xe]?(c=c.i,H=String(y).toString(),H in c.g&&(y=c.g[H],v=je(y,v,T,z),v>-1&&(re(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete c.g[H],c.h--)))):c&&(c=ca(c))&&(y=c.g[y.toString()],c=-1,y&&(c=je(y,v,T,z)),(v=c>-1?y[c]:null)&&Ui(v))}function Ui(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Xe])Ve(y.i,c);else{var v=c.type,T=c.proxy;y.removeEventListener?y.removeEventListener(v,T,c.capture):y.detachEvent?y.detachEvent(ua(v),T):y.addListener&&y.removeListener&&y.removeListener(T),(v=ca(y))?(Ve(v,c),v.h==0&&(v.src=null,y[Je]=null)):re(c)}}}function ua(c){return c in $e?$e[c]:$e[c]="on"+c}function Rh(c,y){if(c.da)c=!0;else{y=new Re(y,this);const v=c.listener,T=c.ha||c.src;c.fa&&Ui(c),c=v.call(T,y)}return c}function ca(c){return c=c[Je],c instanceof Ce?c:null}var Ks="__closure_events_fn_"+(Math.random()*1e9>>>0);function nu(c){return typeof c=="function"?c:(c[Ks]||(c[Ks]=function(y){return c.handleEvent(y)}),c[Ks])}function Dt(){L.call(this),this.i=new Ce(this),this.M=this,this.G=null}w(Dt,L),Dt.prototype[Xe]=!0,Dt.prototype.removeEventListener=function(c,y,v,T){tu(this,c,y,v,T)};function Rt(c,y){var v,T=c.G;if(T)for(v=[];T;T=T.G)v.push(T);if(c=c.M,T=y.type||y,typeof y=="string")y=new D(y,c);else if(y instanceof D)y.target=y.target||c;else{var z=y;y=new D(T,c),Pe(y,z)}z=!0;let H,se;if(v)for(se=v.length-1;se>=0;se--)H=y.g=v[se],z=cr(H,T,!0,y)&&z;if(H=y.g=c,z=cr(H,T,!0,y)&&z,z=cr(H,T,!1,y)&&z,v)for(se=0;se<v.length;se++)H=y.g=v[se],z=cr(H,T,!1,y)&&z}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const v=c.g[y];for(let T=0;T<v.length;T++)re(v[T]);delete c.g[y],c.h--}}this.G=null},Dt.prototype.J=function(c,y,v,T){return this.i.add(String(c),y,!1,v,T)},Dt.prototype.K=function(c,y,v,T){return this.i.add(String(c),y,!0,v,T)};function cr(c,y,v,T){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let H=0;H<y.length;++H){const se=y[H];if(se&&!se.da&&se.capture==v){const xe=se.listener,Pt=se.ha||se.src;se.fa&&Ve(c.i,se),z=xe.call(Pt,T)!==!1&&z}}return z&&!T.defaultPrevented}function ru(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:l.setTimeout(c,y||0)}function iu(c){c.g=ru(()=>{c.g=null,c.i&&(c.i=!1,iu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Ph extends L{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(c){L.call(this),this.h=c,this.g={}}w(ji,L);var su=[];function ha(c){ve(c.g,function(y,v){this.g.hasOwnProperty(v)&&Ui(y)},c),c.g={}}ji.prototype.N=function(){ji.Z.N.call(this),ha(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=l.JSON.stringify,Ch=l.JSON.parse,Qs=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function zi(){}function kh(){}var qi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function da(){D.call(this,"d")}w(da,D);function ou(){D.call(this,"c")}w(ou,D);var hr={},fa=null;function $i(){return fa=fa||new Dt}hr.Ia="serverreachability";function pa(c){D.call(this,hr.Ia,c)}w(pa,D);function ai(c){const y=$i();Rt(y,new pa(y))}hr.STAT_EVENT="statevent";function li(c,y){D.call(this,hr.STAT_EVENT,c),this.stat=y}w(li,D);function Et(c){const y=$i();Rt(y,new li(y,c))}hr.Ja="timingevent";function au(c,y){D.call(this,hr.Ja,c),this.size=y}w(au,D);function Wi(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},y)}function Hi(){this.g=!0}Hi.prototype.ua=function(){this.g=!1};function bh(c,y,v,T,z,H){c.info(function(){if(c.g)if(H){var se="",xe=H.split("&");for(let Ze=0;Ze<xe.length;Ze++){var Pt=xe[Ze].split("=");if(Pt.length>1){const Vt=Pt[0];Pt=Pt[1];const Bn=Vt.split("_");se=Bn.length>=2&&Bn[1]=="type"?se+(Vt+"="+Pt+"&"):se+(Vt+"=redacted&")}}}else se=null;else se=H;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+y+`
`+v+`
`+se})}function xh(c,y,v,T,z,H,se){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+y+`
`+v+`
`+H+" "+se})}function Rr(c,y,v,T){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Js(c,v)+(T?" "+T:"")})}function Nh(c,y){c.info(function(){return"TIMEOUT: "+y})}Hi.prototype.info=function(){};function Js(c,y){if(!c.g)return y;if(!y)return null;try{const H=JSON.parse(y);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let se=1;se<T.length;se++)T[se]=""}}}}return Bi(H)}catch{return y}}var Gi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dh;function ui(){}w(ui,zi),ui.prototype.g=function(){return new XMLHttpRequest},Dh=new ui;function Pr(c){return encodeURIComponent(String(c))}function ma(c){var y=1;c=c.split(":");const v=[];for(;y>0&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function Yn(c,y,v,T){this.j=c,this.i=y,this.l=v,this.S=T||1,this.V=new ji(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Vh}function Vh(){this.i=null,this.g="",this.h=!1}var Oh={},lu={};function dr(c,y,v){c.M=1,c.A=hi(Xn(y)),c.u=v,c.R=!0,uu(c,null)}function uu(c,y){c.F=Date.now(),Ys(c),c.B=Xn(c.A);var v=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),vu(v.i,"t",T),c.C=0,v=c.j.L,c.h=new Vh,c.g=Wh(c.j,v?y:null,!c.u),c.P>0&&(c.O=new Ph(m(c.Y,c,c.g),c.P)),y=c.V,v=c.g,T=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(su[0]=z.toString()),z=su);for(let H=0;H<z.length;H++){const se=nt(v,z[H],T||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),ai(),bh(c.i,c.v,c.B,c.l,c.S,c.u)}Yn.prototype.ba=function(c){c=c.target;const y=this.O;y&&Vr(c)==3?y.j():this.Y(c)},Yn.prototype.Y=function(c){try{if(c==this.g)e:{const xe=Vr(this.g),Pt=this.g.ya(),Ze=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||qh(this.g)))){this.K||xe!=4||Pt==7||(Pt==8||Ze<=0?ai(3):ai(2)),ga(this);var y=this.g.ca();this.X=y;var v=Lh(this);if(this.o=y==200,xh(this.i,this.v,this.B,this.l,this.S,xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(T)){var H=T;break t}}H=null}if(c=H)Rr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,lt(this,c);else{this.o=!1,this.m=3,Et(12),ci(this),Xs(this);break e}}if(this.R){c=!0;let Vt;for(;!this.K&&this.C<v.length;)if(Vt=Fh(this,v),Vt==lu){xe==4&&(this.m=4,Et(14),c=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Oh){this.m=4,Et(15),Rr(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Rr(this.i,this.l,Vt,null),lt(this,Vt);if(Mh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||v.length!=0||this.h.h||(this.m=1,Et(16),c=!1),this.o=this.o&&c,!c)Rr(this.i,this.l,v,"[Invalid Chunked Response]"),ci(this),Xs(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),ao(se),se.P=!0,Et(11))}}else Rr(this.i,this.l,v,null),lt(this,v);xe==4&&ci(this),this.o&&!this.K&&(xe==4?Ra(this.j,this):(this.o=!1,Ys(this)))}else Eu(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),ci(this),Xs(this)}}}catch{}};function Lh(c){if(!Mh(c))return c.g.la();const y=qh(c.g);if(y==="")return"";let v="";const T=y.length,z=Vr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ci(c),Xs(c),"";c.h.i=new l.TextDecoder}for(let H=0;H<T;H++)c.h.h=!0,v+=c.h.i.decode(y[H],{stream:!(z&&H==T-1)});return y.length=0,c.h.g+=v,c.C=0,c.h.g}function Mh(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Fh(c,y){var v=c.C,T=y.indexOf(`
`,v);return T==-1?lu:(v=Number(y.substring(v,T)),isNaN(v)?Oh:(T+=1,T+v>y.length?lu:(y=y.slice(T,T+v),c.C=T+v,y)))}Yn.prototype.cancel=function(){this.K=!0,ci(this)};function Ys(c){c.T=Date.now()+c.H,cu(c,c.H)}function cu(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Wi(m(c.aa,c),y)}function ga(c){c.D&&(l.clearTimeout(c.D),c.D=null)}Yn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Nh(this.i,this.B),this.M!=2&&(ai(),Et(17)),ci(this),this.m=2,Xs(this)):cu(this,this.T-c)};function Xs(c){c.j.I==0||c.K||Ra(c.j,c)}function ci(c){ga(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,ha(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function lt(c,y){try{var v=c.j;if(v.I!=0&&(v.g==c||du(v.h,c))){if(!c.L&&du(v.h,c)&&v.I==3){try{var T=v.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Aa(v),Un(v);else break e;Mr(v),Et(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Wi(m(v.Va,v),6e3));Zs(v.h)<=1&&v.ta&&(v.ta=void 0)}else jn(v,11)}else if((c.L||v.g==c)&&Aa(v),!S(y))for(z=v.Ba.g.parse(y),y=0;y<z.length;y++){let Ze=z[y];const Vt=Ze[0];if(!(Vt<=v.K))if(v.K=Vt,Ze=Ze[1],v.I==2)if(Ze[0]=="c"){v.M=Ze[1],v.ba=Ze[2];const Bn=Ze[3];Bn!=null&&(v.ka=Bn,v.j.info("VER="+v.ka));const gi=Ze[4];gi!=null&&(v.za=gi,v.j.info("SVER="+v.za));const Fr=Ze[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(T=1.5*Fr,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const Ur=c.g;if(Ur){const ka=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var H=T.h;H.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(_a(H,H.h),H.h=null))}if(T.G){const Su=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Su&&(T.wa=Su,Qe(T.J,T.G,Su))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var se=c;if(T.na=Tu(T,T.L?T.ba:null,T.W),se.L){eo(T.h,se);var xe=se,Pt=T.O;Pt&&(xe.H=Pt),xe.D&&(ga(xe),Ys(xe)),T.g=se}else sn(T);v.i.length>0&&mi(v)}else Ze[0]!="stop"&&Ze[0]!="close"||jn(v,7);else v.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?jn(v,7):Ta(v):Ze[0]!="noop"&&v.l&&v.l.qa(Ze),v.A=0)}}ai(4)}catch{}}var Lp=class{constructor(c,y){this.g=c,this.map=y}};function ya(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function hu(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zs(c){return c.h?1:c.g?c.g.size:0}function du(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function _a(c,y){c.g?c.g.add(y):c.h=y}function eo(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}ya.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ln(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.G);return y}return b(c.i)}var Uh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mn(c,y){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const T=c[v].indexOf("=");let z,H=null;T>=0?(z=c[v].substring(0,T),H=c[v].substring(T+1)):z=c[v],y(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Cr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Cr?(this.l=c.l,to(this,c.j),this.o=c.o,this.g=c.g,kr(this,c.u),this.h=c.h,Qi(this,wu(c.i)),this.m=c.m):c&&(y=String(c).match(Uh))?(this.l=!1,to(this,y[1]||"",!0),this.o=no(y[2]||""),this.g=no(y[3]||"",!0),kr(this,y[4]),this.h=no(y[5]||"",!0),Qi(this,y[6]||"",!0),this.m=no(y[7]||"")):(this.l=!1,this.i=new ze(null,this.l))}Cr.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ro(y,pu,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ro(y,pu,!0),"@"),c.push(Pr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ro(v,v.charAt(0)=="/"?io:mu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ro(v,gu)),c.join("")},Cr.prototype.resolve=function(c){const y=Xn(this);let v=!!c.j;v?to(y,c.j):v=!!c.o,v?y.o=c.o:v=!!c.g,v?y.g=c.g:v=c.u!=null;var T=c.h;if(v)kr(y,c.u);else if(v=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=y.h.lastIndexOf("/");z!=-1&&(T=y.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let se=0;se<z.length;){const xe=z[se++];xe=="."?T&&se==z.length&&H.push(""):xe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),T&&se==z.length&&H.push("")):(H.push(xe),T=!0)}T=H.join("/")}else T=z}return v?y.h=T:v=c.i.toString()!=="",v?Qi(y,wu(c.i)):v=!!c.m,v&&(y.m=c.m),y};function Xn(c){return new Cr(c)}function to(c,y,v){c.j=v?no(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function kr(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function Qi(c,y,v){y instanceof ze?(c.i=y,wa(c.i,c.l)):(v||(y=ro(y,Mp)),c.i=new ze(y,c.l))}function Qe(c,y,v){c.i.set(y,v)}function hi(c){return Qe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function no(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ro(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,fu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pu=/[#\/\?@]/g,mu=/[#\?:]/g,io=/[#\?]/g,Mp=/[#\?@]/g,gu=/#/g;function ze(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function br(c){c.g||(c.g=new Map,c.h=0,c.i&&Mn(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=ze.prototype,n.add=function(c,y){br(this),this.i=null,c=xr(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function yu(c,y){br(c),y=xr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function va(c,y){return br(c),y=xr(c,y),c.g.has(y)}n.forEach=function(c,y){br(this),this.g.forEach(function(v,T){v.forEach(function(z){c.call(y,z,T,this)},this)},this)};function _u(c,y){br(c);let v=[];if(typeof y=="string")va(c,y)&&(v=v.concat(c.g.get(xr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)v=v.concat(c[y]);return v}n.set=function(c,y){return br(this),this.i=null,c=xr(this,c),va(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},n.get=function(c,y){return c?(c=_u(this,c),c.length>0?String(c[0]):y):y};function vu(c,y,v){yu(c,y),v.length>0&&(c.i=null,c.g.set(xr(c,y),b(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var v=y[T];const z=Pr(v);v=_u(this,v);for(let H=0;H<v.length;H++){let se=z;v[H]!==""&&(se+="="+Pr(v[H])),c.push(se)}}return this.i=c.join("&")};function wu(c){const y=new ze;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function xr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function wa(c,y){y&&!c.j&&(br(c),c.i=null,c.g.forEach(function(v,T){const z=T.toLowerCase();T!=z&&(yu(this,T),vu(this,z,v))},c)),c.j=y}function Nr(c,y){const v=new Hi;if(l.Image){const T=new Image;T.onload=_(Jt,v,"TestLoadImage: loaded",!0,y,T),T.onerror=_(Jt,v,"TestLoadImage: error",!1,y,T),T.onabort=_(Jt,v,"TestLoadImage: abort",!1,y,T),T.ontimeout=_(Jt,v,"TestLoadImage: timeout",!1,y,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else y(!1)}function Dr(c,y){const v=new Hi,T=new AbortController,z=setTimeout(()=>{T.abort(),Jt(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:T.signal}).then(H=>{clearTimeout(z),H.ok?Jt(v,"TestPingServer: ok",!0,y):Jt(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),Jt(v,"TestPingServer: error",!1,y)})}function Jt(c,y,v,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(v)}catch{}}function so(){this.g=new Qs}function di(c){this.i=c.Sb||null,this.h=c.ab||!1}w(di,zi),di.prototype.g=function(){return new Fn(this.i,this.h)};function Fn(c,y){Dt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Fn,Dt),n=Fn.prototype,n.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,fr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||l).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jh(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function jh(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ji(this):fr(this),this.readyState==3&&jh(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ji(this))},n.Na=function(c){this.g&&(this.response=c,Ji(this))},n.ga=function(){this.g&&Ji(this)};function Ji(c){c.readyState=4,c.l=null,c.j=null,c.B=null,fr(c)}n.setRequestHeader=function(c,y){this.A.append(c,y)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function fr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bh(c){let y="";return ve(c,function(v,T){y+=T,y+=":",y+=v,y+=`\r
`}),y}function Ea(c,y,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Bh(v),typeof c=="string"?v!=null&&Pr(v):Qe(c,y,v))}function rt(c){Dt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(rt,Dt);var zh=/^https?$/i,Fp=["POST","PUT"];n=rt.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,y,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dh.g(),this.g.onreadystatechange=I(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(H){Yi(this,H);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)v.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),z=l.FormData&&c instanceof l.FormData,!(Array.prototype.indexOf.call(Fp,y,void 0)>=0)||T||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,se]of v)this.g.setRequestHeader(H,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Yi(this,H)}};function Yi(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,Xi(c),pi(c)}function Xi(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Rt(this,"complete"),Rt(this,"abort"),pi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?fi(this):this.Xa())},n.Xa=function(){fi(this)};function fi(c){if(c.h&&typeof a<"u"){if(c.v&&Vr(c)==4)setTimeout(c.Ca.bind(c),0);else if(Rt(c,"readystatechange"),Vr(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var T;if(T=H===0){let se=String(c.D).match(Uh)[1]||null;!se&&l.self&&l.self.location&&(se=l.self.location.protocol.slice(0,-1)),T=!zh.test(se?se.toLowerCase():"")}v=T}if(v)Rt(c,"complete"),Rt(c,"success");else{c.o=6;try{var z=Vr(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",Xi(c)}}finally{pi(c)}}}}function pi(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,y||Rt(c,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Vr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Ch(y)}};function qh(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Eu(c){const y={};c=(c.g&&Vr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(S(c[T]))continue;var v=ma(c[T]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=y[z]||[];y[z]=H,H.push(v)}ce(y,function(T){return T.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ia(c){this.za=0,this.i=[],this.j=new Hi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Or("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Or("baseRetryDelayMs",5e3,c),this.Za=Or("retryDelaySeedMs",1e4,c),this.Ta=Or("forwardChannelMaxRetries",2,c),this.va=Or("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ya(c&&c.concurrentRequestLimit),this.Ba=new so,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ia.prototype,n.ka=8,n.I=1,n.connect=function(c,y,v,T){Et(0),this.W=c,this.H=y||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=Tu(this,null,this.W),mi(this)};function Ta(c){if(Sa(c),c.I==3){var y=c.V++,v=Xn(c.J);if(Qe(v,"SID",c.M),Qe(v,"RID",y),Qe(v,"TYPE","terminate"),Lr(c,v),y=new Yn(c,c.j,y),y.M=2,y.A=hi(Xn(v)),v=!1,l.navigator&&l.navigator.sendBeacon)try{v=l.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&l.Image&&(new Image().src=y.A,v=!0),v||(y.g=Wh(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ys(y)}lo(c)}function Un(c){c.g&&(ao(c),c.g.cancel(),c.g=null)}function Sa(c){Un(c),c.v&&(l.clearTimeout(c.v),c.v=null),Aa(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&l.clearTimeout(c.m),c.m=null)}function mi(c){if(!hu(c.h)&&!c.m){c.m=!0;var y=c.Ea;ue||R(),me||(ue(),me=!0),k.add(y,c),c.D=0}}function $h(c,y){return Zs(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Wi(m(c.Ea,c,y),Pa(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Yn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=M(H),Pe(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Iu(this,z,y),v=Xn(this.J),Qe(v,"RID",c),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),Lr(this,v),H&&(this.R?y="headers="+Pr(Bh(H))+"&"+y:this.u&&Ea(v,this.u,H)),_a(this.h,z),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",y),Qe(v,"SID","null"),z.U=!0,dr(z,v,null)):dr(z,v,y),this.I=2}}else this.I==3&&(c?oo(this,c):this.i.length==0||hu(this.h)||oo(this))};function oo(c,y){var v;y?v=y.l:v=c.V++;const T=Xn(c.J);Qe(T,"SID",c.M),Qe(T,"RID",v),Qe(T,"AID",c.K),Lr(c,T),c.u&&c.o&&Ea(T,c.u,c.o),v=new Yn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Iu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),_a(c.h,v),dr(v,T,y)}function Lr(c,y){c.H&&ve(c.H,function(v,T){Qe(y,T,v)}),c.l&&ve({},function(v,T){Qe(y,T,v)})}function Iu(c,y,v){v=Math.min(c.i.length,v);const T=c.l?m(c.l.Ka,c.l,c):null;e:{var z=c.i;let xe=-1;for(;;){const Pt=["count="+v];xe==-1?v>0?(xe=z[0].g,Pt.push("ofs="+xe)):xe=0:Pt.push("ofs="+xe);let Ze=!0;for(let Vt=0;Vt<v;Vt++){var H=z[Vt].g;const Bn=z[Vt].map;if(H-=xe,H<0)xe=Math.max(0,z[Vt].g-100),Ze=!1;else try{H="req"+H+"_"||"";try{var se=Bn instanceof Map?Bn:Object.entries(Bn);for(const[gi,Fr]of se){let Ur=Fr;h(Fr)&&(Ur=Bi(Fr)),Pt.push(H+gi+"="+encodeURIComponent(Ur))}}catch(gi){throw Pt.push(H+"type="+encodeURIComponent("_badmap")),gi}}catch{T&&T(Bn)}}if(Ze){se=Pt.join("&");break e}}se=void 0}return c=c.i.splice(0,v),y.G=c,se}function sn(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ue||R(),me||(ue(),me=!0),k.add(y,c),c.A=0}}function Mr(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Wi(m(c.Da,c),Pa(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Zi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Wi(m(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Un(this),Zi(this))};function ao(c){c.B!=null&&(l.clearTimeout(c.B),c.B=null)}function Zi(c){c.g=new Yn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=Xn(c.na);Qe(y,"RID","rpc"),Qe(y,"SID",c.M),Qe(y,"AID",c.K),Qe(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&Qe(y,"TO",c.ia),Qe(y,"TYPE","xmlhttp"),Lr(c,y),c.u&&c.o&&Ea(y,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=hi(Xn(y)),v.u=null,v.R=!0,uu(v,c)}n.Va=function(){this.C!=null&&(this.C=null,Un(this),Mr(this),Et(19))};function Aa(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Ra(c,y){var v=null;if(c.g==y){Aa(c),ao(c),c.g=null;var T=2}else if(du(c.h,y))v=y.G,eo(c.h,y),T=1;else return;if(c.I!=0){if(y.o)if(T==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var z=c.D;T=$i(),Rt(T,new au(T,v)),mi(c)}else sn(c);else if(z=y.m,z==3||z==0&&y.X>0||!(T==1&&$h(c,y)||T==2&&Mr(c)))switch(v&&v.length>0&&(y=c.h,y.i=y.i.concat(v)),z){case 1:jn(c,5);break;case 4:jn(c,10);break;case 3:jn(c,6);break;default:jn(c,2)}}}function Pa(c,y){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*y}function jn(c,y){if(c.j.info("Error code "+y),y==2){var v=m(c.bb,c),T=c.Ua;const z=!T;T=new Cr(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||to(T,"https"),hi(T),z?Nr(T.toString(),v):Dr(T.toString(),v)}else Et(2);c.I=0,c.l&&c.l.pa(y),lo(c),Sa(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function lo(c){if(c.I=0,c.ja=[],c.l){const y=Ln(c.h);(y.length!=0||c.i.length!=0)&&(x(c.ja,y),x(c.ja,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.oa()}}function Tu(c,y,v){var T=v instanceof Cr?Xn(v):new Cr(v);if(T.g!="")y&&(T.g=y+"."+T.g),kr(T,T.u);else{var z=l.location;T=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const H=new Cr(null);T&&to(H,T),y&&(H.g=y),z&&kr(H,z),v&&(H.h=v),T=H}return v=c.G,y=c.wa,v&&y&&Qe(T,v,y),Qe(T,"VER",c.ka),Lr(c,T),T}function Wh(c,y,v){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new rt(new di({ab:v})):new rt(c.ma),y.Fa(c.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hh(){}n=Hh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ca(){}Ca.prototype.g=function(c,y){return new Yt(c,y)};function Yt(c,y){Dt.call(this),this.g=new Ia(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!S(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!S(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new es(this)}w(Yt,Dt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ta(this.g)},Yt.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Bi(c),c=v);y.i.push(new Lp(y.Ya++,c)),y.I==3&&mi(y)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ta(this.g),delete this.g,Yt.Z.N.call(this)};function Gh(c){da.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}w(Gh,da);function Kh(){ou.call(this),this.status=1}w(Kh,ou);function es(c){this.g=c}w(es,Hh),es.prototype.ra=function(){Rt(this.g,"a")},es.prototype.qa=function(c){Rt(this.g,new Gh(c))},es.prototype.pa=function(c){Rt(this.g,new Kh)},es.prototype.oa=function(){Rt(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,zS=function(){return new Ca},BS=function(){return $i()},jS=hr,$g={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,tf=Gi,Ki.COMPLETE="complete",US=Ki,kh.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,uc=kh,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,FS=rt}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});const wI="@firebase/firestore",EI="4.9.3";class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");let Wl="12.7.0";const Ns=new Hf("@firebase/firestore");function rl(){return Ns.logLevel}function dV(n){Ns.setLogLevel(n)}function X(n,...e){if(Ns.logLevel<=Me.DEBUG){const t=e.map(s_);Ns.debug(`Firestore (${Wl}): ${n}`,...t)}}function kt(n,...e){if(Ns.logLevel<=Me.ERROR){const t=e.map(s_);Ns.error(`Firestore (${Wl}): ${n}`,...t)}}function si(n,...e){if(Ns.logLevel<=Me.WARN){const t=e.map(s_);Ns.warn(`Firestore (${Wl}): ${n}`,...t)}}function s_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,qS(n,r,t)}function qS(n,e,t){let r=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw kt(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||qS(e,i,r)}function fV(n,e){n||he(57014,e)}function le(n,e){return n}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Kt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class nn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class $S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class mV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class gV{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new nn,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},h=f=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new nn)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new $S(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class yV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _V{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new yV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class II{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);const r=a=>{a.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,X("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new II(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new II(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function wV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class o_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=wV(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function be(n,e){return n<e?-1:n>e?1:0}function Wg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Eg(i)===Eg(a)?be(i,a):Eg(i)?1:-1}return be(n.length,e.length)}const EV=55296,IV=57343;function Eg(n){const e=n.charCodeAt(0);return e>=EV&&e<=IV}function wl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function WS(n){return n+"\0"}const TI="__name__";class Wr{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Wr.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return be(e.length,t.length)}static compareSegments(e,t){const r=Wr.isNumericId(e),i=Wr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Wr.extractNumericId(e).compare(Wr.extractNumericId(t)):Wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rs.fromString(e.substring(4,e.length-2))}}class Fe extends Wr{construct(e,t,r){return new Fe(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Fe(t)}static emptyPath(){return new Fe([])}}const TV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Wr{construct(e,t,r){return new mt(e,t,r)}static isValidIdentifier(e){return TV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TI}static keyField(){return new mt([TI])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new J(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new J(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new J(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new J(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(t)}static emptyPath(){return new mt([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Fe.fromString(e))}static fromName(e){return new oe(Fe.fromString(e).popFirst(5))}static empty(){return new oe(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Fe(e.slice()))}}function a_(n,e,t){if(!t)throw new J(W.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HS(n,e,t,r){if(e===!0&&r===!0)throw new J(W.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SI(n){if(!oe.isDocumentKey(n))throw new J(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AI(n){if(oe.isDocumentKey(n))throw new J(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function GS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ip(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function Ke(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ip(n);throw new J(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function KS(n,e){if(e<=0)throw new J(W.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ft(n,e){const t={typeString:n};return e&&(t.value=e),t}function ah(n,e){if(!GS(n))throw new J(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new J(W.INVALID_ARGUMENT,t);return!0}const RI=-62135596800,PI=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*PI);return new Ye(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RI)throw new J(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PI}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ah(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:Ft("string",Ye._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ye(0,0))}static max(){return new Ee(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const El=-1;class Af{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Hg(n){return n.fields.find((e=>e.kind===2))}function So(n){return n.fields.filter((e=>e.kind!==2))}Af.UNKNOWN_ID=-1;class nf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fc(0,Jn.min())}}function QS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new Ye(t+1,0):new Ye(t,r));return new Jn(i,oe.empty(),e)}function JS(n){return new Jn(n.readTime,n.key,El)}class Jn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Jn(Ee.min(),oe.empty(),El)}static max(){return new Jn(Ee.max(),oe.empty(),El)}}function l_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(n.documentKey,e.documentKey),t!==0?t:be(n.largestBatchId,e.largestBatchId))}const YS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function qs(n){if(n.code!==W.FAILED_PRECONDITION||n.message!==YS)throw n;X("LocalStore","Unexpectedly lost primary lease")}class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let i=0,a=0,l=!1;e.forEach((h=>{++i,h.next((()=>{++a,l&&a===i&&t()}),(f=>r(f)))})),l=!0,a===i&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((i=>i?j.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{l[m]=_,++h,h===a&&r(l)}),(_=>i(_)))}}))}static doWhile(e,t){return new j(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const Wn="SimpleDb";class sp{static open(e,t,r,i){try{return new sp(t,e.transaction(i,r))}catch(a){throw new wc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new nn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new wc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=u_(r.target.error);this.S.reject(new wc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(X(Wn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AV(t)}}class ti{static delete(e){return X(Wn,"Removing database:",e),Ro(Cy().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!xc())return!1;if(ti.F())return!0;const e=vt(),t=ti.M(e),r=0<t&&t<10,i=ZS(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ti.M(vt())===12.2&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(X(Wn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;t(l)},i.onblocked=()=>{r(new wc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new J(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new J(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new wc(e,l))},i.onupgradeneeded=a=>{X(Wn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{X(Wn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=sp.open(this.db,e,a?"readonly":"readwrite",r),f=i(h).next((m=>(h.C(),m))).catch((m=>(h.abort(m),j.reject(m)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,m=f.name!=="FirebaseError"&&l<3;if(X(Wn,"Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class SV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ro(this.U.delete())}}class wc extends J{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $s(n){return n.name==="IndexedDbTransactionError"}class AV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(X(Wn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(X(Wn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ro(r)}add(e){return X(Wn,"ADD",this.store.name,e,e),Ro(this.store.add(e))}get(e){return Ro(this.store.get(e)).next((t=>(t===void 0&&(t=null),X(Wn,"GET",this.store.name,e,t),t)))}delete(e){return X(Wn,"DELETE",this.store.name,e),Ro(this.store.delete(e))}count(){return X(Wn,"COUNT",this.store.name),Ro(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new j(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.H(a,((h,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}Z(e,t){X(Wn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,l,h)=>h.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new j(((r,i)=>{t.onerror=a=>{const l=u_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():r()})):r()}}))}H(e,t){const r=[];return new j(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const f=new SV(h),m=t(h.primaryKey,h.value,f);if(m instanceof j){const _=m.catch((w=>(f.done(),j.reject(w))));r.push(_)}f.isDone?i():f.G===null?h.continue():h.continue(f.G)}})).next((()=>j.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ro(n){return new j(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=u_(r.target.error);t(i)}}))}let CI=!1;function u_(n){const e=ti.M(vt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new J("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CI||(CI=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Ec="IndexBackfiller";class RV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){X(Ec,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();X(Ec,`Documents written: ${t}`)}catch(t){$s(t)?X(Ec,"Ignoring IndexedDB error during index backfill: ",t):await qs(t)}await this.re(6e4)}))}}class PV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return j.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return X(Ec,`Processing collection: ${l}`),this.oe(e,l,i).next((h=>{i-=h,r.add(l)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((h=>(X(Ec,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const l=JS(a);l_(l,r)>0&&(r=l)})),new Jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class bn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bn.ce=-1;const Ps=-1;function lh(n){return n==null}function Uc(n){return n===0&&1/n==-1/0}function eA(n){return typeof n=="number"&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Rf="";function pn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kI(e)),e=CV(n.get(t),e);return kI(e)}function CV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Rf:t+="";break;default:t+=a}}return t}function kI(n){return n+Rf+""}function Zr(n){const e=n.length;if(ye(e>=2,64408,{path:n}),e===2)return ye(n.charAt(0)===Rf&&n.charAt(1)==="",56145,{path:n}),Fe.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf(Rf,a);switch((l<0||l>t)&&he(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;i.length===0?f=h:(i+=h,f=i,i=""),r.push(f);break;case"":i+=n.substring(a,l),i+="\0";break;case"":i+=n.substring(a,l+1);break;default:he(61167,{path:n})}a=l+2}return new Fe(r)}const Ao="remoteDocuments",uh="owner",Ya="owner",jc="mutationQueues",kV="userId",wr="mutations",bI="batchId",Do="userMutationsIndex",xI=["userId","batchId"];function rf(n,e){return[n,pn(e)]}function tA(n,e,t){return[n,pn(e),t]}const bV={},Il="documentMutations",Pf="remoteDocumentsV14",xV=["prefixPath","collectionGroup","readTime","documentId"],sf="documentKeyIndex",NV=["prefixPath","collectionGroup","documentId"],nA="collectionGroupIndex",DV=["collectionGroup","readTime","prefixPath","documentId"],Bc="remoteDocumentGlobal",Gg="remoteDocumentGlobalKey",Tl="targets",rA="queryTargetsIndex",VV=["canonicalId","targetId"],Sl="targetDocuments",OV=["targetId","path"],c_="documentTargetsIndex",LV=["path","targetId"],Cf="targetGlobalKey",jo="targetGlobal",zc="collectionParents",MV=["collectionId","parent"],Al="clientMetadata",FV="clientId",op="bundles",UV="bundleId",ap="namedQueries",jV="name",h_="indexConfiguration",BV="indexId",Kg="collectionGroupIndex",zV="collectionGroup",Ic="indexState",qV=["indexId","uid"],iA="sequenceNumberIndex",$V=["uid","sequenceNumber"],Tc="indexEntries",WV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sA="documentKeyIndex",HV=["indexId","uid","orderedDocumentKey"],lp="documentOverlays",GV=["userId","collectionPath","documentId"],Qg="collectionPathOverlayIndex",KV=["userId","collectionPath","largestBatchId"],oA="collectionGroupOverlayIndex",QV=["userId","collectionGroup","largestBatchId"],d_="globals",JV="name",aA=[jc,wr,Il,Ao,Tl,uh,jo,Sl,Al,Bc,zc,op,ap],YV=[...aA,lp],lA=[jc,wr,Il,Pf,Tl,uh,jo,Sl,Al,Bc,zc,op,ap,lp],uA=lA,f_=[...uA,h_,Ic,Tc],XV=f_,cA=[...f_,d_],ZV=cA;class Jg extends XS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function zt(n,e){const t=le(n);return ti.O(t.le,e)}function NI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ws(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ot{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??en.RED,this.left=i??en.EMPTY,this.right=a??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new en(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return en.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DI(this.data.getIterator())}getIteratorFrom(e){return new DI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tt(this.comparator);return t.data=e,t}}class DI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xa(n){return n.hasNext()?n.getNext():void 0}class xn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new xn([])}unionWith(e){let t=new tt(mt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function eO(){return typeof atob<"u"}class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dA("Invalid base64 string: "+a):a}})(e);return new Tt(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(ye(!!n,39018),typeof n=="string"){let e=0;const t=tO.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(n.seconds),nanos:pt(n.nanos)}}function pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ni(n){return typeof n=="string"?Tt.fromBase64String(n):Tt.fromUint8Array(n)}const fA="server_timestamp",pA="__type__",mA="__previous_value__",gA="__local_write_time__";function up(n){return(n?.mapValue?.fields||{})[pA]?.stringValue===fA}function cp(n){const e=n.mapValue.fields[mA];return up(e)?cp(e):e}function qc(n){const e=xi(n.mapValue.fields[gA].timestampValue);return new Ye(e.seconds,e.nanos)}class nO{constructor(e,t,r,i,a,l,h,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const Yg="(default)";class Ds{constructor(e,t){this.projectId=e,this.database=t||Yg}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database===Yg}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}const p_="__type__",yA="__max__",Is={mapValue:{fields:{__type__:{stringValue:yA}}}},m_="__vector__",Rl="value",of={nullValue:"NULL_VALUE"};function Vs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?up(n)?4:_A(n)?9007199254740991:hp(n)?10:11:he(28295,{value:n})}function oi(n,e){if(n===e)return!0;const t=Vs(n);if(t!==Vs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qc(n).isEqual(qc(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=xi(i.timestampValue),h=xi(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Ni(i.bytesValue).isEqual(Ni(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return pt(i.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return pt(i.integerValue)===pt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=pt(i.doubleValue),h=pt(a.doubleValue);return l===h?Uc(l)===Uc(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return wl(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(NI(l)!==NI(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!oi(l[f],h[f])))return!1;return!0})(n,e);default:return he(52216,{left:n})}}function $c(n,e){return(n.values||[]).find((t=>oi(t,e)))!==void 0}function Os(n,e){if(n===e)return 0;const t=Vs(n),r=Vs(e);if(t!==r)return be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return be(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=pt(a.integerValue||a.doubleValue),f=pt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return VI(n.timestampValue,e.timestampValue);case 4:return VI(qc(n),qc(e));case 5:return Wg(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Ni(a),f=Ni(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=be(h[m],f[m]);if(_!==0)return _}return be(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=be(pt(a.latitude),pt(l.latitude));return h!==0?h:be(pt(a.longitude),pt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OI(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},m=h[Rl]?.arrayValue,_=f[Rl]?.arrayValue,w=be(m?.values?.length||0,_?.values?.length||0);return w!==0?w:OI(m,_)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Is.mapValue&&l===Is.mapValue)return 0;if(a===Is.mapValue)return 1;if(l===Is.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),m=l.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let w=0;w<f.length&&w<_.length;++w){const I=Wg(f[w],_[w]);if(I!==0)return I;const b=Os(h[f[w]],m[_[w]]);if(b!==0)return b}return be(f.length,_.length)})(n.mapValue,e.mapValue);default:throw he(23264,{he:t})}}function VI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return be(n,e);const t=xi(n),r=xi(e),i=be(t.seconds,r.seconds);return i!==0?i:be(t.nanos,r.nanos)}function OI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=Os(t[i],r[i]);if(a)return a}return be(t.length,r.length)}function Pl(n){return Xg(n)}function Xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=xi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ni(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return oe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Xg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Xg(t.fields[l])}`;return i+"}"})(n.mapValue):he(61005,{value:n})}function af(n){switch(Vs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cp(n);return e?16+af(e):16;case 5:return 2*n.stringValue.length;case 6:return Ni(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+af(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ws(r.fields,((a,l)=>{i+=a.length+af(l)})),i})(n.mapValue);default:throw he(13486,{value:n})}}function Ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zg(n){return!!n&&"integerValue"in n}function Wc(n){return!!n&&"arrayValue"in n}function LI(n){return!!n&&"nullValue"in n}function MI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lf(n){return!!n&&"mapValue"in n}function hp(n){return(n?.mapValue?.fields||{})[p_]?.stringValue===m_}function Sc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ws(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Sc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sc(n.arrayValue.values[t]);return e}return{...n}}function _A(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yA}const vA={mapValue:{fields:{[p_]:{stringValue:m_},[Rl]:{arrayValue:{}}}}};function rO(n){return"nullValue"in n?of:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ho(Ds.empty(),oe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?hp(n)?vA:{mapValue:{}}:he(35942,{value:n})}function iO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ho(Ds.empty(),oe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?vA:"mapValue"in n?hp(n)?{mapValue:{}}:Is:he(61959,{value:n})}function FI(n,e){const t=Os(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function UI(n,e){const t=Os(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class tn{constructor(e){this.value=e}static empty(){return new tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sc(t)}setAll(e){let t=mt.emptyPath(),r={},i=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Sc(l):i.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ws(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new tn(Sc(this.value))}}function wA(n){const e=[];return Ws(n.fields,((t,r)=>{const i=new mt([t]);if(lf(r)){const a=wA(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new xn(e)}class ht{constructor(e,t,r,i,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new ht(e,0,Ee.min(),Ee.min(),Ee.min(),tn.empty(),0)}static newFoundDocument(e,t,r,i){return new ht(e,1,t,Ee.min(),r,i,0)}static newNoDocument(e,t){return new ht(e,2,t,Ee.min(),Ee.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new ht(e,3,t,Ee.min(),Ee.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ls{constructor(e,t){this.position=e,this.inclusive=t}}function jI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=oe.comparator(oe.fromName(l.referenceValue),t.key):r=Os(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function BI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}class Hc{constructor(e,t="asc"){this.field=e,this.dir=t}}function sO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class EA{}class Be extends EA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oO(e,t,r):t==="array-contains"?new uO(e,r):t==="in"?new PA(e,r):t==="not-in"?new cO(e,r):t==="array-contains-any"?new hO(e,r):new Be(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new aO(e,r):new lO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Os(t,this.value)):t!==null&&Vs(this.value)===Vs(t)&&this.matchesComparison(Os(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class et extends EA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new et(e,t)}matches(e){return Cl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Cl(n){return n.op==="and"}function ey(n){return n.op==="or"}function g_(n){return IA(n)&&Cl(n)}function IA(n){for(const e of n.filters)if(e instanceof et)return!1;return!0}function ty(n){if(n instanceof Be)return n.field.canonicalString()+n.op.toString()+Pl(n.value);if(g_(n))return n.filters.map((e=>ty(e))).join(",");{const e=n.filters.map((t=>ty(t))).join(",");return`${n.op}(${e})`}}function TA(n,e){return n instanceof Be?(function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)})(n,e):n instanceof et?(function(r,i){return i instanceof et&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,h)=>a&&TA(l,i.filters[h])),!0):!1})(n,e):void he(19439)}function SA(n,e){const t=n.filters.concat(e);return et.create(t,n.op)}function AA(n){return n instanceof Be?(function(t){return`${t.field.canonicalString()} ${t.op} ${Pl(t.value)}`})(n):n instanceof et?(function(t){return t.op.toString()+" {"+t.getFilters().map(AA).join(" ,")+"}"})(n):"Filter"}class oO extends Be{constructor(e,t,r){super(e,t,r),this.key=oe.fromName(r.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class aO extends Be{constructor(e,t){super(e,"in",t),this.keys=RA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lO extends Be{constructor(e,t){super(e,"not-in",t),this.keys=RA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RA(n,e){return(e.arrayValue?.values||[]).map((t=>oe.fromName(t.referenceValue)))}class uO extends Be{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wc(t)&&$c(t.arrayValue,this.value)}}class PA extends Be{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$c(this.value.arrayValue,t)}}class cO extends Be{constructor(e,t){super(e,"not-in",t)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$c(this.value.arrayValue,t)}}class hO extends Be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>$c(this.value.arrayValue,r)))}}class dO{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function ny(n,e=null,t=[],r=[],i=null,a=null,l=null){return new dO(n,e,t,r,i,a,l)}function Go(n){const e=le(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ty(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Pl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Pl(r))).join(",")),e.Te=t}return e.Te}function ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BI(n.startAt,e.startAt)&&BI(n.endAt,e.endAt)}function kf(n){return oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bf(n,e){return n.filters.filter((t=>t instanceof Be&&t.field.isEqual(e)))}function zI(n,e,t){let r=of,i=!0;for(const a of bf(n,e)){let l=of,h=!0;switch(a.op){case"<":case"<=":l=rO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=of}FI({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];FI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function qI(n,e,t){let r=Is,i=!0;for(const a of bf(n,e)){let l=Is,h=!0;switch(a.op){case">=":case">":l=iO(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=Is}UI({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];UI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}class Oi{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CA(n,e,t,r,i,a,l,h){return new Oi(n,e,t,r,i,a,l,h)}function Hl(n){return new Oi(n)}function $I(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function y_(n){return n.collectionGroup!==null}function pl(n){const e=le(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new tt(mt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Hc(a,r))})),t.has(mt.keyField().canonicalString())||e.Ie.push(new Hc(mt.keyField(),r))}return e.Ie}function En(n){const e=le(n);return e.Ee||(e.Ee=fO(e,pl(n))),e.Ee}function fO(n,e){if(n.limitType==="F")return ny(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Hc(i.field,a)}));const t=n.endAt?new Ls(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ls(n.startAt.position,n.startAt.inclusive):null;return ny(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ry(n,e){const t=n.filters.concat([e]);return new Oi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xf(n,e,t){return new Oi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hh(n,e){return ch(En(n),En(e))&&n.limitType===e.limitType}function kA(n){return`${Go(En(n))}|lt:${n.limitType}`}function il(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>AA(i))).join(", ")}]`),lh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Pl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Pl(i))).join(",")),`Target(${r})`})(En(n))}; limitType=${n.limitType})`}function dh(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):oe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of pl(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,h,f){const m=jI(l,h,f);return l.inclusive?m<=0:m<0})(r.startAt,pl(r),i)||r.endAt&&!(function(l,h,f){const m=jI(l,h,f);return l.inclusive?m>=0:m>0})(r.endAt,pl(r),i))})(n,e)}function bA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xA(n){return(e,t)=>{let r=!1;for(const i of pl(n)){const a=pO(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function pO(n,e,t){const r=n.field.isKeyField()?oe.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),m=h.data.field(a);return f!==null&&m!==null?Os(f,m):he(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}class Li{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return hA(this.inner)}size(){return this.innerSize}}const mO=new ot(oe.comparator);function Nn(){return mO}const NA=new ot(oe.comparator);function cc(...n){let e=NA;for(const t of n)e=e.insert(t.key,t);return e}function DA(n){let e=NA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ei(){return Ac()}function VA(){return Ac()}function Ac(){return new Li((n=>n.toString()),((n,e)=>n.isEqual(e)))}const gO=new ot(oe.comparator),yO=new tt(oe.comparator);function De(...n){let e=yO;for(const t of n)e=e.add(t);return e}const _O=new tt(be);function __(){return _O}function v_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function OA(n){return{integerValue:""+n}}function LA(n,e){return eA(e)?OA(e):v_(n,e)}class dp{constructor(){this._=void 0}}function vO(n,e,t){return n instanceof kl?(function(i,a){const l={fields:{[pA]:{stringValue:fA},[gA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&up(a)&&(a=cp(a)),a&&(l.fields[mA]=a),{mapValue:l}})(t,e):n instanceof Ko?FA(n,e):n instanceof Qo?UA(n,e):(function(i,a){const l=MA(i,a),h=WI(l)+WI(i.Ae);return Zg(l)&&Zg(i.Ae)?OA(h):v_(i.serializer,h)})(n,e)}function wO(n,e,t){return n instanceof Ko?FA(n,e):n instanceof Qo?UA(n,e):t}function MA(n,e){return n instanceof bl?(function(r){return Zg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class kl extends dp{}class Ko extends dp{constructor(e){super(),this.elements=e}}function FA(n,e){const t=jA(e);for(const r of n.elements)t.some((i=>oi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Qo extends dp{constructor(e){super(),this.elements=e}}function UA(n,e){let t=jA(e);for(const r of n.elements)t=t.filter((i=>!oi(i,r)));return{arrayValue:{values:t}}}class bl extends dp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WI(n){return pt(n.integerValue||n.doubleValue)}function jA(n){return Wc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fh{constructor(e,t){this.field=e,this.transform=t}}function EO(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ko&&i instanceof Ko||r instanceof Qo&&i instanceof Qo?wl(r.elements,i.elements,oi):r instanceof bl&&i instanceof bl?oi(r.Ae,i.Ae):r instanceof kl&&i instanceof kl})(n.transform,e.transform)}class IO{constructor(e,t){this.version=e,this.transformResults=t}}class gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fp{}function BA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kl(n.key,gt.none()):new Gl(n.key,n.data,gt.none());{const t=n.data,r=tn.empty();let i=new tt(mt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Mi(n.key,r,new xn(i.toArray()),gt.none())}}function TO(n,e,t){n instanceof Gl?(function(i,a,l){const h=i.value.clone(),f=GI(i.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Mi?(function(i,a,l){if(!uf(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=GI(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(zA(i)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Rc(n,e,t,r){return n instanceof Gl?(function(a,l,h,f){if(!uf(a.precondition,l))return h;const m=a.value.clone(),_=KI(a.fieldTransforms,f,l);return m.setAll(_),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mi?(function(a,l,h,f){if(!uf(a.precondition,l))return h;const m=KI(a.fieldTransforms,f,l),_=l.data;return _.setAll(zA(a)),_.setAll(m),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(a,l,h){return uf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function SO(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=MA(r.transform,i||null);a!=null&&(t===null&&(t=tn.empty()),t.set(r.field,a))}return t||null}function HI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wl(r,i,((a,l)=>EO(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Gl extends fp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mi extends fp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function GI(n,e,t){const r=new Map;ye(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,wO(l,h,t[i]))}return r}function KI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,vO(a,l,e))}return r}class Kl extends fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w_ extends fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class E_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&TO(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Rc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VA();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const f=BA(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,((t,r)=>HI(t,r)))&&wl(this.baseMutations,e.baseMutations,((t,r)=>HI(t,r)))}}class I_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return gO})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new I_(e,t,r,i)}}class T_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AO{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lt,qe;function qA(n){switch(n){case W.OK:return he(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function $A(n){if(n===void 0)return kt("GRPC error has no .code"),W.UNKNOWN;switch(n){case Lt.OK:return W.OK;case Lt.CANCELLED:return W.CANCELLED;case Lt.UNKNOWN:return W.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return W.INTERNAL;case Lt.UNAVAILABLE:return W.UNAVAILABLE;case Lt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Lt.NOT_FOUND:return W.NOT_FOUND;case Lt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Lt.ABORTED:return W.ABORTED;case Lt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Lt.DATA_LOSS:return W.DATA_LOSS;default:return he(39323,{code:n})}}(qe=Lt||(Lt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";function WA(){return new TextEncoder}const RO=new Rs([4294967295,4294967295],0);function QI(n){const e=WA().encode(n),t=new MS;return t.update(e),new Uint8Array(t.digest())}function JI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Rs([t,r],0),new Rs([i,a],0)]}class S_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hc(`Invalid padding: ${t}`);if(r<0)throw new hc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new hc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rs.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Rs.fromNumber(r)));return i.compare(RO)===1&&(i=new Rs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=QI(e),[r,i]=JI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new S_(a,i,t);return r.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=QI(e),[r,i]=JI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ph{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ph(Ee.min(),i,new ot(be),Nn(),De())}}class mh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new mh(r,t,De(),De(),De())}}class cf{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class HA{constructor(e,t){this.targetId=e,this.Ce=t}}class GA{constructor(e,t,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class YI{constructor(){this.ve=0,this.Fe=XI(),this.Me=Tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=De(),t=De(),r=De();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:a})}})),new mh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=XI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nn(),this.Je=Wd(),this.He=Wd(),this.Ye=new ot(be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:he(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(kf(a))if(r===0){const l=new oe(a.path);this.et(t,l,ht.newNoDocument(l,Ee.min()))}else ye(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,h;try{l=Ni(r).toUint8Array()}catch(f){if(f instanceof dA)return si("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new S_(l,i,a)}catch(f){return si(f instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&kf(h.target)){const f=new oe(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,ht.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=De();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new ph(e,t,this.Ye,this.je,r);return this.je=Nn(),this.Je=Wd(),this.He=Wd(),this.Ye=new ot(be),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new YI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tt(be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tt(be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||X("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new YI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Wd(){return new ot(oe.comparator)}function XI(){return new ot(oe.comparator)}const CO={asc:"ASCENDING",desc:"DESCENDING"},kO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bO={and:"AND",or:"OR"};class xO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iy(n,e){return n.useProto3Json||lh(e)?e:{value:e}}function xl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NO(n,e){return xl(n,e.toTimestamp())}function bt(n){return ye(!!n,49232),Ee.fromTimestamp((function(t){const r=xi(t);return new Ye(r.seconds,r.nanos)})(n))}function A_(n,e){return sy(n,e).canonicalString()}function sy(n,e){const t=(function(i){return new Fe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function QA(n){const e=Fe.fromString(n);return ye(sR(e),10190,{key:e.toString()}),e}function Gc(n,e){return A_(n.databaseId,e.path)}function ni(n,e){const t=QA(e);if(t.get(1)!==n.databaseId.projectId)throw new J(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new oe(XA(t))}function JA(n,e){return A_(n.databaseId,e)}function YA(n){const e=QA(n);return e.length===4?Fe.emptyPath():XA(e)}function oy(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XA(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ZI(n,e,t){return{name:Gc(n,e),fields:t.value.mapValue.fields}}function ZA(n,e,t){const r=ni(n,e.name),i=bt(e.updateTime),a=e.createTime?bt(e.createTime):Ee.min(),l=new tn({mapValue:{fields:e.fields}}),h=ht.newFoundDocument(r,i,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function DO(n,e){return"found"in e?(function(r,i){ye(!!i.found,43571),i.found.name,i.found.updateTime;const a=ni(r,i.found.name),l=bt(i.found.updateTime),h=i.found.createTime?bt(i.found.createTime):Ee.min(),f=new tn({mapValue:{fields:i.found.fields}});return ht.newFoundDocument(a,l,h,f)})(n,e):"missing"in e?(function(r,i){ye(!!i.missing,3894),ye(!!i.readTime,22933);const a=ni(r,i.missing),l=bt(i.readTime);return ht.newNoDocument(a,l)})(n,e):he(7234,{result:e})}function VO(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:he(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(ye(_===void 0||typeof _=="string",58123),Tt.fromBase64String(_||"")):(ye(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Tt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(m){const _=m.code===void 0?W.UNKNOWN:$A(m.code);return new J(_,m.message||"")})(l);t=new GA(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ni(n,r.document.name),a=bt(r.document.updateTime),l=r.document.createTime?bt(r.document.createTime):Ee.min(),h=new tn({mapValue:{fields:r.document.fields}}),f=ht.newFoundDocument(i,a,l,h),m=r.targetIds||[],_=r.removedTargetIds||[];t=new cf(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ni(n,r.document),a=r.readTime?bt(r.readTime):Ee.min(),l=ht.newNoDocument(i,a),h=r.removedTargetIds||[];t=new cf([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ni(n,r.document),a=r.removedTargetIds||[];t=new cf([],a,i,null)}else{if(!("filter"in e))return he(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new AO(i,a),h=r.targetId;t=new HA(h,l)}}return t}function Kc(n,e){let t;if(e instanceof Gl)t={update:ZI(n,e.key,e.value)};else if(e instanceof Kl)t={delete:Gc(n,e.key)};else if(e instanceof Mi)t={update:ZI(n,e.key,e.data),updateMask:jO(e.fieldMask)};else{if(!(e instanceof w_))return he(16599,{Vt:e.type});t={verify:Gc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const h=l.transform;if(h instanceof kl)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ko)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Qo)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bl)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw he(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:NO(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:he(27497)})(n,e.precondition)),t}function ay(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?gt.updateTime(bt(a.updateTime)):a.exists!==void 0?gt.exists(a.exists):gt.none()})(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,h){let f=null;if("setToServerValue"in h)ye(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new kl;else if("appendMissingElements"in h){const _=h.appendMissingElements.values||[];f=new Ko(_)}else if("removeAllFromArray"in h){const _=h.removeAllFromArray.values||[];f=new Qo(_)}else"increment"in h?f=new bl(l,h.increment):he(16584,{proto:h});const m=mt.fromServerFormat(h.fieldPath);return new fh(m,f)})(n,i))):[];if(e.update){e.update.name;const i=ni(n,e.update.name),a=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const m=f.fieldPaths||[];return new xn(m.map((_=>mt.fromServerFormat(_))))})(e.updateMask);return new Mi(i,a,l,t,r)}return new Gl(i,a,t,r)}if(e.delete){const i=ni(n,e.delete);return new Kl(i,t)}if(e.verify){const i=ni(n,e.verify);return new w_(i,t)}return he(1463,{proto:e})}function OO(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?bt(i.updateTime):bt(a);return l.isEqual(Ee.min())&&(l=bt(a)),new IO(l,i.transformResults||[])})(t,e)))):[]}function eR(n,e){return{documents:[JA(n,e.path)]}}function tR(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=JA(n,i);const a=(function(m){if(m.length!==0)return iR(et.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((_=>(function(I){return{field:sl(I.field),direction:MO(I.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=iy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function nR(n){let e=YA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ye(r===1,65062);const _=t.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(w){const I=rR(w);return I instanceof et&&g_(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(w){return w.map((I=>(function(x){return new Hc(ol(x.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(I)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let I;return I=typeof w=="object"?w.value:w,lh(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(w){const I=!!w.before,b=w.values||[];return new Ls(b,I)})(t.startAt));let m=null;return t.endAt&&(m=(function(w){const I=!w.before,b=w.values||[];return new Ls(b,I)})(t.endAt)),CA(e,i,l,a,h,"F",f,m)}function LO(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ol(t.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ol(t.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ol(t.unaryFilter.field);return Be.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ol(t.unaryFilter.field);return Be.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Be.create(ol(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return et.create(t.compositeFilter.filters.map((r=>rR(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}})(t.compositeFilter.op))})(n):he(30097,{filter:n})}function MO(n){return CO[n]}function FO(n){return kO[n]}function UO(n){return bO[n]}function sl(n){return{fieldPath:n.canonicalString()}}function ol(n){return mt.fromServerFormat(n.fieldPath)}function iR(n){return n instanceof Be?(function(t){if(t.op==="=="){if(MI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(LI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(LI(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:FO(t.op),value:t.value}}})(n):n instanceof et?(function(t){const r=t.getFilters().map((i=>iR(i)));return r.length===1?r[0]:{compositeFilter:{op:UO(t.op),filters:r}}})(n):he(54877,{filter:n})}function jO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ri{constructor(e,t,r,i,a=Ee.min(),l=Ee.min(),h=Tt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oR{constructor(e){this.yt=e}}function BO(n,e){let t;if(e.document)t=ZA(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),i=Yo(e.noDocument.readTime);t=ht.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return he(56709);{const r=oe.fromSegments(e.unknownDocument.path),i=Yo(e.unknownDocument.version);t=ht.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new Ye(i[0],i[1]);return Ee.fromTimestamp(a)})(e.readTime)),t}function eT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Gc(a,l.key),fields:l.data.value.mapValue.fields,updateTime:xl(a,l.version.toTimestamp()),createTime:xl(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jo(e.version)};else{if(!e.isUnknownDocument())return he(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Jo(e.version)}}return r}function Nf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yo(n){const e=new Ye(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Po(n,e){const t=(e.baseMutations||[]).map((a=>ay(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>ay(n.yt,a))),i=Ye.fromMillis(e.localWriteTimeMs);return new E_(e.batchId,i,t,r)}function dc(n){const e=Yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Yo(n.lastLimboFreeSnapshotVersion):Ee.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return ye(l===1,1966,{count:l}),En(Hl(YA(a.documents[0])))})(n.query):(function(a){return En(nR(a))})(n.query),new Ri(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tt.fromBase64String(n.resumeToken))}function aR(n,e){const t=Jo(e.snapshotVersion),r=Jo(e.lastLimboFreeSnapshotVersion);let i;i=kf(e.target)?eR(n.yt,e.target):tR(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Go(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function R_(n){const e=nR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xf(e,e.limit,"L"):e}function Ig(n,e){return new T_(e.largestBatchId,ay(n.yt,e.overlayMutation))}function tT(n,e){const t=e.path.lastSegment();return[n,pn(e.path.popLast()),t]}function nT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Jo(r.readTime),documentKey:pn(r.documentKey.path),largestBatchId:r.largestBatchId}}class zO{getBundleMetadata(e,t){return rT(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Yo(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return rT(e).put((function(i){return{bundleId:i.id,createTime:Jo(bt(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return iT(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:R_(a.bundledQuery),readTime:Yo(a.readTime)}})(r)}))}saveNamedQuery(e,t){return iT(e).put((function(i){return{name:i.name,readTime:Jo(bt(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function rT(n){return zt(n,op)}function iT(n){return zt(n,ap)}class pp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new pp(e,r)}getOverlay(e,t){return ec(e).get(tT(this.userId,t)).next((r=>r?Ig(this.serializer,r):null))}getOverlays(e,t){const r=ei();return j.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,l)=>{const h=new T_(t,l);i.push(this.St(e,h))})),j.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add(pn(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(ec(e).Z(Qg,h))})),j.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ei(),a=pn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ec(e).J(Qg,l).next((h=>{for(const f of h){const m=Ig(this.serializer,f);i.set(m.getKey(),m)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=ei();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ec(e).ee({index:oA,range:h},((f,m,_)=>{const w=Ig(this.serializer,m);a.size()<i||w.largestBatchId===l?(a.set(w.getKey(),w),l=w.largestBatchId):_.done()})).next((()=>a))}St(e,t){return ec(e).put((function(i,a,l){const[h,f,m]=tT(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Kc(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function ec(n){return zt(n,lp)}class qO{bt(e){return zt(e,d_)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Co{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(pt(e.integerValue));else if("doubleValue"in e){const r=pt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Uc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=xi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ni(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?_A(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):hp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):he(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=Rl,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(pt(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Co.Kt=new Co;const Za=255;function $O(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function sT(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=$O(255&r[a]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class WO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=sT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=sT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Za),this.sn(255)}_n(){this.an(Za),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Za?(this.sn(Za),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Za?(this.an(Za),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HO{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class GO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class tc{constructor(){this.cn=new WO,this.ln=new HO(this.cn),this.hn=new GO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ko{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ko(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:hf(this.En),directionalValue:hf(this.dn),orderedDocumentKey:hf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function gs(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=oT(n.En,e.En),t!==0?t:(t=oT(n.dn,e.dn),t!==0?t:oe.comparator(n.In,e.In)))}function oT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function hf(n){return S0()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function aT(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class lT{constructor(e){this.mn=new tt(((t,r)=>mt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ye(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Hg(e);if(t!==void 0&&!this.wn(t))return!1;const r=So(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const f=r[a];if(!this.Sn(h,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<r.length;++a){const h=r[a];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new tt(mt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new nf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nf(r.field,r.dir==="asc"?0:1)));return new Af(Af.UNKNOWN_ID,this.collectionId,t,Fc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function lR(n){if(ye(n instanceof Be||n instanceof et,20012),n instanceof Be){if(n instanceof PA){const t=n.value.arrayValue?.values?.map((r=>Be.create(n.field,"==",r)))||[];return et.create(t,"or")}return n}const e=n.filters.map((t=>lR(t)));return et.create(e,n.op)}function KO(n){if(n.getFilters().length===0)return[];const e=cy(lR(n));return ye(uR(e),7391),ly(e)||uy(e)?[e]:e.getFilters()}function ly(n){return n instanceof Be}function uy(n){return n instanceof et&&g_(n)}function uR(n){return ly(n)||uy(n)||(function(t){if(t instanceof et&&ey(t)){for(const r of t.getFilters())if(!ly(r)&&!uy(r))return!1;return!0}return!1})(n)}function cy(n){if(ye(n instanceof Be||n instanceof et,34018),n instanceof Be)return n;if(n.filters.length===1)return cy(n.filters[0]);const e=n.filters.map((r=>cy(r)));let t=et.create(e,n.op);return t=Df(t),uR(t)?t:(ye(t instanceof et,64498),ye(Cl(t),40251),ye(t.filters.length>1,57927),t.filters.reduce(((r,i)=>P_(r,i))))}function P_(n,e){let t;return ye(n instanceof Be||n instanceof et,38388),ye(e instanceof Be||e instanceof et,25473),t=n instanceof Be?e instanceof Be?(function(i,a){return et.create([i,a],"and")})(n,e):uT(n,e):e instanceof Be?uT(e,n):(function(i,a){if(ye(i.filters.length>0&&a.filters.length>0,48005),Cl(i)&&Cl(a))return SA(i,a.getFilters());const l=ey(i)?i:a,h=ey(i)?a:i,f=l.filters.map((m=>P_(m,h)));return et.create(f,"or")})(n,e),Df(t)}function uT(n,e){if(Cl(e))return SA(e,n.getFilters());{const t=e.filters.map((r=>P_(n,r)));return et.create(t,"or")}}function Df(n){if(ye(n instanceof Be||n instanceof et,11850),n instanceof Be)return n;const e=n.getFilters();if(e.length===1)return Df(e[0]);if(IA(n))return n;const t=e.map((i=>Df(i))),r=[];return t.forEach((i=>{i instanceof Be?r.push(i):i instanceof et&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:et.create(r,n.op)}class QO{constructor(){this.Cn=new C_}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Jn.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class C_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tt(Fe.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Fe.comparator)).toArray()}}const cT="IndexedDbIndexManager",Hd=new Uint8Array(0);class JO{constructor(e,t){this.databaseId=t,this.vn=new C_,this.Fn=new Li((r=>Go(r)),((r,i)=>ch(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:pn(i)};return hT(e).put(a)}return j.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[WS(t),""],!1,!0);return hT(e).J(i).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Zr(l.parent))}return r}))}addFieldIndex(e,t){const r=nc(e),i=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const l=tl(e);return a.next((h=>{l.put(nT(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=nc(e),i=tl(e),a=el(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=nc(e),r=el(e),i=tl(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return j.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new lT(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=el(e);let i=!0;const a=new Map;return j.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{i&&(i=!!h),a.set(l,h)})))).next((()=>{if(i){let l=De();const h=[];return j.forEach(a,((f,m)=>{X(cT,`Using index ${(function(ne){return`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map((de=>`${de.fieldPath}:${de.kind}`)).join(",")}`})(f)} to execute ${Go(t)}`);const _=(function(ne,de){const ue=Hg(de);if(ue===void 0)return null;for(const me of bf(ne,ue.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null})(m,f),w=(function(ne,de){const ue=new Map;for(const me of So(de))for(const k of bf(ne,me.fieldPath))switch(k.op){case"==":case"in":ue.set(me.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ue.set(me.fieldPath.canonicalString(),k.value),Array.from(ue.values())}return null})(m,f),I=(function(ne,de){const ue=[];let me=!0;for(const k of So(de)){const R=k.kind===0?zI(ne,k.fieldPath,ne.startAt):qI(ne,k.fieldPath,ne.startAt);ue.push(R.value),me&&(me=R.inclusive)}return new Ls(ue,me)})(m,f),b=(function(ne,de){const ue=[];let me=!0;for(const k of So(de)){const R=k.kind===0?qI(ne,k.fieldPath,ne.endAt):zI(ne,k.fieldPath,ne.endAt);ue.push(R.value),me&&(me=R.inclusive)}return new Ls(ue,me)})(m,f),x=this.On(f,m,I),F=this.On(f,m,b),O=this.Nn(f,m,w),K=this.Bn(f.indexId,_,x,I.inclusive,F,b.inclusive,O);return j.forEach(K,(ae=>r.Y(ae,t.limit).next((ne=>{ne.forEach((de=>{const ue=oe.fromSegments(de.documentKey);l.has(ue)||(l=l.add(ue),h.push(ue))}))}))))})).next((()=>h))}return j.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=KO(et.create(e.filters,"and")).map((r=>ny(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,l,h){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),m=f/(t!=null?t.length:1),_=[];for(let w=0;w<f;++w){const I=t?this.Ln(t[w/m]):Hd,b=this.kn(e,I,r[w%m],i),x=this.qn(e,I,a[w%m],l),F=h.map((O=>this.kn(e,I,O,!0)));_.push(...this.createRange(b,x,F))}return _}kn(e,t,r,i){const a=new ko(e,oe.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new ko(e,oe.empty(),t,r);return i?a.An():a}xn(e,t){const r=new lT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const h of a)r.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return j.forEach(i,(a=>this.xn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let m=new tt(mt.comparator),_=!1;for(const w of f.filters)for(const I of w.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?_=!0:m=m.add(I.field));for(const w of f.orderBy)w.field.isKeyField()||(m=m.add(w.field));return m.size+(_?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new tc;for(const i of So(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const l=r.Pn(i.kind);Co.Kt.Dt(a,l)}return r.un()}Ln(e){const t=new tc;return Co.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new tc;return Co.Kt.Dt(Ho(this.databaseId,t),r.Pn((function(a){const l=So(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new tc);let a=0;for(const l of So(e)){const h=r[a++];for(const f of i)if(this.Un(t,l.fieldPath)&&Wc(h))i=this.Kn(i,l,h);else{const m=f.Pn(l.kind);Co.Kt.Dt(h,m)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const f=new tc;f.seed(h.un()),Co.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof Be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=nc(e),i=tl(e);return(t?r.J(Kg,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const l=[];return j.forEach(a,(h=>i.get([h.indexId,this.uid]).next((f=>{l.push((function(_,w){const I=w?new Fc(w.sequenceNumber,new Jn(Yo(w.readTime),new oe(Zr(w.documentKey)),w.largestBatchId)):Fc.empty(),b=_.fields.map((([x,F])=>new nf(mt.fromServerFormat(x),F)));return new Af(_.indexId,_.collectionGroup,b,I)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:be(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=nc(e),a=tl(e);return this.Gn(e).next((l=>i.J(Kg,IDBKeyRange.bound(t,t)).next((h=>j.forEach(h,(f=>a.put(nT(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,((i,a)=>{const l=r.get(i.collectionGroup);return(l?j.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((h=>(r.set(i.collectionGroup,h),j.forEach(h,(f=>this.zn(e,i,f).next((m=>{const _=this.jn(a,f);return m.isEqual(_)?j.resolve():this.Jn(e,a,f,m,_)})))))))}))}Hn(e,t,r,i){return el(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return el(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=el(e);let a=new tt(gs);return i.ee({index:sA,range:IDBKeyRange.only([r.indexId,this.uid,hf(this.$n(r,t))])},((l,h)=>{a=a.add(new ko(r.indexId,t,aT(h.arrayValue),aT(h.directionalValue)))})).next((()=>a))}jn(e,t){let r=new tt(gs);const i=this.Qn(t,e);if(i==null)return r;const a=Hg(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Wc(l))for(const h of l.arrayValue.values||[])r=r.add(new ko(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new ko(t.indexId,e.key,Hd,i));return r}Jn(e,t,r,i,a){X(cT,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,m,_,w,I){const b=f.getIterator(),x=m.getIterator();let F=Xa(b),O=Xa(x);for(;F||O;){let K=!1,ae=!1;if(F&&O){const ne=_(F,O);ne<0?ae=!0:ne>0&&(K=!0)}else F!=null?ae=!0:K=!0;K?(w(O),O=Xa(x)):ae?(I(F),F=Xa(b)):(F=Xa(b),O=Xa(x))}})(i,a,gs,(h=>{l.push(this.Hn(e,t,r,h))}),(h=>{l.push(this.Yn(e,t,r,h))})),j.waitFor(l)}Gn(e){let t=1;return tl(e).ee({index:iA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,h)=>gs(l,h))).filter(((l,h,f)=>!h||gs(l,f[h-1])!==0));const i=[];i.push(e);for(const l of r){const h=gs(l,e),f=gs(l,t);if(h===0)i[0]=e.An();else if(h>0&&f<0)i.push(l),i.push(l.An());else if(f>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Zn(i[l],i[l+1]))return[];const h=i[l].Vn(this.uid,Hd,oe.empty()),f=i[l+1].Vn(this.uid,Hd,oe.empty());a.push(IDBKeyRange.bound(h,f))}return a}Zn(e,t){return gs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dT)}getMinOffset(e,t){return j.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||he(44426))))).next(dT)}}function hT(n){return zt(n,zc)}function el(n){return zt(n,Tc)}function nc(n){return zt(n,h_)}function tl(n){return zt(n,Ic)}function dT(n){ye(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;l_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,t)}const fT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cR=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function hR(n,e,t){const r=n.store(wr),i=n.store(Il),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=r.ee({range:l},((_,w,I)=>(h++,I.delete())));a.push(f.next((()=>{ye(h===1,47070,{batchId:t.batchId})})));const m=[];for(const _ of t.mutations){const w=tA(e,_.key.path,t.batchId);a.push(i.delete(w)),m.push(_.key)}return j.waitFor(a).next((()=>m))}function Vf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw he(14731);e=n.noDocument}return JSON.stringify(e).length}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(cR,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class mp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){ye(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new mp(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).ee({index:Do,range:r},((i,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=al(e),l=ys(e);return l.add({}).next((h=>{ye(typeof h=="number",49019);const f=new E_(h,t,r,i),m=(function(b,x,F){const O=F.baseMutations.map((ae=>Kc(b.yt,ae))),K=F.mutations.map((ae=>Kc(b.yt,ae)));return{userId:x,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:O,mutations:K}})(this.serializer,this.userId,f),_=[];let w=new tt(((I,b)=>be(I.canonicalString(),b.canonicalString())));for(const I of i){const b=tA(this.userId,I.key.path,h);w=w.add(I.key.path.popLast()),_.push(l.put(m)),_.push(a.put(b,bV))}return w.forEach((I=>{_.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),j.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return ys(e).get(t).next((r=>r?(ye(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Po(this.serializer,r)):null))}er(e,t){return this.Xn[t]?j.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ys(e).ee({index:Do,range:i},((l,h,f)=>{h.userId===this.userId&&(ye(h.batchId>=r,47524,{tr:r}),a=Po(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ps;return ys(e).ee({index:Do,range:t,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ps],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).J(Do,t).next((r=>r.map((i=>Po(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return al(e).ee({range:i},((l,h,f)=>{const[m,_,w]=l,I=Zr(_);if(m===this.userId&&t.path.isEqual(I))return ys(e).get(w).next((b=>{if(!b)throw he(61480,{nr:l,batchId:w});ye(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:w}),a.push(Po(this.serializer,b))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(be);const i=[];return t.forEach((a=>{const l=rf(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=al(e).ee({range:h},((m,_,w)=>{const[I,b,x]=m,F=Zr(b);I===this.userId&&a.path.isEqual(F)?r=r.add(x):w.done()}));i.push(f)})),j.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=rf(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new tt(be);return al(e).ee({range:l},((f,m,_)=>{const[w,I,b]=f,x=Zr(I);w===this.userId&&r.isPrefixOf(x)?x.length===i&&(h=h.add(b)):_.done()})).next((()=>this.rr(e,h)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(ys(e).get(a).next((l=>{if(l===null)throw he(35274,{batchId:a});ye(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Po(this.serializer,l))})))})),j.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return hR(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),j.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return al(e).ee({range:r},((a,l,h)=>{if(a[0]===this.userId){const f=Zr(a[1]);i.push(f)}else h.done()})).next((()=>{ye(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return dR(e,this.userId,t)}_r(e){return fR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ps,lastStreamToken:""}))}}function dR(n,e,t){const r=rf(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return al(n).ee({range:a,X:!0},((h,f,m)=>{const[_,w,I]=h;_===e&&w===i&&(l=!0),m.done()})).next((()=>l))}function ys(n){return zt(n,wr)}function al(n){return zt(n,Il)}function fR(n){return zt(n,jc)}class Xo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xo(0)}static cr(){return new Xo(-1)}}class YO{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Xo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new Ye(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nl(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(ye(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return nl(e).ee(((l,h)=>{const f=dc(h);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))})).next((()=>j.waitFor(a))).next((()=>i))}forEachTarget(e,t){return nl(e).ee(((r,i)=>{const a=dc(i);t(a)}))}lr(e){return pT(e).get(Cf).next((t=>(ye(t!==null,2888),t)))}hr(e,t){return pT(e).put(Cf,t)}Pr(e,t){return nl(e).put(aR(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Go(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return nl(e).ee({range:i,index:rA},((l,h,f)=>{const m=dc(h);ch(t,m.target)&&(a=m,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=ws(e);return t.forEach((l=>{const h=pn(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))})),j.waitFor(i)}removeMatchingKeys(e,t,r){const i=ws(e);return j.forEach(t,(a=>{const l=pn(a.path);return j.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=ws(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ws(e);let a=De();return i.ee({range:r,X:!0},((l,h,f)=>{const m=Zr(l[1]),_=new oe(m);a=a.add(_)})).next((()=>a))}containsKey(e,t){const r=pn(t.path),i=IDBKeyRange.bound([r],[WS(r)],!1,!0);let a=0;return ws(e).ee({index:c_,X:!0,range:i},(([l,h],f,m)=>{l!==0&&(a++,m.done())})).next((()=>a>0))}At(e,t){return nl(e).get(t).next((r=>r?dc(r):null))}}function nl(n){return zt(n,Tl)}function pT(n){return zt(n,jo)}function ws(n){return zt(n,Sl)}const mT="LruGarbageCollector",XO=1048576;function gT([n,e],[t,r]){const i=be(n,t);return i===0?be(e,r):i}class ZO{constructor(e){this.Ir=e,this.buffer=new tt(gT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();gT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$s(t)?X(mT,"Ignoring IndexedDB error during garbage collection: ",t):await qs(t)}await this.Vr(3e5)}))}}class eL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(bn.ce);const r=new ZO(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(fT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,l,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,l=Date.now(),this.nthSequenceNumber(e,i)))).next((w=>(r=w,h=Date.now(),this.removeTargets(e,r,t)))).next((w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(m=Date.now(),rl()<=Me.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w}))))}}function mR(n,e){return new eL(n,e)}class tL{constructor(e,t){this.db=e,this.garbageCollector=mR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return Gd(e,r)}removeReference(e,t,r){return Gd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Gd(e,t)}br(e,t){return(function(i,a){let l=!1;return fR(i).te((h=>dR(i,h,a).next((f=>(f&&(l=!0),j.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((l,h)=>{if(h<=t){const f=this.br(e,l).next((m=>{if(!m)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Ee.min()),ws(e).delete((function(w){return[0,pn(w.path)]})(l)))))}));i.push(f)}})).next((()=>j.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Gd(e,t)}Sr(e,t){const r=ws(e);let i,a=bn.ce;return r.ee({index:c_},(([l,h],{path:f,sequenceNumber:m})=>{l===0?(a!==bn.ce&&t(new oe(Zr(i)),a),a=m,i=f):a=bn.ce})).next((()=>{a!==bn.ce&&t(new oe(Zr(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gd(n,e){return ws(n).put((function(r,i){return{targetId:0,path:pn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class gR{constructor(){this.changes=new Li((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Io(e).put(r)}removeEntry(e,t,r){return Io(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Nf(l),h[h.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=ht.newInvalidDocument(t);return Io(e).ee({index:sf,range:IDBKeyRange.only(rc(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:ht.newInvalidDocument(t)};return Io(e).ee({index:sf,range:IDBKeyRange.only(rc(t))},((i,a)=>{r={document:this.Cr(t,a),size:Vf(a)}})).next((()=>r))}getEntries(e,t){let r=Nn();return this.Fr(e,t,((i,a)=>{const l=this.Cr(i,a);r=r.insert(i,l)})).next((()=>r))}Mr(e,t){let r=Nn(),i=new ot(oe.comparator);return this.Fr(e,t,((a,l)=>{const h=this.Cr(a,l);r=r.insert(a,h),i=i.insert(a,Vf(l))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return j.resolve();let i=new tt(vT);t.forEach((f=>i=i.add(f)));const a=IDBKeyRange.bound(rc(i.first()),rc(i.last())),l=i.getIterator();let h=l.getNext();return Io(e).ee({index:sf,range:a},((f,m,_)=>{const w=oe.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;h&&vT(h,w)<0;)r(h,null),h=l.getNext();h&&h.isEqual(w)&&(r(h,m),h=l.hasNext()?l.getNext():null),h?_.j(rc(h)):_.done()})).next((()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),Nf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(e).J(IDBKeyRange.bound(h,f,!0)).next((m=>{a?.incrementDocumentReadCount(m.length);let _=Nn();for(const w of m){const I=this.Cr(oe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);I.isFoundDocument()&&(dh(t,I)||i.has(I.key))&&(_=_.insert(I.key,I))}return _}))}getAllFromCollectionGroup(e,t,r,i){let a=Nn();const l=_T(t,r),h=_T(t,Jn.max());return Io(e).ee({index:nA,range:IDBKeyRange.bound(l,h,!0)},((f,m,_)=>{const w=this.Cr(oe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(w.key,w),a.size===i&&_.done()})).next((()=>a))}newChangeBuffer(e){return new rL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return yT(e).get(Gg).next((t=>(ye(!!t,20021),t)))}Dr(e,t){return yT(e).put(Gg,t)}Cr(e,t){if(t){const r=BO(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ee.min())))return r}return ht.newInvalidDocument(e)}}function yR(n){return new nL(n)}class rL extends gR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Li((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new tt(((a,l)=>be(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=eT(this.Nr.serializer,l);i=i.add(a.path.popLast());const m=Vf(f);r+=m-h.size,t.push(this.Nr.addEntry(e,a,f))}else if(r-=h.size,this.trackRemovals){const f=eT(this.Nr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,a,f))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function yT(n){return zt(n,Bc)}function Io(n){return zt(n,Pf)}function rc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _T(n,e){const t=e.documentKey.path.toArray();return[n,Nf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=be(t[a],r[a]),i)return i;return i=be(t.length,r.length),i||(i=be(t[t.length-2],r[r.length-2]),i||be(t[t.length-1],r[r.length-1]))}class iL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _R{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Rc(r.mutation,i,xn.empty(),Ye.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const i=ei();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=cc();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ei();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,r,i){let a=Nn();const l=Ac(),h=(function(){return Ac()})();return t.forEach(((f,m)=>{const _=r.get(m.key);i.has(m.key)&&(_===void 0||_.mutation instanceof Mi)?a=a.insert(m.key,m):_!==void 0?(l.set(m.key,_.mutation.getFieldMask()),Rc(_.mutation,m,_.mutation.getFieldMask(),Ye.now())):l.set(m.key,xn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>l.set(m,_))),t.forEach(((m,_)=>h.set(m,new iL(_,l.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const r=Ac();let i=new ot(((l,h)=>l-h)),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||xn.empty();_=h.applyToLocalView(m,_),r.set(f,_);const w=(i.get(h.batchId)||De()).add(f);i=i.insert(h.batchId,w)}))})).next((()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,w=VA();_.forEach((I=>{if(!a.has(I)){const b=BA(t.get(I),r.get(I));b!==null&&w.set(I,b),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return j.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return oe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):j.resolve(ei());let h=El,f=a;return l.next((m=>j.forEach(m,((_,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(_)?j.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{f=f.insert(_,I)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,De()))).next((_=>({batchId:h,changes:DA(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next((r=>{let i=cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=cc();return this.indexManager.getCollectionParents(e,a).next((h=>j.forEach(h,(f=>{const m=(function(w,I){return new Oi(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((_=>{_.forEach(((w,I)=>{l=l.insert(w,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((f,m)=>{const _=m.getKey();l.get(_)===null&&(l=l.insert(_,ht.newInvalidDocument(_)))}));let h=cc();return l.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&Rc(_.mutation,m,xn.empty(),Ye.now()),dh(t,m)&&(h=h.insert(f,m))})),h}))}}class sL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:bt(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:R_(i.bundledQuery),readTime:bt(i.readTime)}})(t)),j.resolve()}}class oL{constructor(){this.overlays=new ot(oe.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ei();return j.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const i=ei(),a=t.length+1,l=new oe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new ot(((m,_)=>m-_));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=ei(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=ei(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>h.set(m,_))),!(h.size()>=i)););return j.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new T_(t,r));let a=this.qr.get(t);a===void 0&&(a=De(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class aL{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}class k_{constructor(){this.Qr=new tt(Ht.$r),this.Ur=new tt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new oe(new Fe([])),r=new Ht(t,e),i=new Ht(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new Fe([])),r=new Ht(t,e),i=new Ht(t,e+1);let a=De();return this.Ur.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||be(e.Yr,t.Yr)}static Kr(e,t){return be(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}class lL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tt(Ht.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new E_(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Zr=this.Zr.add(new Ht(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return j.resolve(l)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return j.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ps:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(l=>{const h=this.Xr(l.Yr);a.push(h)})),j.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tt(be);return t.forEach((i=>{const a=new Ht(i,0),l=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{r=r.add(h.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;oe.isDocumentKey(a)||(a=a.child(""));const l=new Ht(new oe(a),0);let h=new tt(be);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(f.Yr)),!0)}),l),j.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ye(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,(i=>{const a=new Ht(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uL{constructor(e){this.ri=e,this.docs=(function(){return new ot(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(t))}getEntries(e,t){let r=Nn();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():ht.newInvalidDocument(i))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Nn();const l=t.path,h=new oe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||l_(JS(_),r)<=0||(i.has(_.key)||dh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return j.resolve(a)}getAllFromCollectionGroup(e,t,r,i){he(9500)}ii(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new cL(this)}getSize(e){return j.resolve(this.size)}}class cL extends gR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hL{constructor(e){this.persistence=e,this.si=new Li((t=>Go(t)),ch),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new k_,this.targetCount=0,this.ai=Xo.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)})),j.waitFor(a).next((()=>i))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),j.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}}class b_{constructor(e,t){this.ui={},this.overlays={},this.ci=new bn(0),this.li=!1,this.li=!0,this.hi=new aL,this.referenceDelegate=e(this),this.Pi=new hL(this),this.indexManager=new QO,this.remoteDocumentCache=(function(i){return new uL(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new oR(t),this.Ii=new sL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lL(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){X("MemoryPersistence","Starting transaction:",e);const i=new dL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dL extends XS{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Ri=new k_,this.Vi=null}static mi(e){return new gp(e)}get fi(){if(this.Vi)return this.Vi;throw he(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const i=oe.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Of{constructor(e,t){this.persistence=e,this.pi=new Li((r=>pn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=mR(this,t)}static mi(e,t){return new Of(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return j.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?j.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((h=>{h||(r++,a.removeEntry(l,Ee.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=af(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fL{constructor(e){this.serializer=e}k(e,t,r,i){const a=new sp("createOrUpgrade",t);r<1&&i>=1&&((function(f){f.createObjectStore(uh)})(e),(function(f){f.createObjectStore(jc,{keyPath:kV}),f.createObjectStore(wr,{keyPath:bI,autoIncrement:!0}).createIndex(Do,xI,{unique:!0}),f.createObjectStore(Il)})(e),wT(e),(function(f){f.createObjectStore(Ao)})(e));let l=j.resolve();return r<3&&i>=3&&(r!==0&&((function(f){f.deleteObjectStore(Sl),f.deleteObjectStore(Tl),f.deleteObjectStore(jo)})(e),wT(e)),l=l.next((()=>(function(f){const m=f.store(jo),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return m.put(Cf,_)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(f,m){return m.store(wr).J().next((w=>{f.deleteObjectStore(wr),f.createObjectStore(wr,{keyPath:bI,autoIncrement:!0}).createIndex(Do,xI,{unique:!0});const I=m.store(wr),b=w.map((x=>I.put(x)));return j.waitFor(b)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Al,{keyPath:FV})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.yi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Bc)})(e),this.wi(a))))),r<7&&i>=7&&(l=l.next((()=>this.Si(a)))),r<8&&i>=8&&(l=l.next((()=>this.bi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.Di(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(op,{keyPath:UV})})(e),(function(f){f.createObjectStore(ap,{keyPath:jV})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(f){const m=f.createObjectStore(lp,{keyPath:GV});m.createIndex(Qg,KV,{unique:!1}),m.createIndex(oA,QV,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(f){const m=f.createObjectStore(Pf,{keyPath:xV});m.createIndex(sf,NV),m.createIndex(nA,DV)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Ao)))),r<14&&i>=14&&(l=l.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(f){f.createObjectStore(h_,{keyPath:BV,autoIncrement:!0}).createIndex(Kg,zV,{unique:!1}),f.createObjectStore(Ic,{keyPath:qV}).createIndex(iA,$V,{unique:!1}),f.createObjectStore(Tc,{keyPath:WV}).createIndex(sA,HV,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(Ic).clear()})).next((()=>{t.objectStore(Tc).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(d_,{keyPath:JV})})(e)}))),r<18&&i>=18&&S0()&&(l=l.next((()=>{t.objectStore(Ic).clear()})).next((()=>{t.objectStore(Tc).clear()}))),l}wi(e){let t=0;return e.store(Ao).ee(((r,i)=>{t+=Vf(i)})).next((()=>{const r={byteSize:t};return e.store(Bc).put(Gg,r)}))}yi(e){const t=e.store(jc),r=e.store(wr);return t.J().next((i=>j.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,Ps],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Do,l).next((h=>j.forEach(h,(f=>{ye(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const m=Po(this.serializer,f);return hR(e,a.userId,m).next((()=>{}))}))))}))))}Si(e){const t=e.store(Sl),r=e.store(Ao);return e.store(jo).get(Cf).next((i=>{const a=[];return r.ee(((l,h)=>{const f=new Fe(l),m=(function(w){return[0,pn(w)]})(f);a.push(t.get(m).next((_=>_?j.resolve():(w=>t.put({targetId:0,path:pn(w),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>j.waitFor(a)))}))}bi(e,t){e.createObjectStore(zc,{keyPath:MV});const r=t.store(zc),i=new C_,a=l=>{if(i.add(l)){const h=l.lastSegment(),f=l.popLast();return r.put({collectionId:h,parent:pn(f)})}};return t.store(Ao).ee({X:!0},((l,h)=>{const f=new Fe(l);return a(f.popLast())})).next((()=>t.store(Il).ee({X:!0},(([l,h,f],m)=>{const _=Zr(h);return a(_.popLast())}))))}Di(e){const t=e.store(Tl);return t.ee(((r,i)=>{const a=dc(i),l=aR(this.serializer,a);return t.put(l)}))}Ci(e,t){const r=t.store(Ao),i=[];return r.ee(((a,l)=>{const h=t.store(Pf),f=(function(w){return w.document?new oe(Fe.fromString(w.document.name).popFirst(5)):w.noDocument?oe.fromSegments(w.noDocument.path):w.unknownDocument?oe.fromSegments(w.unknownDocument.path):he(36783)})(l).path.toArray(),m={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(m))})).next((()=>j.waitFor(i)))}Fi(e,t){const r=t.store(wr),i=yR(this.serializer),a=new b_(gp.mi,this.serializer.yt);return r.J().next((l=>{const h=new Map;return l.forEach((f=>{let m=h.get(f.userId)??De();Po(this.serializer,f).keys().forEach((_=>m=m.add(_))),h.set(f.userId,m)})),j.forEach(h,((f,m)=>{const _=new Gt(m),w=pp.wt(this.serializer,_),I=a.getIndexManager(_),b=mp.wt(_,this.serializer,I,a.referenceDelegate);return new _R(i,b,w,I).recalculateAndSaveOverlaysForDocumentKeys(new Jg(t,bn.ce),f).next()}))}))}}function wT(n){n.createObjectStore(Sl,{keyPath:OV}).createIndex(c_,LV,{unique:!0}),n.createObjectStore(Tl,{keyPath:"targetId"}).createIndex(rA,VV,{unique:!0}),n.createObjectStore(jo)}const _s="IndexedDbPersistence",Tg=18e5,Sg=5e3,Ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vR="main";class x_{constructor(e,t,r,i,a,l,h,f,m,_,w=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=l,this.document=h,this.xi=m,this.Oi=_,this.Ni=w,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!x_.v())throw new J(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tL(this,i),this.$i=t+vR,this.serializer=new oR(f),this.Ui=new ti(this.$i,this.Ni,new fL(this.serializer)),this.hi=new qO,this.Pi=new YO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yR(this.serializer),this.Ii=new zO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&kt(_s,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(W.FAILED_PRECONDITION,Ag);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new bn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Kd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if($s(e))return X(_s,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return X(_s,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return ic(e).get(Ya).next((t=>j.resolve(this.es(t))))}ts(e){return Kd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Tg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=zt(t,Al);return r.J().next((i=>{const a=this.ss(i,Tg),l=i.filter((h=>a.indexOf(h)===-1));return j.forEach(l,(h=>r.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?j.resolve(!0):ic(e).get(Ya).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new J(W.FAILED_PRECONDITION,Ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||Kd(e).J().next((r=>this.ss(r,Sg).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&X(_s,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[uh,Al],(e=>{const t=new Jg(e,bn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Kd(e).J().next((t=>this.ss(t,Tg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return mp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new JO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return pp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){X(_s,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?ZV:f===17?cA:f===16?XV:f===15?f_:f===14?uA:f===13?lA:f===12?YV:f===11?aA:void he(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,i,a,(h=>(l=new Jg(h,this.ci?this.ci.next():bn.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new J(W.FAILED_PRECONDITION,YS);return r(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>r(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return ic(e).get(Ya).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Sg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new J(W.FAILED_PRECONDITION,Ag)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ic(e).put(Ya,t)}static v(){return ti.v()}Zi(e){const t=ic(e);return t.get(Ya).next((r=>this.es(r)?(X(_s,"Releasing primary lease."),t.delete(Ya)):j.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;T0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return X(_s,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return kt(_s,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){kt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ic(n){return zt(n,uh)}function Kd(n){return zt(n,Al)}function N_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class D_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=De(),i=De();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new D_(e,t.fromCache,r,i)}}class pL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return T0()?8:ZS(vt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new pL;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(rl()<=Me.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(rl()<=Me.DEBUG&&X("QueryEngine","Query:",il(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(rl()<=Me.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):j.resolve())}ys(e,t){if($I(t))return j.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=xf(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=De(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.Ds(t,h);return this.Cs(t,m,l,f.readTime)?this.ys(e,xf(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,r,i){return $I(t)||i.isEqual(Ee.min())?j.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,i)?j.resolve(null):(rl()<=Me.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),il(t)),this.vs(e,l,t,QS(i,El)).next((h=>h)))}))}Ds(e,t){let r=new tt(xA(e));return t.forEach(((i,a)=>{dh(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return rl()<=Me.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",il(t)),this.ps.getDocumentsMatchingQuery(e,t,Jn.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const V_="LocalStore",mL=3e8;class gL{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ot(be),this.xs=new Li((a=>Go(a)),ch),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _R(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function ER(n,e,t,r){return new gL(n,e,t,r)}async function IR(n,e){const t=le(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],h=[];let f=De();for(const m of i){l.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Ls:m,removedBatchIds:l,addedBatchIds:h})))}))}))}function yL(n,e){const t=le(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,m,_){const w=m.batch,I=w.keys();let b=j.resolve();return I.forEach((x=>{b=b.next((()=>_.getEntry(f,x))).next((F=>{const O=m.docVersions.get(x);ye(O!==null,48541),F.version.compareTo(O)<0&&(w.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),_.addEntry(F)))}))})),b.next((()=>h.mutationQueue.removeMutationBatch(f,w)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(h){let f=De();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function TR(n){const e=le(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _L(n,e){const t=le(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach(((_,w)=>{const I=i.get(w);if(!I)return;h.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,w))));let b=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?b=b.withResumeToken(Tt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):_.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(_.resumeToken,r)),i=i.insert(w,b),(function(F,O,K){return F.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=mL?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(I,b,_)&&h.push(t.Pi.updateTargetData(a,b))}));let f=Nn(),m=De();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),h.push(SR(a,l,e.documentUpdates).next((_=>{f=_.ks,m=_.qs}))),!r.isEqual(Ee.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((w=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));h.push(_)}return j.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function SR(n,e,t){let r=De(),i=De();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Nn();return t.forEach(((h,f)=>{const m=a.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):X(V_,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)})),{ks:l,qs:i}}))}function vL(n,e){const t=le(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ps),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Nl(n,e){const t=le(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,j.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new Ri(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Dl(n,e,t){const r=le(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!$s(l))throw l;X(V_,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Lf(n,e,t){const r=le(n);let i=Ee.min(),a=De();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,m,_){const w=le(f),I=w.xs.get(_);return I!==void 0?j.resolve(w.Ms.get(I)):w.Pi.getTargetData(m,_)})(r,l,En(e)).next((h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Ee.min(),t?a:De()))).next((h=>(PR(r,bA(e),h),{documents:h,Qs:a})))))}function AR(n,e){const t=le(n),r=le(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((l=>l?l.target:null))))}function RR(n,e){const t=le(n),r=t.Os.get(e)||Ee.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,QS(r,El),Number.MAX_SAFE_INTEGER))).then((i=>(PR(t,e,i),i)))}function PR(n,e,t){let r=n.Os.get(e)||Ee.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}async function wL(n,e,t,r){const i=le(n);let a=De(),l=Nn();for(const m of t){const _=e.$s(m.metadata.name);m.document&&(a=a.add(_));const w=e.Us(m);w.setReadTime(e.Ks(m.metadata.readTime)),l=l.insert(_,w)}const h=i.Ns.newChangeBuffer({trackRemovals:!0}),f=await Nl(i,(function(_){return En(Hl(Fe.fromString(`__bundle__/docs/${_}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(m=>SR(m,h,l).next((_=>(h.apply(m),_))).next((_=>i.Pi.removeMatchingKeysForTargetId(m,f.targetId).next((()=>i.Pi.addMatchingKeys(m,a,f.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(m,_.ks,_.qs))).next((()=>_.ks))))))}async function EL(n,e,t=De()){const r=await Nl(n,En(R_(e.bundledQuery))),i=le(n);return i.persistence.runTransaction("Save named query","readwrite",(a=>{const l=bt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ii.saveNamedQuery(a,e);const h=r.withResumeToken(Tt.EMPTY_BYTE_STRING,l);return i.Ms=i.Ms.insert(h.targetId,h),i.Pi.updateTargetData(a,h).next((()=>i.Pi.removeMatchingKeysForTargetId(a,r.targetId))).next((()=>i.Pi.addMatchingKeys(a,t,r.targetId))).next((()=>i.Ii.saveNamedQuery(a,e)))}))}const CR="firestore_clients";function ET(n,e){return`${CR}_${n}_${e}`}const kR="firestore_mutations";function IT(n,e,t){let r=`${kR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const bR="firestore_targets";function Rg(n,e){return`${bR}_${n}_${e}`}const Gr="SharedClientState";class Mf{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new J(i.error.code,i.error.message))),l?new Mf(e,t,i.state,a):(kt(Gr,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new J(r.error.code,r.error.message))),a?new Pc(e,r.state,i):(kt(Gr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ff{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=__();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=eA(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Ff(e,a):(kt(Gr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class O_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new O_(t.clientId,t.onlineState):(kt(Gr,`Failed to parse online state: ${e}`),null)}}class hy{constructor(){this.activeTargetIds=__()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pg{constructor(e,t,r,i,a){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ot(be),this.started=!1,this.Xs=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=ET(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new hy),this.ro=new RegExp(`^${CR}_${l}_([^_]*)$`),this.io=new RegExp(`^${kR}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${bR}_${l}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(ET(this.persistenceKey,r));if(i){const a=Ff.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Rg(this.persistenceKey,e));if(i){const a=Pc.Ws(e,i);a&&(r=a.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rg(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return X(Gr,"READ",e,t),t}setItem(e,t){X(Gr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){X(Gr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(X(Gr,"EVENT",t.key,t.newValue),t.key===this.eo)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(a){let l=bn.ce;if(a!=null)try{const h=JSON.parse(a);ye(typeof h=="number",30636,{So:a}),l=h}catch(h){kt(Gr,"Failed to read sequence number from WebStorage",h)}return l})(t.newValue);r!==bn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new Mf(this.currentUser,e,t,r),a=IT(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const t=IT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=Rg(this.persistenceKey,e),a=new Pc(e,t,r);this.setItem(i,a.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Ff.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Mf.Ws(new Gt(a),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return Pc.Ws(i,t)}uo(e){return O_.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);X(Gr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),l=[],h=[];return a.forEach((f=>{i.has(f)||l.push(f)})),i.forEach((f=>{a.has(f)||h.push(f)})),this.syncEngine.Fo(l,h).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=__();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class xR{constructor(){this.Mo=new hy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class IL{Oo(e){}shutdown(){}}const TT="ConnectivityMonitor";class ST{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(TT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(TT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qd=null;function dy(){return Qd===null?Qd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qd++,"0x"+Qd.toString(16)}const Cg="RestConnection",TL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Yg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const l=dy(),h=this.zo(e,t.toUriEncodedString());X(Cg,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:m}=new URL(h),_=js(m);return this.Jo(e,h,f,r,_).then((w=>(X(Cg,`Received RPC '${e}' ${l}: `,w),w)),(w=>{throw si(Cg,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w}))}Ho(e,t,r,i,a,l){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=TL[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class AL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cn="WebChannelConnection";class RL extends SL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const l=dy();return new Promise(((h,f)=>{const m=new FS;m.setWithCredentials(!0),m.listenOnce(US.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case tf.NO_ERROR:const w=m.getResponseJson();X(cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case tf.TIMEOUT:X(cn,`RPC '${e}' ${l} timed out`),f(new J(W.DEADLINE_EXCEEDED,"Request time out"));break;case tf.HTTP_ERROR:const I=m.getStatus();if(X(cn,`RPC '${e}' ${l} failed with status:`,I,"response text:",m.getResponseText()),I>0){let b=m.getResponseJson();Array.isArray(b)&&(b=b[0]);const x=b?.error;if(x&&x.status&&x.message){const F=(function(K){const ae=K.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(ae)>=0?ae:W.UNKNOWN})(x.status);f(new J(F,x.message))}else f(new J(W.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new J(W.UNAVAILABLE,"Connection failed."));break;default:he(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{X(cn,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(i);X(cn,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",_,r,15)}))}T_(e,t,r){const i=dy(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=zS(),h=BS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");X(cn,`Creating RPC '${e}' stream ${i}: ${_}`,f);const w=l.createWebChannel(_,f);this.I_(w);let I=!1,b=!1;const x=new AL({Yo:O=>{b?X(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(X(cn,`Opening RPC '${e}' stream ${i} transport.`),w.open(),I=!0),X(cn,`RPC '${e}' stream ${i} sending:`,O),w.send(O))},Zo:()=>w.close()}),F=(O,K,ae)=>{O.listen(K,(ne=>{try{ae(ne)}catch(de){setTimeout((()=>{throw de}),0)}}))};return F(w,uc.EventType.OPEN,(()=>{b||(X(cn,`RPC '${e}' stream ${i} transport opened.`),x.o_())})),F(w,uc.EventType.CLOSE,(()=>{b||(b=!0,X(cn,`RPC '${e}' stream ${i} transport closed`),x.a_(),this.E_(w))})),F(w,uc.EventType.ERROR,(O=>{b||(b=!0,si(cn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),x.a_(new J(W.UNAVAILABLE,"The operation could not be completed")))})),F(w,uc.EventType.MESSAGE,(O=>{if(!b){const K=O.data[0];ye(!!K,16349);const ae=K,ne=ae?.error||ae[0]?.error;if(ne){X(cn,`RPC '${e}' stream ${i} received error:`,ne);const de=ne.status;let ue=(function(R){const C=Lt[R];if(C!==void 0)return $A(C)})(de),me=ne.message;ue===void 0&&(ue=W.INTERNAL,me="Unknown error status: "+de+" with message "+ne.message),b=!0,x.a_(new J(ue,me)),w.close()}else X(cn,`RPC '${e}' stream ${i} received:`,K),x.u_(K)}})),F(h,jS.STAT_EVENT,(O=>{O.stat===$g.PROXY?X(cn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===$g.NOPROXY&&X(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{x.__()}),0),x}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function NR(){return typeof window<"u"?window:null}function df(){return typeof document<"u"?document:null}function gh(n){return new xO(n,!0)}class L_{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const AT="PersistentStream";class DR{constructor(e,t,r,i,a,l,h,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new L_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new J(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return X(AT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(X(AT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PL extends DR{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=VO(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ee.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?bt(l.readTime):Ee.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=oy(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=kf(f)?{documents:eR(a,f)}:{query:tR(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=KA(a,l.resumeToken);const m=iy(a,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ee.min())>0){h.readTime=xl(a,l.snapshotVersion.toTimestamp());const m=iy(a,l.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const r=LO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=oy(this.serializer),t.removeTarget=e,this.q_(t)}}class CL extends DR{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OO(e.writeResults,e.commitTime),r=bt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=oy(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Kc(this.serializer,r)))};this.q_(t)}}class kL{}class bL extends kL{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new J(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,sy(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(W.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,sy(t,r),i,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new J(W.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kt(t),this.aa=!1):X("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zo="RemoteStore";class NL{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Hs(this)&&(X(Zo,"Restarting streams for network reachability change."),await(async function(f){const m=le(f);m.Ea.add(4),await Ql(m),m.Ra.set("Unknown"),m.Ea.delete(4),await yh(m)})(this))}))})),this.Ra=new xL(r,i)}}async function yh(n){if(Hs(n))for(const e of n.da)await e(!0)}async function Ql(n){for(const e of n.da)await e(!1)}function yp(n,e){const t=le(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?F_(t):Yl(t).O_()&&M_(t,e))}function Vl(n,e){const t=le(n),r=Yl(t);t.Ia.delete(e),r.O_()&&VR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Hs(t)&&t.Ra.set("Unknown"))}function M_(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yl(n).Y_(e)}function VR(n,e){n.Va.Ue(e),Yl(n).Z_(e)}function F_(n){n.Va=new PO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Yl(n).start(),n.Ra.ua()}function U_(n){return Hs(n)&&!Yl(n).x_()&&n.Ia.size>0}function Hs(n){return le(n).Ea.size===0}function OR(n){n.Va=void 0}async function DL(n){n.Ra.set("Online")}async function VL(n){n.Ia.forEach(((e,t)=>{M_(n,e)}))}async function OL(n,e){OR(n),U_(n)?(n.Ra.ha(e),F_(n)):n.Ra.set("Unknown")}async function LL(n,e,t){if(n.Ra.set("Online"),e instanceof GA&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ia.delete(h),i.Va.removeTarget(h))})(n,e)}catch(r){X(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uf(n,r)}else if(e instanceof cf?n.Va.Ze(e):e instanceof HA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const r=await TR(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ia.get(m);_&&a.Ia.set(m,_.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,m)=>{const _=a.Ia.get(f);if(!_)return;a.Ia.set(f,_.withResumeToken(Tt.EMPTY_BYTE_STRING,_.snapshotVersion)),VR(a,f);const w=new Ri(_.target,f,m,_.sequenceNumber);M_(a,w)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(r){X(Zo,"Failed to raise snapshot:",r),await Uf(n,r)}}async function Uf(n,e,t){if(!$s(e))throw e;n.Ea.add(1),await Ql(n),n.Ra.set("Offline"),t||(t=()=>TR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{X(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await yh(n)}))}function LR(n,e){return e().catch((t=>Uf(n,t,e)))}async function Jl(n){const e=le(n),t=Ms(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ps;for(;ML(e);)try{const i=await vL(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,FL(e,i)}catch(i){await Uf(e,i)}MR(e)&&FR(e)}function ML(n){return Hs(n)&&n.Ta.length<10}function FL(n,e){n.Ta.push(e);const t=Ms(n);t.O_()&&t.X_&&t.ea(e.mutations)}function MR(n){return Hs(n)&&!Ms(n).x_()&&n.Ta.length>0}function FR(n){Ms(n).start()}async function UL(n){Ms(n).ra()}async function jL(n){const e=Ms(n);for(const t of n.Ta)e.ea(t.mutations)}async function BL(n,e,t){const r=n.Ta.shift(),i=I_.from(r,e,t);await LR(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Jl(n)}async function zL(n,e){e&&Ms(n).X_&&await(async function(r,i){if((function(l){return qA(l)&&l!==W.ABORTED})(i.code)){const a=r.Ta.shift();Ms(r).B_(),await LR(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Jl(r)}})(n,e),MR(n)&&FR(n)}async function RT(n,e){const t=le(n);t.asyncQueue.verifyOperationInProgress(),X(Zo,"RemoteStore received new credentials");const r=Hs(t);t.Ea.add(3),await Ql(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await yh(t)}async function fy(n,e){const t=le(n);e?(t.Ea.delete(2),await yh(t)):e||(t.Ea.add(2),await Ql(t),t.Ra.set("Unknown"))}function Yl(n){return n.ma||(n.ma=(function(t,r,i){const a=le(t);return a.sa(),new PL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:DL.bind(null,n),t_:VL.bind(null,n),r_:OL.bind(null,n),H_:LL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),U_(n)?F_(n):n.Ra.set("Unknown")):(await n.ma.stop(),OR(n))}))),n.ma}function Ms(n){return n.fa||(n.fa=(function(t,r,i){const a=le(t);return a.sa(),new CL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:UL.bind(null,n),r_:zL.bind(null,n),ta:jL.bind(null,n),na:BL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Jl(n)):(await n.fa.stop(),n.Ta.length>0&&(X(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class j_{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new j_(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xl(n,e){if(kt("AsyncQueue",`${e}: ${n}`),$s(n))return new J(W.UNAVAILABLE,`${e}: ${n}`);throw n}class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||oe.comparator(t.key,r.key):(t,r)=>oe.comparator(t.key,r.key),this.keyedMap=cc(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class PT{constructor(){this.ga=new ot(oe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):he(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ol{constructor(e,t,r,i,a,l,h,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new Ol(e,t,ml.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $L{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=le(t),a=i.queries;i.queries=CT(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(r)}))})(this,new J(W.ABORTED,"Firestore shutting down"))}}function CT(){return new Li((n=>kA(n)),hh)}async function B_(n,e){const t=le(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new qL,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const h=Xl(l,`Initialization of query '${il(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&q_(t)}async function z_(n,e){const t=le(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function WL(n,e){const t=le(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(i)&&(r=!0);l.wa=i}}r&&q_(t)}function HL(n,e,t){const r=le(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function q_(n){n.Ca.forEach((e=>{e.next()}))}var py,kT;(kT=py||(py={})).Ma="default",kT.Cache="cache";class $_{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ol(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==py.Cache}}class GL{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class bT{constructor(e){this.serializer=e}$s(e){return ni(this.serializer,e)}Us(e){return e.metadata.exists?ZA(this.serializer,e.document,!1):ht.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return bt(e)}}class KL{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=UR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=Fe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new bT(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.$s(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||De()).add(a);t.set(l,h)}}return t}async ja(e){const t=await wL(e,new bT(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await EL(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function UR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jR{constructor(e){this.key=e}}class BR{constructor(e){this.key=e}}class zR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=De(),this.mutatedKeys=De(),this.eu=xA(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new PT,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((_,w)=>{const I=i.get(_),b=dh(this.query,w)?w:null,x=!!I&&this.mutatedKeys.has(I.key),F=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let O=!1;I&&b?I.data.isEqual(b.data)?x!==F&&(r.track({type:3,doc:b}),O=!0):this.su(I,b)||(r.track({type:2,doc:b}),O=!0,(f&&this.eu(b,f)>0||m&&this.eu(b,m)<0)&&(h=!0)):!I&&b?(r.track({type:0,doc:b}),O=!0):I&&!b&&(r.track({type:1,doc:I}),O=!0,(f||m)&&(h=!0)),O&&(b?(l=l.add(b),a=F?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{tu:l,iu:r,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((_,w)=>(function(b,x){const F=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Rt:O})}};return F(b)-F(x)})(_.type,w.type)||this.eu(_.doc,w.doc))),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,l.length!==0||m?{snapshot:new Ol(this.query,e.tu,a,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=De(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new BR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new jR(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=De();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gs="SyncEngine";class QL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JL{constructor(e){this.key=e,this.hu=!1}}class YL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Li((h=>kA(h)),hh),this.Iu=new Map,this.Eu=new Set,this.du=new ot(oe.comparator),this.Au=new Map,this.Ru=new k_,this.Vu={},this.mu=new Map,this.fu=Xo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XL(n,e,t=!0){const r=_p(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await qR(r,e,t,!0),i}async function ZL(n,e){const t=_p(n);await qR(t,e,!0,!1)}async function qR(n,e,t,r){const i=await Nl(n.localStore,En(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await W_(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&yp(n.remoteStore,i),h}async function W_(n,e,t,r,i){n.pu=(w,I,b)=>(async function(F,O,K,ae){let ne=O.view.ru(K);ne.Cs&&(ne=await Lf(F.localStore,O.query,!1).then((({documents:k})=>O.view.ru(k,ne))));const de=ae&&ae.targetChanges.get(O.targetId),ue=ae&&ae.targetMismatches.get(O.targetId)!=null,me=O.view.applyChanges(ne,F.isPrimaryClient,de,ue);return my(F,O.targetId,me.au),me.snapshot})(n,w,I,b);const a=await Lf(n.localStore,e,!0),l=new zR(e,a.Qs),h=l.ru(a.documents),f=mh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=l.applyChanges(h,n.isPrimaryClient,f);my(n,t,m.au);const _=new QL(e,t,l);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function eM(n,e,t){const r=le(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!hh(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dl(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Vl(r.remoteStore,i.targetId),Ll(r,i.targetId)})).catch(qs)):(Ll(r,i.targetId),await Dl(r.localStore,i.targetId,!0))}async function tM(n,e){const t=le(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vl(t.remoteStore,r.targetId))}async function nM(n,e,t){const r=Q_(n);try{const i=await(function(l,h){const f=le(l),m=Ye.now(),_=h.reduce(((b,x)=>b.add(x.key)),De());let w,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let x=Nn(),F=De();return f.Ns.getEntries(b,_).next((O=>{x=O,x.forEach(((K,ae)=>{ae.isValidDocument()||(F=F.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,x))).next((O=>{w=O;const K=[];for(const ae of h){const ne=SO(ae,w.get(ae.key).overlayedDocument);ne!=null&&K.push(new Mi(ae.key,ne,wA(ne.value.mapValue),gt.exists(!0)))}return f.mutationQueue.addMutationBatch(b,m,K,h)})).next((O=>{I=O;const K=O.applyToLocalDocumentSet(w,F);return f.documentOverlayCache.saveOverlays(b,O.batchId,K)}))})).then((()=>({batchId:I.batchId,changes:DA(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,h,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new ot(be)),m=m.insert(h,f),l.Vu[l.currentUser.toKey()]=m})(r,i.batchId,t),await Fi(r,i.changes),await Jl(r.remoteStore)}catch(i){const a=Xl(i,"Failed to persist write");t.reject(a)}}async function $R(n,e){const t=le(n);try{const r=await _L(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?ye(l.hu,14607):i.removedDocuments.size>0&&(ye(l.hu,42227),l.hu=!1))})),await Fi(t,r,e)}catch(r){await qs(r)}}function xT(n,e,t){const r=le(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)})),(function(l,h){const f=le(l);f.onlineState=h;let m=!1;f.queries.forEach(((_,w)=>{for(const I of w.Sa)I.va(h)&&(m=!0)})),m&&q_(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function rM(n,e,t){const r=le(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new ot(oe.comparator);l=l.insert(a,ht.newNoDocument(a,Ee.min()));const h=De().add(a),f=new ph(Ee.min(),new Map,new ot(be),l,h);await $R(r,f),r.du=r.du.remove(a),r.Au.delete(e),K_(r)}else await Dl(r.localStore,e,!1).then((()=>Ll(r,e,t))).catch(qs)}async function iM(n,e){const t=le(n),r=e.batch.batchId;try{const i=await yL(t.localStore,e);G_(t,r,null),H_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Fi(t,i)}catch(i){await qs(i)}}async function sM(n,e,t){const r=le(n);try{const i=await(function(l,h){const f=le(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next((w=>(ye(w!==null,37113),_=w.keys(),f.mutationQueue.removeMutationBatch(m,w)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);G_(r,e,t),H_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Fi(r,i)}catch(i){await qs(i)}}async function oM(n,e){const t=le(n);Hs(t.remoteStore)||X(Gs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(l){const h=le(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>h.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(r===Ps)return void e.resolve();const i=t.mu.get(r)||[];i.push(e),t.mu.set(r,i)}catch(r){const i=Xl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function H_(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function G_(n,e,t){const r=le(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ll(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||WR(n,r)}))}function WR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vl(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),K_(n))}function my(n,e,t){for(const r of t)r instanceof jR?(n.Ru.addReference(r.key,e),aM(n,r)):r instanceof BR?(X(Gs,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||WR(n,r.key)):he(19791,{wu:r})}function aM(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(X(Gs,"New document in limbo: "+t),n.Eu.add(r),K_(n))}function K_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new oe(Fe.fromString(e)),r=n.fu.next();n.Au.set(r,new JL(t)),n.du=n.du.insert(t,r),yp(n.remoteStore,new Ri(En(Hl(t.path)),r,"TargetPurposeLimboResolution",bn.ce))}}async function Fi(n,e,t){const r=le(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((h,f)=>{l.push(r.pu(f,e,t).then((m=>{if((m||t)&&r.isPrimaryClient){const _=m?!m.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(m){i.push(m);const _=D_.As(f.targetId,m);a.push(_)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(f,m){const _=le(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>j.forEach(m,(I=>j.forEach(I.Es,(b=>_.persistence.referenceDelegate.addReference(w,I.targetId,b))).next((()=>j.forEach(I.ds,(b=>_.persistence.referenceDelegate.removeReference(w,I.targetId,b)))))))))}catch(w){if(!$s(w))throw w;X(V_,"Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const b=_.Ms.get(I),x=b.snapshotVersion,F=b.withLastLimboFreeSnapshotVersion(x);_.Ms=_.Ms.insert(I,F)}}})(r.localStore,a))}async function lM(n,e){const t=le(n);if(!t.currentUser.isEqual(e)){X(Gs,"User change. New user:",e.toKey());const r=await IR(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new J(W.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fi(t,r.Ls)}}function uM(n,e){const t=le(n),r=t.Au.get(e);if(r&&r.hu)return De().add(r.key);{let i=De();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const h=t.Tu.get(l);i=i.unionWith(h.view.nu)}return i}}async function cM(n,e){const t=le(n),r=await Lf(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&my(t,e.targetId,i.au),i}async function hM(n,e){const t=le(n);return RR(t.localStore,e).then((r=>Fi(t,r)))}async function dM(n,e,t,r){const i=le(n),a=await(function(h,f){const m=le(h),_=le(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",(w=>_.er(w,f).next((I=>I?m.localDocuments.getDocuments(w,I):j.resolve(null)))))})(i.localStore,e);a!==null?(t==="pending"?await Jl(i.remoteStore):t==="acknowledged"||t==="rejected"?(G_(i,e,r||null),H_(i,e),(function(h,f){le(le(h).mutationQueue).ir(f)})(i.localStore,e)):he(6720,"Unknown batchState",{Su:t}),await Fi(i,a)):X(Gs,"Cannot apply mutation batch with id: "+e)}async function fM(n,e){const t=le(n);if(_p(t),Q_(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await NT(t,r.toArray());t.gu=!0,await fy(t.remoteStore,!0);for(const a of i)yp(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then((()=>(Ll(t,l),Dl(t.localStore,l,!0)))),Vl(t.remoteStore,l)})),await i,await NT(t,r),(function(l){const h=le(l);h.Au.forEach(((f,m)=>{Vl(h.remoteStore,m)})),h.Ru.Jr(),h.Au=new Map,h.du=new ot(oe.comparator)})(t),t.gu=!1,await fy(t.remoteStore,!1)}}async function NT(n,e,t){const r=le(n),i=[],a=[];for(const l of e){let h;const f=r.Iu.get(l);if(f&&f.length!==0){h=await Nl(r.localStore,En(f[0]));for(const m of f){const _=r.Tu.get(m),w=await cM(r,_);w.snapshot&&a.push(w.snapshot)}}else{const m=await AR(r.localStore,l);h=await Nl(r.localStore,m),await W_(r,HR(m),l,!1,h.resumeToken)}i.push(h)}return r.Pu.H_(a),i}function HR(n){return CA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pM(n){return(function(t){return le(le(t).persistence).Ts()})(le(n).localStore)}async function mM(n,e,t,r){const i=le(n);if(i.gu)return void X(Gs,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await RR(i.localStore,bA(a[0])),h=ph.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Tt.EMPTY_BYTE_STRING);await Fi(i,l,h);break}case"rejected":await Dl(i.localStore,e,!0),Ll(i,e,r);break;default:he(64155,t)}}async function gM(n,e,t){const r=_p(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){X(Gs,"Adding an already active target "+i);continue}const a=await AR(r.localStore,i),l=await Nl(r.localStore,a);await W_(r,HR(a),l.targetId,!1,l.resumeToken),yp(r.remoteStore,l)}for(const i of t)r.Iu.has(i)&&await Dl(r.localStore,i,!1).then((()=>{Vl(r.remoteStore,i),Ll(r,i)})).catch(qs)}}function _p(n){const e=le(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$R.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rM.bind(null,e),e.Pu.H_=WL.bind(null,e.eventManager),e.Pu.yu=HL.bind(null,e.eventManager),e}function Q_(n){const e=le(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sM.bind(null,e),e}function yM(n,e,t){const r=le(n);(async function(a,l,h){try{const f=await l.getMetadata();if(await(function(b,x){const F=le(b),O=bt(x.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",(K=>F.Ii.getBundleMetadata(K,x.id))).then((K=>!!K&&K.createTime.compareTo(O)>=0))})(a.localStore,f))return await l.close(),h._completeWith((function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}})(f)),Promise.resolve(new Set);h._updateProgress(UR(f));const m=new KL(f,l.serializer);let _=await l.bu();for(;_;){const I=await m.Ga(_);I&&h._updateProgress(I),_=await l.bu()}const w=await m.ja(a.localStore);return await Fi(a,w.Ha,void 0),await(function(b,x){const F=le(b);return F.persistence.runTransaction("Save bundle","readwrite",(O=>F.Ii.saveBundleMetadata(O,x)))})(a.localStore,f),h._completeWith(w.progress),Promise.resolve(w.Ja)}catch(f){return si(Gs,`Loading bundle failed with ${f}`),h._failWith(f),Promise.resolve(new Set)}})(r,e,t).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ER(this.persistence,new wR,e.initialUser,this.serializer)}Cu(e){return new b_(gp.mi,this.serializer)}Du(e){return new xR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class _M extends Qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ye(this.persistence.referenceDelegate instanceof Of,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new b_((r=>Of.mi(r,t)),this.serializer)}}class GR extends Qc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Q_(this.xu.syncEngine),await Jl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ER(this.persistence,new wR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new pR(r,e.asyncQueue,t)}Mu(e,t){const r=new PV(t,this.persistence);return new RV(e.asyncQueue,r)}Cu(e){const t=N_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new x_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NR(),df(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new xR}}class vM extends GR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Pg&&(this.sharedClientState.syncEngine={Co:dM.bind(null,t),vo:mM.bind(null,t),Fo:gM.bind(null,t),Ts:pM.bind(null,t),Do:hM.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await fM(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=NR();if(!Pg.v(t))throw new J(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=N_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lM.bind(null,this.syncEngine),await fy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $L})()}createDatastore(e){const t=gh(e.databaseInfo.databaseId),r=(function(a){return new RL(a)})(e.databaseInfo);return(function(a,l,h,f){return new bL(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,h){return new NL(r,i,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>xT(this.syncEngine,t,0)),(function(){return ST.v()?new ST:new IL})())}createSyncEngine(e,t){return(function(i,a,l,h,f,m,_){const w=new YL(i,a,l,h,f,m);return _&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=le(t);X(Zo,"RemoteStore shutting down."),r.Ea.add(5),await Ql(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jc.provider={build:()=>new Jc};function DT(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class wM{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new nn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(r);return new GL(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class EM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const l=le(i),h={documents:a.map((w=>Gc(l.serializer,w)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,Fe.emptyPath(),h,a.length),m=new Map;f.forEach((w=>{const I=DO(l.serializer,w);m.set(I.key.toString(),I)}));const _=[];return a.forEach((w=>{const I=m.get(w.toString());ye(!!I,55234,{key:w}),_.push(I)})),_})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=oe.fromPath(r);this.mutations.push(new w_(i,this.precondition(i)))})),await(async function(r,i){const a=le(r),l={writes:i.map((h=>Kc(a.serializer,h)))};await a.Go("Commit",a.serializer.databaseId,Fe.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw he(50498,{Gu:e.constructor.name});t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new J(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new J(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class IM{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new L_(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new EM(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!lh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!qA(t)}return!1}}const Fs="FirestoreClient";class TM{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Gt.UNAUTHENTICATED,this.clientId=o_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{X(Fs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(X(Fs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Xl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function kg(n,e){n.asyncQueue.verifyOperationInProgress(),X(Fs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await IR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function VT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await J_(n);X(Fs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>RT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>RT(e.remoteStore,i))),n._onlineComponents=e}async function J_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){X(Fs,"Using user provided OfflineComponentProvider");try{await kg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;si("Error using user provided cache. Falling back to memory cache: "+t),await kg(n,new Qc)}}else X(Fs,"Using default OfflineComponentProvider"),await kg(n,new _M(void 0));return n._offlineComponents}async function wp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(X(Fs,"Using user provided OnlineComponentProvider"),await VT(n,n._uninitializedComponentsProvider._online)):(X(Fs,"Using default OnlineComponentProvider"),await VT(n,new Jc))),n._onlineComponents}function KR(n){return J_(n).then((e=>e.persistence))}function Y_(n){return J_(n).then((e=>e.localStore))}function QR(n){return wp(n).then((e=>e.remoteStore))}function X_(n){return wp(n).then((e=>e.syncEngine))}function SM(n){return wp(n).then((e=>e.datastore))}async function Ml(n){const e=await wp(n),t=e.eventManager;return t.onListen=XL.bind(null,e.syncEngine),t.onUnlisten=eM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tM.bind(null,e.syncEngine),t}function AM(n){return n.asyncQueue.enqueue((async()=>{const e=await KR(n),t=await QR(n);return e.setNetworkEnabled(!0),(function(i){const a=le(i);return a.Ea.delete(0),yh(a)})(t)}))}function RM(n){return n.asyncQueue.enqueue((async()=>{const e=await KR(n),t=await QR(n);return e.setNetworkEnabled(!1),(async function(i){const a=le(i);a.Ea.add(0),await Ql(a),a.Ra.set("Offline")})(t)}))}function PM(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const h=await(function(m,_){const w=le(m);return w.persistence.runTransaction("read document","readonly",(I=>w.localDocuments.getDocument(I,_)))})(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new J(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const f=Xl(h,`Failed to get document '${a} from cache`);l.reject(f)}})(await Y_(n),e,t))),t.promise}function JR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,m){const _=new vp({next:I=>{_.Nu(),l.enqueueAndForget((()=>z_(a,w)));const b=I.docs.has(h);!b&&I.fromCache?m.reject(new J(W.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&I.fromCache&&f&&f.source==="server"?m.reject(new J(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new $_(Hl(h.path),_,{includeMetadataChanges:!0,qa:!0});return B_(a,w)})(await Ml(n),n.asyncQueue,e,t,r))),r.promise}function CM(n,e){const t=new nn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,a,l){try{const h=await Lf(i,a,!0),f=new zR(a,h.Qs),m=f.ru(h.documents),_=f.applyChanges(m,!1);l.resolve(_.snapshot)}catch(h){const f=Xl(h,`Failed to execute query '${a} against cache`);l.reject(f)}})(await Y_(n),e,t))),t.promise}function YR(n,e,t={}){const r=new nn;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,m){const _=new vp({next:I=>{_.Nu(),l.enqueueAndForget((()=>z_(a,w))),I.fromCache&&f.source==="server"?m.reject(new J(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new $_(h,_,{includeMetadataChanges:!0,qa:!0});return B_(a,w)})(await Ml(n),n.asyncQueue,e,t,r))),r.promise}function kM(n,e){const t=new vp(e);return n.asyncQueue.enqueueAndForget((async()=>(function(i,a){le(i).Ca.add(a),a.next()})(await Ml(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(i,a){le(i).Ca.delete(a)})(await Ml(n),t)))}}function bM(n,e,t,r){const i=(function(l,h){let f;return f=typeof l=="string"?WA().encode(l):l,(function(_,w){return new wM(_,w)})((function(_,w){if(_ instanceof Uint8Array)return DT(_,w);if(_ instanceof ArrayBuffer)return DT(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),h)})(t,gh(e));n.asyncQueue.enqueueAndForget((async()=>{yM(await X_(n),i,r)}))}function xM(n,e){return n.asyncQueue.enqueue((async()=>(function(r,i){const a=le(r);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Ii.getNamedQuery(l,i)))})(await Y_(n),e)))}function XR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const OT=new Map;const ZR="firestore.googleapis.com",LT=!0;class MT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZR,this.ssl=LT}else this.host=e.host,this.ssl=e.ssl??LT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XO)throw new J(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _h{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new pV;switch(r.type){case"firstParty":return new _V(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=OT.get(t);r&&(X("ComponentProvider","Removing Datastore"),OT.delete(t),r.terminate())})(this),Promise.resolve()}}function NM(n,e,t,r={}){n=Ke(n,_h);const i=js(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(xy(`https://${h}`),Ny("Firestore",!0)),a.host!==ZR&&a.host!==h&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:h,ssl:i,emulatorOptions:r};if(!ks(f,l)&&(n._setSettings(f),r.mockUserToken)){let m,_;if(typeof r.mockUserToken=="string")m=r.mockUserToken,_=Gt.MOCK_USER;else{m=xk(r.mockUserToken,n._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new J(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Gt(w)}n._authCredentials=new mV(new $S(m,_))}}let In=class e1{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new e1(this.firestore,e,this._query)}},st=class fc{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fc(this.firestore,e,this._key)}toJSON(){return{type:fc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ah(t,fc._jsonSchema))return new fc(e,r||null,new oe(Fe.fromString(t.referencePath)))}};st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:Ft("string",st._jsonSchemaVersion),referencePath:Ft("string")};let Cs=class t1 extends In{constructor(e,t,r){super(e,t,Hl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new oe(e))}withConverter(e){return new t1(this.firestore,e,this._path)}};function n1(n,e,...t){if(n=Te(n),a_("collection","path",e),n instanceof _h){const r=Fe.fromString(e,...t);return AI(r),new Cs(n,null,r)}{if(!(n instanceof st||n instanceof Cs))throw new J(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return AI(r),new Cs(n.firestore,null,r)}}function DM(n,e){if(n=Ke(n,_h),a_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new In(n,null,(function(r){return new Oi(Fe.emptyPath(),r)})(e))}function jf(n,e,...t){if(n=Te(n),arguments.length===1&&(e=o_.newId()),a_("doc","path",e),n instanceof _h){const r=Fe.fromString(e,...t);return SI(r),new st(n,null,new oe(r))}{if(!(n instanceof st||n instanceof Cs))throw new J(W.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Fe.fromString(e,...t));return SI(r),new st(n.firestore,n instanceof Cs?n.converter:null,new oe(r))}}function r1(n,e){return n=Te(n),e=Te(e),(n instanceof st||n instanceof Cs)&&(e instanceof st||e instanceof Cs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function i1(n,e){return n=Te(n),e=Te(e),n instanceof In&&e instanceof In&&n.firestore===e.firestore&&hh(n._query,e._query)&&n.converter===e.converter}const FT="AsyncQueue";class UT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new L_(this,"async_queue_retry"),this._c=()=>{const r=df();r&&X(FT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=df();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=df();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new nn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$s(e))throw e;X(FT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,kt("INTERNAL UNHANDLED ERROR: ",jT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=j_.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&he(47125,{Pc:jT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function gy(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class VM{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const OM=-1;let xt=class extends _h{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new UT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UT(e),this._firestoreClient=void 0,await e}}};function mn(n){if(n._terminated)throw new J(W.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||s1(n),n._firestoreClient}function s1(n){const e=n._freezeSettings(),t=(function(i,a,l,h){return new nO(i,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function LM(n,e){si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return o1(n,Jc.provider,{build:r=>new GR(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function MM(n){si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();o1(n,Jc.provider,{build:t=>new vM(t,e.cacheSizeBytes)})}function o1(n,e,t){if((n=Ke(n,xt))._firestoreClient||n._terminated)throw new J(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new J(W.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},s1(n)}function FM(n){if(n._initialized&&!n._terminated)throw new J(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new nn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!ti.v())return Promise.resolve();const i=r+vR;await ti.delete(i)})(N_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function UM(n){return(function(t){const r=new nn;return t.asyncQueue.enqueueAndForget((async()=>oM(await X_(t),r))),r.promise})(mn(n=Ke(n,xt)))}function jM(n){return AM(mn(n=Ke(n,xt)))}function BM(n){return RM(mn(n=Ke(n,xt)))}function zM(n,e){const t=mn(n=Ke(n,xt)),r=new VM;return bM(t,n._databaseId,e,r),r}function qM(n,e){return xM(mn(n=Ke(n,xt)),e).then((t=>t?new In(n,null,t.query):null))}class dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dn(Tt.fromBase64String(e))}catch(t){throw new J(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dn(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ah(e,dn._jsonSchema))return dn.fromBase64String(e.bytes)}}dn._jsonSchemaVersion="firestore/bytes/1.0",dn._jsonSchema={type:Ft("string",dn._jsonSchemaVersion),bytes:Ft("string")};let Us=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let ia=class{constructor(e){this._methodName=e}};class Ir{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(ah(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:Ft("string",Ir._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};class ri{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ah(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ri(e.vectorValues);throw new J(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Ft("string",ri._jsonSchemaVersion),vectorValues:Ft("object")};const $M=/^__.*__$/;class WM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gl(e,this.data,t,this.fieldTransforms)}}class a1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function l1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{Ac:n})}}class Ep{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ep({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(l1(this.Ac)&&$M.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gh(e)}Cc(e,t,r,i=!1){return new Ep({Ac:e,methodName:t,Dc:r,path:mt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sa(n){const e=n._freezeSettings(),t=gh(n._databaseId);return new HM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ip(n,e,t,r,i,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);sv("Data must be an object, but it was:",l,r);const h=h1(r,l);let f,m;if(a.merge)f=new xn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const w of a.mergeFields){const I=yy(e,w,t);if(!l.contains(I))throw new J(W.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);f1(_,I)||_.push(I)}f=new xn(_),m=l.fieldTransforms.filter((w=>f.covers(w.field)))}else f=null,m=l.fieldTransforms;return new WM(new tn(h),f,m)}class vh extends ia{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}function u1(n,e,t){return new Ep({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Z_ extends ia{_toFieldTransform(e){return new fh(e.path,new kl)}isEqual(e){return e instanceof Z_}}class ev extends ia{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=u1(this,e,!0),r=this.vc.map((a=>oa(a,t))),i=new Ko(r);return new fh(e.path,i)}isEqual(e){return e instanceof ev&&ks(this.vc,e.vc)}}class tv extends ia{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=u1(this,e,!0),r=this.vc.map((a=>oa(a,t))),i=new Qo(r);return new fh(e.path,i)}isEqual(e){return e instanceof tv&&ks(this.vc,e.vc)}}class nv extends ia{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bl(e.serializer,LA(e.serializer,this.Fc));return new fh(e.path,t)}isEqual(e){return e instanceof nv&&this.Fc===e.Fc}}function rv(n,e,t,r){const i=n.Cc(1,e,t);sv("Data must be an object, but it was:",i,r);const a=[],l=tn.empty();Ws(r,((f,m)=>{const _=ov(e,f,t);m=Te(m);const w=i.yc(_);if(m instanceof vh)a.push(_);else{const I=oa(m,w);I!=null&&(a.push(_),l.set(_,I))}}));const h=new xn(a);return new a1(l,h,i.fieldTransforms)}function iv(n,e,t,r,i,a){const l=n.Cc(1,e,t),h=[yy(e,r,t)],f=[i];if(a.length%2!=0)throw new J(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)h.push(yy(e,a[I])),f.push(a[I+1]);const m=[],_=tn.empty();for(let I=h.length-1;I>=0;--I)if(!f1(m,h[I])){const b=h[I];let x=f[I];x=Te(x);const F=l.yc(b);if(x instanceof vh)m.push(b);else{const O=oa(x,F);O!=null&&(m.push(b),_.set(b,O))}}const w=new xn(m);return new a1(_,w,l.fieldTransforms)}function c1(n,e,t,r=!1){return oa(t,n.Cc(r?4:3,e))}function oa(n,e){if(d1(n=Te(n)))return sv("Unsupported field value:",e,n),h1(n,e);if(n instanceof ia)return(function(r,i){if(!l1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const h of r){let f=oa(h,i.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ye.fromDate(r);return{timestampValue:xl(i.serializer,a)}}if(r instanceof Ye){const a=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xl(i.serializer,a)}}if(r instanceof Ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dn)return{bytesValue:KA(i.serializer,r._byteString)};if(r instanceof st){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:A_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ri)return(function(l,h){return{mapValue:{fields:{[p_]:{stringValue:m_},[Rl]:{arrayValue:{values:l.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return v_(h.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${ip(r)}`)})(n,e)}function h1(n,e){const t={};return hA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(n,((r,i)=>{const a=oa(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function d1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof Ir||n instanceof dn||n instanceof st||n instanceof ia||n instanceof ri)}function sv(n,e,t){if(!d1(t)||!GS(t)){const r=ip(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function yy(n,e,t){if((e=Te(e))instanceof Us)return e._internalPath;if(typeof e=="string")return ov(n,e);throw Bf("Field path arguments must be of type string or ",n,!1,void 0,t)}const GM=new RegExp("[~\\*/\\[\\]]");function ov(n,e,t){if(e.search(GM)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Us(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bf(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new J(W.INVALID_ARGUMENT,h+n+f)}function f1(n,e){return n.some((t=>t.isEqual(e)))}class Yc{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KM extends Yc{data(){return super.data()}}function Tp(n,e){return typeof e=="string"?ov(n,e):e instanceof Us?e._internalPath:e._delegate._internalPath}function p1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class wh extends av{}function vs(n,e,...t){let r=[];e instanceof av&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof lv)).length,h=a.filter((f=>f instanceof Sp)).length;if(l>1||l>0&&h>0)throw new J(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Sp extends wh{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sp(e,t,r)}_apply(e){const t=this._parse(e);return g1(e._query,t),new In(e.firestore,e.converter,ry(e._query,t))}_parse(e){const t=sa(e.firestore);return(function(a,l,h,f,m,_,w){let I;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new J(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zT(w,_);const x=[];for(const F of w)x.push(BT(f,a,F));I={arrayValue:{values:x}}}else I=BT(f,a,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zT(w,_),I=c1(h,l,w,_==="in"||_==="not-in");return Be.create(m,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function QM(n,e,t){const r=e,i=Tp("where",n);return Sp._create(i,r,t)}class lv extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const h=a.getFlattenedFilters();for(const f of h)g1(l,f),l=ry(l,f)})(e._query,t),new In(e.firestore,e.converter,ry(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class uv extends wh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new uv(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new J(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hc(a,l)})(e._query,this._field,this._direction);return new In(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Oi(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function JM(n,e="asc"){const t=e,r=Tp("orderBy",n);return uv._create(r,t)}class Ap extends wh{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ap(e,t,r)}_apply(e){return new In(e.firestore,e.converter,xf(e._query,this._limit,this._limitType))}}function YM(n){return KS("limit",n),Ap._create("limit",n,"F")}function XM(n){return KS("limitToLast",n),Ap._create("limitToLast",n,"L")}class Rp extends wh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Rp(e,t,r)}_apply(e){const t=m1(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(i,a){return new Oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)})(e._query,t))}}function ZM(...n){return Rp._create("startAt",n,!0)}function eF(...n){return Rp._create("startAfter",n,!1)}class Pp extends wh{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pp(e,t,r)}_apply(e){const t=m1(e,this.type,this._docOrFields,this._inclusive);return new In(e.firestore,e.converter,(function(i,a){return new Oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)})(e._query,t))}}function tF(...n){return Pp._create("endBefore",n,!1)}function nF(...n){return Pp._create("endAt",n,!0)}function m1(n,e,t,r){if(t[0]=Te(t[0]),t[0]instanceof Yc)return(function(a,l,h,f,m){if(!f)throw new J(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const _=[];for(const w of pl(a))if(w.field.isKeyField())_.push(Ho(l,f.key));else{const I=f.data.field(w.field);if(up(I))throw new J(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const b=w.field.canonicalString();throw new J(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}_.push(I)}return new Ls(_,m)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=sa(n.firestore);return(function(l,h,f,m,_,w){const I=l.explicitOrderBy;if(_.length>I.length)throw new J(W.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let x=0;x<_.length;x++){const F=_[x];if(I[x].field.isKeyField()){if(typeof F!="string")throw new J(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof F}`);if(!y_(l)&&F.indexOf("/")!==-1)throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${F}' contains a slash.`);const O=l.path.child(Fe.fromString(F));if(!oe.isDocumentKey(O))throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const K=new oe(O);b.push(Ho(h,K))}else{const O=c1(f,m,F);b.push(O)}}return new Ls(b,w)})(n._query,n.firestore._databaseId,i,e,t,r)}}function BT(n,e,t){if(typeof(t=Te(t))=="string"){if(t==="")throw new J(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y_(e)&&t.indexOf("/")!==-1)throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Fe.fromString(t));if(!oe.isDocumentKey(r))throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ho(n,new oe(r))}if(t instanceof st)return Ho(n,t._key);throw new J(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ip(t)}.`)}function zT(n,e){if(!Array.isArray(n)||n.length===0)throw new J(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g1(n,e){const t=(function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new J(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cv{convertValue(e,t="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ws(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[Rl].arrayValue?.values?.map((r=>pt(r.doubleValue)));return new ri(t)}convertGeoPoint(e){return new Ir(pt(e.latitude),pt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qc(e));default:return null}}convertTimestamp(e){const t=xi(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Fe.fromString(e);ye(sR(r),9688,{name:e});const i=new Ds(r.get(1),r.get(3)),a=new oe(r.popFirst(5));return i.isEqual(t)||kt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Cp(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class rF extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,t)}}class Vo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let or=class y1 extends Yc{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=y1._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};or._jsonSchemaVersion="firestore/documentSnapshot/1.0",or._jsonSchema={type:Ft("string",or._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};let Cc=class extends or{data(e={}){return super.data(e)}},Tr=class _1{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Cc(this._firestore,this._userDataWriter,r.key,r,new Vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((h=>{const f=new Cc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Vo(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Cc(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Vo(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,_=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),_=l.indexOf(h.doc.key)),{type:iF(h.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=o_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function iF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function v1(n,e){return n instanceof or&&e instanceof or?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Tr&&e instanceof Tr&&n._firestore===e._firestore&&i1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sF(n){n=Ke(n,st);const e=Ke(n.firestore,xt);return JR(mn(e),n._key).then((t=>hv(e,n,t)))}Tr._jsonSchemaVersion="firestore/querySnapshot/1.0",Tr._jsonSchema={type:Ft("string",Tr._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class aa extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new dn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,t)}}function oF(n){n=Ke(n,st);const e=Ke(n.firestore,xt),t=mn(e),r=new aa(e);return PM(t,n._key).then((i=>new or(e,r,n._key,i,new Vo(i!==null&&i.hasLocalMutations,!0),n.converter)))}function aF(n){n=Ke(n,st);const e=Ke(n.firestore,xt);return JR(mn(e),n._key,{source:"server"}).then((t=>hv(e,n,t)))}function lF(n){n=Ke(n,In);const e=Ke(n.firestore,xt),t=mn(e),r=new aa(e);return p1(n._query),YR(t,n._query).then((i=>new Tr(e,r,n,i)))}function uF(n){n=Ke(n,In);const e=Ke(n.firestore,xt),t=mn(e),r=new aa(e);return CM(t,n._query).then((i=>new Tr(e,r,n,i)))}function cF(n){n=Ke(n,In);const e=Ke(n.firestore,xt),t=mn(e),r=new aa(e);return YR(t,n._query,{source:"server"}).then((i=>new Tr(e,r,n,i)))}function qT(n,e,t){n=Ke(n,st);const r=Ke(n.firestore,xt),i=Cp(n.converter,e,t);return Eh(r,[Ip(sa(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function $T(n,e,t,...r){n=Ke(n,st);const i=Ke(n.firestore,xt),a=sa(i);let l;return l=typeof(e=Te(e))=="string"||e instanceof Us?iv(a,"updateDoc",n._key,e,t,r):rv(a,"updateDoc",n._key,e),Eh(i,[l.toMutation(n._key,gt.exists(!0))])}function hF(n){return Eh(Ke(n.firestore,xt),[new Kl(n._key,gt.none())])}function dF(n,e){const t=Ke(n.firestore,xt),r=jf(n),i=Cp(n.converter,e);return Eh(t,[Ip(sa(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then((()=>r))}function w1(n,...e){n=Te(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gy(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gy(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,l,h;if(n instanceof st)l=Ke(n.firestore,xt),h=Hl(n._key.path),a={next:f=>{e[r]&&e[r](hv(l,n,f))},error:e[r+1],complete:e[r+2]};else{const f=Ke(n,In);l=Ke(f.firestore,xt),h=f._query;const m=new aa(l);a={next:_=>{e[r]&&e[r](new Tr(l,m,f,_))},error:e[r+1],complete:e[r+2]},p1(n._query)}return(function(m,_,w,I){const b=new vp(I),x=new $_(_,b,w);return m.asyncQueue.enqueueAndForget((async()=>B_(await Ml(m),x))),()=>{b.Nu(),m.asyncQueue.enqueueAndForget((async()=>z_(await Ml(m),x)))}})(mn(l),h,i,a)}function fF(n,e){return kM(mn(n=Ke(n,xt)),gy(e)?e:{next:e})}function Eh(n,e){return(function(r,i){const a=new nn;return r.asyncQueue.enqueueAndForget((async()=>nM(await X_(r),i,a))),a.promise})(mn(n),e)}function hv(n,e,t){const r=t.docs.get(e._key),i=new aa(n);return new or(n,i,e._key,r,new Vo(t.hasPendingWrites,t.fromCache),e.converter)}const pF={maxAttempts:5};let mF=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sa(e)}set(e,t,r){this._verifyNotCommitted();const i=Ts(e,this._firestore),a=Cp(i.converter,t,r),l=Ip(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ts(e,this._firestore);let l;return l=typeof(t=Te(t))=="string"||t instanceof Us?iv(this._dataReader,"WriteBatch.update",a._key,t,r,i):rv(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ts(e,this._firestore);return this._mutations=this._mutations.concat(new Kl(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ts(n,e){if((n=Te(n)).firestore!==e)throw new J(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class gF{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sa(e)}get(e){const t=Ts(e,this._firestore),r=new rF(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return he(24041);const a=i[0];if(a.isFoundDocument())return new Yc(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Yc(this._firestore,r,t._key,null,t.converter);throw he(18433,{doc:a})}))}set(e,t,r){const i=Ts(e,this._firestore),a=Cp(i.converter,t,r),l=Ip(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Ts(e,this._firestore);let l;return l=typeof(t=Te(t))=="string"||t instanceof Us?iv(this._dataReader,"Transaction.update",a._key,t,r,i):rv(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Ts(e,this._firestore);return this._transaction.delete(t._key),this}}let yF=class extends gF{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ts(e,this._firestore),r=new aa(this._firestore);return super.get(e).then((i=>new or(this._firestore,r,t._key,i._document,new Vo(!1,!1),t.converter)))}};function _F(n,e,t){n=Ke(n,xt);const r={...pF,...t};return(function(a){if(a.maxAttempts<1)throw new J(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,l,h){const f=new nn;return a.asyncQueue.enqueueAndForget((async()=>{const m=await SM(a);new IM(a.asyncQueue,m,h,l,f).ju()})),f.promise})(mn(n),(i=>e(new yF(n,i))),r)}function vF(){return new vh("deleteField")}function wF(){return new Z_("serverTimestamp")}function EF(...n){return new ev("arrayUnion",n)}function IF(...n){return new tv("arrayRemove",n)}function TF(n){return new nv("increment",n)}(function(e,t=!0){(function(i){Wl=i})(Bs),ki(new ar("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new xt(new gV(r.getProvider("auth-internal")),new vV(l,r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new J(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(m.options.projectId,_)})(l,i),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Qn(wI,EI,e),Qn(wI,EI,"esm2020")})();const SF="@firebase/firestore-compat",AF="0.4.3";function dv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WT(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function HT(){if(!eO())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}let E1=class _y{constructor(e){this._delegate=e}static fromBase64String(e){return HT(),new _y(dn.fromBase64String(e))}static fromUint8Array(e){return WT(),new _y(dn.fromUint8Array(e))}toBase64(){return HT(),this._delegate.toBase64()}toUint8Array(){return WT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function vy(n){return RF(n,["next","error","complete"])}function RF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class PF{enableIndexedDbPersistence(e,t){return LM(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return MM(e._delegate)}clearIndexedDbPersistence(e){return FM(e._delegate)}}class I1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ds||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){NM(this._delegate,e,t,r)}enableNetwork(){return jM(this._delegate)}disableNetwork(){return BM(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,HS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return UM(this._delegate)}onSnapshotsInSync(e){return fF(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fl(this,n1(this._delegate,e))}catch(t){throw wn(t,"collection()","Firestore.collection()")}}doc(e){try{return new sr(this,jf(this._delegate,e))}catch(t){throw wn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vn(this,DM(this._delegate,e))}catch(t){throw wn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return _F(this._delegate,t=>e(new T1(this,t)))}batch(){return mn(this._delegate),new S1(new mF(this._delegate,e=>Eh(this._delegate,e)))}loadBundle(e){return zM(this._delegate,e)}namedQuery(e){return qM(this._delegate,e).then(t=>t?new vn(this,t):null)}}class kp extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new E1(new dn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sr.forKey(t,this.firestore,null)}}function CF(n){dV(n)}class T1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}get(e){const t=Oo(e);return this._delegate.get(t).then(r=>new Xc(this._firestore,new or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Oo(e);return r?(dv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Oo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Oo(e);return this._delegate.delete(t),this}}class S1{constructor(e){this._delegate=e}set(e,t,r){const i=Oo(e);return r?(dv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Oo(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Oo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ea{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Cc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zc(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ea.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new ea(e,new kp(e),t),i.set(t,a)),a}}ea.INSTANCES=new WeakMap;class sr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new J("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sr(t,new st(t._delegate,r,new oe(e)))}static forKey(e,t,r){return new sr(t,new st(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Fl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fl(this.firestore,n1(this._delegate,e))}catch(t){throw wn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Te(e),e instanceof st?r1(this._delegate,e):!1}set(e,t){t=dv("DocumentReference.set",t);try{return t?qT(this._delegate,e,t):qT(this._delegate,e)}catch(r){throw wn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$T(this._delegate,e):$T(this._delegate,e,t,...r)}catch(i){throw wn(i,"updateDoc()","DocumentReference.update()")}}delete(){return hF(this._delegate)}onSnapshot(...e){const t=A1(e),r=R1(e,i=>new Xc(this.firestore,new or(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return w1(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=oF(this._delegate):e?.source==="server"?t=aF(this._delegate):t=sF(this._delegate),t.then(r=>new Xc(this.firestore,new or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sr(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function wn(n,e,t){return n.message=n.message.replace(e,t),n}function A1(n){for(const e of n)if(typeof e=="object"&&!vy(e))return e;return{}}function R1(n,e){let t;return vy(n[0])?t=n[0]:vy(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Xc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return v1(this._delegate,e._delegate)}}class Zc extends Xc{data(e){const t=this._delegate.data(e);return this._delegate._converter||fV(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class vn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kp(e)}where(e,t,r){try{return new vn(this.firestore,vs(this._delegate,QM(e,t,r)))}catch(i){throw wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vn(this.firestore,vs(this._delegate,JM(e,t)))}catch(r){throw wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vn(this.firestore,vs(this._delegate,YM(e)))}catch(t){throw wn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new vn(this.firestore,vs(this._delegate,XM(e)))}catch(t){throw wn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new vn(this.firestore,vs(this._delegate,ZM(...e)))}catch(t){throw wn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new vn(this.firestore,vs(this._delegate,eF(...e)))}catch(t){throw wn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new vn(this.firestore,vs(this._delegate,tF(...e)))}catch(t){throw wn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new vn(this.firestore,vs(this._delegate,nF(...e)))}catch(t){throw wn(t,"endAt()","Query.endAt()")}}isEqual(e){return i1(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=uF(this._delegate):e?.source==="server"?t=cF(this._delegate):t=lF(this._delegate),t.then(r=>new wy(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=A1(e),r=R1(e,i=>new wy(this.firestore,new Tr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return w1(this._delegate,t,r)}withConverter(e){return new vn(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class kF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zc(this._firestore,r))})}isEqual(e){return v1(this._delegate,e._delegate)}}class Fl extends vn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sr(this.firestore,e):null}doc(e){try{return e===void 0?new sr(this.firestore,jf(this._delegate)):new sr(this.firestore,jf(this._delegate,e))}catch(t){throw wn(t,"doc()","CollectionReference.doc()")}}add(e){return dF(this._delegate,e).then(t=>new sr(this.firestore,t))}isEqual(e){return r1(this._delegate,e._delegate)}withConverter(e){return new Fl(this.firestore,e?this._delegate.withConverter(ea.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Oo(n){return Ke(n,st)}class fv{constructor(...e){this._delegate=new Us(...e)}static documentId(){return new fv(mt.keyField().canonicalString())}isEqual(e){return e=Te(e),e instanceof Us?this._delegate._internalPath.isEqual(e._internalPath):!1}}class bo{static serverTimestamp(){const e=wF();return e._methodName="FieldValue.serverTimestamp",new bo(e)}static delete(){const e=vF();return e._methodName="FieldValue.delete",new bo(e)}static arrayUnion(...e){const t=EF(...e);return t._methodName="FieldValue.arrayUnion",new bo(t)}static arrayRemove(...e){const t=IF(...e);return t._methodName="FieldValue.arrayRemove",new bo(t)}static increment(e){const t=TF(e);return t._methodName="FieldValue.increment",new bo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bF={Firestore:I1,GeoPoint:Ir,Timestamp:Ye,Blob:E1,Transaction:T1,WriteBatch:S1,DocumentReference:sr,DocumentSnapshot:Xc,Query:vn,QueryDocumentSnapshot:Zc,QuerySnapshot:wy,CollectionReference:Fl,FieldPath:fv,FieldValue:bo,setLogLevel:CF,CACHE_SIZE_UNLIMITED:OM};function xF(n,e){n.INTERNAL.registerComponent(new ar("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...bF}))}function NF(n){xF(n,(e,t)=>new I1(e,t,new PF)),n.registerVersion(SF,AF)}NF(lr);const DF="type.googleapis.com/google.protobuf.Int64Value",VF="type.googleapis.com/google.protobuf.UInt64Value";function P1(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function zf(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>zf(e));if(typeof n=="function"||typeof n=="object")return P1(n,e=>zf(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Ul(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case DF:case VF:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Ul(e)):typeof n=="function"||typeof n=="object"?P1(n,e=>Ul(e)):n}const C1="functions";const GT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dn extends Kt{constructor(e,t,r){super(`${C1}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Dn.prototype)}}function OF(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function qf(n,e){let t=OF(n),r=t,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!GT[l])return new Dn("internal","internal");t=GT[l],r=l}const h=a.message;typeof h=="string"&&(r=h),i=a.details,i!==void 0&&(i=Ul(i))}}catch{}return t==="ok"?null:new Dn(t,r,i)}class LF{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,dt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}const KT="us-central1",MF=/^data: (.*?)(?:\n|$)/;function FF(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Dn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let UF=class{constructor(e,t,r,i,a=KT,l=(...h)=>fetch(...h)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new LF(e,t,r,i),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(a);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=KT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function jF(n,e,t){const r=js(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(xy(n.emulatorOrigin+"/backends"),Ny("Functions",!0))}function BF(n,e,t){const r=i=>$F(n,e,i,t||{});return r.stream=(i,a)=>WF(n,e,i,a),r}function zF(n,e,t){const r=i=>x1(n,e,i,t||{});return r.stream=(i,a)=>N1(n,e,i,a||{}),r}function k1(n){return n.emulatorOrigin&&js(n.emulatorOrigin)?"include":void 0}async function qF(n,e,t,r,i){t["Content-Type"]="application/json";let a;try{a=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:k1(i)})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function b1(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function $F(n,e,t,r){const i=n._url(e);return x1(n,i,t,r)}async function x1(n,e,t,r){t=zf(t);const i={data:t},a=await b1(n,r),l=r.timeout||7e4,h=FF(l),f=await Promise.race([qF(e,i,a,n.fetchImpl,n),h.promise,n.cancelAllRequests]);if(h.cancel(),!f)throw new Dn("cancelled","Firebase Functions instance was deleted.");const m=qf(f.status,f.json);if(m)throw m;if(!f.json)throw new Dn("internal","Response is not valid JSON object.");let _=f.json.data;if(typeof _>"u"&&(_=f.json.result),typeof _>"u")throw new Dn("internal","Response is missing data field.");return{data:Ul(_)}}function WF(n,e,t,r){const i=n._url(e);return N1(n,i,t,r||{})}async function N1(n,e,t,r){t=zf(t);const i={data:t},a=await b1(n,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r?.signal,credentials:k1(n)})}catch(I){if(I instanceof Error&&I.name==="AbortError"){const x=new Dn("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const b=qf(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let h,f;const m=new Promise((I,b)=>{h=I,f=b});r?.signal?.addEventListener("abort",()=>{const I=new Dn("cancelled","Request was cancelled.");f(I)});const _=l.body.getReader(),w=HF(_,h,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const I=w.getReader();return{async next(){const{value:b,done:x}=await I.read();return{value:b,done:x}},async return(){return await I.cancel(),{done:!0,value:void 0}}}}},data:m}}function HF(n,e,t,r){const i=(l,h)=>{const f=l.match(MF);if(!f)return;const m=f[1];try{const _=JSON.parse(m);if("result"in _){e(Ul(_.result));return}if("message"in _){h.enqueue(Ul(_.message));return}if("error"in _){const w=qf(0,_);h.error(w),t(w);return}}catch(_){if(_ instanceof Dn){h.error(_),t(_);return}}},a=new TextDecoder;return new ReadableStream({start(l){let h="";return f();async function f(){if(r?.aborted){const m=new Dn("cancelled","Request was cancelled");return l.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){h.trim()&&i(h.trim(),l),l.close();return}if(r?.aborted){const I=new Dn("cancelled","Request was cancelled");l.error(I),t(I),await n.cancel();return}h+=a.decode(m,{stream:!0});const w=h.split(`
`);h=w.pop()||"";for(const I of w)I.trim()&&i(I.trim(),l);return f()}catch(m){const _=m instanceof Dn?m:qf(0,null);l.error(_),t(_)}}},cancel(){return n.cancel()}})}const QT="@firebase/functions",JT="0.13.1";const GF="auth-internal",KF="app-check-internal",QF="messaging-internal";function JF(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(GF),l=t.getProvider(QF),h=t.getProvider(KF);return new UF(i,a,l,h,r)};ki(new ar(C1,e,"PUBLIC").setMultipleInstances(!0)),Qn(QT,JT,n),Qn(QT,JT,"esm2020")}function YT(n,e,t){jF(Te(n),e,t)}function YF(n,e,t){return BF(Te(n),e,t)}function XF(n,e,t){return zF(Te(n),e,t)}JF();const ZF="@firebase/functions-compat",e4="0.4.1";class D1{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return YF(this._delegate,e,t)}httpsCallableFromURL(e,t){return XF(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Kt("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Kt("functions","Port missing in origin provided to useFunctionsEmulator()");return YT(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return YT(this._delegate,e,t)}}const t4="us-central1",n4=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??t4});return new D1(t,r)};function r4(){const n={Functions:D1};lr.INTERNAL.registerComponent(new ar("functions-compat",n4,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}r4();lr.registerVersion(ZF,e4);const i4={apiKey:"AIzaSyDummyKeyForEmulatorOnly",projectId:"schoolbook-290b6"};lr.apps.length||lr.initializeApp(i4);const Hr=lr.firestore(),ul=lr.auth(),pv=lr.functions(),XT=window.location.hostname;(XT==="localhost"||XT==="127.0.0.1")&&(console.log("Using Firebase Emulators"),Hr.useEmulator("127.0.0.1",8085),ul.useEmulator("http://127.0.0.1:9099",{disableWarnings:!0}),pv.useEmulator("127.0.0.1",5001));const Lo=Object.freeze(Object.defineProperty({__proto__:null,auth:ul,db:Hr,functions:pv},Symbol.toStringTag,{value:"Module"})),kc={onAuthStateChanged(n){return ul.onAuthStateChanged(n)},async signUp(n,e){return ul.createUserWithEmailAndPassword(n,e)},async login(n,e){return ul.signInWithEmailAndPassword(n,e)},async logout(){return ul.signOut()},async completeProfile(n){return pv.httpsCallable("completeProfile")(n)},onProfileSnapshot(n,e){return Hr.collection("users").doc(n).onSnapshot(e)}};function V1(n,e){return function(){return n.apply(e,arguments)}}const{toString:s4}=Object.prototype,{getPrototypeOf:mv}=Object,{iterator:bp,toStringTag:O1}=Symbol,xp=(n=>e=>{const t=s4.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ar=n=>(n=n.toLowerCase(),e=>xp(e)===n),Np=n=>e=>typeof e===n,{isArray:Zl}=Array,jl=Np("undefined");function Ih(n){return n!==null&&!jl(n)&&n.constructor!==null&&!jl(n.constructor)&&Vn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const L1=Ar("ArrayBuffer");function o4(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&L1(n.buffer),e}const a4=Np("string"),Vn=Np("function"),M1=Np("number"),Th=n=>n!==null&&typeof n=="object",l4=n=>n===!0||n===!1,ff=n=>{if(xp(n)!=="object")return!1;const e=mv(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(O1 in n)&&!(bp in n)},u4=n=>{if(!Th(n)||Ih(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},c4=Ar("Date"),h4=Ar("File"),d4=Ar("Blob"),f4=Ar("FileList"),p4=n=>Th(n)&&Vn(n.pipe),m4=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Vn(n.append)&&((e=xp(n))==="formdata"||e==="object"&&Vn(n.toString)&&n.toString()==="[object FormData]"))},g4=Ar("URLSearchParams"),[y4,_4,v4,w4]=["ReadableStream","Request","Response","Headers"].map(Ar),E4=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Zl(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(Ih(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let h;for(r=0;r<l;r++)h=a[r],e.call(null,n[h],h,n)}}function F1(n,e){if(Ih(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Mo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,U1=n=>!jl(n)&&n!==Mo;function Ey(){const{caseless:n,skipUndefined:e}=U1(this)&&this||{},t={},r=(i,a)=>{const l=n&&F1(t,a)||a;ff(t[l])&&ff(i)?t[l]=Ey(t[l],i):ff(i)?t[l]=Ey({},i):Zl(i)?t[l]=i.slice():(!e||!jl(i))&&(t[l]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Sh(arguments[i],r);return t}const I4=(n,e,t,{allOwnKeys:r}={})=>(Sh(e,(i,a)=>{t&&Vn(i)?n[a]=V1(i,t):n[a]=i},{allOwnKeys:r}),n),T4=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),S4=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},A4=(n,e,t,r)=>{let i,a,l;const h={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)l=i[a],(!r||r(l,n,e))&&!h[l]&&(e[l]=n[l],h[l]=!0);n=t!==!1&&mv(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},R4=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},P4=n=>{if(!n)return null;if(Zl(n))return n;let e=n.length;if(!M1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},C4=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&mv(Uint8Array)),k4=(n,e)=>{const r=(n&&n[bp]).call(n);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},b4=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},x4=Ar("HTMLFormElement"),N4=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),ZT=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),D4=Ar("RegExp"),j1=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Sh(t,(i,a)=>{let l;(l=e(i,a,n))!==!1&&(r[a]=l||i)}),Object.defineProperties(n,r)},V4=n=>{j1(n,(e,t)=>{if(Vn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Vn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},O4=(n,e)=>{const t={},r=i=>{i.forEach(a=>{t[a]=!0})};return Zl(n)?r(n):r(String(n).split(e)),t},L4=()=>{},M4=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function F4(n){return!!(n&&Vn(n.append)&&n[O1]==="FormData"&&n[bp])}const U4=n=>{const e=new Array(10),t=(r,i)=>{if(Th(r)){if(e.indexOf(r)>=0)return;if(Ih(r))return r;if(!("toJSON"in r)){e[i]=r;const a=Zl(r)?[]:{};return Sh(r,(l,h)=>{const f=t(l,i+1);!jl(f)&&(a[h]=f)}),e[i]=void 0,a}}return r};return t(n,0)},j4=Ar("AsyncFunction"),B4=n=>n&&(Th(n)||Vn(n))&&Vn(n.then)&&Vn(n.catch),B1=((n,e)=>n?setImmediate:e?((t,r)=>(Mo.addEventListener("message",({source:i,data:a})=>{i===Mo&&a===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Mo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Vn(Mo.postMessage)),z4=typeof queueMicrotask<"u"?queueMicrotask.bind(Mo):typeof process<"u"&&process.nextTick||B1,q4=n=>n!=null&&Vn(n[bp]),G={isArray:Zl,isArrayBuffer:L1,isBuffer:Ih,isFormData:m4,isArrayBufferView:o4,isString:a4,isNumber:M1,isBoolean:l4,isObject:Th,isPlainObject:ff,isEmptyObject:u4,isReadableStream:y4,isRequest:_4,isResponse:v4,isHeaders:w4,isUndefined:jl,isDate:c4,isFile:h4,isBlob:d4,isRegExp:D4,isFunction:Vn,isStream:p4,isURLSearchParams:g4,isTypedArray:C4,isFileList:f4,forEach:Sh,merge:Ey,extend:I4,trim:E4,stripBOM:T4,inherits:S4,toFlatObject:A4,kindOf:xp,kindOfTest:Ar,endsWith:R4,toArray:P4,forEachEntry:k4,matchAll:b4,isHTMLForm:x4,hasOwnProperty:ZT,hasOwnProp:ZT,reduceDescriptors:j1,freezeMethods:V4,toObjectSet:O4,toCamelCase:N4,noop:L4,toFiniteNumber:M4,findKey:F1,global:Mo,isContextDefined:U1,isSpecCompliantForm:F4,toJSONObject:U4,isAsyncFn:j4,isThenable:B4,setImmediate:B1,asap:z4,isIterable:q4};function Ne(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}G.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:G.toJSONObject(this.config),code:this.code,status:this.status}}});const z1=Ne.prototype,q1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{q1[n]={value:n}});Object.defineProperties(Ne,q1);Object.defineProperty(z1,"isAxiosError",{value:!0});Ne.from=(n,e,t,r,i,a)=>{const l=Object.create(z1);G.toFlatObject(n,l,function(_){return _!==Error.prototype},m=>m!=="isAxiosError");const h=n&&n.message?n.message:"Error",f=e==null&&n?n.code:e;return Ne.call(l,h,f,t,r,i),n&&l.cause==null&&Object.defineProperty(l,"cause",{value:n,configurable:!0}),l.name=n&&n.name||"Error",a&&Object.assign(l,a),l};const $4=null;function Iy(n){return G.isPlainObject(n)||G.isArray(n)}function $1(n){return G.endsWith(n,"[]")?n.slice(0,-2):n}function e0(n,e,t){return n?n.concat(e).map(function(i,a){return i=$1(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function W4(n){return G.isArray(n)&&!n.some(Iy)}const H4=G.toFlatObject(G,{},null,function(e){return/^is[A-Z]/.test(e)});function Dp(n,e,t){if(!G.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=G.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,O){return!G.isUndefined(O[F])});const r=t.metaTokens,i=t.visitor||_,a=t.dots,l=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&G.isSpecCompliantForm(e);if(!G.isFunction(i))throw new TypeError("visitor must be a function");function m(x){if(x===null)return"";if(G.isDate(x))return x.toISOString();if(G.isBoolean(x))return x.toString();if(!f&&G.isBlob(x))throw new Ne("Blob is not supported. Use a Buffer instead.");return G.isArrayBuffer(x)||G.isTypedArray(x)?f&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,F,O){let K=x;if(x&&!O&&typeof x=="object"){if(G.endsWith(F,"{}"))F=r?F:F.slice(0,-2),x=JSON.stringify(x);else if(G.isArray(x)&&W4(x)||(G.isFileList(x)||G.endsWith(F,"[]"))&&(K=G.toArray(x)))return F=$1(F),K.forEach(function(ne,de){!(G.isUndefined(ne)||ne===null)&&e.append(l===!0?e0([F],de,a):l===null?F:F+"[]",m(ne))}),!1}return Iy(x)?!0:(e.append(e0(O,F,a),m(x)),!1)}const w=[],I=Object.assign(H4,{defaultVisitor:_,convertValue:m,isVisitable:Iy});function b(x,F){if(!G.isUndefined(x)){if(w.indexOf(x)!==-1)throw Error("Circular reference detected in "+F.join("."));w.push(x),G.forEach(x,function(K,ae){(!(G.isUndefined(K)||K===null)&&i.call(e,K,G.isString(ae)?ae.trim():ae,F,I))===!0&&b(K,F?F.concat(ae):[ae])}),w.pop()}}if(!G.isObject(n))throw new TypeError("data must be an object");return b(n),e}function t0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function gv(n,e){this._pairs=[],n&&Dp(n,this,e)}const W1=gv.prototype;W1.append=function(e,t){this._pairs.push([e,t])};W1.toString=function(e){const t=e?function(r){return e.call(this,r,t0)}:t0;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function G4(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function H1(n,e,t){if(!e)return n;const r=t&&t.encode||G4;G.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=G.isURLSearchParams(e)?e.toString():new gv(e,t).toString(r),a){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class n0{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){G.forEach(this.handlers,function(r){r!==null&&e(r)})}}const G1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K4=typeof URLSearchParams<"u"?URLSearchParams:gv,Q4=typeof FormData<"u"?FormData:null,J4=typeof Blob<"u"?Blob:null,Y4={isBrowser:!0,classes:{URLSearchParams:K4,FormData:Q4,Blob:J4},protocols:["http","https","file","blob","url","data"]},yv=typeof window<"u"&&typeof document<"u",Ty=typeof navigator=="object"&&navigator||void 0,X4=yv&&(!Ty||["ReactNative","NativeScript","NS"].indexOf(Ty.product)<0),Z4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",e6=yv&&window.location.href||"http://localhost",t6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yv,hasStandardBrowserEnv:X4,hasStandardBrowserWebWorkerEnv:Z4,navigator:Ty,origin:e6},Symbol.toStringTag,{value:"Module"})),fn={...t6,...Y4};function n6(n,e){return Dp(n,new fn.classes.URLSearchParams,{visitor:function(t,r,i,a){return fn.isNode&&G.isBuffer(t)?(this.append(r,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function r6(n){return G.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function i6(n){const e={},t=Object.keys(n);let r;const i=t.length;let a;for(r=0;r<i;r++)a=t[r],e[a]=n[a];return e}function K1(n){function e(t,r,i,a){let l=t[a++];if(l==="__proto__")return!0;const h=Number.isFinite(+l),f=a>=t.length;return l=!l&&G.isArray(i)?i.length:l,f?(G.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!h):((!i[l]||!G.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],a)&&G.isArray(i[l])&&(i[l]=i6(i[l])),!h)}if(G.isFormData(n)&&G.isFunction(n.entries)){const t={};return G.forEachEntry(n,(r,i)=>{e(r6(r),i,t,0)}),t}return null}function s6(n,e,t){if(G.isString(n))try{return(e||JSON.parse)(n),G.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Ah={transitional:G1,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=G.isObject(e);if(a&&G.isHTMLForm(e)&&(e=new FormData(e)),G.isFormData(e))return i?JSON.stringify(K1(e)):e;if(G.isArrayBuffer(e)||G.isBuffer(e)||G.isStream(e)||G.isFile(e)||G.isBlob(e)||G.isReadableStream(e))return e;if(G.isArrayBufferView(e))return e.buffer;if(G.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return n6(e,this.formSerializer).toString();if((h=G.isFileList(e))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Dp(h?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),s6(e)):e}],transformResponse:[function(e){const t=this.transitional||Ah.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(G.isResponse(e)||G.isReadableStream(e))return e;if(e&&G.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(h){if(l)throw h.name==="SyntaxError"?Ne.from(h,Ne.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fn.classes.FormData,Blob:fn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};G.forEach(["delete","get","head","post","put","patch"],n=>{Ah.headers[n]={}});const o6=G.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),a6=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&o6[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},r0=Symbol("internals");function sc(n){return n&&String(n).trim().toLowerCase()}function pf(n){return n===!1||n==null?n:G.isArray(n)?n.map(pf):String(n)}function l6(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const u6=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function bg(n,e,t,r,i){if(G.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!G.isString(e)){if(G.isString(r))return e.indexOf(r)!==-1;if(G.isRegExp(r))return r.test(e)}}function c6(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function h6(n,e){const t=G.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,a,l){return this[r].call(this,e,i,a,l)},configurable:!0})})}let On=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function a(h,f,m){const _=sc(f);if(!_)throw new Error("header name must be a non-empty string");const w=G.findKey(i,_);(!w||i[w]===void 0||m===!0||m===void 0&&i[w]!==!1)&&(i[w||f]=pf(h))}const l=(h,f)=>G.forEach(h,(m,_)=>a(m,_,f));if(G.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(G.isString(e)&&(e=e.trim())&&!u6(e))l(a6(e),t);else if(G.isObject(e)&&G.isIterable(e)){let h={},f,m;for(const _ of e){if(!G.isArray(_))throw TypeError("Object iterator must return a key-value pair");h[m=_[0]]=(f=h[m])?G.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}l(h,t)}else e!=null&&a(t,e,r);return this}get(e,t){if(e=sc(e),e){const r=G.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return l6(i);if(G.isFunction(t))return t.call(this,i,r);if(G.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sc(e),e){const r=G.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||bg(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function a(l){if(l=sc(l),l){const h=G.findKey(r,l);h&&(!t||bg(r,r[h],h,t))&&(delete r[h],i=!0)}}return G.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const a=t[r];(!e||bg(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,r={};return G.forEach(this,(i,a)=>{const l=G.findKey(r,a);if(l){t[l]=pf(i),delete t[a];return}const h=e?c6(a):String(a).trim();h!==a&&delete t[a],t[h]=pf(i),r[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return G.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&G.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[r0]=this[r0]={accessors:{}}).accessors,i=this.prototype;function a(l){const h=sc(l);r[h]||(h6(i,l),r[h]=!0)}return G.isArray(e)?e.forEach(a):a(e),this}};On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);G.reduceDescriptors(On.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});G.freezeMethods(On);function xg(n,e){const t=this||Ah,r=e||t,i=On.from(r.headers);let a=r.data;return G.forEach(n,function(h){a=h.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Q1(n){return!!(n&&n.__CANCEL__)}function eu(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}G.inherits(eu,Ne,{__CANCEL__:!0});function J1(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function d6(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function f6(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,a=0,l;return e=e!==void 0?e:1e3,function(f){const m=Date.now(),_=r[a];l||(l=m),t[i]=f,r[i]=m;let w=a,I=0;for(;w!==i;)I+=t[w++],w=w%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),m-l<e)return;const b=_&&m-_;return b?Math.round(I*1e3/b):void 0}}function p6(n,e){let t=0,r=1e3/e,i,a;const l=(m,_=Date.now())=>{t=_,i=null,a&&(clearTimeout(a),a=null),n(...m)};return[(...m)=>{const _=Date.now(),w=_-t;w>=r?l(m,_):(i=m,a||(a=setTimeout(()=>{a=null,l(i)},r-w)))},()=>i&&l(i)]}const $f=(n,e,t=3)=>{let r=0;const i=f6(50,250);return p6(a=>{const l=a.loaded,h=a.lengthComputable?a.total:void 0,f=l-r,m=i(f),_=l<=h;r=l;const w={loaded:l,total:h,progress:h?l/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&_?(h-l)/m:void 0,event:a,lengthComputable:h!=null,[e?"download":"upload"]:!0};n(w)},t)},i0=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},s0=n=>(...e)=>G.asap(()=>n(...e)),m6=fn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,fn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(fn.origin),fn.navigator&&/(msie|trident)/i.test(fn.navigator.userAgent)):()=>!0,g6=fn.hasStandardBrowserEnv?{write(n,e,t,r,i,a,l){if(typeof document>"u")return;const h=[`${n}=${encodeURIComponent(e)}`];G.isNumber(t)&&h.push(`expires=${new Date(t).toUTCString()}`),G.isString(r)&&h.push(`path=${r}`),G.isString(i)&&h.push(`domain=${i}`),a===!0&&h.push("secure"),G.isString(l)&&h.push(`SameSite=${l}`),document.cookie=h.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function y6(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _6(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Y1(n,e,t){let r=!y6(e);return n&&(r||t==!1)?_6(n,e):e}const o0=n=>n instanceof On?{...n}:n;function ta(n,e){e=e||{};const t={};function r(m,_,w,I){return G.isPlainObject(m)&&G.isPlainObject(_)?G.merge.call({caseless:I},m,_):G.isPlainObject(_)?G.merge({},_):G.isArray(_)?_.slice():_}function i(m,_,w,I){if(G.isUndefined(_)){if(!G.isUndefined(m))return r(void 0,m,w,I)}else return r(m,_,w,I)}function a(m,_){if(!G.isUndefined(_))return r(void 0,_)}function l(m,_){if(G.isUndefined(_)){if(!G.isUndefined(m))return r(void 0,m)}else return r(void 0,_)}function h(m,_,w){if(w in e)return r(m,_);if(w in n)return r(void 0,m)}const f={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:h,headers:(m,_,w)=>i(o0(m),o0(_),w,!0)};return G.forEach(Object.keys({...n,...e}),function(_){const w=f[_]||i,I=w(n[_],e[_],_);G.isUndefined(I)&&w!==h||(t[_]=I)}),t}const X1=n=>{const e=ta({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:h}=e;if(e.headers=l=On.from(l),e.url=H1(Y1(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),h&&l.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),G.isFormData(t)){if(fn.hasStandardBrowserEnv||fn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(G.isFunction(t.getHeaders)){const f=t.getHeaders(),m=["content-type","content-length"];Object.entries(f).forEach(([_,w])=>{m.includes(_.toLowerCase())&&l.set(_,w)})}}if(fn.hasStandardBrowserEnv&&(r&&G.isFunction(r)&&(r=r(e)),r||r!==!1&&m6(e.url))){const f=i&&a&&g6.read(a);f&&l.set(i,f)}return e},v6=typeof XMLHttpRequest<"u",w6=v6&&function(n){return new Promise(function(t,r){const i=X1(n);let a=i.data;const l=On.from(i.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=i,_,w,I,b,x;function F(){b&&b(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(_),i.signal&&i.signal.removeEventListener("abort",_)}let O=new XMLHttpRequest;O.open(i.method.toUpperCase(),i.url,!0),O.timeout=i.timeout;function K(){if(!O)return;const ne=On.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),ue={data:!h||h==="text"||h==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:ne,config:n,request:O};J1(function(k){t(k),F()},function(k){r(k),F()},ue),O=null}"onloadend"in O?O.onloadend=K:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(K)},O.onabort=function(){O&&(r(new Ne("Request aborted",Ne.ECONNABORTED,n,O)),O=null)},O.onerror=function(de){const ue=de&&de.message?de.message:"Network Error",me=new Ne(ue,Ne.ERR_NETWORK,n,O);me.event=de||null,r(me),O=null},O.ontimeout=function(){let de=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ue=i.transitional||G1;i.timeoutErrorMessage&&(de=i.timeoutErrorMessage),r(new Ne(de,ue.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,O)),O=null},a===void 0&&l.setContentType(null),"setRequestHeader"in O&&G.forEach(l.toJSON(),function(de,ue){O.setRequestHeader(ue,de)}),G.isUndefined(i.withCredentials)||(O.withCredentials=!!i.withCredentials),h&&h!=="json"&&(O.responseType=i.responseType),m&&([I,x]=$f(m,!0),O.addEventListener("progress",I)),f&&O.upload&&([w,b]=$f(f),O.upload.addEventListener("progress",w),O.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(_=ne=>{O&&(r(!ne||ne.type?new eu(null,n,O):ne),O.abort(),O=null)},i.cancelToken&&i.cancelToken.subscribe(_),i.signal&&(i.signal.aborted?_():i.signal.addEventListener("abort",_)));const ae=d6(i.url);if(ae&&fn.protocols.indexOf(ae)===-1){r(new Ne("Unsupported protocol "+ae+":",Ne.ERR_BAD_REQUEST,n));return}O.send(a||null)})},E6=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const a=function(m){if(!i){i=!0,h();const _=m instanceof Error?m:this.reason;r.abort(_ instanceof Ne?_:new eu(_ instanceof Error?_.message:_))}};let l=e&&setTimeout(()=>{l=null,a(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const h=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(a):m.removeEventListener("abort",a)}),n=null)};n.forEach(m=>m.addEventListener("abort",a));const{signal:f}=r;return f.unsubscribe=()=>G.asap(h),f}},I6=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},T6=async function*(n,e){for await(const t of S6(n))yield*I6(t,e)},S6=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},a0=(n,e,t,r)=>{const i=T6(n,e);let a=0,l,h=f=>{l||(l=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:_}=await i.next();if(m){h(),f.close();return}let w=_.byteLength;if(t){let I=a+=w;t(I)}f.enqueue(new Uint8Array(_))}catch(m){throw h(m),m}},cancel(f){return h(f),i.return()}},{highWaterMark:2})},l0=64*1024,{isFunction:Jd}=G,A6=(({Request:n,Response:e})=>({Request:n,Response:e}))(G.global),{ReadableStream:u0,TextEncoder:c0}=G.global,h0=(n,...e)=>{try{return!!n(...e)}catch{return!1}},R6=n=>{n=G.merge.call({skipUndefined:!0},A6,n);const{fetch:e,Request:t,Response:r}=n,i=e?Jd(e):typeof fetch=="function",a=Jd(t),l=Jd(r);if(!i)return!1;const h=i&&Jd(u0),f=i&&(typeof c0=="function"?(x=>F=>x.encode(F))(new c0):async x=>new Uint8Array(await new t(x).arrayBuffer())),m=a&&h&&h0(()=>{let x=!1;const F=new t(fn.origin,{body:new u0,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!F}),_=l&&h&&h0(()=>G.isReadableStream(new r("").body)),w={stream:_&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!w[x]&&(w[x]=(F,O)=>{let K=F&&F[x];if(K)return K.call(F);throw new Ne(`Response type '${x}' is not supported`,Ne.ERR_NOT_SUPPORT,O)})});const I=async x=>{if(x==null)return 0;if(G.isBlob(x))return x.size;if(G.isSpecCompliantForm(x))return(await new t(fn.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(G.isArrayBufferView(x)||G.isArrayBuffer(x))return x.byteLength;if(G.isURLSearchParams(x)&&(x=x+""),G.isString(x))return(await f(x)).byteLength},b=async(x,F)=>{const O=G.toFiniteNumber(x.getContentLength());return O??I(F)};return async x=>{let{url:F,method:O,data:K,signal:ae,cancelToken:ne,timeout:de,onDownloadProgress:ue,onUploadProgress:me,responseType:k,headers:R,withCredentials:C="same-origin",fetchOptions:L}=X1(x),D=e||fetch;k=k?(k+"").toLowerCase():"text";let U=E6([ae,ne&&ne.toAbortSignal()],de),S=null;const Re=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let Xe;try{if(me&&m&&O!=="get"&&O!=="head"&&(Xe=await b(R,K))!==0){let M=new t(F,{method:"POST",body:K,duplex:"half"}),Q;if(G.isFormData(K)&&(Q=M.headers.get("content-type"))&&R.setContentType(Q),M.body){const[Pe,Ce]=i0(Xe,$f(s0(me)));K=a0(M.body,l0,Pe,Ce)}}G.isString(C)||(C=C?"include":"omit");const Le=a&&"credentials"in t.prototype,Ue={...L,signal:U,method:O.toUpperCase(),headers:R.normalize().toJSON(),body:K,duplex:"half",credentials:Le?C:void 0};S=a&&new t(F,Ue);let re=await(a?D(S,L):D(F,Ue));const ve=_&&(k==="stream"||k==="response");if(_&&(ue||ve&&Re)){const M={};["status","statusText","headers"].forEach(Ve=>{M[Ve]=re[Ve]});const Q=G.toFiniteNumber(re.headers.get("content-length")),[Pe,Ce]=ue&&i0(Q,$f(s0(ue),!0))||[];re=new r(a0(re.body,l0,Pe,()=>{Ce&&Ce(),Re&&Re()}),M)}k=k||"text";let ce=await w[G.findKey(w,k)||"text"](re,x);return!ve&&Re&&Re(),await new Promise((M,Q)=>{J1(M,Q,{data:ce,headers:On.from(re.headers),status:re.status,statusText:re.statusText,config:x,request:S})})}catch(Le){throw Re&&Re(),Le&&Le.name==="TypeError"&&/Load failed|fetch/i.test(Le.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,x,S),{cause:Le.cause||Le}):Ne.from(Le,Le&&Le.code,x,S)}}},P6=new Map,Z1=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:i}=e,a=[r,i,t];let l=a.length,h=l,f,m,_=P6;for(;h--;)f=a[h],m=_.get(f),m===void 0&&_.set(f,m=h?new Map:R6(e)),_=m;return m};Z1();const _v={http:$4,xhr:w6,fetch:{get:Z1}};G.forEach(_v,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const d0=n=>`- ${n}`,C6=n=>G.isFunction(n)||n===null||n===!1;function k6(n,e){n=G.isArray(n)?n:[n];const{length:t}=n;let r,i;const a={};for(let l=0;l<t;l++){r=n[l];let h;if(i=r,!C6(r)&&(i=_v[(h=String(r)).toLowerCase()],i===void 0))throw new Ne(`Unknown adapter '${h}'`);if(i&&(G.isFunction(i)||(i=i.get(e))))break;a[h||"#"+l]=i}if(!i){const l=Object.entries(a).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=t?l.length>1?`since :
`+l.map(d0).join(`
`):" "+d0(l[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return i}const eP={getAdapter:k6,adapters:_v};function Ng(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new eu(null,n)}function f0(n){return Ng(n),n.headers=On.from(n.headers),n.data=xg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),eP.getAdapter(n.adapter||Ah.adapter,n)(n).then(function(r){return Ng(n),r.data=xg.call(n,n.transformResponse,r),r.headers=On.from(r.headers),r},function(r){return Q1(r)||(Ng(n),r&&r.response&&(r.response.data=xg.call(n,n.transformResponse,r.response),r.response.headers=On.from(r.response.headers))),Promise.reject(r)})}const tP="1.13.2",Vp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Vp[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const p0={};Vp.transitional=function(e,t,r){function i(a,l){return"[Axios v"+tP+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,h)=>{if(e===!1)throw new Ne(i(l," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!p0[l]&&(p0[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,h):!0}};Vp.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function b6(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const a=r[i],l=e[a];if(l){const h=n[a],f=h===void 0||l(h,a,n);if(f!==!0)throw new Ne("option "+a+" must be "+f,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+a,Ne.ERR_BAD_OPTION)}}const mf={assertOptions:b6,validators:Vp},$r=mf.validators;let Bo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new n0,response:new n0}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ta(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:a}=t;r!==void 0&&mf.assertOptions(r,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),i!=null&&(G.isFunction(i)?t.paramsSerializer={serialize:i}:mf.assertOptions(i,{encode:$r.function,serialize:$r.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mf.assertOptions(t,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&G.merge(a.common,a[t.method]);a&&G.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),t.headers=On.concat(l,a);const h=[];let f=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(t)===!1||(f=f&&F.synchronous,h.unshift(F.fulfilled,F.rejected))});const m=[];this.interceptors.response.forEach(function(F){m.push(F.fulfilled,F.rejected)});let _,w=0,I;if(!f){const x=[f0.bind(this),void 0];for(x.unshift(...h),x.push(...m),I=x.length,_=Promise.resolve(t);w<I;)_=_.then(x[w++],x[w++]);return _}I=h.length;let b=t;for(;w<I;){const x=h[w++],F=h[w++];try{b=x(b)}catch(O){F.call(this,O);break}}try{_=f0.call(this,b)}catch(x){return Promise.reject(x)}for(w=0,I=m.length;w<I;)_=_.then(m[w++],m[w++]);return _}getUri(e){e=ta(this.defaults,e);const t=Y1(e.baseURL,e.url,e.allowAbsoluteUrls);return H1(t,e.params,e.paramsSerializer)}};G.forEach(["delete","get","head","options"],function(e){Bo.prototype[e]=function(t,r){return this.request(ta(r||{},{method:e,url:t,data:(r||{}).data}))}});G.forEach(["post","put","patch"],function(e){function t(r){return function(a,l,h){return this.request(ta(h||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Bo.prototype[e]=t(),Bo.prototype[e+"Form"]=t(!0)});let x6=class nP{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(h=>{r.subscribe(h),a=h}).then(i);return l.cancel=function(){r.unsubscribe(a)},l},e(function(a,l,h){r.reason||(r.reason=new eu(a,l,h),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new nP(function(i){e=i}),cancel:e}}};function N6(n){return function(t){return n.apply(null,t)}}function D6(n){return G.isObject(n)&&n.isAxiosError===!0}const Sy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Sy).forEach(([n,e])=>{Sy[e]=n});function rP(n){const e=new Bo(n),t=V1(Bo.prototype.request,e);return G.extend(t,Bo.prototype,e,{allOwnKeys:!0}),G.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return rP(ta(n,i))},t}const Nt=rP(Ah);Nt.Axios=Bo;Nt.CanceledError=eu;Nt.CancelToken=x6;Nt.isCancel=Q1;Nt.VERSION=tP;Nt.toFormData=Dp;Nt.AxiosError=Ne;Nt.Cancel=Nt.CanceledError;Nt.all=function(e){return Promise.all(e)};Nt.spread=N6;Nt.isAxiosError=D6;Nt.mergeConfig=ta;Nt.AxiosHeaders=On;Nt.formToJSON=n=>K1(G.isHTMLForm(n)?new FormData(n):n);Nt.getAdapter=eP.getAdapter;Nt.HttpStatusCode=Sy;Nt.default=Nt;const{Axios:iU,AxiosError:sU,CanceledError:oU,isCancel:aU,CancelToken:lU,VERSION:uU,all:cU,Cancel:hU,isAxiosError:dU,spread:fU,toFormData:pU,AxiosHeaders:mU,HttpStatusCode:gU,formToJSON:yU,getAdapter:_U,mergeConfig:vU}=Nt,m0={onBooksSnapshot(n){return Hr.collection("books").onSnapshot(n)},async createBook(n){return Hr.collection("books").add({...n,status:"Available"})},async deleteBook(n){return Hr.collection("books").doc(n).delete()},async reserveBook(n,e,t,r){try{return(await Nt.post("http://127.0.0.1:5001/schoolbook-290b6/us-central1/handleBookTransaction",{bookId:n,buyerId:e,agreedPrice:Number(t),meetingTime:r})).data}catch(i){throw i}},async confirmTransactionTime(n){const{functions:e}=await xo(async()=>{const{functions:r}=await Promise.resolve().then(()=>Lo);return{functions:r}},void 0);return e.httpsCallable("confirmTransactionTime")({transactionId:n})},getUserTransactions(n,e){return Hr.collection("transactions").where("buyerId","==",n).onSnapshot(e)},getSellerTransactions(n,e){return Hr.collection("transactions").where("sellerId","==",n).onSnapshot(e)},async updateTransactionStatus(n,e){const{functions:t}=await xo(async()=>{const{functions:i}=await Promise.resolve().then(()=>Lo);return{functions:i}},void 0);return t.httpsCallable("updateTransactionStatus")({transactionId:n,newStatus:e})},async requestReschedule(n,e,t){const{functions:r}=await xo(async()=>{const{functions:a}=await Promise.resolve().then(()=>Lo);return{functions:a}},void 0);return r.httpsCallable("requestReschedule")({transactionId:n,newTime:e,reason:t})},async respondToReschedule(n,e){const{functions:t}=await xo(async()=>{const{functions:i}=await Promise.resolve().then(()=>Lo);return{functions:i}},void 0);return t.httpsCallable("respondToReschedule")({transactionId:n,response:e})},onWishesSnapshot(n){return Hr.collection("wishes").orderBy("timestamp","desc").onSnapshot(n)},async addWish(n,e){if(!n)throw new Error("");return Hr.collection("wishes").add({uid:n.uid,nickname:n.nickname||n.displayName||"",avatarUrl:n.avatarUrl||"",content:e,timestamp:new Date})}},Op={fontFamily:'"Noto Sans TC", "PMingLiU", sans-serif'},Ie={whiteBucks:"#E8E3DF",fossilGray:"#C9C3B6",brushwood:"#9E9081",chocolateBubble:"#A58976",brownWindmill:"#756256",bgLight:"#F9F7F5"},V6=[{id:"all",name:""},{id:"chi",name:""},{id:"eng",name:""},{id:"math",name:""},{id:"sci",name:""},{id:"soc",name:""},{id:"exam",name:""}],zo=[{id:"default",name:"",price:0,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=default&backgroundColor=E6DBC6"},{id:"cat",name:"",price:50,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cat&backgroundColor=FFD700"},{id:"glasses",name:"",price:120,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=glasses&backgroundColor=4ADE80"},{id:"cool",name:"",price:200,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cool&backgroundColor=A58976"},{id:"artist",name:"",price:300,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=artist&backgroundColor=FFB6C1"},{id:"robot",name:"",price:500,src:"https://api.dicebear.com/7.x/bottts/svg?seed=robot&backgroundColor=E0E0E0"}],O6=["","","","",""],L6=[],M6=({type:n,price:e,originalPrice:t,large:r=!1})=>n==="exchange"?A.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:Ie.brushwood},children:[A.jsx(sk,{size:r?20:14}),A.jsx("span",{children:""})]}):n==="gift"?A.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:Ie.chocolateBubble},children:[A.jsx(Ry,{size:r?20:14}),A.jsx("span",{children:""})]}):A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("div",{className:`font-bold ${r?"text-3xl":"text-lg"}`,style:{color:Ie.brownWindmill},children:["NT$ ",e]}),t&&A.jsxs("span",{className:"text-xs line-through",style:{color:Ie.fossilGray},children:[" $",t]})]}),F6=()=>A.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border animate-pulse mb-4 break-inside-avoid",style:{borderColor:Ie.whiteBucks},children:[A.jsx("div",{className:"aspect-[3/4] bg-gray-200"}),A.jsxs("div",{className:"p-4 space-y-3",children:[A.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),A.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]}),U6=({coins:n,examCountdown:e})=>{const[t,r]=He.useState(0),i=e?.exams||[],a=i.length>0&&i[t]?i[t]:{title:i.length===0&&e?"...":"",daysLeft:0};return A.jsxs("div",{className:"mx-4 mt-4 mb-6 space-y-3",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.jsxs("div",{className:"bg-white p-3 rounded-xl border flex flex-col justify-between h-28 relative overflow-hidden",style:{borderColor:Ie.whiteBucks},children:[A.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-red-50 rounded-full -mr-6 -mt-6 z-0"}),A.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 font-bold mb-1",children:[A.jsx(DC,{size:14,className:"text-red-500"}),A.jsx("span",{children:""})]}),A.jsxs("div",{className:"flex items-baseline gap-1",children:[A.jsx("span",{className:"text-4xl font-bold text-gray-800",children:a.daysLeft}),A.jsx("span",{className:"text-xs text-gray-500",children:""})]}),A.jsxs("div",{className:"relative",children:[A.jsxs("div",{className:"text-[10px] text-gray-400 mt-1 truncate flex items-center gap-1 cursor-pointer hover:text-gray-600 transition-colors",children:[" ",a.title," ",A.jsx(MC,{size:10})]}),i.length>1&&A.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:t,onChange:l=>r(Number(l.target.value)),children:i.map((l,h)=>A.jsxs("option",{value:h,children:[l.title," (",l.date.substring(4,6),"/",l.date.substring(6,8),")"]},h))})]})]})]}),A.jsxs("div",{className:"p-3 rounded-xl border flex flex-col justify-between h-28 relative overflow-hidden bg-white",style:{borderColor:Ie.whiteBucks},children:[A.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-yellow-50 rounded-full -mr-6 -mt-6 z-0"}),A.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 font-bold",children:[A.jsx(bc,{size:14,className:"text-yellow-500"}),""]}),A.jsx("div",{className:"text-xs font-bold text-[#756256]",children:n})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-1",children:A.jsx(Ry,{size:20,className:"text-yellow-600"})}),A.jsx("div",{className:"text-xs text-gray-600 font-bold",children:""})]})]})]})]}),A.jsxs("div",{className:"bg-white rounded-lg border px-3 py-2 flex items-center gap-3 shadow-sm",style:{borderColor:Ie.whiteBucks},children:[A.jsx("div",{className:"bg-red-50 text-red-500 p-1 rounded-md",children:A.jsx(wk,{size:14,fill:"currentColor"})}),A.jsx("div",{className:"flex-1 overflow-hidden h-5 relative",children:A.jsxs("div",{className:"absolute animate-slide-up text-xs font-medium text-gray-600",children:[A.jsx("span",{className:"font-bold text-[#756256] mr-1",children:"3"})," 208  "]})})]})]})},j6=({wishes:n,onAddWish:e,currentUser:t,currentAvatar:r})=>{const[i,a]=He.useState(!1),[l,h]=He.useState(""),f=()=>{l.trim()&&(e(l),h(""),a(!1))};return A.jsxs("div",{className:"mb-8 px-4",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[A.jsx("span",{className:"bg-yellow-400 text-white p-1 rounded-full",children:A.jsx(hk,{size:16,fill:"currentColor"})}),A.jsx("h2",{className:"text-lg font-bold tracking-wide",style:{color:Ie.brownWindmill},children:""})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",style:{borderColor:Ie.whiteBucks},children:[n.map(m=>{const _=zo.find(w=>w.id===m.avatarId)||zo[0];return A.jsxs("div",{className:"flex gap-3 border-b last:border-0 pb-3 last:pb-0",style:{borderColor:Ie.bgLight},children:[A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0 overflow-hidden",children:A.jsx("img",{src:_.src,alt:"avatar",className:"w-full h-full object-cover"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex justify-between items-center mb-1",children:[A.jsx("span",{className:"text-sm font-bold text-[#756256]",children:m.user}),A.jsx("span",{className:"text-xs font-normal text-gray-400",children:m.time})]}),A.jsx("p",{className:"text-sm text-[#9E9081]",children:m.content})]})]},m.id)}),A.jsxs("button",{onClick:()=>a(!0),className:"w-full py-2 mt-2 text-xs font-bold text-[#9E9081] border border-dashed hover:bg-[#F9F7F5] rounded-lg transition-colors flex items-center justify-center gap-1",style:{borderColor:Ie.fossilGray},children:[A.jsx(rk,{size:14})," "]})]}),i&&A.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:A.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl overflow-hidden shadow-2xl animate-scale-up flex flex-col h-[60vh] md:h-auto",children:[A.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:Ie.whiteBucks},children:[A.jsx("button",{onClick:()=>a(!1),className:"p-1",children:A.jsx(y0,{size:24,className:"text-gray-600"})}),A.jsx("span",{className:"font-bold text-[#756256] text-lg",children:""}),A.jsx("button",{onClick:f,className:"text-blue-500 font-bold text-sm px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!l.trim(),children:""})]}),A.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden border border-gray-100",children:A.jsx("img",{src:r.src,alt:"avatar",className:"w-full h-full object-cover"})}),A.jsx("span",{className:"font-bold text-[#5D4037]",children:t.nickname||t.email})]}),A.jsx("textarea",{className:"flex-1 w-full resize-none outline-none text-[#5D4037] placeholder-gray-400 text-lg leading-relaxed",placeholder:"...",value:l,onChange:m=>h(m.target.value),autoFocus:!0})]}),A.jsxs("div",{className:"p-3 border-t bg-gray-50 flex gap-4 text-gray-400",children:[A.jsx(OC,{size:20,className:"cursor-pointer hover:text-[#756256] transition-colors"}),A.jsx(mk,{size:20,className:"cursor-pointer hover:text-[#756256] transition-colors"})]})]})})]})},B6=({onLogin:n})=>{const[e,t]=He.useState(!1),[r,i]=He.useState(!1),[a,l]=He.useState(""),[h,f]=He.useState(""),m=async _=>{if(_.preventDefault(),i(!0),e&&!a.endsWith("@shsh.tw")){alert(" @shsh.tw "),i(!1);return}try{e?(await kc.signUp(a,h),alert(""),t(!1)):await kc.login(a,h)}catch(w){alert((e?": ":": ")+w.message)}finally{i(!1)}};return A.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Op,backgroundColor:Ie.bgLight,color:Ie.brownWindmill},children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border",style:{borderColor:Ie.whiteBucks},children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:Ie.brownWindmill},children:e?"":""}),A.jsx("p",{className:"text-sm mb-6",style:{color:Ie.brushwood},children:e?"":""}),A.jsxs("form",{onSubmit:m,className:"space-y-3",children:[A.jsx("input",{type:"email",value:a,onChange:_=>l(_.target.value),placeholder:"Email (@shsh.tw)",className:"w-full p-3 border rounded-xl",required:!0}),A.jsx("input",{type:"password",value:h,onChange:_=>f(_.target.value),placeholder:"Password",className:"w-full p-3 border rounded-xl",required:!0}),A.jsx("button",{type:"submit",disabled:r,className:"w-full py-3 rounded-xl border-2 font-bold mb-3 hover:bg-gray-50 flex items-center justify-center gap-2",style:{borderColor:Ie.whiteBucks,color:Ie.brownWindmill},children:r?"...":e?"":""}),A.jsx("div",{className:"text-xs text-gray-400 cursor-pointer hover:underline",onClick:()=>t(!e),children:e?"":" ()"})]})]})})},z6=({product:n,onBack:e,onContact:t})=>n?A.jsxs("div",{className:"min-h-screen pb-24 bg-white",style:Op,children:[A.jsxs("nav",{className:"fixed top-0 w-full z-50 flex justify-between items-center px-4 py-3 bg-white/80 backdrop-blur-md border-b",style:{borderColor:Ie.whiteBucks},children:[A.jsx("button",{onClick:e,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200",children:A.jsx(UC,{size:20,color:Ie.brownWindmill})}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:A.jsx(uk,{size:20,color:Ie.brownWindmill})}),A.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:A.jsx(WC,{size:20,color:Ie.brownWindmill})})]})]}),A.jsxs("div",{className:"pt-16 pb-6",children:[A.jsx("div",{className:"aspect-[4/3] bg-gray-100 relative",children:A.jsx("img",{src:n.cover||n.imageBase64,alt:n.title,className:"w-full h-full object-contain bg-[#F9F7F5]"})}),A.jsxs("div",{className:"px-5 mt-6",children:[A.jsxs("div",{className:"flex gap-2 mb-2",children:[A.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.subject}),A.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.grade})]}),A.jsx("h1",{className:"text-2xl font-bold mb-1 leading-tight",style:{color:Ie.brownWindmill},children:n.title}),A.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[n.author,"  ",n.publisher]}),A.jsx("div",{className:"flex items-end gap-3 mb-6 pb-6 border-b",style:{borderColor:Ie.whiteBucks},children:A.jsx(M6,{type:n.type,price:n.price,originalPrice:n.originalPrice,large:!0})}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),A.jsxs("p",{className:"text-gray-700",children:[n.conditionLevel,"  ",n.location?n.location:""]})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),A.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.description||""})]})]})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 w-full p-4 bg-white border-t safe-area-bottom flex gap-3",style:{borderColor:Ie.whiteBucks},children:A.jsxs("button",{onClick:t,className:"flex-1 py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-colors flex items-center justify-center gap-2",children:[A.jsx(ZC,{size:18})," /"]})})]}):null,q6=({onNavigate:n,user:e,unreadCount:t,currentAvatarId:r,coins:i,wishes:a,onAddWish:l,books:h,isLoading:f,examCountdown:m})=>{const[_,w]=He.useState(""),[I,b]=He.useState("all"),[x,F]=He.useState("all"),[O,K]=He.useState("all"),ae=()=>{b("all"),F("all"),K("all"),w(""),window.scrollTo({top:0,behavior:"smooth"})},ne=h.filter(ue=>{const me=_.toLowerCase();return!me.trim()||ue.title.toLowerCase().includes(me)}),de=zo.find(ue=>ue.id===r)||zo[0];return A.jsxs("div",{className:"min-h-screen pb-20",style:{...Op,backgroundColor:Ie.bgLight,color:Ie.brownWindmill},children:[A.jsx("div",{className:"pt-6 pb-12 px-4 rounded-b-[2rem] shadow-lg",style:{background:`linear-gradient(135deg, ${Ie.chocolateBubble}, ${Ie.brownWindmill})`,color:Ie.bgLight},children:A.jsxs("div",{className:"max-w-6xl mx-auto",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"w-8 h-8 backdrop-blur rounded-sm flex items-center justify-center font-bold font-serif",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:""}),A.jsx("span",{className:"text-xl font-bold tracking-widest",children:""})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:ae,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:A.jsx(GC,{size:20})}),A.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-full bg-black/20 border border-white/10 text-white text-xs font-bold shadow-sm backdrop-blur-sm",children:[A.jsx(bc,{size:14,className:"text-yellow-400",fill:"currentColor"}),A.jsx("span",{children:i})]}),A.jsxs("button",{onClick:()=>n("notifications"),className:"relative p-2 hover:bg-white/10 rounded-full transition-colors",children:[A.jsx(kC,{size:20}),t>0&&A.jsx("span",{className:"absolute top-1 right-1 min-w-[16px] h-4 bg-red-500 rounded-full flex items-center justify-center text-[10px] font-bold text-white px-1",children:t>9?"9+":t})]}),A.jsxs("button",{onClick:()=>n("profile"),className:"flex items-center gap-2 hover:bg-white/20 pl-1 pr-3 py-1 rounded-full transition-all border border-white/20",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:[A.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center overflow-hidden bg-white/20",children:A.jsx("img",{src:de.src,alt:"avatar",className:"w-full h-full object-cover"})}),A.jsx("span",{className:"hidden sm:inline text-sm font-medium tracking-wide",children:e.nickname||e.email})]})]})]}),A.jsxs("div",{className:"max-w-3xl mx-auto mt-2",children:[A.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 tracking-widest text-center",children:""}),A.jsx("div",{className:"bg-[#FDFBF7] rounded-xl shadow-xl overflow-hidden p-2",children:A.jsxs("div",{className:"flex items-center border-b px-2",style:{borderColor:Ie.whiteBucks},children:[A.jsx(ak,{className:"text-[#9E9081]",size:20}),A.jsx("input",{type:"text",value:_,onChange:ue=>w(ue.target.value),placeholder:"...",className:"w-full py-3 px-4 bg-transparent text-[#756256] placeholder-[#C9C3B6] outline-none"}),_&&A.jsx("button",{onClick:()=>w(""),className:"text-[#9E9081]",children:A.jsx(y0,{size:16})})]})})]})]})}),A.jsxs("div",{className:"max-w-6xl mx-auto px-4 -mt-6",children:[A.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar",children:V6.map(ue=>A.jsx("button",{className:"whitespace-nowrap px-5 py-2 rounded-full text-sm tracking-wide shadow-sm transition-all border",style:{backgroundColor:Ie.bgLight,color:Ie.brownWindmill,borderColor:Ie.whiteBucks},children:ue.name},ue.id))}),A.jsx(U6,{coins:i,examCountdown:m}),A.jsx(j6,{wishes:a,onAddWish:l,currentUser:e,currentAvatar:de}),A.jsxs("div",{className:"pb-8",children:[A.jsx("div",{className:"flex justify-between items-end mb-4 px-1 border-b pb-2",style:{borderColor:Ie.whiteBucks},children:A.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 tracking-wide",style:{color:Ie.brownWindmill},children:[A.jsx(xC,{size:20,style:{color:Ie.chocolateBubble}}),_?"":""]})}),A.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 gap-4 animate-fade-in space-y-4",children:f?Array.from({length:6}).map((ue,me)=>A.jsx(F6,{},me)):ne.length>0?ne.map(ue=>A.jsxs("div",{onClick:()=>n("product",ue),className:"bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all cursor-pointer break-inside-avoid mb-4 border",style:{borderColor:Ie.whiteBucks},children:[A.jsxs("div",{className:"relative",style:{backgroundColor:Ie.bgLight},children:[A.jsx("img",{src:ue.cover||ue.imageBase64,alt:ue.title,className:"w-full object-cover"}),A.jsx("div",{className:"absolute top-0 right-0 text-white text-[10px] px-3 py-1 rounded-bl-lg font-bold tracking-wider shadow-sm",style:{backgroundColor:Ie.brownWindmill},children:ue.price})]}),A.jsxs("div",{className:"p-3",children:[A.jsx("h3",{className:"font-bold text-sm leading-tight mb-1",style:{color:Ie.brownWindmill},children:ue.title}),A.jsx("div",{className:"mt-auto border-t pt-2",style:{borderColor:Ie.whiteBucks},children:A.jsx("div",{className:"flex items-end justify-between",children:A.jsxs("span",{className:"font-bold",children:["NT$ ",ue.price]})})})]})]},ue.id)):A.jsx("div",{className:"col-span-full text-center py-12",children:A.jsx("p",{children:""})})})]})]})]})},$6=({onBack:n,user:e,onLogout:t,coins:r,myAvatars:i,currentAvatarId:a,onPurchase:l,onEquip:h})=>{const[f,m]=He.useState("shelf"),_=[],[w,I]=He.useState(_),[b,x]=He.useState({title:"",author:"",price:"",conditionLevel:"",images:[]}),F=()=>{alert("()");const K={id:Date.now(),title:b.title||"",price:b.price||0,type:"sell",status:"active",date:new Date().toLocaleDateString(),views:0,cover:"https://im1.book.com.tw/image/getImage?i=https://www.books.com.tw/img/001/086/56/0010865620.jpg&v=5f2a7a5dk&w=348&h=348"};I([K,...w]),m("shelf"),x({title:"",author:"",price:"",conditionLevel:"",images:[]})},O=zo.find(K=>K.id===a)||zo[0];return A.jsxs("div",{className:"min-h-screen pb-20",style:{...Op,backgroundColor:Ie.bgLight,color:Ie.brownWindmill},children:[A.jsx("nav",{className:"backdrop-blur-md shadow-sm border-b sticky top-0 z-50",style:{backgroundColor:"rgba(255,255,255,0.8)",borderColor:Ie.whiteBucks},children:A.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100",children:A.jsx(PC,{size:20,className:"rotate-180 text-[#9E9081]"})}),A.jsx("div",{className:"font-bold text-lg tracking-wide",children:""})]}),A.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-red-50 text-red-700 border border-red-200",children:[A.jsx(YC,{size:14})," "]})]})}),A.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-8 space-y-8",children:[A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>m("store"),children:[A.jsx("div",{className:"w-24 h-24 rounded-full border-4 shadow-md overflow-hidden bg-white",style:{borderColor:Ie.bgLight},children:A.jsx("img",{src:O.src,className:"w-full h-full object-cover",alt:"User"})}),A.jsx("div",{className:"absolute bottom-0 right-0 text-white p-1.5 rounded-full border-2 border-white shadow-sm flex items-center justify-center",style:{backgroundColor:Ie.chocolateBubble,width:28,height:28},children:A.jsx(tk,{size:14})})]}),A.jsx("h2",{className:"mt-4 text-xl font-bold tracking-widest",style:{color:Ie.brownWindmill},children:e.nickname||e.email}),A.jsxs("p",{className:"text-sm text-[#9E9081] mb-2",children:[e.grade||""," ",e.class?`${e.class}`:"","  ",e.email]}),A.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 px-3 py-1 rounded-full text-xs font-bold text-yellow-700",children:[A.jsx(bc,{size:14,fill:"currentColor"})," ",r," "]})]}),A.jsxs("div",{className:"flex border rounded-lg overflow-hidden bg-white p-1",style:{borderColor:Ie.whiteBucks},children:[A.jsx("button",{onClick:()=>m("shelf"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-colors ${f==="shelf"?"bg-[#F9F7F5] text-[#756256]":"text-gray-400 hover:text-gray-600"}`,children:""}),A.jsx("button",{onClick:()=>m("upload"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-colors ${f==="upload"?"bg-[#F9F7F5] text-[#756256]":"text-gray-400 hover:text-gray-600"}`,children:""}),A.jsx("button",{onClick:()=>m("store"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-colors ${f==="store"?"bg-[#F9F7F5] text-[#756256]":"text-gray-400 hover:text-gray-600"}`,children:""})]}),f==="upload"?A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 space-y-4 animate-fade-in",style:{borderColor:Ie.whiteBucks},children:[A.jsxs("div",{className:"text-center p-6 border-2 border-dashed rounded-lg bg-[#F9F7F5] cursor-pointer",style:{borderColor:Ie.fossilGray},children:[A.jsx(QC,{className:"mx-auto text-[#9E9081] mb-2"}),A.jsx("span",{className:"text-sm text-[#756256]",children:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-[#9E9081] mb-1",children:""}),A.jsx("input",{type:"text",value:b.title,onChange:K=>x({...b,title:K.target.value}),className:"w-full p-2 border rounded-lg bg-gray-50 text-sm",placeholder:""})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-[#9E9081] mb-1",children:" (NT$)"}),A.jsx("input",{type:"number",value:b.price,onChange:K=>x({...b,price:K.target.value}),className:"w-full p-2 border rounded-lg bg-gray-50 text-sm",placeholder:"100"})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-[#9E9081] mb-1",children:""}),A.jsx("select",{value:b.conditionLevel,onChange:K=>x({...b,conditionLevel:K.target.value}),className:"w-full p-2 border rounded-lg bg-gray-50 text-sm",children:O6.map(K=>A.jsx("option",{value:K,children:K},K))})]})]}),A.jsx("button",{onClick:F,className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-md hover:bg-[#5D4E44] transition-colors",children:""})]}):f==="store"?A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 animate-fade-in",style:{borderColor:Ie.whiteBucks},children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"font-bold text-[#756256] flex items-center gap-2",children:[A.jsx(fk,{size:20})," "]}),A.jsx("span",{className:"text-xs text-[#9E9081]",children:""})]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:zo.map(K=>{const ae=i.includes(K.id),ne=a===K.id,de=r>=K.price;return A.jsxs("div",{className:`border rounded-lg p-3 flex flex-col items-center relative transition-all ${ne?"ring-2 ring-[#A58976] bg-[#F9F7F5]":"hover:border-[#A58976]"}`,style:{borderColor:Ie.whiteBucks},children:[ne&&A.jsx("div",{className:"absolute top-2 right-2 text-green-500",children:A.jsx(BC,{size:16,fill:"currentColor",className:"text-white"})}),A.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden mb-2 bg-gray-100",children:A.jsx("img",{src:K.src,alt:K.name,className:"w-full h-full object-cover"})}),A.jsx("div",{className:"font-bold text-sm text-[#5D4037] mb-1",children:K.name}),ae?A.jsx("button",{onClick:()=>h(K.id),disabled:ne,className:`w-full py-1 text-xs rounded font-bold ${ne?"text-gray-400 cursor-default":"bg-[#756256] text-white hover:bg-[#5D4E44]"}`,children:ne?"":""}):A.jsxs("button",{onClick:()=>l(K.id,K.price),disabled:!de,className:`w-full py-1 text-xs rounded font-bold flex items-center justify-center gap-1 ${de?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[A.jsx(bc,{size:10})," ",K.price]})]},K.id)})})]}):A.jsx("div",{className:"space-y-4 animate-fade-in",children:w.length===0?A.jsx("div",{className:"text-center py-10 text-gray-400",children:""}):w.map(K=>A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-3 flex gap-4 items-center",style:{borderColor:Ie.whiteBucks},children:[A.jsx("div",{className:"w-16 h-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:A.jsx("img",{src:K.cover,className:"w-full h-full object-cover",alt:K.title})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h3",{className:"font-bold text-[#756256] truncate",children:K.title}),A.jsxs("div",{className:"text-sm text-[#9E9081] font-medium",children:["NT$ ",K.price]}),A.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-2",children:[A.jsxs("span",{children:[K.views," "]}),"  ",A.jsx("span",{children:K.date})]})]}),A.jsx("button",{onClick:()=>I(w.filter(ae=>ae.id!==K.id)),className:"p-2 text-red-400 hover:bg-red-50 rounded-full",children:A.jsx(yk,{size:18})})]},K.id))})]})]})},W6=()=>{const[n,e]=He.useState("login"),[t,r]=He.useState(null),[i,a]=He.useState(null),[l,h]=He.useState([]),[f,m]=He.useState(!0),[_,w]=He.useState({exams:[]});He.useEffect(()=>{(async()=>{try{const{functions:Re}=await xo(async()=>{const{functions:Ue}=await Promise.resolve().then(()=>Lo);return{functions:Ue}},void 0),Le=await Re.httpsCallable("getExamCountdown")();Le.data&&Le.data.exams?w(Le.data):w({exams:[]})}catch(Re){console.error("Failed to fetch countdown:",Re),w({exams:[]})}})()},[]);const[I,b]=He.useState(0),[x,F]=He.useState(!1),[O,K]=He.useState(L6),[ae,ne]=He.useState(["default"]),[de,ue]=He.useState("default");He.useEffect(()=>{let S=null,Re=null;const Xe=kc.onAuthStateChanged(Le=>{Le?(r({...Le,nickname:Le.email.split("@")[0]}),e("home"),S=kc.onProfileSnapshot(Le.uid,Ue=>{if(Ue.exists){const re=Ue.data();r(ce=>({...ce,...re})),b(re.coins||0),ne(re.myAvatars||["default"]),(async()=>{try{const{functions:ce}=await xo(async()=>{const{functions:Pe}=await Promise.resolve().then(()=>Lo);return{functions:Pe}},void 0),Q=await ce.httpsCallable("dailyCheckIn")();Q.data.success&&(F(!0),b(Q.data.newBalance))}catch(ce){console.error("Check-in failed",ce)}})()}}),Re=m0.onBooksSnapshot(Ue=>{const re=Ue.docs.map(ve=>({id:ve.id,...ve.data()}));h(re),m(!1)})):(r(null),e("login"),S&&S(),Re&&Re())});return()=>{Xe(),S&&S(),Re&&Re()}},[]);const me=()=>A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-fade-in",onClick:()=>F(!1),children:A.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm text-center relative shadow-xl transform transition-all scale-100",onClick:S=>S.stopPropagation(),children:[A.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2",children:A.jsx("div",{className:"bg-yellow-400 p-3 rounded-full shadow-lg border-4 border-white",children:A.jsx(Ry,{size:32,className:"text-white"})})}),A.jsxs("div",{className:"mt-6",children:[A.jsx("h3",{className:"text-xl font-bold text-[#756256] mb-2",children:""}),A.jsx("p",{className:"text-gray-500 mb-6",children:" 5 "}),A.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl font-bold text-yellow-600 mb-6 bg-yellow-50 py-3 rounded-xl border border-yellow-100",children:[A.jsx(bc,{size:28,fill:"currentColor"})," +5"]}),A.jsx("button",{onClick:()=>F(!1),className:"w-full py-3 rounded-xl bg-[#A58976] text-white font-bold hover:bg-[#8D735F] transition-colors",children:""})]})]})}),k=(S,Re)=>{S==="product"&&a(Re),e(S)},R=async()=>{await kc.logout()},C=S=>{K([{id:Date.now(),content:S,user:t.nickname||t.email,time:"",avatarId:de},...O])},L=async(S,Re)=>{if(I<Re){alert("");return}if(window.confirm(` ${Re} `))try{const{functions:Xe}=await xo(async()=>{const{functions:Ue}=await Promise.resolve().then(()=>Lo);return{functions:Ue}},void 0);await Xe.httpsCallable("purchaseItem")({itemId:S,price:Re,type:"avatar"}),alert("")}catch(Xe){console.error(Xe),alert(": "+Xe.message)}},D=S=>{ue(S)};if(!t&&n!=="login")return null;const U=()=>{switch(n){case"login":return A.jsx(B6,{});case"home":return A.jsx(q6,{onNavigate:k,user:t,coins:I,wishes:O,onAddWish:C,books:l,isLoading:f,currentAvatarId:de,unreadCount:0,examCountdown:_});case"product":return A.jsx(z6,{product:i,onBack:()=>k("home"),onContact:async()=>{await m0.reserveBook(i.id,t.uid,i.price,new Date().toISOString()),alert("")}});case"profile":return A.jsx($6,{user:t,onBack:()=>k("home"),onLogout:R,coins:I,myAvatars:ae,currentAvatarId:de,onPurchase:L,onEquip:D});default:return A.jsx("div",{children:"404"})}};return A.jsxs(A.Fragment,{children:[U(),x&&A.jsx(me,{})]})};_C.createRoot(document.getElementById("root")).render(A.jsx(He.StrictMode,{children:A.jsx(W6,{})}));
