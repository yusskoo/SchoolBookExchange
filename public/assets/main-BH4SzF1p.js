(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function $N(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qy={exports:{}},$u={};var RT;function QN(){if(RT)return $u;RT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return $u.Fragment=e,$u.jsx=t,$u.jsxs=t,$u}var CT;function WN(){return CT||(CT=1,qy.exports=QN()),qy.exports}var _=WN(),Hy={exports:{}},Pe={};var NT;function YN(){if(NT)return Pe;NT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function k(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function se(V,Z,de){this.props=V,this.context=Z,this.refs=U,this.updater=de||R}se.prototype.isReactComponent={},se.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},se.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function le(){}le.prototype=se.prototype;function te(V,Z,de){this.props=V,this.context=Z,this.refs=U,this.updater=de||R}var _e=te.prototype=new le;_e.constructor=te,j(_e,se.prototype),_e.isPureReactComponent=!0;var ae=Array.isArray;function he(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function N(V,Z,de){var me=de.ref;return{$$typeof:n,type:V,key:Z,ref:me!==void 0?me:null,props:de}}function O(V,Z){return N(V.type,Z,V.props)}function C(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function M(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return Z[de]})}var D=/\/+/g;function Ne(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):Z.toString(36)}function rt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(he,he):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $(V,Z,de,me,Se){var Oe=typeof V;(Oe==="undefined"||Oe==="boolean")&&(V=null);var Ge=!1;if(V===null)Ge=!0;else switch(Oe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(V.$$typeof){case n:case e:Ge=!0;break;case y:return Ge=V._init,$(Ge(V._payload),Z,de,me,Se)}}if(Ge)return Se=Se(V),Ge=me===""?"."+Ne(V,0):me,ae(Se)?(de="",Ge!=null&&(de=Ge.replace(D,"$&/")+"/"),$(Se,Z,de,"",function(qi){return qi})):Se!=null&&(C(Se)&&(Se=O(Se,de+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Ge)),Z.push(Se)),1;Ge=0;var Ut=me===""?".":me+":";if(ae(V))for(var _t=0;_t<V.length;_t++)me=V[_t],Oe=Ut+Ne(me,_t),Ge+=$(me,Z,de,Oe,Se);else if(_t=k(V),typeof _t=="function")for(V=_t.call(V),_t=0;!(me=V.next()).done;)me=me.value,Oe=Ut+Ne(me,_t++),Ge+=$(me,Z,de,Oe,Se);else if(Oe==="object"){if(typeof V.then=="function")return $(rt(V),Z,de,me,Se);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function X(V,Z,de){if(V==null)return V;var me=[],Se=0;return $(V,me,"","",function(Oe){return Z.call(de,Oe,Se++)}),me}function ce(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var ke=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ve={map:X,forEach:function(V,Z,de){X(V,function(){Z.apply(this,arguments)},de)},count:function(V){var Z=0;return X(V,function(){Z++}),Z},toArray:function(V){return X(V,function(Z){return Z})||[]},only:function(V){if(!C(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Pe.Activity=E,Pe.Children=Ve,Pe.Component=se,Pe.Fragment=t,Pe.Profiler=a,Pe.PureComponent=te,Pe.StrictMode=r,Pe.Suspense=m,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return x.H.useMemoCache(V)}},Pe.cache=function(V){return function(){return V.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(V,Z,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var me=j({},V.props),Se=V.key;if(Z!=null)for(Oe in Z.key!==void 0&&(Se=""+Z.key),Z)!I.call(Z,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&Z.ref===void 0||(me[Oe]=Z[Oe]);var Oe=arguments.length-2;if(Oe===1)me.children=de;else if(1<Oe){for(var Ge=Array(Oe),Ut=0;Ut<Oe;Ut++)Ge[Ut]=arguments[Ut+2];me.children=Ge}return N(V.type,Se,me)},Pe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Pe.createElement=function(V,Z,de){var me,Se={},Oe=null;if(Z!=null)for(me in Z.key!==void 0&&(Oe=""+Z.key),Z)I.call(Z,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Se[me]=Z[me]);var Ge=arguments.length-2;if(Ge===1)Se.children=de;else if(1<Ge){for(var Ut=Array(Ge),_t=0;_t<Ge;_t++)Ut[_t]=arguments[_t+2];Se.children=Ut}if(V&&V.defaultProps)for(me in Ge=V.defaultProps,Ge)Se[me]===void 0&&(Se[me]=Ge[me]);return N(V,Oe,Se)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(V){return{$$typeof:d,render:V}},Pe.isValidElement=C,Pe.lazy=function(V){return{$$typeof:y,_payload:{_status:-1,_result:V},_init:ce}},Pe.memo=function(V,Z){return{$$typeof:g,type:V,compare:Z===void 0?null:Z}},Pe.startTransition=function(V){var Z=x.T,de={};x.T=de;try{var me=V(),Se=x.S;Se!==null&&Se(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(he,ke)}catch(Oe){ke(Oe)}finally{Z!==null&&de.types!==null&&(Z.types=de.types),x.T=Z}},Pe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Pe.use=function(V){return x.H.use(V)},Pe.useActionState=function(V,Z,de){return x.H.useActionState(V,Z,de)},Pe.useCallback=function(V,Z){return x.H.useCallback(V,Z)},Pe.useContext=function(V){return x.H.useContext(V)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(V,Z){return x.H.useDeferredValue(V,Z)},Pe.useEffect=function(V,Z){return x.H.useEffect(V,Z)},Pe.useEffectEvent=function(V){return x.H.useEffectEvent(V)},Pe.useId=function(){return x.H.useId()},Pe.useImperativeHandle=function(V,Z,de){return x.H.useImperativeHandle(V,Z,de)},Pe.useInsertionEffect=function(V,Z){return x.H.useInsertionEffect(V,Z)},Pe.useLayoutEffect=function(V,Z){return x.H.useLayoutEffect(V,Z)},Pe.useMemo=function(V,Z){return x.H.useMemo(V,Z)},Pe.useOptimistic=function(V,Z){return x.H.useOptimistic(V,Z)},Pe.useReducer=function(V,Z,de){return x.H.useReducer(V,Z,de)},Pe.useRef=function(V){return x.H.useRef(V)},Pe.useState=function(V){return x.H.useState(V)},Pe.useSyncExternalStore=function(V,Z,de){return x.H.useSyncExternalStore(V,Z,de)},Pe.useTransition=function(){return x.H.useTransition()},Pe.version="19.2.3",Pe}var DT;function hv(){return DT||(DT=1,Hy.exports=YN()),Hy.exports}var pe=hv();const XN=$N(pe);var Gy={exports:{}},Qu={},Ky={exports:{}},$y={};var kT;function JN(){return kT||(kT=1,(function(n){function e($,X){var ce=$.length;$.push(X);e:for(;0<ce;){var ke=ce-1>>>1,Ve=$[ke];if(0<a(Ve,X))$[ke]=X,$[ce]=Ve,ce=ke;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],ce=$.pop();if(ce!==X){$[0]=ce;e:for(var ke=0,Ve=$.length,V=Ve>>>1;ke<V;){var Z=2*(ke+1)-1,de=$[Z],me=Z+1,Se=$[me];if(0>a(de,ce))me<Ve&&0>a(Se,de)?($[ke]=Se,$[me]=ce,ke=me):($[ke]=de,$[Z]=ce,ke=Z);else if(me<Ve&&0>a(Se,ce))$[ke]=Se,$[me]=ce,ke=me;else break e}}return X}function a($,X){var ce=$.sortIndex-X.sortIndex;return ce!==0?ce:$.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,E=null,T=3,k=!1,R=!1,j=!1,U=!1,se=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function _e($){for(var X=t(g);X!==null;){if(X.callback===null)r(g);else if(X.startTime<=$)r(g),X.sortIndex=X.expirationTime,e(m,X);else break;X=t(g)}}function ae($){if(j=!1,_e($),!R)if(t(m)!==null)R=!0,he||(he=!0,M());else{var X=t(g);X!==null&&rt(ae,X.startTime-$)}}var he=!1,x=-1,I=5,N=-1;function O(){return U?!0:!(n.unstable_now()-N<I)}function C(){if(U=!1,he){var $=n.unstable_now();N=$;var X=!0;try{e:{R=!1,j&&(j=!1,le(x),x=-1),k=!0;var ce=T;try{t:{for(_e($),E=t(m);E!==null&&!(E.expirationTime>$&&O());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,T=E.priorityLevel;var Ve=ke(E.expirationTime<=$);if($=n.unstable_now(),typeof Ve=="function"){E.callback=Ve,_e($),X=!0;break t}E===t(m)&&r(m),_e($)}else r(m);E=t(m)}if(E!==null)X=!0;else{var V=t(g);V!==null&&rt(ae,V.startTime-$),X=!1}}break e}finally{E=null,T=ce,k=!1}X=void 0}}finally{X?M():he=!1}}}var M;if(typeof te=="function")M=function(){te(C)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ne=D.port2;D.port1.onmessage=C,M=function(){Ne.postMessage(null)}}else M=function(){se(C,0)};function rt($,X){x=se(function(){$(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function($){switch(T){case 1:case 2:case 3:var X=3;break;default:X=T}var ce=T;T=X;try{return $()}finally{T=ce}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ce=T;T=$;try{return X()}finally{T=ce}},n.unstable_scheduleCallback=function($,X,ce){var ke=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?ke+ce:ke):ce=ke,$){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=ce+Ve,$={id:y++,callback:X,priorityLevel:$,startTime:ce,expirationTime:Ve,sortIndex:-1},ce>ke?($.sortIndex=ce,e(g,$),t(m)===null&&$===t(g)&&(j?(le(x),x=-1):j=!0,rt(ae,ce-ke))):($.sortIndex=Ve,e(m,$),R||k||(R=!0,he||(he=!0,M()))),$},n.unstable_shouldYield=O,n.unstable_wrapCallback=function($){var X=T;return function(){var ce=T;T=X;try{return $.apply(this,arguments)}finally{T=ce}}}})($y)),$y}var PT;function ZN(){return PT||(PT=1,Ky.exports=JN()),Ky.exports}var Qy={exports:{}},Nn={};var OT;function eD(){if(OT)return Nn;OT=1;var n=hv();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Nn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},Nn.flushSync=function(m){var g=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=g,r.p=y,r.d.f()}},Nn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},Nn.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},Nn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:k}):y==="script"&&r.d.X(m,{crossOrigin:E,integrity:T,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Nn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},Nn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Nn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},Nn.requestFormReset=function(m){r.d.r(m)},Nn.unstable_batchedUpdates=function(m,g){return m(g)},Nn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.2.3",Nn}var VT;function tD(){if(VT)return Qy.exports;VT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qy.exports=eD(),Qy.exports}var MT;function nD(){if(MT)return Qu;MT=1;var n=ZN(),e=hv(),t=tD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(r(188))}function g(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),i;if(p===u)return m(f),s;p=p.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=p;else{for(var b=!1,A=f.child;A;){if(A===o){b=!0,o=f,u=p;break}if(A===u){b=!0,u=f,o=p;break}A=A.sibling}if(!b){for(A=p.child;A;){if(A===o){b=!0,o=p,u=f;break}if(A===u){b=!0,u=p,o=f;break}A=A.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),te=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function M(i){return i===null||typeof i!="object"?null:(i=C&&i[C]||i["@@iterator"],typeof i=="function"?i:null)}var D=Symbol.for("react.client.reference");function Ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===D?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case se:return"Profiler";case U:return"StrictMode";case ae:return"Suspense";case he:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case R:return"Portal";case te:return i.displayName||"Context";case le:return(i._context.displayName||"Context")+".Consumer";case _e:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return s=i.displayName||null,s!==null?s:Ne(i.type)||"Memo";case I:s=i._payload,i=i._init;try{return Ne(i(s))}catch{}}return null}var rt=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},ke=[],Ve=-1;function V(i){return{current:i}}function Z(i){0>Ve||(i.current=ke[Ve],ke[Ve]=null,Ve--)}function de(i,s){Ve++,ke[Ve]=i.current,i.current=s}var me=V(null),Se=V(null),Oe=V(null),Ge=V(null);function Ut(i,s){switch(de(Oe,s),de(Se,i),de(me,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Xw(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Xw(s),i=Jw(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(me),de(me,i)}function _t(){Z(me),Z(Se),Z(Oe)}function qi(i){i.memoizedState!==null&&de(Ge,i);var s=me.current,o=Jw(s,i.type);s!==o&&(de(Se,i),de(me,o))}function As(i){Se.current===i&&(Z(me),Z(Se)),Ge.current===i&&(Z(Ge),qu._currentValue=ce)}var Is,we;function Re(i){if(Is===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Is=s&&s[1]||"",we=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Is+i+we}var Ye=!1;function Ze(i,s){if(!i||Ye)return"";Ye=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(Y){G=Y}i.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),b=p[0],A=p[1];if(b&&A){var P=b.split(`
`),H=A.split(`
`);for(f=u=0;u<P.length&&!P[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===P.length||f===H.length)for(u=P.length-1,f=H.length-1;1<=u&&0<=f&&P[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(P[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||P[u]!==H[f]){var J=`
`+P[u].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=u&&0<=f);break}}}finally{Ye=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Re(o):""}function an(i,s){switch(i.tag){case 26:case 27:case 5:return Re(i.type);case 16:return Re("Lazy");case 13:return i.child!==s&&s!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return Ze(i.type,!1);case 11:return Ze(i.type.render,!1);case 1:return Ze(i.type,!0);case 31:return Re("Activity");default:return""}}function on(i){try{var s="",o=null;do s+=an(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Et=Object.prototype.hasOwnProperty,it=n.unstable_scheduleCallback,Hi=n.unstable_cancelCallback,Jo=n.unstable_shouldYield,Zo=n.unstable_requestPaint,Ln=n.unstable_now,La=n.unstable_getCurrentPriorityLevel,Kc=n.unstable_ImmediatePriority,$c=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,Kp=n.unstable_LowPriority,Ad=n.unstable_IdlePriority,Id=n.log,Sd=n.unstable_setDisableYieldValue,Lr=null,vn=null;function vr(i){if(typeof Id=="function"&&Sd(i),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(Lr,i)}catch{}}var Ft=Math.clz32?Math.clz32:Rd,xd=Math.log,el=Math.LN2;function Rd(i){return i>>>=0,i===0?32:31-(xd(i)/el|0)|0}var ii=256,ja=262144,Qt=4194304;function si(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ai(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,b=i.pingedLanes;i=i.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?f=si(u):(b&=A,b!==0?f=si(b):o||(o=A&~i,o!==0&&(f=si(o))))):(A=u&~p,A!==0?f=si(A):b!==0?f=si(b):o||(o=u&~i,o!==0&&(f=si(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function jr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function $p(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cd(){var i=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),i}function oi(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Ua(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qp(i,s,o,u,f,p){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var A=i.entanglements,P=i.expirationTimes,H=i.hiddenUpdates;for(o=b&~o;0<o;){var J=31-Ft(o),ne=1<<J;A[J]=0,P[J]=-1;var G=H[J];if(G!==null)for(H[J]=null,J=0;J<G.length;J++){var Y=G[J];Y!==null&&(Y.lane&=-536870913)}o&=~ne}u!==0&&Fa(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(b&~s))}function Fa(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-Ft(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Qc(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-Ft(o),f=1<<u;f&s|i[u]&s&&(i[u]|=s),o&=~f}}function Wc(i,s){var o=s&-s;return o=(o&42)!==0?1:za(o),(o&(i.suspendedLanes|s))!==0?0:o}function za(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Gi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Nd(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:ET(i.type))}function Ur(i,s){var o=X.p;try{return X.p=i,s()}finally{X.p=o}}var Fr=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Fr,dn="__reactProps$"+Fr,li="__reactContainer$"+Fr,tl="__reactEvents$"+Fr,Wp="__reactListeners$"+Fr,Dd="__reactHandles$"+Fr,kd="__reactResources$"+Fr,ci="__reactMarker$"+Fr;function nl(i){delete i[Wt],delete i[dn],delete i[tl],delete i[Wp],delete i[Dd]}function ui(i){var s=i[Wt];if(s)return s;for(var o=i.parentNode;o;){if(s=o[li]||o[Wt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=sT(i);i!==null;){if(o=i[Wt])return o;i=sT(i)}return s}i=o,o=i.parentNode}return null}function br(i){if(i=i[Wt]||i[li]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ir(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function hi(i){var s=i[kd];return s||(s=i[kd]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Yt(i){i[ci]=!0}var Yc=new Set,Xc={};function di(i,s){fi(i,s),fi(i+"Capture",s)}function fi(i,s){for(Xc[i]=s,i=0;i<s.length;i++)Yc.add(s[i])}var Jc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zc={},eu={};function Pd(i){return Et.call(eu,i)?!0:Et.call(Zc,i)?!1:Jc.test(i)?eu[i]=!0:(Zc[i]=!0,!1)}function rl(i,s,o){if(Pd(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function sr(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Xt(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function fn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function xs(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tu(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,p.call(this,b)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function lt(i){if(!i._valueTracker){var s=xs(i)?"checked":"value";i._valueTracker=tu(i,s,""+i[s])}}function Ba(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=xs(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function mi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qa=/[\n"\\]/g;function Hn(i){return i.replace(qa,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function il(i,s,o,u,f,p,b,A){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),s!=null?b==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+fn(s)):i.value!==""+fn(s)&&(i.value=""+fn(s)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),s!=null?nu(i,b,fn(s)):o!=null?nu(i,b,fn(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+fn(A):i.removeAttribute("name")}function Od(i,s,o,u,f,p,b,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){lt(i);return}o=o!=null?""+fn(o):"",s=s!=null?""+fn(s):o,A||s===i.value||(i.value=s),i.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=A?i.checked:!!u,i.defaultChecked=!!u,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b),lt(i)}function nu(i,s,o){s==="number"&&mi(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Rs(i,s,o,u){if(i=i.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=s.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+fn(o),s=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function Vd(i,s,o){if(s!=null&&(s=""+fn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+fn(o):""}function Cs(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(rt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=fn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),lt(i)}function Gn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ru(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Md.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function iu(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&ru(i,f,u)}else for(var p in s)s.hasOwnProperty(p)&&ru(i,p,s[p])}function sl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ld=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(i){return Ns.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function zr(){}var su=null;function Er(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ds=null,pi=null;function Ha(i){var s=br(i);if(s&&(i=s.stateNode)){var o=i[dn]||null;e:switch(i=s.stateNode,s.type){case"input":if(il(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Hn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var f=u[dn]||null;if(!f)throw Error(r(90));il(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&Ba(u)}break e;case"textarea":Vd(i,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Rs(i,!!o.multiple,s,!1)}}}var ol=!1;function ks(i,s,o){if(ol)return i(s,o);ol=!0;try{var u=i(s);return u}finally{if(ol=!1,(Ds!==null||pi!==null)&&(Df(),Ds&&(s=Ds,i=pi,pi=Ds=null,Ha(s),i)))for(s=0;s<i.length;s++)Ha(i[s])}}function Br(i,s){var o=i.stateNode;if(o===null)return null;var u=o[dn]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(wr)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Ga=!1}var gi=null,au=null,Ka=null;function ou(){if(Ka)return Ka;var i,s=au,o=s.length,u,f="value"in gi?gi.value:gi.textContent,p=f.length;for(i=0;i<o&&s[i]===f[i];i++);var b=o-i;for(u=1;u<=b&&s[o-u]===f[p-u];u++);return Ka=f.slice(i,1<u?1-u:void 0)}function $a(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ki(){return!0}function qr(){return!1}function bn(i){function s(o,u,f,p,b){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(o=i[A],this[A]=o?o(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ki:qr,this.isPropagationStopped=qr,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),s}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=bn($i),Ps=E({},$i,{view:0,detail:0}),lu=bn(Ps),Os,ll,_i,cl=E({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==_i&&(_i&&i.type==="mousemove"?(Os=i.screenX-_i.screenX,ll=i.screenY-_i.screenY):ll=Os=0,_i=i),Os)},movementY:function(i){return"movementY"in i?i.movementY:ll}}),cu=bn(cl),Qa=E({},cl,{dataTransfer:0}),jd=bn(Qa),Ud=E({},Ps,{relatedTarget:0}),Wa=bn(Ud),uu=E({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Fd=bn(uu),ul=E({},$i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),zd=bn(ul),Bd=E({},$i,{data:0}),vi=bn(Bd),qd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Gd[i])?!!s[i]:!1}function Vs(){return Kd}var jn=E({},Ps,{key:function(i){if(i.key){var s=qd[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=$a(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Hd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(i){return i.type==="keypress"?$a(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?$a(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$d=bn(jn),Qd=E({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=bn(Qd),h=E({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),v=bn(h),w=E({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=bn(w),B=E({},cl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=bn(B),ue=E({},$i,{newState:0,oldState:0}),Me=bn(ue),zt=[9,13,27,32],st=wr&&"CompositionEvent"in window,St=null;wr&&"documentMode"in document&&(St=document.documentMode);var Tr=wr&&"TextEvent"in window&&!St,bi=wr&&(!st||St&&8<St&&11>=St),Hr=" ",Gr=!1;function Ya(i,s){switch(i){case"keyup":return zt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hl(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var dl=!1;function y2(i,s){switch(i){case"compositionend":return hl(s);case"keypress":return s.which!==32?null:(Gr=!0,Hr);case"textInput":return i=s.data,i===Hr&&Gr?null:i;default:return null}}function _2(i,s){if(dl)return i==="compositionend"||!st&&Ya(i,s)?(i=ou(),Ka=au=gi=null,dl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return bi&&s.locale!=="ko"?null:s.data;default:return null}}var v2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lE(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!v2[i.type]:s==="textarea"}function cE(i,s,o,u){Ds?pi?pi.push(u):pi=[u]:Ds=u,s=jf(s,"onChange"),0<s.length&&(o=new yi("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var hu=null,du=null;function b2(i){Gw(i,0)}function Wd(i){var s=ir(i);if(Ba(s))return i}function uE(i,s){if(i==="change")return s}var hE=!1;if(wr){var Yp;if(wr){var Xp="oninput"in document;if(!Xp){var dE=document.createElement("div");dE.setAttribute("oninput","return;"),Xp=typeof dE.oninput=="function"}Yp=Xp}else Yp=!1;hE=Yp&&(!document.documentMode||9<document.documentMode)}function fE(){hu&&(hu.detachEvent("onpropertychange",mE),du=hu=null)}function mE(i){if(i.propertyName==="value"&&Wd(du)){var s=[];cE(s,du,i,Er(i)),ks(b2,s)}}function E2(i,s,o){i==="focusin"?(fE(),hu=s,du=o,hu.attachEvent("onpropertychange",mE)):i==="focusout"&&fE()}function w2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wd(du)}function T2(i,s){if(i==="click")return Wd(s)}function A2(i,s){if(i==="input"||i==="change")return Wd(s)}function I2(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var ar=typeof Object.is=="function"?Object.is:I2;function fu(i,s){if(ar(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Et.call(s,f)||!ar(i[f],s[f]))return!1}return!0}function pE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function gE(i,s){var o=pE(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=pE(o)}}function yE(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?yE(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function _E(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=mi(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=mi(i.document)}return s}function Jp(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var S2=wr&&"documentMode"in document&&11>=document.documentMode,fl=null,Zp=null,mu=null,eg=!1;function vE(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;eg||fl==null||fl!==mi(u)||(u=fl,"selectionStart"in u&&Jp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mu&&fu(mu,u)||(mu=u,u=jf(Zp,"onSelect"),0<u.length&&(s=new yi("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=fl)))}function Xa(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var ml={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},tg={},bE={};wr&&(bE=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Ja(i){if(tg[i])return tg[i];if(!ml[i])return i;var s=ml[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in bE)return tg[i]=s[o];return i}var EE=Ja("animationend"),wE=Ja("animationiteration"),TE=Ja("animationstart"),x2=Ja("transitionrun"),R2=Ja("transitionstart"),C2=Ja("transitioncancel"),AE=Ja("transitionend"),IE=new Map,ng="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ng.push("scrollEnd");function Kr(i,s){IE.set(i,s),di(s,[i])}var Yd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ar=[],pl=0,rg=0;function Xd(){for(var i=pl,s=rg=pl=0;s<i;){var o=Ar[s];Ar[s++]=null;var u=Ar[s];Ar[s++]=null;var f=Ar[s];Ar[s++]=null;var p=Ar[s];if(Ar[s++]=null,u!==null&&f!==null){var b=u.pending;b===null?f.next=f:(f.next=b.next,b.next=f),u.pending=f}p!==0&&SE(o,f,p)}}function Jd(i,s,o,u){Ar[pl++]=i,Ar[pl++]=s,Ar[pl++]=o,Ar[pl++]=u,rg|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function ig(i,s,o,u){return Jd(i,s,o,u),Zd(i)}function Za(i,s){return Jd(i,null,null,s),Zd(i)}function SE(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&s!==null&&(f=31-Ft(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function Zd(i){if(50<Mu)throw Mu=0,fy=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var gl={};function N2(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(i,s,o,u){return new N2(i,s,o,u)}function sg(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Wi(i,s){var o=i.alternate;return o===null?(o=or(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function xE(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ef(i,s,o,u,f,p){var b=0;if(u=i,typeof i=="function")sg(i)&&(b=1);else if(typeof i=="string")b=VN(i,o,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=or(31,o,s,f),i.elementType=N,i.lanes=p,i;case j:return eo(o.children,f,p,s);case U:b=8,f|=24;break;case se:return i=or(12,o,s,f|2),i.elementType=se,i.lanes=p,i;case ae:return i=or(13,o,s,f),i.elementType=ae,i.lanes=p,i;case he:return i=or(19,o,s,f),i.elementType=he,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case te:b=10;break e;case le:b=9;break e;case _e:b=11;break e;case x:b=14;break e;case I:b=16,u=null;break e}b=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=or(b,o,s,f),s.elementType=i,s.type=u,s.lanes=p,s}function eo(i,s,o,u){return i=or(7,i,u,s),i.lanes=o,i}function ag(i,s,o){return i=or(6,i,null,s),i.lanes=o,i}function RE(i){var s=or(18,null,null,0);return s.stateNode=i,s}function og(i,s,o){return s=or(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var CE=new WeakMap;function Ir(i,s){if(typeof i=="object"&&i!==null){var o=CE.get(i);return o!==void 0?o:(s={value:i,source:s,stack:on(s)},CE.set(i,s),s)}return{value:i,source:s,stack:on(s)}}var yl=[],_l=0,tf=null,pu=0,Sr=[],xr=0,Ms=null,Ei=1,wi="";function Yi(i,s){yl[_l++]=pu,yl[_l++]=tf,tf=i,pu=s}function NE(i,s,o){Sr[xr++]=Ei,Sr[xr++]=wi,Sr[xr++]=Ms,Ms=i;var u=Ei;i=wi;var f=32-Ft(u)-1;u&=~(1<<f),o+=1;var p=32-Ft(s)+f;if(30<p){var b=f-f%5;p=(u&(1<<b)-1).toString(32),u>>=b,f-=b,Ei=1<<32-Ft(s)+f|o<<f|u,wi=p+i}else Ei=1<<p|o<<f|u,wi=i}function lg(i){i.return!==null&&(Yi(i,1),NE(i,1,0))}function cg(i){for(;i===tf;)tf=yl[--_l],yl[_l]=null,pu=yl[--_l],yl[_l]=null;for(;i===Ms;)Ms=Sr[--xr],Sr[xr]=null,wi=Sr[--xr],Sr[xr]=null,Ei=Sr[--xr],Sr[xr]=null}function DE(i,s){Sr[xr++]=Ei,Sr[xr++]=wi,Sr[xr++]=Ms,Ei=s.id,wi=s.overflow,Ms=i}var En=null,wt=null,We=!1,Ls=null,Rr=!1,ug=Error(r(519));function js(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gu(Ir(s,i)),ug}function kE(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[Wt]=i,s[dn]=u,o){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(o=0;o<ju.length;o++)Be(ju[o],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":Be("invalid",s),Od(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Be("invalid",s);break;case"textarea":Be("invalid",s),Cs(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Ww(s.textContent,o)?(u.popover!=null&&(Be("beforetoggle",s),Be("toggle",s)),u.onScroll!=null&&Be("scroll",s),u.onScrollEnd!=null&&Be("scrollend",s),u.onClick!=null&&(s.onclick=zr),s=!0):s=!1,s||js(i,!0)}function PE(i){for(En=i.return;En;)switch(En.tag){case 5:case 31:case 13:Rr=!1;return;case 27:case 3:Rr=!0;return;default:En=En.return}}function vl(i){if(i!==En)return!1;if(!We)return PE(i),We=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Ry(i.type,i.memoizedProps)),o=!o),o&&wt&&js(i),PE(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));wt=iT(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));wt=iT(i)}else s===27?(s=wt,Js(i.type)?(i=Py,Py=null,wt=i):wt=s):wt=En?Nr(i.stateNode.nextSibling):null;return!0}function to(){wt=En=null,We=!1}function hg(){var i=Ls;return i!==null&&(Wn===null?Wn=i:Wn.push.apply(Wn,i),Ls=null),i}function gu(i){Ls===null?Ls=[i]:Ls.push(i)}var dg=V(null),no=null,Xi=null;function Us(i,s,o){de(dg,s._currentValue),s._currentValue=o}function Ji(i){i._currentValue=dg.current,Z(dg)}function fg(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function mg(i,s,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var P=0;P<s.length;P++)if(A.context===s[P]){p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),fg(p.return,o,i),u||(b=null);break e}p=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=o,p=b.alternate,p!==null&&(p.lanes|=o),fg(b,o,i),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===i){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function bl(i,s,o,u){i=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var A=f.type;ar(f.pendingProps.value,b.value)||(i!==null?i.push(A):i=[A])}}else if(f===Ge.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(qu):i=[qu])}f=f.return}i!==null&&mg(s,i,o,u),s.flags|=262144}function nf(i){for(i=i.firstContext;i!==null;){if(!ar(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ro(i){no=i,Xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function wn(i){return OE(no,i)}function rf(i,s){return no===null&&ro(i),OE(i,s)}function OE(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Xi===null){if(i===null)throw Error(r(308));Xi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Xi=Xi.next=s;return o}var D2=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},k2=n.unstable_scheduleCallback,P2=n.unstable_NormalPriority,Jt={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pg(){return{controller:new D2,data:new Map,refCount:0}}function yu(i){i.refCount--,i.refCount===0&&k2(P2,function(){i.controller.abort()})}var _u=null,gg=0,El=0,wl=null;function O2(i,s){if(_u===null){var o=_u=[];gg=0,El=vy(),wl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return gg++,s.then(VE,VE),s}function VE(){if(--gg===0&&_u!==null){wl!==null&&(wl.status="fulfilled");var i=_u;_u=null,El=0,wl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function V2(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var ME=$.S;$.S=function(i,s){vw=Ln(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&O2(i,s),ME!==null&&ME(i,s)};var io=V(null);function yg(){var i=io.current;return i!==null?i:yt.pooledCache}function sf(i,s){s===null?de(io,io.current):de(io,s.pool)}function LE(){var i=yg();return i===null?null:{parent:Jt._currentValue,pool:i}}var Tl=Error(r(460)),_g=Error(r(474)),af=Error(r(542)),of={then:function(){}};function jE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function UE(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(zr,zr),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,zE(i),i;default:if(typeof s.status=="string")s.then(zr,zr);else{if(i=yt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,zE(i),i}throw ao=s,Tl}}function so(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ao=o,Tl):o}}var ao=null;function FE(){if(ao===null)throw Error(r(459));var i=ao;return ao=null,i}function zE(i){if(i===Tl||i===af)throw Error(r(483))}var Al=null,vu=0;function lf(i){var s=vu;return vu+=1,Al===null&&(Al=[]),UE(Al,i,s)}function bu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function cf(i,s){throw s.$$typeof===T?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function BE(i){function s(F,L){if(i){var q=F.deletions;q===null?(F.deletions=[L],F.flags|=16):q.push(L)}}function o(F,L){if(!i)return null;for(;L!==null;)s(F,L),L=L.sibling;return null}function u(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function f(F,L){return F=Wi(F,L),F.index=0,F.sibling=null,F}function p(F,L,q){return F.index=q,i?(q=F.alternate,q!==null?(q=q.index,q<L?(F.flags|=67108866,L):q):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function b(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function A(F,L,q,ee){return L===null||L.tag!==6?(L=ag(q,F.mode,ee),L.return=F,L):(L=f(L,q),L.return=F,L)}function P(F,L,q,ee){var Ae=q.type;return Ae===j?J(F,L,q.props.children,ee,q.key):L!==null&&(L.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===I&&so(Ae)===L.type)?(L=f(L,q.props),bu(L,q),L.return=F,L):(L=ef(q.type,q.key,q.props,null,F.mode,ee),bu(L,q),L.return=F,L)}function H(F,L,q,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=og(q,F.mode,ee),L.return=F,L):(L=f(L,q.children||[]),L.return=F,L)}function J(F,L,q,ee,Ae){return L===null||L.tag!==7?(L=eo(q,F.mode,ee,Ae),L.return=F,L):(L=f(L,q),L.return=F,L)}function ne(F,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=ag(""+L,F.mode,q),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case k:return q=ef(L.type,L.key,L.props,null,F.mode,q),bu(q,L),q.return=F,q;case R:return L=og(L,F.mode,q),L.return=F,L;case I:return L=so(L),ne(F,L,q)}if(rt(L)||M(L))return L=eo(L,F.mode,q,null),L.return=F,L;if(typeof L.then=="function")return ne(F,lf(L),q);if(L.$$typeof===te)return ne(F,rf(F,L),q);cf(F,L)}return null}function G(F,L,q,ee){var Ae=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ae!==null?null:A(F,L,""+q,ee);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return q.key===Ae?P(F,L,q,ee):null;case R:return q.key===Ae?H(F,L,q,ee):null;case I:return q=so(q),G(F,L,q,ee)}if(rt(q)||M(q))return Ae!==null?null:J(F,L,q,ee,null);if(typeof q.then=="function")return G(F,L,lf(q),ee);if(q.$$typeof===te)return G(F,L,rf(F,q),ee);cf(F,q)}return null}function Y(F,L,q,ee,Ae){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(q)||null,A(L,F,""+ee,Ae);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case k:return F=F.get(ee.key===null?q:ee.key)||null,P(L,F,ee,Ae);case R:return F=F.get(ee.key===null?q:ee.key)||null,H(L,F,ee,Ae);case I:return ee=so(ee),Y(F,L,q,ee,Ae)}if(rt(ee)||M(ee))return F=F.get(q)||null,J(L,F,ee,Ae,null);if(typeof ee.then=="function")return Y(F,L,q,lf(ee),Ae);if(ee.$$typeof===te)return Y(F,L,q,rf(L,ee),Ae);cf(L,ee)}return null}function ve(F,L,q,ee){for(var Ae=null,et=null,Ee=L,Fe=L=0,$e=null;Ee!==null&&Fe<q.length;Fe++){Ee.index>Fe?($e=Ee,Ee=null):$e=Ee.sibling;var tt=G(F,Ee,q[Fe],ee);if(tt===null){Ee===null&&(Ee=$e);break}i&&Ee&&tt.alternate===null&&s(F,Ee),L=p(tt,L,Fe),et===null?Ae=tt:et.sibling=tt,et=tt,Ee=$e}if(Fe===q.length)return o(F,Ee),We&&Yi(F,Fe),Ae;if(Ee===null){for(;Fe<q.length;Fe++)Ee=ne(F,q[Fe],ee),Ee!==null&&(L=p(Ee,L,Fe),et===null?Ae=Ee:et.sibling=Ee,et=Ee);return We&&Yi(F,Fe),Ae}for(Ee=u(Ee);Fe<q.length;Fe++)$e=Y(Ee,F,Fe,q[Fe],ee),$e!==null&&(i&&$e.alternate!==null&&Ee.delete($e.key===null?Fe:$e.key),L=p($e,L,Fe),et===null?Ae=$e:et.sibling=$e,et=$e);return i&&Ee.forEach(function(ra){return s(F,ra)}),We&&Yi(F,Fe),Ae}function Ce(F,L,q,ee){if(q==null)throw Error(r(151));for(var Ae=null,et=null,Ee=L,Fe=L=0,$e=null,tt=q.next();Ee!==null&&!tt.done;Fe++,tt=q.next()){Ee.index>Fe?($e=Ee,Ee=null):$e=Ee.sibling;var ra=G(F,Ee,tt.value,ee);if(ra===null){Ee===null&&(Ee=$e);break}i&&Ee&&ra.alternate===null&&s(F,Ee),L=p(ra,L,Fe),et===null?Ae=ra:et.sibling=ra,et=ra,Ee=$e}if(tt.done)return o(F,Ee),We&&Yi(F,Fe),Ae;if(Ee===null){for(;!tt.done;Fe++,tt=q.next())tt=ne(F,tt.value,ee),tt!==null&&(L=p(tt,L,Fe),et===null?Ae=tt:et.sibling=tt,et=tt);return We&&Yi(F,Fe),Ae}for(Ee=u(Ee);!tt.done;Fe++,tt=q.next())tt=Y(Ee,F,Fe,tt.value,ee),tt!==null&&(i&&tt.alternate!==null&&Ee.delete(tt.key===null?Fe:tt.key),L=p(tt,L,Fe),et===null?Ae=tt:et.sibling=tt,et=tt);return i&&Ee.forEach(function(KN){return s(F,KN)}),We&&Yi(F,Fe),Ae}function gt(F,L,q,ee){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case k:e:{for(var Ae=q.key;L!==null;){if(L.key===Ae){if(Ae=q.type,Ae===j){if(L.tag===7){o(F,L.sibling),ee=f(L,q.props.children),ee.return=F,F=ee;break e}}else if(L.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===I&&so(Ae)===L.type){o(F,L.sibling),ee=f(L,q.props),bu(ee,q),ee.return=F,F=ee;break e}o(F,L);break}else s(F,L);L=L.sibling}q.type===j?(ee=eo(q.props.children,F.mode,ee,q.key),ee.return=F,F=ee):(ee=ef(q.type,q.key,q.props,null,F.mode,ee),bu(ee,q),ee.return=F,F=ee)}return b(F);case R:e:{for(Ae=q.key;L!==null;){if(L.key===Ae)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){o(F,L.sibling),ee=f(L,q.children||[]),ee.return=F,F=ee;break e}else{o(F,L);break}else s(F,L);L=L.sibling}ee=og(q,F.mode,ee),ee.return=F,F=ee}return b(F);case I:return q=so(q),gt(F,L,q,ee)}if(rt(q))return ve(F,L,q,ee);if(M(q)){if(Ae=M(q),typeof Ae!="function")throw Error(r(150));return q=Ae.call(q),Ce(F,L,q,ee)}if(typeof q.then=="function")return gt(F,L,lf(q),ee);if(q.$$typeof===te)return gt(F,L,rf(F,q),ee);cf(F,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(o(F,L.sibling),ee=f(L,q),ee.return=F,F=ee):(o(F,L),ee=ag(q,F.mode,ee),ee.return=F,F=ee),b(F)):o(F,L)}return function(F,L,q,ee){try{vu=0;var Ae=gt(F,L,q,ee);return Al=null,Ae}catch(Ee){if(Ee===Tl||Ee===af)throw Ee;var et=or(29,Ee,null,F.mode);return et.lanes=ee,et.return=F,et}}}var oo=BE(!0),qE=BE(!1),Fs=!1;function vg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bg(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function zs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Bs(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(at&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Zd(i),SE(i,null,o),s}return Jd(i,u,s,o),Zd(i)}function Eu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qc(i,o)}}function Eg(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var wg=!1;function wu(){if(wg){var i=wl;if(i!==null)throw i}}function Tu(i,s,o,u){wg=!1;var f=i.updateQueue;Fs=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var P=A,H=P.next;P.next=null,b===null?p=H:b.next=H,b=P;var J=i.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==b&&(A===null?J.firstBaseUpdate=H:A.next=H,J.lastBaseUpdate=P))}if(p!==null){var ne=f.baseState;b=0,J=H=P=null,A=p;do{var G=A.lane&-536870913,Y=G!==A.lane;if(Y?(Ke&G)===G:(u&G)===G){G!==0&&G===El&&(wg=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ve=i,Ce=A;G=s;var gt=o;switch(Ce.tag){case 1:if(ve=Ce.payload,typeof ve=="function"){ne=ve.call(gt,ne,G);break e}ne=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ce.payload,G=typeof ve=="function"?ve.call(gt,ne,G):ve,G==null)break e;ne=E({},ne,G);break e;case 2:Fs=!0}}G=A.callback,G!==null&&(i.flags|=64,Y&&(i.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(H=J=Y,P=ne):J=J.next=Y,b|=G;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);J===null&&(P=ne),f.baseState=P,f.firstBaseUpdate=H,f.lastBaseUpdate=J,p===null&&(f.shared.lanes=0),$s|=b,i.lanes=b,i.memoizedState=ne}}function HE(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function GE(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)HE(o[i],s)}var Il=V(null),uf=V(0);function KE(i,s){i=os,de(uf,i),de(Il,s),os=i|s.baseLanes}function Tg(){de(uf,os),de(Il,Il.current)}function Ag(){os=uf.current,Z(Il),Z(uf)}var lr=V(null),Cr=null;function qs(i){var s=i.alternate;de(Bt,Bt.current&1),de(lr,i),Cr===null&&(s===null||Il.current!==null||s.memoizedState!==null)&&(Cr=i)}function Ig(i){de(Bt,Bt.current),de(lr,i),Cr===null&&(Cr=i)}function $E(i){i.tag===22?(de(Bt,Bt.current),de(lr,i),Cr===null&&(Cr=i)):Hs()}function Hs(){de(Bt,Bt.current),de(lr,lr.current)}function cr(i){Z(lr),Cr===i&&(Cr=null),Z(Bt)}var Bt=V(0);function hf(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Dy(o)||ky(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zi=0,Le=null,mt=null,Zt=null,df=!1,Sl=!1,lo=!1,ff=0,Au=0,xl=null,M2=0;function Ot(){throw Error(r(321))}function Sg(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!ar(i[o],s[o]))return!1;return!0}function xg(i,s,o,u,f,p){return Zi=p,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?N0:Bg,lo=!1,p=o(u,f),lo=!1,Sl&&(p=WE(s,o,u,f)),QE(i),p}function QE(i){$.H=xu;var s=mt!==null&&mt.next!==null;if(Zi=0,Zt=mt=Le=null,df=!1,Au=0,xl=null,s)throw Error(r(300));i===null||en||(i=i.dependencies,i!==null&&nf(i)&&(en=!0))}function WE(i,s,o,u){Le=i;var f=0;do{if(Sl&&(xl=null),Au=0,Sl=!1,25<=f)throw Error(r(301));if(f+=1,Zt=mt=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}$.H=D0,p=s(o,u)}while(Sl);return p}function L2(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?Iu(s):s,i=i.useState()[0],(mt!==null?mt.memoizedState:null)!==i&&(Le.flags|=1024),s}function Rg(){var i=ff!==0;return ff=0,i}function Cg(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function Ng(i){if(df){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}df=!1}Zi=0,Zt=mt=Le=null,Sl=!1,Au=ff=0,xl=null}function Un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Le.memoizedState=Zt=i:Zt=Zt.next=i,Zt}function qt(){if(mt===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=mt.next;var s=Zt===null?Le.memoizedState:Zt.next;if(s!==null)Zt=s,mt=i;else{if(i===null)throw Le.alternate===null?Error(r(467)):Error(r(310));mt=i,i={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Zt===null?Le.memoizedState=Zt=i:Zt=Zt.next=i}return Zt}function mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Iu(i){var s=Au;return Au+=1,xl===null&&(xl=[]),i=UE(xl,i,s),s=Le,(Zt===null?s.memoizedState:Zt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?N0:Bg),i}function pf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Iu(i);if(i.$$typeof===te)return wn(i)}throw Error(r(438,String(i)))}function Dg(i){var s=null,o=Le.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=mf(),Le.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=O;return s.index++,o}function es(i,s){return typeof s=="function"?s(i):s}function gf(i){var s=qt();return kg(s,mt,i)}function kg(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}s.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{s=f.next;var A=b=null,P=null,H=s,J=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Ke&ne)===ne:(Zi&ne)===ne){var G=H.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===El&&(J=!0);else if((Zi&G)===G){H=H.next,G===El&&(J=!0);continue}else ne={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(A=P=ne,b=p):P=P.next=ne,Le.lanes|=G,$s|=G;ne=H.action,lo&&o(p,ne),p=H.hasEagerState?H.eagerState:o(p,ne)}else G={lane:ne,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(A=P=G,b=p):P=P.next=G,Le.lanes|=ne,$s|=ne;H=H.next}while(H!==null&&H!==s);if(P===null?b=p:P.next=A,!ar(p,i.memoizedState)&&(en=!0,J&&(o=wl,o!==null)))throw o;i.memoizedState=p,i.baseState=b,i.baseQueue=P,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Pg(i){var s=qt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do p=i(p,b.action),b=b.next;while(b!==f);ar(p,s.memoizedState)||(en=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function YE(i,s,o){var u=Le,f=qt(),p=We;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var b=!ar((mt||f).memoizedState,o);if(b&&(f.memoizedState=o,en=!0),f=f.queue,Mg(ZE.bind(null,u,f,i),[i]),f.getSnapshot!==s||b||Zt!==null&&Zt.memoizedState.tag&1){if(u.flags|=2048,Rl(9,{destroy:void 0},JE.bind(null,u,f,o,s),null),yt===null)throw Error(r(349));p||(Zi&127)!==0||XE(u,s,o)}return o}function XE(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Le.updateQueue,s===null?(s=mf(),Le.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function JE(i,s,o,u){s.value=o,s.getSnapshot=u,e0(s)&&t0(i)}function ZE(i,s,o){return o(function(){e0(s)&&t0(i)})}function e0(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!ar(i,o)}catch{return!0}}function t0(i){var s=Za(i,2);s!==null&&Yn(s,i,2)}function Og(i){var s=Un();if(typeof i=="function"){var o=i;if(i=o(),lo){vr(!0);try{o()}finally{vr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:i},s}function n0(i,s,o,u){return i.baseState=o,kg(i,mt,typeof u=="function"?u:es)}function j2(i,s,o,u,f){if(vf(i))throw Error(r(485));if(i=s.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};$.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,r0(s,p)):(p.next=o.next,s.pending=o.next=p)}}function r0(i,s){var o=s.action,u=s.payload,f=i.state;if(s.isTransition){var p=$.T,b={};$.T=b;try{var A=o(f,u),P=$.S;P!==null&&P(b,A),i0(i,s,A)}catch(H){Vg(i,s,H)}finally{p!==null&&b.types!==null&&(p.types=b.types),$.T=p}}else try{p=o(f,u),i0(i,s,p)}catch(H){Vg(i,s,H)}}function i0(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){s0(i,s,u)},function(u){return Vg(i,s,u)}):s0(i,s,o)}function s0(i,s,o){s.status="fulfilled",s.value=o,a0(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,r0(i,o)))}function Vg(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,a0(s),s=s.next;while(s!==u)}i.action=null}function a0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function o0(i,s){return s}function l0(i,s){if(We){var o=yt.formState;if(o!==null){e:{var u=Le;if(We){if(wt){t:{for(var f=wt,p=Rr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Nr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){wt=Nr(f.nextSibling),u=f.data==="F!";break e}}js(u)}u=!1}u&&(s=o[0])}}return o=Un(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:s},o.queue=u,o=x0.bind(null,Le,u),u.dispatch=o,u=Og(!1),p=zg.bind(null,Le,!1,u.queue),u=Un(),f={state:s,dispatch:null,action:i,pending:null},u.queue=f,o=j2.bind(null,Le,f,p,o),f.dispatch=o,u.memoizedState=i,[s,o,!1]}function c0(i){var s=qt();return u0(s,mt,i)}function u0(i,s,o){if(s=kg(i,s,o0)[0],i=gf(es)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Iu(s)}catch(b){throw b===Tl?af:b}else u=s;s=qt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Le.flags|=2048,Rl(9,{destroy:void 0},U2.bind(null,f,o),null)),[u,p,i]}function U2(i,s){i.action=s}function h0(i){var s=qt(),o=mt;if(o!==null)return u0(s,o,i);qt(),s=s.memoizedState,o=qt();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Rl(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Le.updateQueue,s===null&&(s=mf(),Le.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function d0(){return qt().memoizedState}function yf(i,s,o,u){var f=Un();Le.flags|=i,f.memoizedState=Rl(1|s,{destroy:void 0},o,u===void 0?null:u)}function _f(i,s,o,u){var f=qt();u=u===void 0?null:u;var p=f.memoizedState.inst;mt!==null&&u!==null&&Sg(u,mt.memoizedState.deps)?f.memoizedState=Rl(s,p,o,u):(Le.flags|=i,f.memoizedState=Rl(1|s,p,o,u))}function f0(i,s){yf(8390656,8,i,s)}function Mg(i,s){_f(2048,8,i,s)}function F2(i){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=mf(),Le.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function m0(i){var s=qt().memoizedState;return F2({ref:s,nextImpl:i}),function(){if((at&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function p0(i,s){return _f(4,2,i,s)}function g0(i,s){return _f(4,4,i,s)}function y0(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function _0(i,s,o){o=o!=null?o.concat([i]):null,_f(4,4,y0.bind(null,s,i),o)}function Lg(){}function v0(i,s){var o=qt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Sg(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function b0(i,s){var o=qt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Sg(s,u[1]))return u[0];if(u=i(),lo){vr(!0);try{i()}finally{vr(!1)}}return o.memoizedState=[u,s],u}function jg(i,s,o){return o===void 0||(Zi&1073741824)!==0&&(Ke&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=Ew(),Le.lanes|=i,$s|=i,o)}function E0(i,s,o,u){return ar(o,s)?o:Il.current!==null?(i=jg(i,o,u),ar(i,s)||(en=!0),i):(Zi&42)===0||(Zi&1073741824)!==0&&(Ke&261930)===0?(en=!0,i.memoizedState=o):(i=Ew(),Le.lanes|=i,$s|=i,s)}function w0(i,s,o,u,f){var p=X.p;X.p=p!==0&&8>p?p:8;var b=$.T,A={};$.T=A,zg(i,!1,s,o);try{var P=f(),H=$.S;if(H!==null&&H(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var J=V2(P,u);Su(i,s,J,dr(i))}else Su(i,s,u,dr(i))}catch(ne){Su(i,s,{then:function(){},status:"rejected",reason:ne},dr())}finally{X.p=p,b!==null&&A.types!==null&&(b.types=A.types),$.T=b}}function z2(){}function Ug(i,s,o,u){if(i.tag!==5)throw Error(r(476));var f=T0(i).queue;w0(i,f,s,ce,o===null?z2:function(){return A0(i),o(u)})}function T0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:ce},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function A0(i){var s=T0(i);s.next===null&&(s=i.alternate.memoizedState),Su(i,s.next.queue,{},dr())}function Fg(){return wn(qu)}function I0(){return qt().memoizedState}function S0(){return qt().memoizedState}function B2(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=dr();i=zs(o);var u=Bs(s,i,o);u!==null&&(Yn(u,s,o),Eu(u,s,o)),s={cache:pg()},i.payload=s;return}s=s.return}}function q2(i,s,o){var u=dr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},vf(i)?R0(s,o):(o=ig(i,s,o,u),o!==null&&(Yn(o,i,u),C0(o,s,u)))}function x0(i,s,o){var u=dr();Su(i,s,o,u)}function Su(i,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(vf(i))R0(s,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var b=s.lastRenderedState,A=p(b,o);if(f.hasEagerState=!0,f.eagerState=A,ar(A,b))return Jd(i,s,f,0),yt===null&&Xd(),!1}catch{}if(o=ig(i,s,f,u),o!==null)return Yn(o,i,u),C0(o,s,u),!0}return!1}function zg(i,s,o,u){if(u={lane:2,revertLane:vy(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vf(i)){if(s)throw Error(r(479))}else s=ig(i,o,u,2),s!==null&&Yn(s,i,2)}function vf(i){var s=i.alternate;return i===Le||s!==null&&s===Le}function R0(i,s){Sl=df=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function C0(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Qc(i,o)}}var xu={readContext:wn,use:pf,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};xu.useEffectEvent=Ot;var N0={readContext:wn,use:pf,useCallback:function(i,s){return Un().memoizedState=[i,s===void 0?null:s],i},useContext:wn,useEffect:f0,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,yf(4194308,4,y0.bind(null,s,i),o)},useLayoutEffect:function(i,s){return yf(4194308,4,i,s)},useInsertionEffect:function(i,s){yf(4,2,i,s)},useMemo:function(i,s){var o=Un();s=s===void 0?null:s;var u=i();if(lo){vr(!0);try{i()}finally{vr(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=Un();if(o!==void 0){var f=o(s);if(lo){vr(!0);try{o(s)}finally{vr(!1)}}}else f=s;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=q2.bind(null,Le,i),[u.memoizedState,i]},useRef:function(i){var s=Un();return i={current:i},s.memoizedState=i},useState:function(i){i=Og(i);var s=i.queue,o=x0.bind(null,Le,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:Lg,useDeferredValue:function(i,s){var o=Un();return jg(o,i,s)},useTransition:function(){var i=Og(!1);return i=w0.bind(null,Le,i.queue,!0,!1),Un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Le,f=Un();if(We){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),yt===null)throw Error(r(349));(Ke&127)!==0||XE(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,f0(ZE.bind(null,u,p,i),[i]),u.flags|=2048,Rl(9,{destroy:void 0},JE.bind(null,u,p,o,s),null),o},useId:function(){var i=Un(),s=yt.identifierPrefix;if(We){var o=wi,u=Ei;o=(u&~(1<<32-Ft(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=ff++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=M2++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Fg,useFormState:l0,useActionState:l0,useOptimistic:function(i){var s=Un();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=zg.bind(null,Le,!0,o),o.dispatch=s,[i,s]},useMemoCache:Dg,useCacheRefresh:function(){return Un().memoizedState=B2.bind(null,Le)},useEffectEvent:function(i){var s=Un(),o={impl:i};return s.memoizedState=o,function(){if((at&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Bg={readContext:wn,use:pf,useCallback:v0,useContext:wn,useEffect:Mg,useImperativeHandle:_0,useInsertionEffect:p0,useLayoutEffect:g0,useMemo:b0,useReducer:gf,useRef:d0,useState:function(){return gf(es)},useDebugValue:Lg,useDeferredValue:function(i,s){var o=qt();return E0(o,mt.memoizedState,i,s)},useTransition:function(){var i=gf(es)[0],s=qt().memoizedState;return[typeof i=="boolean"?i:Iu(i),s]},useSyncExternalStore:YE,useId:I0,useHostTransitionStatus:Fg,useFormState:c0,useActionState:c0,useOptimistic:function(i,s){var o=qt();return n0(o,mt,i,s)},useMemoCache:Dg,useCacheRefresh:S0};Bg.useEffectEvent=m0;var D0={readContext:wn,use:pf,useCallback:v0,useContext:wn,useEffect:Mg,useImperativeHandle:_0,useInsertionEffect:p0,useLayoutEffect:g0,useMemo:b0,useReducer:Pg,useRef:d0,useState:function(){return Pg(es)},useDebugValue:Lg,useDeferredValue:function(i,s){var o=qt();return mt===null?jg(o,i,s):E0(o,mt.memoizedState,i,s)},useTransition:function(){var i=Pg(es)[0],s=qt().memoizedState;return[typeof i=="boolean"?i:Iu(i),s]},useSyncExternalStore:YE,useId:I0,useHostTransitionStatus:Fg,useFormState:h0,useActionState:h0,useOptimistic:function(i,s){var o=qt();return mt!==null?n0(o,mt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Dg,useCacheRefresh:S0};D0.useEffectEvent=m0;function qg(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:E({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Hg={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=dr(),f=zs(u);f.payload=s,o!=null&&(f.callback=o),s=Bs(i,f,u),s!==null&&(Yn(s,i,u),Eu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=dr(),f=zs(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Bs(i,f,u),s!==null&&(Yn(s,i,u),Eu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=dr(),u=zs(o);u.tag=2,s!=null&&(u.callback=s),s=Bs(i,u,o),s!==null&&(Yn(s,i,o),Eu(s,i,o))}};function k0(i,s,o,u,f,p,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,b):s.prototype&&s.prototype.isPureReactComponent?!fu(o,u)||!fu(f,p):!0}function P0(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&Hg.enqueueReplaceState(s,s.state,null)}function co(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=E({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function O0(i){Yd(i)}function V0(i){console.error(i)}function M0(i){Yd(i)}function bf(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function L0(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gg(i,s,o){return o=zs(o),o.tag=3,o.payload={element:null},o.callback=function(){bf(i,s)},o}function j0(i){return i=zs(i),i.tag=3,i}function U0(i,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){L0(s,o,u)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){L0(s,o,u),typeof f!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function H2(i,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&bl(s,o,f,!0),o=lr.current,o!==null){switch(o.tag){case 31:case 13:return Cr===null?kf():o.alternate===null&&Vt===0&&(Vt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===of?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),gy(i,u,f)),!1;case 22:return o.flags|=65536,u===of?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),gy(i,u,f)),!1}throw Error(r(435,o.tag))}return gy(i,u,f),kf(),!1}if(We)return s=lr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==ug&&(i=Error(r(422),{cause:u}),gu(Ir(i,o)))):(u!==ug&&(s=Error(r(423),{cause:u}),gu(Ir(s,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=Ir(u,o),f=Gg(i.stateNode,u,f),Eg(i,f),Vt!==4&&(Vt=2)),!1;var p=Error(r(520),{cause:u});if(p=Ir(p,o),Vu===null?Vu=[p]:Vu.push(p),Vt!==4&&(Vt=2),s===null)return!0;u=Ir(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Gg(o.stateNode,u,i),Eg(o,i),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Qs===null||!Qs.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=j0(f),U0(f,i,o,u),Eg(o,f),!1}o=o.return}while(o!==null);return!1}var Kg=Error(r(461)),en=!1;function Tn(i,s,o,u){s.child=i===null?qE(s,null,o,u):oo(s,i.child,o,u)}function F0(i,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var b={};for(var A in u)A!=="ref"&&(b[A]=u[A])}else b=u;return ro(s),u=xg(i,s,o,b,p,f),A=Rg(),i!==null&&!en?(Cg(i,s,f),ts(i,s,f)):(We&&A&&lg(s),s.flags|=1,Tn(i,s,u,f),s.child)}function z0(i,s,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!sg(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,B0(i,s,p,u,f)):(i=ef(o.type,null,u,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(p=i.child,!ey(i,f)){var b=p.memoizedProps;if(o=o.compare,o=o!==null?o:fu,o(b,u)&&i.ref===s.ref)return ts(i,s,f)}return s.flags|=1,i=Wi(p,u),i.ref=s.ref,i.return=s,s.child=i}function B0(i,s,o,u,f){if(i!==null){var p=i.memoizedProps;if(fu(p,u)&&i.ref===s.ref)if(en=!1,s.pendingProps=u=p,ey(i,f))(i.flags&131072)!==0&&(en=!0);else return s.lanes=i.lanes,ts(i,s,f)}return $g(i,s,o,u,f)}function q0(i,s,o,u){var f=u.children,p=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=s.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,s.child=null;return H0(i,s,p,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&sf(s,p!==null?p.cachePool:null),p!==null?KE(s,p):Tg(),$E(s);else return u=s.lanes=536870912,H0(i,s,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(sf(s,p.cachePool),KE(s,p),Hs(),s.memoizedState=null):(i!==null&&sf(s,null),Tg(),Hs());return Tn(i,s,f,o),s.child}function Ru(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function H0(i,s,o,u,f){var p=yg();return p=p===null?null:{parent:Jt._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},i!==null&&sf(s,null),Tg(),$E(s),i!==null&&bl(i,s,u,!0),s.childLanes=f,null}function Ef(i,s){return s=Tf({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function G0(i,s,o){return oo(s,i.child,null,o),i=Ef(s,s.pendingProps),i.flags|=2,cr(s),s.memoizedState=null,i}function G2(i,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(We){if(u.mode==="hidden")return i=Ef(s,u),s.lanes=536870912,Ru(null,i);if(Ig(s),(i=wt)?(i=rT(i,Rr),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:Ei,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=RE(i),o.return=s,s.child=o,En=s,wt=null)):i=null,i===null)throw js(s);return s.lanes=536870912,null}return Ef(s,u)}var p=i.memoizedState;if(p!==null){var b=p.dehydrated;if(Ig(s),f)if(s.flags&256)s.flags&=-257,s=G0(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(en||bl(i,s,o,!1),f=(o&i.childLanes)!==0,en||f){if(u=yt,u!==null&&(b=Wc(u,o),b!==0&&b!==p.retryLane))throw p.retryLane=b,Za(i,b),Yn(u,i,b),Kg;kf(),s=G0(i,s,o)}else i=p.treeContext,wt=Nr(b.nextSibling),En=s,We=!0,Ls=null,Rr=!1,i!==null&&DE(s,i),s=Ef(s,u),s.flags|=4096;return s}return i=Wi(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function wf(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function $g(i,s,o,u,f){return ro(s),o=xg(i,s,o,u,void 0,f),u=Rg(),i!==null&&!en?(Cg(i,s,f),ts(i,s,f)):(We&&u&&lg(s),s.flags|=1,Tn(i,s,o,f),s.child)}function K0(i,s,o,u,f,p){return ro(s),s.updateQueue=null,o=WE(s,u,o,f),QE(i),u=Rg(),i!==null&&!en?(Cg(i,s,p),ts(i,s,p)):(We&&u&&lg(s),s.flags|=1,Tn(i,s,o,p),s.child)}function $0(i,s,o,u,f){if(ro(s),s.stateNode===null){var p=gl,b=o.contextType;typeof b=="object"&&b!==null&&(p=wn(b)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Hg,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},vg(s),b=o.contextType,p.context=typeof b=="object"&&b!==null?wn(b):gl,p.state=s.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(qg(s,o,b,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&Hg.enqueueReplaceState(p,p.state,null),Tu(s,u,p,f),wu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){p=s.stateNode;var A=s.memoizedProps,P=co(o,A);p.props=P;var H=p.context,J=o.contextType;b=gl,typeof J=="object"&&J!==null&&(b=wn(J));var ne=o.getDerivedStateFromProps;J=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=s.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||H!==b)&&P0(s,p,u,b),Fs=!1;var G=s.memoizedState;p.state=G,Tu(s,u,p,f),wu(),H=s.memoizedState,A||G!==H||Fs?(typeof ne=="function"&&(qg(s,o,ne,u),H=s.memoizedState),(P=Fs||k0(s,o,P,u,G,H,b))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=b,u=P):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,bg(i,s),b=s.memoizedProps,J=co(o,b),p.props=J,ne=s.pendingProps,G=p.context,H=o.contextType,P=gl,typeof H=="object"&&H!==null&&(P=wn(H)),A=o.getDerivedStateFromProps,(H=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ne||G!==P)&&P0(s,p,u,P),Fs=!1,G=s.memoizedState,p.state=G,Tu(s,u,p,f),wu();var Y=s.memoizedState;b!==ne||G!==Y||Fs||i!==null&&i.dependencies!==null&&nf(i.dependencies)?(typeof A=="function"&&(qg(s,o,A,u),Y=s.memoizedState),(J=Fs||k0(s,o,J,u,G,Y,P)||i!==null&&i.dependencies!==null&&nf(i.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Y,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Y,P)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Y),p.props=u,p.state=Y,p.context=P,u=J):(typeof p.componentDidUpdate!="function"||b===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),u=!1)}return p=u,wf(i,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,i!==null&&u?(s.child=oo(s,i.child,null,f),s.child=oo(s,null,o,f)):Tn(i,s,o,f),s.memoizedState=p.state,i=s.child):i=ts(i,s,f),i}function Q0(i,s,o,u){return to(),s.flags|=256,Tn(i,s,o,u),s.child}var Qg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wg(i){return{baseLanes:i,cachePool:LE()}}function Yg(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=hr),i}function W0(i,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,b;if((b=p)||(b=i!==null&&i.memoizedState===null?!1:(Bt.current&2)!==0),b&&(f=!0,s.flags&=-129),b=(s.flags&32)!==0,s.flags&=-33,i===null){if(We){if(f?qs(s):Hs(),(i=wt)?(i=rT(i,Rr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Ms!==null?{id:Ei,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=RE(i),o.return=s,s.child=o,En=s,wt=null)):i=null,i===null)throw js(s);return ky(i)?s.lanes=32:s.lanes=536870912,null}var A=u.children;return u=u.fallback,f?(Hs(),f=s.mode,A=Tf({mode:"hidden",children:A},f),u=eo(u,f,o,null),A.return=s,u.return=s,A.sibling=u,s.child=A,u=s.child,u.memoizedState=Wg(o),u.childLanes=Yg(i,b,o),s.memoizedState=Qg,Ru(null,u)):(qs(s),Xg(s,A))}var P=i.memoizedState;if(P!==null&&(A=P.dehydrated,A!==null)){if(p)s.flags&256?(qs(s),s.flags&=-257,s=Jg(i,s,o)):s.memoizedState!==null?(Hs(),s.child=i.child,s.flags|=128,s=null):(Hs(),A=u.fallback,f=s.mode,u=Tf({mode:"visible",children:u.children},f),A=eo(A,f,o,null),A.flags|=2,u.return=s,A.return=s,u.sibling=A,s.child=u,oo(s,i.child,null,o),u=s.child,u.memoizedState=Wg(o),u.childLanes=Yg(i,b,o),s.memoizedState=Qg,s=Ru(null,u));else if(qs(s),ky(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var H=b.dgst;b=H,u=Error(r(419)),u.stack="",u.digest=b,gu({value:u,source:null,stack:null}),s=Jg(i,s,o)}else if(en||bl(i,s,o,!1),b=(o&i.childLanes)!==0,en||b){if(b=yt,b!==null&&(u=Wc(b,o),u!==0&&u!==P.retryLane))throw P.retryLane=u,Za(i,u),Yn(b,i,u),Kg;Dy(A)||kf(),s=Jg(i,s,o)}else Dy(A)?(s.flags|=192,s.child=i.child,s=null):(i=P.treeContext,wt=Nr(A.nextSibling),En=s,We=!0,Ls=null,Rr=!1,i!==null&&DE(s,i),s=Xg(s,u.children),s.flags|=4096);return s}return f?(Hs(),A=u.fallback,f=s.mode,P=i.child,H=P.sibling,u=Wi(P,{mode:"hidden",children:u.children}),u.subtreeFlags=P.subtreeFlags&65011712,H!==null?A=Wi(H,A):(A=eo(A,f,o,null),A.flags|=2),A.return=s,u.return=s,u.sibling=A,s.child=u,Ru(null,u),u=s.child,A=i.child.memoizedState,A===null?A=Wg(o):(f=A.cachePool,f!==null?(P=Jt._currentValue,f=f.parent!==P?{parent:P,pool:P}:f):f=LE(),A={baseLanes:A.baseLanes|o,cachePool:f}),u.memoizedState=A,u.childLanes=Yg(i,b,o),s.memoizedState=Qg,Ru(i.child,u)):(qs(s),o=i.child,i=o.sibling,o=Wi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(b=s.deletions,b===null?(s.deletions=[i],s.flags|=16):b.push(i)),s.child=o,s.memoizedState=null,o)}function Xg(i,s){return s=Tf({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Tf(i,s){return i=or(22,i,null,s),i.lanes=0,i}function Jg(i,s,o){return oo(s,i.child,null,o),i=Xg(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Y0(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),fg(i.return,s,o)}function Zg(i,s,o,u,f,p){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=u,b.tail=o,b.tailMode=f,b.treeForkCount=p)}function X0(i,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var b=Bt.current,A=(b&2)!==0;if(A?(b=b&1|2,s.flags|=128):b&=1,de(Bt,b),Tn(i,s,u,o),u=We?pu:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Y0(i,o,s);else if(i.tag===19)Y0(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)i=o.alternate,i!==null&&hf(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Zg(s,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&hf(i)===null){s.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Zg(s,!0,o,null,p,u);break;case"together":Zg(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ts(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),$s|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(bl(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=Wi(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=Wi(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function ey(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&nf(i)))}function K2(i,s,o){switch(s.tag){case 3:Ut(s,s.stateNode.containerInfo),Us(s,Jt,i.memoizedState.cache),to();break;case 27:case 5:qi(s);break;case 4:Ut(s,s.stateNode.containerInfo);break;case 10:Us(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ig(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(qs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?W0(i,s,o):(qs(s),i=ts(i,s,o),i!==null?i.sibling:null);qs(s);break;case 19:var f=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(bl(i,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return X0(i,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),de(Bt,Bt.current),u)break;return null;case 22:return s.lanes=0,q0(i,s,o,s.pendingProps);case 24:Us(s,Jt,i.memoizedState.cache)}return ts(i,s,o)}function J0(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)en=!0;else{if(!ey(i,o)&&(s.flags&128)===0)return en=!1,K2(i,s,o);en=(i.flags&131072)!==0}else en=!1,We&&(s.flags&1048576)!==0&&NE(s,pu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=so(s.elementType),s.type=i,typeof i=="function")sg(i)?(u=co(i,u),s.tag=1,s=$0(null,s,i,u,o)):(s.tag=0,s=$g(null,s,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===_e){s.tag=11,s=F0(null,s,i,u,o);break e}else if(f===x){s.tag=14,s=z0(null,s,i,u,o);break e}}throw s=Ne(i)||i,Error(r(306,s,""))}}return s;case 0:return $g(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=co(u,s.pendingProps),$0(i,s,u,f,o);case 3:e:{if(Ut(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,bg(i,s),Tu(s,u,null,o);var b=s.memoizedState;if(u=b.cache,Us(s,Jt,u),u!==p.cache&&mg(s,[Jt],o,!0),wu(),u=b.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:b.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=Q0(i,s,u,o);break e}else if(u!==f){f=Ir(Error(r(424)),s),gu(f),s=Q0(i,s,u,o);break e}else for(i=s.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,wt=Nr(i.firstChild),En=s,We=!0,Ls=null,Rr=!0,o=qE(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(to(),u===f){s=ts(i,s,o);break e}Tn(i,s,u,o)}s=s.child}return s;case 26:return wf(i,s),i===null?(o=cT(s.type,null,s.pendingProps,null))?s.memoizedState=o:We||(o=s.type,i=s.pendingProps,u=Uf(Oe.current).createElement(o),u[Wt]=s,u[dn]=i,An(u,o,i),Yt(u),s.stateNode=u):s.memoizedState=cT(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return qi(s),i===null&&We&&(u=s.stateNode=aT(s.type,s.pendingProps,Oe.current),En=s,Rr=!0,f=wt,Js(s.type)?(Py=f,wt=Nr(u.firstChild)):wt=f),Tn(i,s,s.pendingProps.children,o),wf(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&We&&((f=u=wt)&&(u=wN(u,s.type,s.pendingProps,Rr),u!==null?(s.stateNode=u,En=s,wt=Nr(u.firstChild),Rr=!1,f=!0):f=!1),f||js(s)),qi(s),f=s.type,p=s.pendingProps,b=i!==null?i.memoizedProps:null,u=p.children,Ry(f,p)?u=null:b!==null&&Ry(f,b)&&(s.flags|=32),s.memoizedState!==null&&(f=xg(i,s,L2,null,null,o),qu._currentValue=f),wf(i,s),Tn(i,s,u,o),s.child;case 6:return i===null&&We&&((i=o=wt)&&(o=TN(o,s.pendingProps,Rr),o!==null?(s.stateNode=o,En=s,wt=null,i=!0):i=!1),i||js(s)),null;case 13:return W0(i,s,o);case 4:return Ut(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=oo(s,null,u,o):Tn(i,s,u,o),s.child;case 11:return F0(i,s,s.type,s.pendingProps,o);case 7:return Tn(i,s,s.pendingProps,o),s.child;case 8:return Tn(i,s,s.pendingProps.children,o),s.child;case 12:return Tn(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Us(s,s.type,u.value),Tn(i,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ro(s),f=wn(f),u=u(f),s.flags|=1,Tn(i,s,u,o),s.child;case 14:return z0(i,s,s.type,s.pendingProps,o);case 15:return B0(i,s,s.type,s.pendingProps,o);case 19:return X0(i,s,o);case 31:return G2(i,s,o);case 22:return q0(i,s,o,s.pendingProps);case 24:return ro(s),u=wn(Jt),i===null?(f=yg(),f===null&&(f=yt,p=pg(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},vg(s),Us(s,Jt,f)):((i.lanes&o)!==0&&(bg(i,s),Tu(s,null,null,o),wu()),f=i.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Us(s,Jt,u)):(u=p.cache,Us(s,Jt,u),u!==f.cache&&mg(s,[Jt],o,!0))),Tn(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function ns(i){i.flags|=4}function ty(i,s,o,u,f){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(Iw())i.flags|=8192;else throw ao=of,_g}else i.flags&=-16777217}function Z0(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!mT(s))if(Iw())i.flags|=8192;else throw ao=of,_g}function Af(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Cd():536870912,i.lanes|=s,kl|=s)}function Cu(i,s){if(!We)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Tt(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function $2(i,s,o){var u=s.pendingProps;switch(cg(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ji(Jt),_t(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(vl(s)?ns(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hg())),Tt(s),null;case 26:var f=s.type,p=s.memoizedState;return i===null?(ns(s),p!==null?(Tt(s),Z0(s,p)):(Tt(s),ty(s,f,null,u,o))):p?p!==i.memoizedState?(ns(s),Tt(s),Z0(s,p)):(Tt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&ns(s),Tt(s),ty(s,f,i,u,o)),null;case 27:if(As(s),o=Oe.current,f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ns(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}i=me.current,vl(s)?kE(s):(i=aT(f,u,o),s.stateNode=i,ns(s))}return Tt(s),null;case 5:if(As(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ns(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(p=me.current,vl(s))kE(s);else{var b=Uf(Oe.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?b.createElement("select",{is:u.is}):b.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?b.createElement(f,{is:u.is}):b.createElement(f)}}p[Wt]=s,p[dn]=u;e:for(b=s.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===s)break e;for(;b.sibling===null;){if(b.return===null||b.return===s)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}s.stateNode=p;e:switch(An(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ns(s)}}return Tt(s),ty(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&ns(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Oe.current,vl(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,f=En,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Wt]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Ww(i.nodeValue,o)),i||js(s,!0)}else i=Uf(i).createTextNode(u),i[Wt]=s,s.stateNode=i}return Tt(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=vl(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Wt]=s}else to(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),i=!1}else o=hg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(cr(s),s):(cr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Tt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=vl(s),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Wt]=s}else to(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),f=!1}else f=hg(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(cr(s),s):(cr(s),null)}return cr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),Af(s,s.updateQueue),Tt(s),null);case 4:return _t(),i===null&&Ty(s.stateNode.containerInfo),Tt(s),null;case 10:return Ji(s.type),Tt(s),null;case 19:if(Z(Bt),u=s.memoizedState,u===null)return Tt(s),null;if(f=(s.flags&128)!==0,p=u.rendering,p===null)if(f)Cu(u,!1);else{if(Vt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(p=hf(i),p!==null){for(s.flags|=128,Cu(u,!1),i=p.updateQueue,s.updateQueue=i,Af(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)xE(o,i),o=o.sibling;return de(Bt,Bt.current&1|2),We&&Yi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Ln()>Cf&&(s.flags|=128,f=!0,Cu(u,!1),s.lanes=4194304)}else{if(!f)if(i=hf(p),i!==null){if(s.flags|=128,f=!0,i=i.updateQueue,s.updateQueue=i,Af(s,i),Cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!We)return Tt(s),null}else 2*Ln()-u.renderingStartTime>Cf&&o!==536870912&&(s.flags|=128,f=!0,Cu(u,!1),s.lanes=4194304);u.isBackwards?(p.sibling=s.child,s.child=p):(i=u.last,i!==null?i.sibling=p:s.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Ln(),i.sibling=null,o=Bt.current,de(Bt,f?o&1|2:o&1),We&&Yi(s,u.treeForkCount),i):(Tt(s),null);case 22:case 23:return cr(s),Ag(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),o=s.updateQueue,o!==null&&Af(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&Z(io),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ji(Jt),Tt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Q2(i,s){switch(cg(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Ji(Jt),_t(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return As(s),null;case 31:if(s.memoizedState!==null){if(cr(s),s.alternate===null)throw Error(r(340));to()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(cr(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));to()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Z(Bt),null;case 4:return _t(),null;case 10:return Ji(s.type),null;case 22:case 23:return cr(s),Ag(),i!==null&&Z(io),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Ji(Jt),null;case 25:return null;default:return null}}function ew(i,s){switch(cg(s),s.tag){case 3:Ji(Jt),_t();break;case 26:case 27:case 5:As(s);break;case 4:_t();break;case 31:s.memoizedState!==null&&cr(s);break;case 13:cr(s);break;case 19:Z(Bt);break;case 10:Ji(s.type);break;case 22:case 23:cr(s),Ag(),i!==null&&Z(io);break;case 24:Ji(Jt)}}function Nu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,b=o.inst;u=p(),b.destroy=u}o=o.next}while(o!==f)}}catch(A){ut(s,s.return,A)}}function Gs(i,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var b=u.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=s;var P=o,H=A;try{H()}catch(J){ut(f,P,J)}}}u=u.next}while(u!==p)}}catch(J){ut(s,s.return,J)}}function tw(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{GE(s,o)}catch(u){ut(i,i.return,u)}}}function nw(i,s,o){o.props=co(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){ut(i,s,u)}}function Du(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){ut(i,s,f)}}function Ti(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){ut(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ut(i,s,f)}else o.current=null}function rw(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){ut(i,i.return,f)}}function ny(i,s,o){try{var u=i.stateNode;gN(u,i.type,o,s),u[dn]=s}catch(f){ut(i,i.return,f)}}function iw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Js(i.type)||i.tag===4}function ry(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||iw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Js(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function iy(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=zr));else if(u!==4&&(u===27&&Js(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(iy(i,s,o),i=i.sibling;i!==null;)iy(i,s,o),i=i.sibling}function If(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Js(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(If(i,s,o),i=i.sibling;i!==null;)If(i,s,o),i=i.sibling}function sw(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);An(s,u,o),s[Wt]=i,s[dn]=o}catch(p){ut(i,i.return,p)}}var rs=!1,tn=!1,sy=!1,aw=typeof WeakSet=="function"?WeakSet:Set,mn=null;function W2(i,s){if(i=i.containerInfo,Sy=Kf,i=_E(i),Jp(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var b=0,A=-1,P=-1,H=0,J=0,ne=i,G=null;t:for(;;){for(var Y;ne!==o||f!==0&&ne.nodeType!==3||(A=b+f),ne!==p||u!==0&&ne.nodeType!==3||(P=b+u),ne.nodeType===3&&(b+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===i)break t;if(G===o&&++H===f&&(A=b),G===p&&++J===u&&(P=b),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}o=A===-1||P===-1?null:{start:A,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(xy={focusedElem:i,selectionRange:o},Kf=!1,mn=s;mn!==null;)if(s=mn,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,mn=i;else for(;mn!==null;){switch(s=mn,p=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var ve=co(o.type,f);i=u.getSnapshotBeforeUpdate(ve,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Ce){ut(o,o.return,Ce)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)Ny(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ny(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,mn=i;break}mn=s.return}}function ow(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ss(i,o),u&4&&Nu(5,o);break;case 1:if(ss(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(b){ut(o,o.return,b)}else{var f=co(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(b){ut(o,o.return,b)}}u&64&&tw(o),u&512&&Du(o,o.return);break;case 3:if(ss(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{GE(i,s)}catch(b){ut(o,o.return,b)}}break;case 27:s===null&&u&4&&sw(o);case 26:case 5:ss(i,o),s===null&&u&4&&rw(o),u&512&&Du(o,o.return);break;case 12:ss(i,o);break;case 31:ss(i,o),u&4&&uw(i,o);break;case 13:ss(i,o),u&4&&hw(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=iN.bind(null,o),AN(i,o))));break;case 22:if(u=o.memoizedState!==null||rs,!u){s=s!==null&&s.memoizedState!==null||tn,f=rs;var p=tn;rs=u,(tn=s)&&!p?as(i,o,(o.subtreeFlags&8772)!==0):ss(i,o),rs=f,tn=p}break;case 30:break;default:ss(i,o)}}function lw(i){var s=i.alternate;s!==null&&(i.alternate=null,lw(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&nl(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var xt=null,Kn=!1;function is(i,s,o){for(o=o.child;o!==null;)cw(i,s,o),o=o.sibling}function cw(i,s,o){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Lr,o)}catch{}switch(o.tag){case 26:tn||Ti(o,s),is(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:tn||Ti(o,s);var u=xt,f=Kn;Js(o.type)&&(xt=o.stateNode,Kn=!1),is(i,s,o),Fu(o.stateNode),xt=u,Kn=f;break;case 5:tn||Ti(o,s);case 6:if(u=xt,f=Kn,xt=null,is(i,s,o),xt=u,Kn=f,xt!==null)if(Kn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(o.stateNode)}catch(p){ut(o,s,p)}else try{xt.removeChild(o.stateNode)}catch(p){ut(o,s,p)}break;case 18:xt!==null&&(Kn?(i=xt,tT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Fl(i)):tT(xt,o.stateNode));break;case 4:u=xt,f=Kn,xt=o.stateNode.containerInfo,Kn=!0,is(i,s,o),xt=u,Kn=f;break;case 0:case 11:case 14:case 15:Gs(2,o,s),tn||Gs(4,o,s),is(i,s,o);break;case 1:tn||(Ti(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&nw(o,s,u)),is(i,s,o);break;case 21:is(i,s,o);break;case 22:tn=(u=tn)||o.memoizedState!==null,is(i,s,o),tn=u;break;default:is(i,s,o)}}function uw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fl(i)}catch(o){ut(s,s.return,o)}}}function hw(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fl(i)}catch(o){ut(s,s.return,o)}}function Y2(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new aw),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new aw),s;default:throw Error(r(435,i.tag))}}function Sf(i,s){var o=Y2(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=sN.bind(null,i,u);u.then(f,f)}})}function $n(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,b=s,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(Js(A.type)){xt=A.stateNode,Kn=!1;break e}break;case 5:xt=A.stateNode,Kn=!1;break e;case 3:case 4:xt=A.stateNode.containerInfo,Kn=!0;break e}A=A.return}if(xt===null)throw Error(r(160));cw(p,b,f),xt=null,Kn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)dw(s,i),s=s.sibling}var $r=null;function dw(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(s,i),Qn(i),u&4&&(Gs(3,i,i.return),Nu(3,i),Gs(5,i,i.return));break;case 1:$n(s,i),Qn(i),u&512&&(tn||o===null||Ti(o,o.return)),u&64&&rs&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=$r;if($n(s,i),Qn(i),u&512&&(tn||o===null||Ti(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[ci]||p[Wt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),An(p,u,o),p[Wt]=i,Yt(p),u=p;break e;case"link":var b=dT("link","href",f).get(u+(o.href||""));if(b){for(var A=0;A<b.length;A++)if(p=b[A],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(A,1);break t}}p=f.createElement(u),An(p,u,o),f.head.appendChild(p);break;case"meta":if(b=dT("meta","content",f).get(u+(o.content||""))){for(A=0;A<b.length;A++)if(p=b[A],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(A,1);break t}}p=f.createElement(u),An(p,u,o),f.head.appendChild(p);break;default:throw Error(r(468,u))}p[Wt]=i,Yt(p),u=p}i.stateNode=u}else fT(f,i.type,i.stateNode);else i.stateNode=hT(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?fT(f,i.type,i.stateNode):hT(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&ny(i,i.memoizedProps,o.memoizedProps)}break;case 27:$n(s,i),Qn(i),u&512&&(tn||o===null||Ti(o,o.return)),o!==null&&u&4&&ny(i,i.memoizedProps,o.memoizedProps);break;case 5:if($n(s,i),Qn(i),u&512&&(tn||o===null||Ti(o,o.return)),i.flags&32){f=i.stateNode;try{Gn(f,"")}catch(ve){ut(i,i.return,ve)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,ny(i,f,o!==null?o.memoizedProps:f)),u&1024&&(sy=!0);break;case 6:if($n(s,i),Qn(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(ve){ut(i,i.return,ve)}}break;case 3:if(Bf=null,f=$r,$r=Ff(s.containerInfo),$n(s,i),$r=f,Qn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Fl(s.containerInfo)}catch(ve){ut(i,i.return,ve)}sy&&(sy=!1,fw(i));break;case 4:u=$r,$r=Ff(i.stateNode.containerInfo),$n(s,i),Qn(i),$r=u;break;case 12:$n(s,i),Qn(i);break;case 31:$n(s,i),Qn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 13:$n(s,i),Qn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rf=Ln()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 22:f=i.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,H=rs,J=tn;if(rs=H||f,tn=J||P,$n(s,i),tn=J,rs=H,Qn(i),u&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||P||rs||tn||uo(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){P=o=s;try{if(p=P.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=P.stateNode;var ne=P.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ve){ut(P,P.return,ve)}}}else if(s.tag===6){if(o===null){P=s;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(ve){ut(P,P.return,ve)}}}else if(s.tag===18){if(o===null){P=s;try{var Y=P.stateNode;f?nT(Y,!0):nT(P.stateNode,!1)}catch(ve){ut(P,P.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sf(i,o))));break;case 19:$n(s,i),Qn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Sf(i,u)));break;case 30:break;case 21:break;default:$n(s,i),Qn(i)}}function Qn(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(iw(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,p=ry(i);If(i,p,f);break;case 5:var b=o.stateNode;o.flags&32&&(Gn(b,""),o.flags&=-33);var A=ry(i);If(i,A,b);break;case 3:case 4:var P=o.stateNode.containerInfo,H=ry(i);iy(i,H,P);break;default:throw Error(r(161))}}catch(J){ut(i,i.return,J)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function fw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;fw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ss(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ow(i,s.alternate,s),s=s.sibling}function uo(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Gs(4,s,s.return),uo(s);break;case 1:Ti(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&nw(s,s.return,o),uo(s);break;case 27:Fu(s.stateNode);case 26:case 5:Ti(s,s.return),uo(s);break;case 22:s.memoizedState===null&&uo(s);break;case 30:uo(s);break;default:uo(s)}i=i.sibling}}function as(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=i,p=s,b=p.flags;switch(p.tag){case 0:case 11:case 15:as(f,p,o),Nu(4,p);break;case 1:if(as(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){ut(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var A=u.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)HE(P[f],A)}catch(H){ut(u,u.return,H)}}o&&b&64&&tw(p),Du(p,p.return);break;case 27:sw(p);case 26:case 5:as(f,p,o),o&&u===null&&b&4&&rw(p),Du(p,p.return);break;case 12:as(f,p,o);break;case 31:as(f,p,o),o&&b&4&&uw(f,p);break;case 13:as(f,p,o),o&&b&4&&hw(f,p);break;case 22:p.memoizedState===null&&as(f,p,o),Du(p,p.return);break;case 30:break;default:as(f,p,o)}s=s.sibling}}function ay(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&yu(o))}function oy(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&yu(i))}function Qr(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mw(i,s,o,u),s=s.sibling}function mw(i,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Qr(i,s,o,u),f&2048&&Nu(9,s);break;case 1:Qr(i,s,o,u);break;case 3:Qr(i,s,o,u),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&yu(i)));break;case 12:if(f&2048){Qr(i,s,o,u),i=s.stateNode;try{var p=s.memoizedProps,b=p.id,A=p.onPostCommit;typeof A=="function"&&A(b,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){ut(s,s.return,P)}}else Qr(i,s,o,u);break;case 31:Qr(i,s,o,u);break;case 13:Qr(i,s,o,u);break;case 23:break;case 22:p=s.stateNode,b=s.alternate,s.memoizedState!==null?p._visibility&2?Qr(i,s,o,u):ku(i,s):p._visibility&2?Qr(i,s,o,u):(p._visibility|=2,Cl(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ay(b,s);break;case 24:Qr(i,s,o,u),f&2048&&oy(s.alternate,s);break;default:Qr(i,s,o,u)}}function Cl(i,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=i,b=s,A=o,P=u,H=b.flags;switch(b.tag){case 0:case 11:case 15:Cl(p,b,A,P,f),Nu(8,b);break;case 23:break;case 22:var J=b.stateNode;b.memoizedState!==null?J._visibility&2?Cl(p,b,A,P,f):ku(p,b):(J._visibility|=2,Cl(p,b,A,P,f)),f&&H&2048&&ay(b.alternate,b);break;case 24:Cl(p,b,A,P,f),f&&H&2048&&oy(b.alternate,b);break;default:Cl(p,b,A,P,f)}s=s.sibling}}function ku(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,f=u.flags;switch(u.tag){case 22:ku(o,u),f&2048&&ay(u.alternate,u);break;case 24:ku(o,u),f&2048&&oy(u.alternate,u);break;default:ku(o,u)}s=s.sibling}}var Pu=8192;function Nl(i,s,o){if(i.subtreeFlags&Pu)for(i=i.child;i!==null;)pw(i,s,o),i=i.sibling}function pw(i,s,o){switch(i.tag){case 26:Nl(i,s,o),i.flags&Pu&&i.memoizedState!==null&&MN(o,$r,i.memoizedState,i.memoizedProps);break;case 5:Nl(i,s,o);break;case 3:case 4:var u=$r;$r=Ff(i.stateNode.containerInfo),Nl(i,s,o),$r=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Pu,Pu=16777216,Nl(i,s,o),Pu=u):Nl(i,s,o));break;default:Nl(i,s,o)}}function gw(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ou(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];mn=u,_w(u,i)}gw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yw(i),i=i.sibling}function yw(i){switch(i.tag){case 0:case 11:case 15:Ou(i),i.flags&2048&&Gs(9,i,i.return);break;case 3:Ou(i);break;case 12:Ou(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,xf(i)):Ou(i);break;default:Ou(i)}}function xf(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];mn=u,_w(u,i)}gw(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Gs(8,s,s.return),xf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,xf(s));break;default:xf(s)}i=i.sibling}}function _w(i,s){for(;mn!==null;){var o=mn;switch(o.tag){case 0:case 11:case 15:Gs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:yu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,mn=u;else e:for(o=i;mn!==null;){u=mn;var f=u.sibling,p=u.return;if(lw(u),u===o){mn=null;break e}if(f!==null){f.return=p,mn=f;break e}mn=p}}}var X2={getCacheForType:function(i){var s=wn(Jt),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return wn(Jt).controller.signal}},J2=typeof WeakMap=="function"?WeakMap:Map,at=0,yt=null,ze=null,Ke=0,ct=0,ur=null,Ks=!1,Dl=!1,ly=!1,os=0,Vt=0,$s=0,ho=0,cy=0,hr=0,kl=0,Vu=null,Wn=null,uy=!1,Rf=0,vw=0,Cf=1/0,Nf=null,Qs=null,ln=0,Ws=null,Pl=null,ls=0,hy=0,dy=null,bw=null,Mu=0,fy=null;function dr(){return(at&2)!==0&&Ke!==0?Ke&-Ke:$.T!==null?vy():Nd()}function Ew(){if(hr===0)if((Ke&536870912)===0||We){var i=ja;ja<<=1,(ja&3932160)===0&&(ja=262144),hr=i}else hr=536870912;return i=lr.current,i!==null&&(i.flags|=32),hr}function Yn(i,s,o){(i===yt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(Ol(i,0),Ys(i,Ke,hr,!1)),Ua(i,o),((at&2)===0||i!==yt)&&(i===yt&&((at&2)===0&&(ho|=o),Vt===4&&Ys(i,Ke,hr,!1)),Ai(i))}function ww(i,s,o){if((at&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||jr(i,s),f=u?tN(i,s):py(i,s,!0),p=u;do{if(f===0){Dl&&!u&&Ys(i,s,0,!1);break}else{if(o=i.current.alternate,p&&!Z2(o)){f=py(i,s,!1),p=!1;continue}if(f===2){if(p=s,i.errorRecoveryDisabledLanes&p)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){s=b;e:{var A=i;f=Vu;var P=A.current.memoizedState.isDehydrated;if(P&&(Ol(A,b).flags|=256),b=py(A,b,!1),b!==2){if(ly&&!P){A.errorRecoveryDisabledLanes|=p,ho|=p,f=4;break e}p=Wn,Wn=f,p!==null&&(Wn===null?Wn=p:Wn.push.apply(Wn,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){Ol(i,0),Ys(i,s,0,!0);break}e:{switch(u=i,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ys(u,s,hr,!Ks);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Rf+300-Ln(),10<f)){if(Ys(u,s,hr,!Ks),ai(u,0,!0)!==0)break e;ls=s,u.timeoutHandle=Zw(Tw.bind(null,u,o,Wn,Nf,uy,s,hr,ho,kl,Ks,p,"Throttled",-0,0),f);break e}Tw(u,o,Wn,Nf,uy,s,hr,ho,kl,Ks,p,null,-0,0)}}break}while(!0);Ai(i)}function Tw(i,s,o,u,f,p,b,A,P,H,J,ne,G,Y){if(i.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zr},pw(s,p,ne);var ve=(p&62914560)===p?Rf-Ln():(p&4194048)===p?vw-Ln():0;if(ve=LN(ne,ve),ve!==null){ls=p,i.cancelPendingCommit=ve(Dw.bind(null,i,s,p,o,u,f,b,A,P,J,ne,null,G,Y)),Ys(i,p,b,!H);return}}Dw(i,s,p,o,u,f,b,A,P)}function Z2(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!ar(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ys(i,s,o,u){s&=~cy,s&=~ho,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var f=s;0<f;){var p=31-Ft(f),b=1<<p;u[p]=-1,f&=~b}o!==0&&Fa(i,o,s)}function Df(){return(at&6)===0?(Lu(0),!1):!0}function my(){if(ze!==null){if(ct===0)var i=ze.return;else i=ze,Xi=no=null,Ng(i),Al=null,vu=0,i=ze;for(;i!==null;)ew(i.alternate,i),i=i.return;ze=null}}function Ol(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,vN(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),ls=0,my(),yt=i,ze=o=Wi(i.current,null),Ke=s,ct=0,ur=null,Ks=!1,Dl=jr(i,s),ly=!1,kl=hr=cy=ho=$s=Vt=0,Wn=Vu=null,uy=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var f=31-Ft(u),p=1<<f;s|=i[f],u&=~p}return os=s,Xd(),o}function Aw(i,s){Le=null,$.H=xu,s===Tl||s===af?(s=FE(),ct=3):s===_g?(s=FE(),ct=4):ct=s===Kg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,ur=s,ze===null&&(Vt=1,bf(i,Ir(s,i.current)))}function Iw(){var i=lr.current;return i===null?!0:(Ke&4194048)===Ke?Cr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?i===Cr:!1}function Sw(){var i=$.H;return $.H=xu,i===null?xu:i}function xw(){var i=$.A;return $.A=X2,i}function kf(){Vt=4,Ks||(Ke&4194048)!==Ke&&lr.current!==null||(Dl=!0),($s&134217727)===0&&(ho&134217727)===0||yt===null||Ys(yt,Ke,hr,!1)}function py(i,s,o){var u=at;at|=2;var f=Sw(),p=xw();(yt!==i||Ke!==s)&&(Nf=null,Ol(i,s)),s=!1;var b=Vt;e:do try{if(ct!==0&&ze!==null){var A=ze,P=ur;switch(ct){case 8:my(),b=6;break e;case 3:case 2:case 9:case 6:lr.current===null&&(s=!0);var H=ct;if(ct=0,ur=null,Vl(i,A,P,H),o&&Dl){b=0;break e}break;default:H=ct,ct=0,ur=null,Vl(i,A,P,H)}}eN(),b=Vt;break}catch(J){Aw(i,J)}while(!0);return s&&i.shellSuspendCounter++,Xi=no=null,at=u,$.H=f,$.A=p,ze===null&&(yt=null,Ke=0,Xd()),b}function eN(){for(;ze!==null;)Rw(ze)}function tN(i,s){var o=at;at|=2;var u=Sw(),f=xw();yt!==i||Ke!==s?(Nf=null,Cf=Ln()+500,Ol(i,s)):Dl=jr(i,s);e:do try{if(ct!==0&&ze!==null){s=ze;var p=ur;t:switch(ct){case 1:ct=0,ur=null,Vl(i,s,p,1);break;case 2:case 9:if(jE(p)){ct=0,ur=null,Cw(s);break}s=function(){ct!==2&&ct!==9||yt!==i||(ct=7),Ai(i)},p.then(s,s);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:jE(p)?(ct=0,ur=null,Cw(s)):(ct=0,ur=null,Vl(i,s,p,7));break;case 5:var b=null;switch(ze.tag){case 26:b=ze.memoizedState;case 5:case 27:var A=ze;if(b?mT(b):A.stateNode.complete){ct=0,ur=null;var P=A.sibling;if(P!==null)ze=P;else{var H=A.return;H!==null?(ze=H,Pf(H)):ze=null}break t}}ct=0,ur=null,Vl(i,s,p,5);break;case 6:ct=0,ur=null,Vl(i,s,p,6);break;case 8:my(),Vt=6;break e;default:throw Error(r(462))}}nN();break}catch(J){Aw(i,J)}while(!0);return Xi=no=null,$.H=u,$.A=f,at=o,ze!==null?0:(yt=null,Ke=0,Xd(),Vt)}function nN(){for(;ze!==null&&!Jo();)Rw(ze)}function Rw(i){var s=J0(i.alternate,i,os);i.memoizedProps=i.pendingProps,s===null?Pf(i):ze=s}function Cw(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=K0(o,s,s.pendingProps,s.type,void 0,Ke);break;case 11:s=K0(o,s,s.pendingProps,s.type.render,s.ref,Ke);break;case 5:Ng(s);default:ew(o,s),s=ze=xE(s,os),s=J0(o,s,os)}i.memoizedProps=i.pendingProps,s===null?Pf(i):ze=s}function Vl(i,s,o,u){Xi=no=null,Ng(s),Al=null,vu=0;var f=s.return;try{if(H2(i,f,s,o,Ke)){Vt=1,bf(i,Ir(o,i.current)),ze=null;return}}catch(p){if(f!==null)throw ze=f,p;Vt=1,bf(i,Ir(o,i.current)),ze=null;return}s.flags&32768?(We||u===1?i=!0:Dl||(Ke&536870912)!==0?i=!1:(Ks=i=!0,(u===2||u===9||u===3||u===6)&&(u=lr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Nw(s,i)):Pf(s)}function Pf(i){var s=i;do{if((s.flags&32768)!==0){Nw(s,Ks);return}i=s.return;var o=$2(s.alternate,s,os);if(o!==null){ze=o;return}if(s=s.sibling,s!==null){ze=s;return}ze=s=i}while(s!==null);Vt===0&&(Vt=5)}function Nw(i,s){do{var o=Q2(i.alternate,i);if(o!==null){o.flags&=32767,ze=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){ze=i;return}ze=i=o}while(i!==null);Vt=6,ze=null}function Dw(i,s,o,u,f,p,b,A,P){i.cancelPendingCommit=null;do Of();while(ln!==0);if((at&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=rg,Qp(i,o,p,b,A,P),i===yt&&(ze=yt=null,Ke=0),Pl=s,Ws=i,ls=o,hy=p,dy=f,bw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,aN(Ss,function(){return Mw(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,f=X.p,X.p=2,b=at,at|=4;try{W2(i,s,o)}finally{at=b,X.p=f,$.T=u}}ln=1,kw(),Pw(),Ow()}}function kw(){if(ln===1){ln=0;var i=Ws,s=Pl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=X.p;X.p=2;var f=at;at|=4;try{dw(s,i);var p=xy,b=_E(i.containerInfo),A=p.focusedElem,P=p.selectionRange;if(b!==A&&A&&A.ownerDocument&&yE(A.ownerDocument.documentElement,A)){if(P!==null&&Jp(A)){var H=P.start,J=P.end;if(J===void 0&&(J=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(J,A.value.length);else{var ne=A.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),ve=A.textContent.length,Ce=Math.min(P.start,ve),gt=P.end===void 0?Ce:Math.min(P.end,ve);!Y.extend&&Ce>gt&&(b=gt,gt=Ce,Ce=b);var F=gE(A,Ce),L=gE(A,gt);if(F&&L&&(Y.rangeCount!==1||Y.anchorNode!==F.node||Y.anchorOffset!==F.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var q=ne.createRange();q.setStart(F.node,F.offset),Y.removeAllRanges(),Ce>gt?(Y.addRange(q),Y.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),Y.addRange(q))}}}}for(ne=[],Y=A;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ne.length;A++){var ee=ne[A];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Kf=!!Sy,xy=Sy=null}finally{at=f,X.p=u,$.T=o}}i.current=s,ln=2}}function Pw(){if(ln===2){ln=0;var i=Ws,s=Pl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=X.p;X.p=2;var f=at;at|=4;try{ow(i,s.alternate,s)}finally{at=f,X.p=u,$.T=o}}ln=3}}function Ow(){if(ln===4||ln===3){ln=0,Zo();var i=Ws,s=Pl,o=ls,u=bw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ln=5:(ln=0,Pl=Ws=null,Vw(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Qs=null),Gi(o),s=s.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Lr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,f=X.p,X.p=2,$.T=null;try{for(var p=i.onRecoverableError,b=0;b<u.length;b++){var A=u[b];p(A.value,{componentStack:A.stack})}}finally{$.T=s,X.p=f}}(ls&3)!==0&&Of(),Ai(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===fy?Mu++:(Mu=0,fy=i):Mu=0,Lu(0)}}function Vw(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,yu(s)))}function Of(){return kw(),Pw(),Ow(),Mw()}function Mw(){if(ln!==5)return!1;var i=Ws,s=hy;hy=0;var o=Gi(ls),u=$.T,f=X.p;try{X.p=32>o?32:o,$.T=null,o=dy,dy=null;var p=Ws,b=ls;if(ln=0,Pl=Ws=null,ls=0,(at&6)!==0)throw Error(r(331));var A=at;if(at|=4,yw(p.current),mw(p,p.current,b,o),at=A,Lu(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Lr,p)}catch{}return!0}finally{X.p=f,$.T=u,Vw(i,s)}}function Lw(i,s,o){s=Ir(o,s),s=Gg(i.stateNode,s,2),i=Bs(i,s,2),i!==null&&(Ua(i,2),Ai(i))}function ut(i,s,o){if(i.tag===3)Lw(i,i,o);else for(;s!==null;){if(s.tag===3){Lw(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Qs===null||!Qs.has(u))){i=Ir(o,i),o=j0(2),u=Bs(s,o,2),u!==null&&(U0(o,u,s,i),Ua(u,2),Ai(u));break}}s=s.return}}function gy(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new J2;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ly=!0,f.add(o),i=rN.bind(null,i,s,o),s.then(i,i))}function rN(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,yt===i&&(Ke&o)===o&&(Vt===4||Vt===3&&(Ke&62914560)===Ke&&300>Ln()-Rf?(at&2)===0&&Ol(i,0):cy|=o,kl===Ke&&(kl=0)),Ai(i)}function jw(i,s){s===0&&(s=Cd()),i=Za(i,s),i!==null&&(Ua(i,s),Ai(i))}function iN(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),jw(i,o)}function sN(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),jw(i,o)}function aN(i,s){return it(i,s)}var Vf=null,Ml=null,yy=!1,Mf=!1,_y=!1,Xs=0;function Ai(i){i!==Ml&&i.next===null&&(Ml===null?Vf=Ml=i:Ml=Ml.next=i),Mf=!0,yy||(yy=!0,lN())}function Lu(i,s){if(!_y&&Mf){_y=!0;do for(var o=!1,u=Vf;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var b=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Ft(42|i)+1)-1,p&=f&~(b&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Bw(u,p))}else p=Ke,p=ai(u,u===yt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||jr(u,p)||(o=!0,Bw(u,p));u=u.next}while(o);_y=!1}}function oN(){Uw()}function Uw(){Mf=yy=!1;var i=0;Xs!==0&&_N()&&(i=Xs);for(var s=Ln(),o=null,u=Vf;u!==null;){var f=u.next,p=Fw(u,s);p===0?(u.next=null,o===null?Vf=f:o.next=f,f===null&&(Ml=o)):(o=u,(i!==0||(p&3)!==0)&&(Mf=!0)),u=f}ln!==0&&ln!==5||Lu(i),Xs!==0&&(Xs=0)}function Fw(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var b=31-Ft(p),A=1<<b,P=f[b];P===-1?((A&o)===0||(A&u)!==0)&&(f[b]=$p(A,s)):P<=s&&(i.expiredLanes|=A),p&=~A}if(s=yt,o=Ke,o=ai(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Hi(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||jr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&Hi(u),Gi(o)){case 2:case 8:o=$c;break;case 32:o=Ss;break;case 268435456:o=Ad;break;default:o=Ss}return u=zw.bind(null,i),o=it(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&Hi(u),i.callbackPriority=2,i.callbackNode=null,2}function zw(i,s){if(ln!==0&&ln!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Of()&&i.callbackNode!==o)return null;var u=Ke;return u=ai(i,i===yt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ww(i,u,s),Fw(i,Ln()),i.callbackNode!=null&&i.callbackNode===o?zw.bind(null,i):null)}function Bw(i,s){if(Of())return null;ww(i,s,!0)}function lN(){bN(function(){(at&6)!==0?it(Kc,oN):Uw()})}function vy(){if(Xs===0){var i=El;i===0&&(i=ii,ii<<=1,(ii&261888)===0&&(ii=256)),Xs=i}return Xs}function qw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:al(""+i)}function Hw(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function cN(i,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=qw((f[dn]||null).action),b=u.submitter;b&&(s=(s=b[dn]||null)?qw(s.formAction):b.getAttribute("formAction"),s!==null&&(p=s,b=null));var A=new yi("action","action",null,u,f);i.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Xs!==0){var P=b?Hw(f,b):new FormData(f);Ug(o,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(A.preventDefault(),P=b?Hw(f,b):new FormData(f),Ug(o,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var by=0;by<ng.length;by++){var Ey=ng[by],uN=Ey.toLowerCase(),hN=Ey[0].toUpperCase()+Ey.slice(1);Kr(uN,"on"+hN)}Kr(EE,"onAnimationEnd"),Kr(wE,"onAnimationIteration"),Kr(TE,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(x2,"onTransitionRun"),Kr(R2,"onTransitionStart"),Kr(C2,"onTransitionCancel"),Kr(AE,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function Gw(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var b=u.length-1;0<=b;b--){var A=u[b],P=A.instance,H=A.currentTarget;if(A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){Yd(J)}f.currentTarget=null,p=P}else for(b=0;b<u.length;b++){if(A=u[b],P=A.instance,H=A.currentTarget,A=A.listener,P!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=H;try{p(f)}catch(J){Yd(J)}f.currentTarget=null,p=P}}}}function Be(i,s){var o=s[tl];o===void 0&&(o=s[tl]=new Set);var u=i+"__bubble";o.has(u)||(Kw(s,i,2,!1),o.add(u))}function wy(i,s,o){var u=0;s&&(u|=4),Kw(o,i,u,s)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function Ty(i){if(!i[Lf]){i[Lf]=!0,Yc.forEach(function(o){o!=="selectionchange"&&(dN.has(o)||wy(o,!1,i),wy(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Lf]||(s[Lf]=!0,wy("selectionchange",!1,s))}}function Kw(i,s,o,u){switch(ET(s)){case 2:var f=FN;break;case 8:f=zN;break;default:f=jy}o=f.bind(null,s,o,i),f=void 0,!Ga||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(s,o,{capture:!0,passive:f}):i.addEventListener(s,o,!0):f!==void 0?i.addEventListener(s,o,{passive:f}):i.addEventListener(s,o,!1)}function Ay(i,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var b=u.tag;if(b===3||b===4){var A=u.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=u.return;b!==null;){var P=b.tag;if((P===3||P===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=ui(A),b===null)return;if(P=b.tag,P===5||P===6||P===26||P===27){u=p=b;continue e}A=A.parentNode}}u=u.return}ks(function(){var H=p,J=Er(o),ne=[];e:{var G=IE.get(i);if(G!==void 0){var Y=yi,ve=i;switch(i){case"keypress":if($a(o)===0)break e;case"keydown":case"keyup":Y=$d;break;case"focusin":ve="focus",Y=Wa;break;case"focusout":ve="blur",Y=Wa;break;case"beforeblur":case"afterblur":Y=Wa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case EE:case wE:case TE:Y=Fd;break;case AE:Y=S;break;case"scroll":case"scrollend":Y=lu;break;case"wheel":Y=Q;break;case"copy":case"cut":case"paste":Y=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Qi;break;case"toggle":case"beforetoggle":Y=Me}var Ce=(s&4)!==0,gt=!Ce&&(i==="scroll"||i==="scrollend"),F=Ce?G!==null?G+"Capture":null:G;Ce=[];for(var L=H,q;L!==null;){var ee=L;if(q=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||q===null||F===null||(ee=Br(L,F),ee!=null&&Ce.push(Uu(L,ee,q))),gt)break;L=L.return}0<Ce.length&&(G=new Y(G,ve,null,o,J),ne.push({event:G,listeners:Ce}))}}if((s&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",Y=i==="mouseout"||i==="pointerout",G&&o!==su&&(ve=o.relatedTarget||o.fromElement)&&(ui(ve)||ve[li]))break e;if((Y||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(ve=o.relatedTarget||o.toElement,Y=H,ve=ve?ui(ve):null,ve!==null&&(gt=l(ve),Ce=ve.tag,ve!==gt||Ce!==5&&Ce!==27&&Ce!==6)&&(ve=null)):(Y=null,ve=H),Y!==ve)){if(Ce=cu,ee="onMouseLeave",F="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Ce=Qi,ee="onPointerLeave",F="onPointerEnter",L="pointer"),gt=Y==null?G:ir(Y),q=ve==null?G:ir(ve),G=new Ce(ee,L+"leave",Y,o,J),G.target=gt,G.relatedTarget=q,ee=null,ui(J)===H&&(Ce=new Ce(F,L+"enter",ve,o,J),Ce.target=q,Ce.relatedTarget=gt,ee=Ce),gt=ee,Y&&ve)t:{for(Ce=fN,F=Y,L=ve,q=0,ee=F;ee;ee=Ce(ee))q++;ee=0;for(var Ae=L;Ae;Ae=Ce(Ae))ee++;for(;0<q-ee;)F=Ce(F),q--;for(;0<ee-q;)L=Ce(L),ee--;for(;q--;){if(F===L||L!==null&&F===L.alternate){Ce=F;break t}F=Ce(F),L=Ce(L)}Ce=null}else Ce=null;Y!==null&&$w(ne,G,Y,Ce,!1),ve!==null&&gt!==null&&$w(ne,gt,ve,Ce,!0)}}e:{if(G=H?ir(H):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var et=uE;else if(lE(G))if(hE)et=A2;else{et=w2;var Ee=E2}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&sl(H.elementType)&&(et=uE):et=T2;if(et&&(et=et(i,H))){cE(ne,et,o,J);break e}Ee&&Ee(i,G,H),i==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&nu(G,"number",G.value)}switch(Ee=H?ir(H):window,i){case"focusin":(lE(Ee)||Ee.contentEditable==="true")&&(fl=Ee,Zp=H,mu=null);break;case"focusout":mu=Zp=fl=null;break;case"mousedown":eg=!0;break;case"contextmenu":case"mouseup":case"dragend":eg=!1,vE(ne,o,J);break;case"selectionchange":if(S2)break;case"keydown":case"keyup":vE(ne,o,J)}var Fe;if(st)e:{switch(i){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else dl?Ya(i,o)&&($e="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&($e="onCompositionStart");$e&&(bi&&o.locale!=="ko"&&(dl||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&dl&&(Fe=ou()):(gi=J,au="value"in gi?gi.value:gi.textContent,dl=!0)),Ee=jf(H,$e),0<Ee.length&&($e=new vi($e,i,null,o,J),ne.push({event:$e,listeners:Ee}),Fe?$e.data=Fe:(Fe=hl(o),Fe!==null&&($e.data=Fe)))),(Fe=Tr?y2(i,o):_2(i,o))&&($e=jf(H,"onBeforeInput"),0<$e.length&&(Ee=new vi("onBeforeInput","beforeinput",null,o,J),ne.push({event:Ee,listeners:$e}),Ee.data=Fe)),cN(ne,i,H,o,J)}Gw(ne,s)})}function Uu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function jf(i,s){for(var o=s+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Br(i,o),f!=null&&u.unshift(Uu(i,f,p)),f=Br(i,s),f!=null&&u.push(Uu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function fN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function $w(i,s,o,u,f){for(var p=s._reactName,b=[];o!==null&&o!==u;){var A=o,P=A.alternate,H=A.stateNode;if(A=A.tag,P!==null&&P===u)break;A!==5&&A!==26&&A!==27||H===null||(P=H,f?(H=Br(o,p),H!=null&&b.unshift(Uu(o,H,P))):f||(H=Br(o,p),H!=null&&b.push(Uu(o,H,P)))),o=o.return}b.length!==0&&i.push({event:s,listeners:b})}var mN=/\r\n?/g,pN=/\u0000|\uFFFD/g;function Qw(i){return(typeof i=="string"?i:""+i).replace(mN,`
`).replace(pN,"")}function Ww(i,s){return s=Qw(s),Qw(i)===s}function pt(i,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Gn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Gn(i,""+u);break;case"className":sr(i,"class",u);break;case"tabIndex":sr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(i,o,u);break;case"style":iu(i,u,p);break;case"data":if(s!=="object"){sr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=al(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&pt(i,s,"name",f.name,f,null),pt(i,s,"formEncType",f.formEncType,f,null),pt(i,s,"formMethod",f.formMethod,f,null),pt(i,s,"formTarget",f.formTarget,f,null)):(pt(i,s,"encType",f.encType,f,null),pt(i,s,"method",f.method,f,null),pt(i,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=al(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=zr);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=al(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Be("beforetoggle",i),Be("toggle",i),rl(i,"popover",u);break;case"xlinkActuate":Xt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":rl(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ld.get(o)||o,rl(i,o,u))}}function Iy(i,s,o,u,f,p){switch(o){case"style":iu(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Gn(i,u):(typeof u=="number"||typeof u=="bigint")&&Gn(i,""+u);break;case"onScroll":u!=null&&Be("scroll",i);break;case"onScrollEnd":u!=null&&Be("scrollend",i);break;case"onClick":u!=null&&(i.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xc.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=i[dn]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):rl(i,o,u)}}}function An(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",i),Be("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var b=o[p];if(b!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:pt(i,s,p,b,o,null)}}f&&pt(i,s,"srcSet",o.srcSet,o,null),u&&pt(i,s,"src",o.src,o,null);return;case"input":Be("invalid",i);var A=p=b=f=null,P=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":f=J;break;case"type":b=J;break;case"checked":P=J;break;case"defaultChecked":H=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:pt(i,s,u,J,o,null)}}Od(i,p,A,P,H,b,f,!1);return;case"select":Be("invalid",i),u=b=p=null;for(f in o)if(o.hasOwnProperty(f)&&(A=o[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":b=A;break;case"multiple":u=A;default:pt(i,s,f,A,o,null)}s=p,o=b,i.multiple=!!u,s!=null?Rs(i,!!u,s,!1):o!=null&&Rs(i,!!u,o,!0);return;case"textarea":Be("invalid",i),p=f=u=null;for(b in o)if(o.hasOwnProperty(b)&&(A=o[b],A!=null))switch(b){case"value":u=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:pt(i,s,b,A,o,null)}Cs(i,u,f,p);return;case"option":for(P in o)o.hasOwnProperty(P)&&(u=o[P],u!=null)&&(P==="selected"?i.selected=u&&typeof u!="function"&&typeof u!="symbol":pt(i,s,P,u,o,null));return;case"dialog":Be("beforetoggle",i),Be("toggle",i),Be("cancel",i),Be("close",i);break;case"iframe":case"object":Be("load",i);break;case"video":case"audio":for(u=0;u<ju.length;u++)Be(ju[u],i);break;case"image":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"embed":case"source":case"link":Be("error",i),Be("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:pt(i,s,H,u,o,null)}return;default:if(sl(s)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Iy(i,s,J,u,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(u=o[A],u!=null&&pt(i,s,A,u,o,null))}function gN(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,A=null,P=null,H=null,J=null;for(Y in o){var ne=o[Y];if(o.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=ne;default:u.hasOwnProperty(Y)||pt(i,s,Y,null,u,ne)}}for(var G in u){var Y=u[G];if(ne=o[G],u.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":p=Y;break;case"name":f=Y;break;case"checked":H=Y;break;case"defaultChecked":J=Y;break;case"value":b=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Y!==ne&&pt(i,s,G,Y,u,ne)}}il(i,b,A,P,H,J,p,f);return;case"select":Y=b=A=G=null;for(p in o)if(P=o[p],o.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Y=P;default:u.hasOwnProperty(p)||pt(i,s,p,null,u,P)}for(f in u)if(p=u[f],P=o[f],u.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":G=p;break;case"defaultValue":A=p;break;case"multiple":b=p;default:p!==P&&pt(i,s,f,p,u,P)}s=A,o=b,u=Y,G!=null?Rs(i,!!o,G,!1):!!u!=!!o&&(s!=null?Rs(i,!!o,s,!0):Rs(i,!!o,o?[]:"",!1));return;case"textarea":Y=G=null;for(A in o)if(f=o[A],o.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:pt(i,s,A,null,u,f)}for(b in u)if(f=u[b],p=o[b],u.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&pt(i,s,b,f,u,p)}Vd(i,G,Y);return;case"option":for(var ve in o)G=o[ve],o.hasOwnProperty(ve)&&G!=null&&!u.hasOwnProperty(ve)&&(ve==="selected"?i.selected=!1:pt(i,s,ve,null,u,G));for(P in u)G=u[P],Y=o[P],u.hasOwnProperty(P)&&G!==Y&&(G!=null||Y!=null)&&(P==="selected"?i.selected=G&&typeof G!="function"&&typeof G!="symbol":pt(i,s,P,G,u,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)G=o[Ce],o.hasOwnProperty(Ce)&&G!=null&&!u.hasOwnProperty(Ce)&&pt(i,s,Ce,null,u,G);for(H in u)if(G=u[H],Y=o[H],u.hasOwnProperty(H)&&G!==Y&&(G!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:pt(i,s,H,G,u,Y)}return;default:if(sl(s)){for(var gt in o)G=o[gt],o.hasOwnProperty(gt)&&G!==void 0&&!u.hasOwnProperty(gt)&&Iy(i,s,gt,void 0,u,G);for(J in u)G=u[J],Y=o[J],!u.hasOwnProperty(J)||G===Y||G===void 0&&Y===void 0||Iy(i,s,J,G,u,Y);return}}for(var F in o)G=o[F],o.hasOwnProperty(F)&&G!=null&&!u.hasOwnProperty(F)&&pt(i,s,F,null,u,G);for(ne in u)G=u[ne],Y=o[ne],!u.hasOwnProperty(ne)||G===Y||G==null&&Y==null||pt(i,s,ne,G,u,Y)}function Yw(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,b=f.initiatorType,A=f.duration;if(p&&A&&Yw(b)){for(b=0,A=f.responseEnd,u+=1;u<o.length;u++){var P=o[u],H=P.startTime;if(H>A)break;var J=P.transferSize,ne=P.initiatorType;J&&Yw(ne)&&(P=P.responseEnd,b+=J*(P<A?1:(A-H)/(P-H)))}if(--u,s+=8*(p+b)/(f.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sy=null,xy=null;function Uf(i){return i.nodeType===9?i:i.ownerDocument}function Xw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jw(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Ry(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cy=null;function _N(){var i=window.event;return i&&i.type==="popstate"?i===Cy?!1:(Cy=i,!0):(Cy=null,!1)}var Zw=typeof setTimeout=="function"?setTimeout:void 0,vN=typeof clearTimeout=="function"?clearTimeout:void 0,eT=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof eT<"u"?function(i){return eT.resolve(null).then(i).catch(EN)}:Zw;function EN(i){setTimeout(function(){throw i})}function Js(i){return i==="head"}function tT(i,s){var o=s,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),Fl(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Fu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Fu(o);for(var p=o.firstChild;p;){var b=p.nextSibling,A=p.nodeName;p[ci]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=b}}else o==="body"&&Fu(i.ownerDocument.body);o=f}while(o);Fl(s)}function nT(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Ny(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ny(o),nl(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function wN(i,s,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ci])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=Nr(i.nextSibling),i===null)break}return null}function TN(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Nr(i.nextSibling),i===null))return null;return i}function rT(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Nr(i.nextSibling),i===null))return null;return i}function Dy(i){return i.data==="$?"||i.data==="$~"}function ky(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function AN(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Nr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var Py=null;function iT(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return Nr(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function sT(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function aT(i,s,o){switch(s=Uf(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Fu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);nl(i)}var Dr=new Map,oT=new Set;function Ff(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var cs=X.d;X.d={f:IN,r:SN,D:xN,C:RN,L:CN,m:NN,X:kN,S:DN,M:PN};function IN(){var i=cs.f(),s=Df();return i||s}function SN(i){var s=br(i);s!==null&&s.tag===5&&s.type==="form"?A0(s):cs.r(i)}var Ll=typeof document>"u"?null:document;function lT(i,s,o){var u=Ll;if(u&&typeof s=="string"&&s){var f=Hn(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),oT.has(f)||(oT.add(f),i={rel:i,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),An(s,"link",i),Yt(s),u.head.appendChild(s)))}}function xN(i){cs.D(i),lT("dns-prefetch",i,null)}function RN(i,s){cs.C(i,s),lT("preconnect",i,s)}function CN(i,s,o){cs.L(i,s,o);var u=Ll;if(u&&i&&s){var f='link[rel="preload"][as="'+Hn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Hn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Hn(o.imageSizes)+'"]')):f+='[href="'+Hn(i)+'"]';var p=f;switch(s){case"style":p=jl(i);break;case"script":p=Ul(i)}Dr.has(p)||(i=E({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),Dr.set(p,i),u.querySelector(f)!==null||s==="style"&&u.querySelector(zu(p))||s==="script"&&u.querySelector(Bu(p))||(s=u.createElement("link"),An(s,"link",i),Yt(s),u.head.appendChild(s)))}}function NN(i,s){cs.m(i,s);var o=Ll;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Hn(u)+'"][href="'+Hn(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ul(i)}if(!Dr.has(p)&&(i=E({rel:"modulepreload",href:i},s),Dr.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Bu(p)))return}u=o.createElement("link"),An(u,"link",i),Yt(u),o.head.appendChild(u)}}}function DN(i,s,o){cs.S(i,s,o);var u=Ll;if(u&&i){var f=hi(u).hoistableStyles,p=jl(i);s=s||"default";var b=f.get(p);if(!b){var A={loading:0,preload:null};if(b=u.querySelector(zu(p)))A.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},o),(o=Dr.get(p))&&Oy(i,o);var P=b=u.createElement("link");Yt(P),An(P,"link",i),P._p=new Promise(function(H,J){P.onload=H,P.onerror=J}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,zf(b,s,u)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(p,b)}}}function kN(i,s){cs.X(i,s);var o=Ll;if(o&&i){var u=hi(o).hoistableScripts,f=Ul(i),p=u.get(f);p||(p=o.querySelector(Bu(f)),p||(i=E({src:i,async:!0},s),(s=Dr.get(f))&&Vy(i,s),p=o.createElement("script"),Yt(p),An(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function PN(i,s){cs.M(i,s);var o=Ll;if(o&&i){var u=hi(o).hoistableScripts,f=Ul(i),p=u.get(f);p||(p=o.querySelector(Bu(f)),p||(i=E({src:i,async:!0,type:"module"},s),(s=Dr.get(f))&&Vy(i,s),p=o.createElement("script"),Yt(p),An(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function cT(i,s,o,u){var f=(f=Oe.current)?Ff(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=jl(o.href),o=hi(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=jl(o.href);var p=hi(f).hoistableStyles,b=p.get(i);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,b),(p=f.querySelector(zu(i)))&&!p._p&&(b.instance=p,b.state.loading=5),Dr.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Dr.set(i,o),p||ON(f,i,o,b.state))),s&&u===null)throw Error(r(528,""));return b}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ul(o),o=hi(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function jl(i){return'href="'+Hn(i)+'"'}function zu(i){return'link[rel="stylesheet"]['+i+"]"}function uT(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function ON(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),An(s,"link",o),Yt(s),i.head.appendChild(s))}function Ul(i){return'[src="'+Hn(i)+'"]'}function Bu(i){return"script[async]"+i}function hT(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Hn(o.href)+'"]');if(u)return s.instance=u,Yt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Yt(u),An(u,"style",f),zf(u,o.precedence,i),s.instance=u;case"stylesheet":f=jl(o.href);var p=i.querySelector(zu(f));if(p)return s.state.loading|=4,s.instance=p,Yt(p),p;u=uT(o),(f=Dr.get(f))&&Oy(u,f),p=(i.ownerDocument||i).createElement("link"),Yt(p);var b=p;return b._p=new Promise(function(A,P){b.onload=A,b.onerror=P}),An(p,"link",u),s.state.loading|=4,zf(p,o.precedence,i),s.instance=p;case"script":return p=Ul(o.src),(f=i.querySelector(Bu(p)))?(s.instance=f,Yt(f),f):(u=o,(f=Dr.get(p))&&(u=E({},o),Vy(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Yt(f),An(f,"link",u),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,zf(u,o.precedence,i));return s.instance}function zf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,b=0;b<u.length;b++){var A=u[b];if(A.dataset.precedence===s)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function Oy(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Vy(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Bf=null;function dT(i,s,o){if(Bf===null){var u=new Map,f=Bf=new Map;f.set(o,u)}else f=Bf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[ci]||p[Wt]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(s)||"";b=i+b;var A=u.get(b);A?A.push(p):u.set(b,[p])}}return u}function fT(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function VN(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(i=s.disabled,typeof s.precedence=="string"&&i==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function mT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function MN(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=jl(u.href),p=s.querySelector(zu(f));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=qf.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=p,Yt(p);return}p=s.ownerDocument||s,u=uT(u),(f=Dr.get(f))&&Oy(u,f),p=p.createElement("link"),Yt(p);var b=p;b._p=new Promise(function(A,P){b.onload=A,b.onerror=P}),An(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=qf.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var My=0;function LN(i,s){return i.stylesheets&&i.count===0&&Gf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&Gf(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+s);0<i.imgBytes&&My===0&&(My=62500*yN());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Gf(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>My?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function qf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Hf=null;function Gf(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Hf=new Map,s.forEach(jN,i),Hf=null,qf.call(i))}function jN(i,s){if(!(s.state.loading&4)){var o=Hf.get(i);if(o)var u=o.get(null);else{o=new Map,Hf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),u=b)}u&&o.set(null,u)}f=s.instance,b=f.getAttribute("data-precedence"),p=o.get(b)||u,p===u&&o.set(null,f),o.set(b,f),this.count++,u=qf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var qu={$$typeof:te,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function UN(i,s,o,u,f,p,b,A,P){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oi(0),this.hiddenUpdates=oi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function pT(i,s,o,u,f,p,b,A,P,H,J,ne){return i=new UN(i,s,o,b,P,H,J,ne,A),s=1,p===!0&&(s|=24),p=or(3,null,null,s),i.current=p,p.stateNode=i,s=pg(),s.refCount++,i.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},vg(p),i}function gT(i){return i?(i=gl,i):gl}function yT(i,s,o,u,f,p){f=gT(f),u.context===null?u.context=f:u.pendingContext=f,u=zs(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Bs(i,u,s),o!==null&&(Yn(o,i,s),Eu(o,i,s))}function _T(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function Ly(i,s){_T(i,s),(i=i.alternate)&&_T(i,s)}function vT(i){if(i.tag===13||i.tag===31){var s=Za(i,67108864);s!==null&&Yn(s,i,67108864),Ly(i,67108864)}}function bT(i){if(i.tag===13||i.tag===31){var s=dr();s=za(s);var o=Za(i,s);o!==null&&Yn(o,i,s),Ly(i,s)}}var Kf=!0;function FN(i,s,o,u){var f=$.T;$.T=null;var p=X.p;try{X.p=2,jy(i,s,o,u)}finally{X.p=p,$.T=f}}function zN(i,s,o,u){var f=$.T;$.T=null;var p=X.p;try{X.p=8,jy(i,s,o,u)}finally{X.p=p,$.T=f}}function jy(i,s,o,u){if(Kf){var f=Uy(u);if(f===null)Ay(i,s,u,$f,o),wT(i,u);else if(qN(f,i,s,o,u))u.stopPropagation();else if(wT(i,u),s&4&&-1<BN.indexOf(i)){for(;f!==null;){var p=br(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=si(p.pendingLanes);if(b!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var P=1<<31-Ft(b);A.entanglements[1]|=P,b&=~P}Ai(p),(at&6)===0&&(Cf=Ln()+500,Lu(0))}}break;case 31:case 13:A=Za(p,2),A!==null&&Yn(A,p,2),Df(),Ly(p,2)}if(p=Uy(u),p===null&&Ay(i,s,u,$f,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Ay(i,s,u,null,o)}}function Uy(i){return i=Er(i),Fy(i)}var $f=null;function Fy(i){if($f=null,i=ui(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=d(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return $f=i,null}function ET(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(La()){case Kc:return 2;case $c:return 8;case Ss:case Kp:return 32;case Ad:return 268435456;default:return 32}default:return 32}}var zy=!1,Zs=null,ea=null,ta=null,Hu=new Map,Gu=new Map,na=[],BN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wT(i,s){switch(i){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":ea=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":Hu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(s.pointerId)}}function Ku(i,s,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=br(s),s!==null&&vT(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function qN(i,s,o,u,f){switch(s){case"focusin":return Zs=Ku(Zs,i,s,o,u,f),!0;case"dragenter":return ea=Ku(ea,i,s,o,u,f),!0;case"mouseover":return ta=Ku(ta,i,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Hu.set(p,Ku(Hu.get(p)||null,i,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Gu.set(p,Ku(Gu.get(p)||null,i,s,o,u,f)),!0}return!1}function TT(i){var s=ui(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Ur(i.priority,function(){bT(o)});return}}else if(s===31){if(s=d(o),s!==null){i.blockedOn=s,Ur(i.priority,function(){bT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Qf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=Uy(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);su=u,o.target.dispatchEvent(u),su=null}else return s=br(o),s!==null&&vT(s),i.blockedOn=o,!1;s.shift()}return!0}function AT(i,s,o){Qf(i)&&o.delete(s)}function HN(){zy=!1,Zs!==null&&Qf(Zs)&&(Zs=null),ea!==null&&Qf(ea)&&(ea=null),ta!==null&&Qf(ta)&&(ta=null),Hu.forEach(AT),Gu.forEach(AT)}function Wf(i,s){i.blockedOn===s&&(i.blockedOn=null,zy||(zy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HN)))}var Yf=null;function IT(i){Yf!==i&&(Yf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yf===i&&(Yf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],f=i[s+2];if(typeof u!="function"){if(Fy(u||o)===null)continue;break}var p=br(o);p!==null&&(i.splice(s,3),s-=3,Ug(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Fl(i){function s(P){return Wf(P,i)}Zs!==null&&Wf(Zs,i),ea!==null&&Wf(ea,i),ta!==null&&Wf(ta,i),Hu.forEach(s),Gu.forEach(s);for(var o=0;o<na.length;o++){var u=na[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<na.length&&(o=na[0],o.blockedOn===null);)TT(o),o.blockedOn===null&&na.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],b=f[dn]||null;if(typeof p=="function")b||IT(o);else if(b){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[dn]||null)A=b.formAction;else if(Fy(f)!==null)continue}else A=b.action;typeof A=="function"?o[u+1]=A:(o.splice(u,3),u-=3),IT(o)}}}function ST(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function By(i){this._internalRoot=i}Xf.prototype.render=By.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=dr();yT(o,u,i,s,null,null)},Xf.prototype.unmount=By.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;yT(i.current,2,null,i,null,null),Df(),s[li]=null}};function Xf(i){this._internalRoot=i}Xf.prototype.unstable_scheduleHydration=function(i){if(i){var s=Nd();i={blockedOn:null,target:i,priority:s};for(var o=0;o<na.length&&s!==0&&s<na[o].priority;o++);na.splice(o,0,i),o===0&&TT(i)}};var xT=e.version;if(xT!=="19.2.3")throw Error(r(527,xT,"19.2.3"));X.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=g(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var GN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jf.isDisabled&&Jf.supportsFiber)try{Lr=Jf.inject(GN),vn=Jf}catch{}}return Qu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",f=O0,p=V0,b=M0;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError)),s=pT(i,1,!1,null,null,o,u,null,f,p,b,ST),i[li]=s.current,Ty(i),new By(s)},Qu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,f="",p=O0,b=V0,A=M0,P=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.formState!==void 0&&(P=o.formState)),s=pT(i,1,!0,s,o??null,u,f,P,p,b,A,ST),s.context=gT(null),o=s.current,u=dr(),u=za(u),f=zs(u),f.callback=null,Bs(o,f,u),o=u,s.current.lanes=o,Ua(s,o),Ai(s),i[li]=s.current,Ty(i),new Xf(s)},Qu.version="19.2.3",Qu}var LT;function rD(){if(LT)return Gy.exports;LT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gy.exports=nD(),Gy.exports}var iD=rD();const sD="modulepreload",aD=function(n){return"/"+n},jT={},Xr=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var c=g;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");a=g(t.map(y=>{if(y=aD(y),y in jT)return;jT[y]=!0;const E=y.endsWith(".css"),T=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const k=document.createElement("link");if(k.rel=E?"stylesheet":sD,E||(k.as="script"),k.crossOrigin="",k.href=y,m&&k.setAttribute("nonce",m),document.head.appendChild(k),E)return new Promise((R,j)=>{k.addEventListener("load",R),k.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return a.then(d=>{for(const m of d||[])m.status==="rejected"&&l(m.reason);return e().catch(l)})};const oD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();var lD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cD=pe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...d},m)=>pe.createElement("svg",{ref:m,...lD,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:EI("lucide",a),...d},[...c.map(([g,y])=>pe.createElement(g,y)),...Array.isArray(l)?l:[l]]));const Je=(n,e)=>{const t=pe.forwardRef(({className:r,...a},l)=>pe.createElement(cD,{ref:l,iconNode:e,className:EI(`lucide-${oD(n)}`,r),...a}));return t.displayName=`${n}`,t};const tp=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const __=Je("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const uD=Je("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const hD=Je("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);const dD=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const wI=Je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const fD=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const dv=Je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const TI=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const AI=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const mD=Je("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const fv=Je("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);const pD=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const gD=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const yD=Je("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const II=Je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const UT=Je("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const _D=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const vD=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const ko=Je("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const bD=Je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const ED=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const SI=Je("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);const wD=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const TD=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const AD=Je("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ID=Je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const xI=Je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const SD=Je("StarHalf",[["path",{d:"M12 18.338a2.1 2.1 0 0 0-.987.244L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.12 2.12 0 0 0 1.597-1.16l2.309-4.679A.53.53 0 0 1 12 2",key:"2ksp49"}]]);const FT=Je("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const RI=Je("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);const xD=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const ki=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const CI=Je("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),RD=()=>{};var zT={};const NI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},CD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},DI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let T=(d&15)<<2|g>>6,k=g&63;m||(k=64,c||(T=64)),r.push(t[y],t[E],t[T],t[k])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new ND;const T=l<<2|d>>4;if(r.push(T),g!==64){const k=d<<4&240|g>>2;if(r.push(k),E!==64){const R=g<<6&192|E;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ND extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DD=function(n){const e=NI(n);return DI.encodeByteArray(e,!0)},Sm=function(n){return DD(n).replace(/\./g,"")},mv=function(n){try{return DI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!kD(t)||(n[t]=xm(n[t],e[t]));return n}function kD(n){return n!=="__proto__"}function pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const PD=()=>pv().__FIREBASE_DEFAULTS__,OD=()=>{if(typeof process>"u"||typeof zT>"u")return;const n=zT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mv(n[1]);return e&&JSON.parse(e)},gv=()=>{try{return RD()||PD()||OD()||VD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yv=()=>gv()?.config,MD=n=>gv()?.[`_${n}`];class LD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ca(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _v(n){return(await fetch(n,{credentials:"include"})).ok}function jD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Sm(JSON.stringify(t)),Sm(JSON.stringify(c)),""].join(".")}const fh={};function UD(){const n={prod:[],emulator:[]};for(const e of Object.keys(fh))fh[e]?n.emulator.push(e):n.prod.push(e);return n}function FD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let BT=!1;function vv(n,e){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||fh[n]===e||fh[n]||BT)return;fh[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=UD().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{BT=!0,c()},T}function y(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=FD(r),k=t("text"),R=document.getElementById(k)||document.createElement("span"),j=t("learnmore"),U=document.getElementById(j)||document.createElement("a"),se=t("preprendIcon"),le=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;d(te),y(U,j);const _e=g();m(le,se),te.append(le,R,U,_e),document.body.appendChild(te)}l?(R.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function np(){const n=gv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BD(){return typeof window<"u"||kI()}function kI(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function bv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OI(){const n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VI(){return!np()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MI(){return!np()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Ch(){try{return typeof indexedDB=="object"}catch{return!1}}function HD(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const GD="FirebaseError";class yn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GD,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?KD(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new yn(a,d,r)}}function KD(n,e){return n.replace($D,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const $D=/\{\$([^}]+)}/g;function qT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function QD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _a(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(HT(l)&&HT(c)){if(!_a(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function HT(n){return n!==null&&typeof n=="object"}function Dc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function sh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function LI(n,e){const t=new WD(n,e);return t.subscribe.bind(t)}class WD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Wy),a.error===void 0&&(a.error=Wy),a.complete===void 0&&(a.complete=Wy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wy(){}function Ie(n){return n&&n._delegate?n._delegate:n}class Vr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class XD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new LD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZD(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JD(n){return n===mo?void 0:n}function ZD(n){return n.instantiationMode==="EAGER"}class jI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new XD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ev=[];var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const UI={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},ek=qe.INFO,tk={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},nk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=tk[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=ek,this._logHandler=nk,this._userLogHandler=null,Ev.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}function rk(n){Ev.forEach(e=>{e.setLogLevel(n)})}function ik(n,e){for(const t of Ev){let r=null;e&&e.level&&(r=UI[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const d=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(r??a.logLevel)&&n({level:qe[l].toLowerCase(),message:d,args:c,type:a.name})}}}const sk=(n,e)=>e.some(t=>n instanceof t);let GT,KT;function ak(){return GT||(GT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ok(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FI=new WeakMap,v_=new WeakMap,zI=new WeakMap,Yy=new WeakMap,wv=new WeakMap;function lk(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(fa(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&FI.set(t,n)}).catch(()=>{}),wv.set(e,n),e}function ck(n){if(v_.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});v_.set(n,e)}let b_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return v_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uk(n){b_=n(b_)}function hk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Xy(this),e,...t);return zI.set(r,e.sort?e.sort():[e]),fa(r)}:ok().includes(n)?function(...e){return n.apply(Xy(this),e),fa(FI.get(this))}:function(...e){return fa(n.apply(Xy(this),e))}}function dk(n){return typeof n=="function"?hk(n):(n instanceof IDBTransaction&&ck(n),sk(n,ak())?new Proxy(n,b_):n)}function fa(n){if(n instanceof IDBRequest)return lk(n);if(Yy.has(n))return Yy.get(n);const e=dk(n);return e!==n&&(Yy.set(n,e),wv.set(e,n)),e}const Xy=n=>wv.get(n);function fk(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=fa(c);return r&&c.addEventListener("upgradeneeded",m=>{r(fa(c.result),m.oldVersion,m.newVersion,fa(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const mk=["get","getKey","getAll","getAllKeys","count"],pk=["put","add","delete","clear"],Jy=new Map;function $T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jy.get(e))return Jy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=pk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||mk.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Jy.set(e,l),l}uk(n=>({...n,get:(e,t,r)=>$T(e,t)||n.get(e,t,r),has:(e,t)=>!!$T(e,t)||n.has(e,t)}));class gk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function yk(n){return n.getComponent()?.type==="VERSION"}const Rm="@firebase/app",E_="0.14.6";const fs=new rp("@firebase/app"),_k="@firebase/app-compat",vk="@firebase/analytics-compat",bk="@firebase/analytics",Ek="@firebase/app-check-compat",wk="@firebase/app-check",Tk="@firebase/auth",Ak="@firebase/auth-compat",Ik="@firebase/database",Sk="@firebase/data-connect",xk="@firebase/database-compat",Rk="@firebase/functions",Ck="@firebase/functions-compat",Nk="@firebase/installations",Dk="@firebase/installations-compat",kk="@firebase/messaging",Pk="@firebase/messaging-compat",Ok="@firebase/performance",Vk="@firebase/performance-compat",Mk="@firebase/remote-config",Lk="@firebase/remote-config-compat",jk="@firebase/storage",Uk="@firebase/storage-compat",Fk="@firebase/firestore",zk="@firebase/ai",Bk="@firebase/firestore-compat",qk="firebase",Hk="12.6.0";const va="[DEFAULT]",Gk={[Rm]:"fire-core",[_k]:"fire-core-compat",[bk]:"fire-analytics",[vk]:"fire-analytics-compat",[wk]:"fire-app-check",[Ek]:"fire-app-check-compat",[Tk]:"fire-auth",[Ak]:"fire-auth-compat",[Ik]:"fire-rtdb",[Sk]:"fire-data-connect",[xk]:"fire-rtdb-compat",[Rk]:"fire-fn",[Ck]:"fire-fn-compat",[Nk]:"fire-iid",[Dk]:"fire-iid-compat",[kk]:"fire-fcm",[Pk]:"fire-fcm-compat",[Ok]:"fire-perf",[Vk]:"fire-perf-compat",[Mk]:"fire-rc",[Lk]:"fire-rc-compat",[jk]:"fire-gcs",[Uk]:"fire-gcs-compat",[Fk]:"fire-fst",[Bk]:"fire-fst-compat",[zk]:"fire-vertex","fire-js":"fire-js",[qk]:"fire-js-all"};const ba=new Map,ac=new Map,oc=new Map;function Nh(n,e){try{n.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function BI(n,e){n.container.addOrOverwriteComponent(e)}function ms(n){const e=n.name;if(oc.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;oc.set(e,n);for(const t of ba.values())Nh(t,n);for(const t of ac.values())Nh(t,n);return!0}function qI(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kk(n,e,t=va){qI(n,e).clearInstance(t)}function Tv(n){return n.options!==void 0}function HI(n){return Tv(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function It(n){return n==null?!1:n.settings!==void 0}function $k(){oc.clear()}const Qk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Ko("app","Firebase",Qk);let GI=class{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}};function QT(n,e){const t=mv(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Wk extends GI{constructor(e,t,r,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:r,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const d=e;super(d.options,c,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&QT(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&QT(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,yr(Rm,E_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Iv(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw gr.create("server-app-deleted")}}const Na=Hk;function Av(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:va,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw gr.create("bad-app-name",{appName:String(a)});if(t||(t=yv()),!t)throw gr.create("no-options");const l=ba.get(a);if(l){if(_a(t,l.options)&&_a(r,l.config))return l;throw gr.create("duplicate-app",{appName:a})}const c=new jI(a);for(const m of oc.values())c.addComponent(m);const d=new GI(t,r,c);return ba.set(a,d),d}function Yk(n,e={}){if(BD()&&!kI())throw gr.create("invalid-server-app-environment");let t,r=e||{};if(n&&(Tv(n)?t=n.options:HI(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=yv()),!t)throw gr.create("no-options");const a={...r,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=y=>[...y].reduce((E,T)=>Math.imul(31,E)+T.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw gr.create("finalization-registry-not-supported",{});const c=""+l(JSON.stringify(a)),d=ac.get(c);if(d)return d.incRefCount(r.releaseOnDeref),d;const m=new jI(c);for(const y of oc.values())m.addComponent(y);const g=new Wk(t,r,c,m);return ac.set(c,g),g}function Xk(n=va){const e=ba.get(n);if(!e&&n===va&&yv())return Av();if(!e)throw gr.create("no-app",{appName:n});return e}function Jk(){return Array.from(ba.values())}async function Iv(n){let e=!1;const t=n.name;ba.has(t)?(e=!0,ba.delete(t)):ac.has(t)&&n.decRefCount()<=0&&(ac.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function yr(n,e,t){let r=Gk[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(c.join(" "));return}ms(new Vr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function KI(n,e){if(n!==null&&typeof n!="function")throw gr.create("invalid-log-argument");ik(n,e)}function $I(n){rk(n)}const Zk="firebase-heartbeat-database",eP=1,Dh="firebase-heartbeat-store";let Zy=null;function QI(){return Zy||(Zy=fk(Zk,eP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dh)}catch(t){console.warn(t)}}}}).catch(n=>{throw gr.create("idb-open",{originalErrorMessage:n.message})})),Zy}async function tP(n){try{const t=(await QI()).transaction(Dh),r=await t.objectStore(Dh).get(WI(n));return await t.done,r}catch(e){if(e instanceof yn)fs.warn(e.message);else{const t=gr.create("idb-get",{originalErrorMessage:e?.message});fs.warn(t.message)}}}async function WT(n,e){try{const r=(await QI()).transaction(Dh,"readwrite");await r.objectStore(Dh).put(e,WI(n)),await r.done}catch(t){if(t instanceof yn)fs.warn(t.message);else{const r=gr.create("idb-set",{originalErrorMessage:t?.message});fs.warn(r.message)}}}function WI(n){return`${n.name}!${n.options.appId}`}const nP=1024,rP=30;class iP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=YT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rP){const a=oP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=YT(),{heartbeatsToSend:t,unsentEntries:r}=sP(this._heartbeatsCache.heartbeats),a=Sm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return fs.warn(e),""}}}function YT(){return new Date().toISOString().substring(0,10)}function sP(n,e=nP){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),XT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),XT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class aP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ch()?HD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return WT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function XT(n){return Sm(JSON.stringify({version:2,heartbeats:n})).length}function oP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function lP(n){ms(new Vr("platform-logger",e=>new gk(e),"PRIVATE")),ms(new Vr("heartbeat",e=>new iP(e),"PRIVATE")),yr(Rm,E_,n),yr(Rm,E_,"esm2020"),yr("fire-js","")}lP("");const cP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:yn,SDK_VERSION:Na,_DEFAULT_ENTRY_NAME:va,_addComponent:Nh,_addOrOverwriteComponent:BI,_apps:ba,_clearComponents:$k,_components:oc,_getProvider:qI,_isFirebaseApp:Tv,_isFirebaseServerApp:It,_isFirebaseServerAppSettings:HI,_registerComponent:ms,_removeServiceInstance:Kk,_serverApps:ac,deleteApp:Iv,getApp:Xk,getApps:Jk,initializeApp:Av,initializeServerApp:Yk,onLog:KI,registerVersion:yr,setLogLevel:$I},Symbol.toStringTag,{value:"Module"}));class uP{constructor(e,t){this._delegate=e,this.firebase=t,Nh(e,new Vr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Iv(this._delegate)))}_getService(e,t=va){this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&r.getComponent()?.instantiationMode==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=va){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Nh(this._delegate,e)}_addOrOverwriteComponent(e){BI(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const hP={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},JT=new Ko("app-compat","Firebase",hP);function dP(n){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:yr,setLogLevel:$I,onLog:KI,apps:null,SDK_VERSION:Na,INTERNAL:{registerComponent:d,removeApp:r,useAsService:m,modularAPIs:cP}};t.default=t,Object.defineProperty(t,"apps",{get:c});function r(g){delete e[g]}function a(g){if(g=g||va,!qT(e,g))throw JT.create("no-app",{appName:g});return e[g]}a.App=n;function l(g,y={}){const E=Av(g,y);if(qT(e,E.name))return e[E.name];const T=new n(E,t);return e[E.name]=T,T}function c(){return Object.keys(e).map(g=>e[g])}function d(g){const y=g.name,E=y.replace("-compat","");if(ms(g)&&g.type==="PUBLIC"){const T=(k=a())=>{if(typeof k[E]!="function")throw JT.create("invalid-app-argument",{appName:y});return k[E]()};g.serviceProps!==void 0&&xm(T,g.serviceProps),t[E]=T,n.prototype[E]=function(...k){return this._getService.bind(this,y).apply(this,g.multipleInstances?k:[])}}return g.type==="PUBLIC"?t[E]:null}function m(g,y){return y==="serverAuth"?null:y}return t}function YI(){const n=dP(uP);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:YI,extendNamespace:e,createSubscribe:LI,ErrorFactory:Ko,deepExtend:xm};function e(t){xm(n,t)}return n}const fP=YI();const ZT=new rp("@firebase/app-compat"),mP="@firebase/app-compat",pP="0.5.6";function gP(n){yr(mP,pP,n)}try{const n=pv();if(n.firebase!==void 0){ZT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ZT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const xn=fP;gP();var yP="firebase",_P="12.7.0";xn.registerVersion(yP,_P,"app-compat");const Wu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},zl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function vP(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bP=vP,EP=XI,JI=new Ko("auth","Firebase",XI());const Cm=new rp("@firebase/auth");function wP(n,...e){Cm.logLevel<=qe.WARN&&Cm.warn(`Auth (${Na}): ${n}`,...e)}function lm(n,...e){Cm.logLevel<=qe.ERROR&&Cm.error(`Auth (${Na}): ${n}`,...e)}function Cn(n,...e){throw xv(n,...e)}function un(n,...e){return xv(n,...e)}function Sv(n,e,t){const r={...EP(),[e]:t};return new Ko("auth","Firebase",r).create(e,{appName:n.name})}function _n(n){return Sv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kc(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cn(n,"argument-error"),Sv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return JI.create(n,...e)}function oe(n,e,...t){if(!n)throw xv(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lm(e),new Error(e)}function ni(n,e){n||Pi(e)}function kh(){return typeof self<"u"&&self.location?.href||""}function Rv(){return eA()==="http:"||eA()==="https:"}function eA(){return typeof self<"u"&&self.location?.protocol||null}function TP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rv()||PI()||"connection"in navigator)?navigator.onLine:!0}function AP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Jh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ni(t>e,"Short delay should be less than long delay!"),this.isMobile=zD()||bv()}get(){return TP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cv(n,e){ni(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ZI{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const IP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const SP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xP=new Jh(3e4,6e4);function Lt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function jt(n,e,t,r,a={}){return eS(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Dc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return qD()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ca(n.emulatorConfig.host)&&(g.credentials="include"),ZI.fetch()(await tS(n,n.config.apiHost,t,d),g)})}async function eS(n,e,t){n._canInitEmulator=!1;const r={...IP,...e};try{const a=new CP(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ah(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ah(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw ah(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw ah(n,"user-disabled",c);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Sv(n,y,g);Cn(n,y)}}catch(a){if(a instanceof yn)throw a;Cn(n,"network-request-failed",{message:String(a)})}}async function _s(n,e,t,r,a={}){const l=await jt(n,e,t,r,a);return"mfaPendingCredential"in l&&Cn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function tS(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?Cv(n.config,a):`${n.config.apiScheme}://${a}`;return SP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function RP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),xP.get())})}}function ah(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=un(n,e,r);return a.customData._tokenResponse=t,a}function tA(n){return n!==void 0&&n.getResponse!==void 0}function nA(n){return n!==void 0&&n.enterprise!==void 0}class nS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return RP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function NP(n){return(await jt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function rS(n,e){return jt(n,"GET","/v2/recaptchaConfig",Lt(n,e))}async function DP(n,e){return jt(n,"POST","/v1/accounts:delete",e)}async function kP(n,e){return jt(n,"POST","/v1/accounts:update",e)}async function Nm(n,e){return jt(n,"POST","/v1/accounts:lookup",e)}function mh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PP(n,e=!1){const t=Ie(n),r=await t.getIdToken(e),a=ip(r);oe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:mh(e_(a.auth_time)),issuedAtTime:mh(e_(a.iat)),expirationTime:mh(e_(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function e_(n){return Number(n)*1e3}function ip(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return lm("JWT malformed, contained fewer than 3 sections"),null;try{const a=mv(t);return a?JSON.parse(a):(lm("Failed to decode base64 JWT payload"),null)}catch(a){return lm("Caught error parsing JWT payload as JSON",a?.toString()),null}}function rA(n){const e=ip(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ps(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yn&&OP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function OP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class VP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class w_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mh(this.lastLoginAt),this.creationTime=mh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ph(n){const e=n.auth,t=await n.getIdToken(),r=await ps(n,Nm(e,{idToken:t}));oe(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?iS(a.providerUserInfo):[],c=LP(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,g=d?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new w_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function MP(n){const e=Ie(n);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function LP(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function iS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function jP(n,e){const t=await eS(n,{},async()=>{const r=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await tS(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&Ca(n.emulatorConfig.host)&&(m.credentials="include"),ZI.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UP(n,e){return jt(n,"POST","/v2/accounts:revokeToken",Lt(n,e))}class ec{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const t=rA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await jP(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new ec;return r&&(oe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(oe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(oe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ec,this.toJSON())}_performRefresh(){return Pi("not implemented")}}function ia(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new VP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new w_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ps(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PP(this,e)}reload(){return MP(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(_n(this.auth));const e=await this.getIdToken();return await ps(this,DP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:k,providerData:R,stsTokenManager:j}=t;oe(E&&j,e,"internal-error");const U=ec.fromJSON(this.name,j);oe(typeof E=="string",e,"internal-error"),ia(r,e.name),ia(a,e.name),oe(typeof T=="boolean",e,"internal-error"),oe(typeof k=="boolean",e,"internal-error"),ia(l,e.name),ia(c,e.name),ia(d,e.name),ia(m,e.name),ia(g,e.name),ia(y,e.name);const se=new Zr({uid:E,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:k,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:y});return R&&Array.isArray(R)&&(se.providerData=R.map(le=>({...le}))),m&&(se._redirectEventId=m),se}static async _fromIdTokenResponse(e,t,r=!1){const a=new ec;a.updateFromServerResponse(t);const l=new Zr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Ph(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];oe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?iS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new ec;d.updateFromIdToken(r);const m=new Zr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new w_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const iA=new Map;function pr(n){ni(n instanceof Function,"Expected a class definition");let e=iA.get(n);return e?(ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iA.set(n,e),e)}class sS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sS.type="NONE";const lc=sS;function xo(n,e,t){return`firebase:${n}:${e}:${t}`}class tc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=xo(this.userKey,a.apiKey,l),this.fullPersistenceKey=xo("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nm(this.auth,{idToken:e}).catch(()=>{});return t?Zr._fromGetAccountInfoResponse(this.auth,t,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tc(pr(lc),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||pr(lc);const c=xo(r,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const T=await Nm(e,{idToken:y}).catch(()=>{});if(!T)break;E=await Zr._fromGetAccountInfoResponse(e,T,y)}else E=Zr._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new tc(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new tc(l,e,r))}}function sA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uS(e))return"Blackberry";if(hS(e))return"Webos";if(oS(e))return"Safari";if((e.includes("chrome/")||lS(e))&&!e.includes("edge/"))return"Chrome";if(Zh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function aS(n=kt()){return/firefox\//i.test(n)}function oS(n=kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lS(n=kt()){return/crios\//i.test(n)}function cS(n=kt()){return/iemobile/i.test(n)}function Zh(n=kt()){return/android/i.test(n)}function uS(n=kt()){return/blackberry/i.test(n)}function hS(n=kt()){return/webos/i.test(n)}function ed(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FP(n=kt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function zP(n=kt()){return ed(n)&&!!window.navigator?.standalone}function BP(){return OI()&&document.documentMode===10}function dS(n=kt()){return ed(n)||Zh(n)||hS(n)||uS(n)||/windows phone/i.test(n)||cS(n)}function fS(n,e=[]){let t;switch(n){case"Browser":t=sA(kt());break;case"Worker":t=`${sA(kt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${r}`}class qP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function HP(n,e={}){return jt(n,"GET","/v2/passwordPolicy",Lt(n,e))}const GP=6;class KP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class $P{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aA(this),this.idTokenSubscription=new aA(this),this.beforeStateQueue=new qP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nm(this,{idToken:e}),r=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(It(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(_n(this));const t=e?Ie(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(_n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(_n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HP(this),t=new KP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UP(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pr(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await tc.create(this,[pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pt(n){return Ie(n)}class aA{constructor(e){this.auth=e,this.observer=null,this.addObserver=LI(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let td={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QP(n){td=n}function Nv(n){return td.loadJS(n)}function WP(){return td.recaptchaV2Script}function YP(){return td.recaptchaEnterpriseScript}function XP(){return td.gapiScript}function mS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const JP=500,ZP=6e4,Zf=1e12;class eO{constructor(e){this.auth=e,this.counter=Zf,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new rO(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Zf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Zf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Zf;return this._widgets.get(t)?.execute(),""}}class tO{constructor(){this.enterprise=new nO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rO{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;oe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=iO(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},ZP)},JP))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function iO(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const sO="recaptcha-enterprise",ph="NO_RECAPTCHA";class pS{constructor(e){this.type=sO,this.auth=Pt(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{rS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new nS(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;nA(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(ph)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&nA(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=YP();m.length!==0&&(m+=d),Nv(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Yu(n,e,t,r=!1,a=!1){const l=new pS(n);let c;if(a)c=ph;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function ma(n,e,t,r,a){if(a==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Yu(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Yu(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)});else if(a==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Yu(n,e,t);return r(n,l).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await Yu(n,e,t,!1,!0);return r(n,d)}return Promise.reject(c)})}else{const l=await Yu(n,e,t,!1,!0);return r(n,l)}else return Promise.reject(a+" provider is not supported.")}async function aO(n){const e=Pt(n),t=await rS(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new nS(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new pS(e).verify()}function oO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function lO(n,e,t){const r=Pt(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!!t?.disableWarnings,l=gS(e),{host:c,port:d}=cO(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(_a(g,r.config.emulator)&&_a(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ca(c)?(_v(`${l}//${c}${m}`),vv("Auth",!0)):a||uO()}function gS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cO(n){const e=gS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:oA(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:oA(c)}}}function oA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Pc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function yS(n,e){return jt(n,"POST","/v1/accounts:resetPassword",Lt(n,e))}async function hO(n,e){return jt(n,"POST","/v1/accounts:update",e)}async function dO(n,e){return jt(n,"POST","/v1/accounts:signUp",e)}async function fO(n,e){return jt(n,"POST","/v1/accounts:update",Lt(n,e))}async function mO(n,e){return _s(n,"POST","/v1/accounts:signInWithPassword",Lt(n,e))}async function sp(n,e){return jt(n,"POST","/v1/accounts:sendOobCode",Lt(n,e))}async function pO(n,e){return sp(n,e)}async function gO(n,e){return sp(n,e)}async function yO(n,e){return sp(n,e)}async function _O(n,e){return sp(n,e)}async function vO(n,e){return _s(n,"POST","/v1/accounts:signInWithEmailLink",Lt(n,e))}async function bO(n,e){return _s(n,"POST","/v1/accounts:signInWithEmailLink",Lt(n,e))}class Oh extends Pc{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Oh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ma(e,t,"signInWithPassword",mO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vO(e,{email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ma(e,r,"signUpPassword",dO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bO(e,{idToken:t,email:this._email,oobCode:this._password});default:Cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ds(n,e){return _s(n,"POST","/v1/accounts:signInWithIdp",Lt(n,e))}const EO="http://localhost";class Fi extends Pc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Cn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new Fi(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ds(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ds(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ds(e,t)}buildRequest(){const e={requestUri:EO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Dc(t)}return e}}async function lA(n,e){return jt(n,"POST","/v1/accounts:sendVerificationCode",Lt(n,e))}async function wO(n,e){return _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Lt(n,e))}async function TO(n,e){const t=await _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Lt(n,e));if(t.temporaryProof)throw ah(n,"account-exists-with-different-credential",t);return t}const AO={USER_NOT_FOUND:"user-not-found"};async function IO(n,e){const t={...e,operation:"REAUTH"};return _s(n,"POST","/v1/accounts:signInWithPhoneNumber",Lt(n,t),AO)}class Ro extends Pc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ro({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ro({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return wO(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return TO(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return IO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l}=e;return!r&&!t&&!a&&!l?null:new Ro({verificationId:t,verificationCode:r,phoneNumber:a,temporaryProof:l})}}function SO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xO(n){const e=Zl(sh(n)).link,t=e?Zl(sh(e)).deep_link_id:null,r=Zl(sh(n)).deep_link_id;return(r?Zl(sh(r)).link:null)||r||t||e||n}class ap{constructor(e){const t=Zl(sh(e)),r=t.apiKey??null,a=t.oobCode??null,l=SO(t.mode??null);oe(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=xO(e);try{return new ap(t)}catch{return null}}}class Da{constructor(){this.providerId=Da.PROVIDER_ID}static credential(e,t){return Oh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ap.parseLink(t);return oe(r,"argument-error"),Oh._fromEmailAndCode(e,r.code,r.tenantId)}}Da.PROVIDER_ID="password";Da.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Da.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class vs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Oc extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class nc extends Oc{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return oe("providerId"in t&&"signInMethod"in t,"argument-error"),Fi._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return oe(e.idToken||e.accessToken,"argument-error"),Fi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return nc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return nc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:d}=e;if(!r&&!a&&!t&&!l||!d)return null;try{return new nc(d)._credential({idToken:t,accessToken:r,nonce:c,pendingToken:l})}catch{return null}}}class Ri extends Oc{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";class Ci extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ci.credential(t,r)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";class Ni extends Oc{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.GITHUB_SIGN_IN_METHOD="github.com";Ni.PROVIDER_ID="github.com";const RO="http://localhost";class cc extends Pc{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return ds(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ds(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ds(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,pendingToken:l}=t;return!r||!a||!l||r!==a?null:new cc(r,l)}static _create(e,t){return new cc(e,t)}buildRequest(){return{requestUri:RO,returnSecureToken:!0,pendingToken:this.pendingToken}}}const CO="saml.";class Dm extends vs{constructor(e){oe(e.startsWith(CO),"argument-error"),super(e)}static credentialFromResult(e){return Dm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Dm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=cc.fromJSON(e);return oe(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return cc._create(r,t)}catch{return null}}}class Di extends Oc{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Di.credential(t,r)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";async function _S(n,e){return _s(n,"POST","/v1/accounts:signUp",Lt(n,e))}class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Zr._fromIdTokenResponse(e,r,a),c=cA(r);return new Mr({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=cA(r);return new Mr({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function cA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function NO(n){if(It(n.app))return Promise.reject(_n(n));const e=Pt(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Mr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await _S(e,{returnSecureToken:!0}),r=await Mr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class km extends yn{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,km.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new km(e,t,r,a)}}function vS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?km._fromErrorAndOperation(n,l,e,r):l})}function bS(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}async function DO(n,e){const t=Ie(n);await op(!0,t,e);const{providerUserInfo:r}=await kP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=bS(r||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Dv(n,e,t=!1){const r=await ps(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mr._forOperation(n,"link",r)}async function op(n,e,t){await Ph(e);const r=bS(e.providerData),a=n===!1?"provider-already-linked":"no-such-provider";oe(r.has(t)===n,e.auth,a)}async function ES(n,e,t=!1){const{auth:r}=n;if(It(r.app))return Promise.reject(_n(r));const a="reauthenticate";try{const l=await ps(n,vS(r,a,e,n),t);oe(l.idToken,r,"internal-error");const c=ip(l.idToken);oe(c,r,"internal-error");const{sub:d}=c;return oe(n.uid===d,r,"user-mismatch"),Mr._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Cn(r,"user-mismatch"),l}}async function wS(n,e,t=!1){if(It(n.app))return Promise.reject(_n(n));const r="signIn",a=await vS(n,r,e),l=await Mr._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function lp(n,e){return wS(Pt(n),e)}async function TS(n,e){const t=Ie(n);return await op(!1,t,e.providerId),Dv(t,e)}async function AS(n,e){return ES(Ie(n),e)}async function kO(n,e){return _s(n,"POST","/v1/accounts:signInWithCustomToken",Lt(n,e))}async function PO(n,e){if(It(n.app))return Promise.reject(_n(n));const t=Pt(n),r=await kO(t,{token:e,returnSecureToken:!0}),a=await Mr._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(a.user),a}class nd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?kv._fromServerResponse(e,t):"totpInfo"in t?Pv._fromServerResponse(e,t):Cn(e,"internal-error")}}class kv extends nd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new kv(t)}}class Pv extends nd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Pv(t)}}function cp(n,e,t){oe(t.url?.length>0,n,"invalid-continue-uri"),oe(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),oe(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(oe(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(oe(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function Ov(n){const e=Pt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OO(n,e,t){const r=Pt(n),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&cp(r,a,t),await ma(r,a,"getOobCode",gO,"EMAIL_PASSWORD_PROVIDER")}async function VO(n,e,t){await yS(Ie(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ov(n),r})}async function MO(n,e){await fO(Ie(n),{oobCode:e})}async function IS(n,e){const t=Ie(n),r=await yS(t,{oobCode:e}),a=r.requestType;switch(oe(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(r.mfaInfo,t,"internal-error");default:oe(r.email,t,"internal-error")}let l=null;return r.mfaInfo&&(l=nd._fromServerResponse(Pt(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:l},operation:a}}async function LO(n,e){const{data:t}=await IS(Ie(n),e);return t.email}async function jO(n,e,t){if(It(n.app))return Promise.reject(_n(n));const r=Pt(n),c=await ma(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_S,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Ov(n),m}),d=await Mr._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function UO(n,e,t){return It(n.app)?Promise.reject(_n(n)):lp(Ie(n),Da.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ov(n),r})}async function FO(n,e,t){const r=Pt(n),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(c,d){oe(d.handleCodeInApp,r,"argument-error"),d&&cp(r,c,d)}l(a,t),await ma(r,a,"getOobCode",yO,"EMAIL_PASSWORD_PROVIDER")}function zO(n,e){return ap.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function BO(n,e,t){if(It(n.app))return Promise.reject(_n(n));const r=Ie(n),a=Da.credentialWithLink(e,t||kh());return oe(a._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),lp(r,a)}async function qO(n,e){return jt(n,"POST","/v1/accounts:createAuthUri",Lt(n,e))}async function HO(n,e){const t=Rv()?kh():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:a}=await qO(Ie(n),r);return a||[]}async function GO(n,e){const t=Ie(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&cp(t.auth,a,e);const{email:l}=await pO(t.auth,a);l!==n.email&&await n.reload()}async function KO(n,e,t){const r=Ie(n),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&cp(r.auth,l,t);const{email:c}=await _O(r.auth,l);c!==n.email&&await n.reload()}async function $O(n,e){return jt(n,"POST","/v1/accounts:update",e)}async function QO(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ie(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await ps(r,$O(r.auth,l));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const d=r.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function WO(n,e){const t=Ie(n);return It(t.auth.app)?Promise.reject(_n(t.auth)):SS(t,e,null)}function YO(n,e){return SS(Ie(n),null,e)}async function SS(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const c=await ps(n,hO(r,l));await n._updateTokensIfNecessary(c,!0)}function XO(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},r=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const a=ip(n.idToken)?.firebase?.sign_in_provider;if(a){const l=a!=="anonymous"&&a!=="custom"?a:null;return new rc(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new JO(r,t);case"github.com":return new ZO(r,t);case"google.com":return new eV(r,t);case"twitter.com":return new tV(r,t,n.screenName||null);case"custom":case"anonymous":return new rc(r,null);default:return new rc(r,e,t)}}class rc{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class xS extends rc{constructor(e,t,r,a){super(e,t,r),this.username=a}}class JO extends rc{constructor(e,t){super(e,"facebook.com",t)}}class ZO extends xS{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class eV extends rc{constructor(e,t){super(e,"google.com",t)}}class tV extends xS{constructor(e,t,r){super(e,"twitter.com",t,r)}}function nV(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:XO(t)}class wo{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new wo("enroll",e,t)}static _fromMfaPendingCredential(e){return new wo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return wo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return wo._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Vv{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=Pt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(d=>nd._fromServerResponse(r,d));oe(a.mfaPendingCredential,r,"internal-error");const c=wo._fromMfaPendingCredential(a.mfaPendingCredential);return new Vv(c,l,async d=>{const m=await d._process(r,c);delete a.mfaInfo,delete a.mfaPendingCredential;const g={...a,idToken:m.idToken,refreshToken:m.refreshToken};switch(t.operationType){case"signIn":const y=await Mr._fromIdTokenResponse(r,t.operationType,g);return await r._updateCurrentUser(y.user),y;case"reauthenticate":return oe(t.user,r,"internal-error"),Mr._forOperation(t.user,t.operationType,g);default:Cn(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function rV(n,e){const t=Ie(n),r=e;return oe(e.customData.operationType,t,"argument-error"),oe(r.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),Vv._fromError(t,r)}function uA(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:start",Lt(n,e))}function iV(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(n,e))}function sV(n,e){return jt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(n,e))}class Mv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>nd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Mv(e)}async getSession(){return wo._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,a=await this.getSession(),l=await ps(this.user,r._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const a=await ps(this.user,sV(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const t_=new WeakMap;function aV(n){const e=Ie(n);return t_.has(e)||t_.set(e,Mv._fromUser(e)),t_.get(e)}const Pm="__sak";class RS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pm,"1"),this.storage.removeItem(Pm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const oV=1e3,lV=10;class CS extends RS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);BP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,lV):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},oV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CS.type="LOCAL";const Lv=CS;class NS extends RS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NS.type="SESSION";const Po=NS;function cV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class up{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new up(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await cV(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}up.receivers=[];function rd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class uV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=rd("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function rn(){return window}function hV(n){rn().location.href=n}function jv(){return typeof rn().WorkerGlobalScope<"u"&&typeof rn().importScripts=="function"}async function dV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fV(){return navigator?.serviceWorker?.controller||null}function mV(){return jv()?self:null}const DS="firebaseLocalStorageDb",pV=1,Om="firebaseLocalStorage",kS="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hp(n,e){return n.transaction([Om],e?"readwrite":"readonly").objectStore(Om)}function gV(){const n=indexedDB.deleteDatabase(DS);return new id(n).toPromise()}function T_(){const n=indexedDB.open(DS,pV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Om,{keyPath:kS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Om)?e(r):(r.close(),await gV(),e(await T_()))})})}async function hA(n,e,t){const r=hp(n,!0).put({[kS]:e,value:t});return new id(r).toPromise()}async function yV(n,e){const t=hp(n,!1).get(e),r=await new id(t).toPromise();return r===void 0?null:r.value}function dA(n,e){const t=hp(n,!0).delete(e);return new id(t).toPromise()}const _V=800,vV=3;class PS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await T_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>vV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=up._getInstance(mV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dV(),!this.activeServiceWorker)return;this.sender=new uV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await T_();return await hA(e,Pm,"1"),await dA(e,Pm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>hA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=hp(a,!1).getAll();return new id(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PS.type="LOCAL";const Vh=PS;function fA(n,e){return jt(n,"POST","/v2/accounts/mfaSignIn:start",Lt(n,e))}function bV(n,e){return jt(n,"POST","/v2/accounts/mfaSignIn:finalize",Lt(n,e))}const n_=mS("rcb"),EV=new Jh(3e4,6e4);class wV{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rn().grecaptcha?.render}load(e,t=""){return oe(TV(t),e,"argument-error"),this.shouldResolveImmediately(t)&&tA(rn().grecaptcha)?Promise.resolve(rn().grecaptcha):new Promise((r,a)=>{const l=rn().setTimeout(()=>{a(un(e,"network-request-failed"))},EV.get());rn()[n_]=()=>{rn().clearTimeout(l),delete rn()[n_];const d=rn().grecaptcha;if(!d||!tA(d)){a(un(e,"internal-error"));return}const m=d.render;d.render=(g,y)=>{const E=m(g,y);return this.counter++,E},this.hostLanguage=t,r(d)};const c=`${WP()}?${Dc({onload:n_,render:"explicit",hl:t})}`;Nv(c).catch(()=>{clearTimeout(l),a(un(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!rn().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function TV(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class AV{async load(e){return new eO(e)}clearedOneInstance(){}}const gh="recaptcha",IV={theme:"light",type:"image"};let SV=class{constructor(e,t,r={...IV}){this.parameters=r,this.type=gh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(e),this.isInvisible=this.parameters.size==="invisible",oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;oe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new AV:new wV,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=rn()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){oe(Rv()&&!jv(),this.auth,"internal-error"),await xV(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await NP(this.auth);oe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function xV(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class Uv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ro._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function RV(n,e,t){if(It(n.app))return Promise.reject(_n(n));const r=Pt(n),a=await dp(r,e,Ie(t));return new Uv(a,l=>lp(r,l))}async function CV(n,e,t){const r=Ie(n);await op(!1,r,"phone");const a=await dp(r.auth,e,Ie(t));return new Uv(a,l=>TS(r,l))}async function NV(n,e,t){const r=Ie(n);if(It(r.auth.app))return Promise.reject(_n(r.auth));const a=await dp(r.auth,e,Ie(t));return new Uv(a,l=>AS(r,l))}async function dp(n,e,t){if(!n._getRecaptchaConfig())try{await aO(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const a=r.session;if("phoneNumber"in r){oe(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ma(n,l,"mfaSmsEnrollment",async(g,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===ph){oe(t?.type===gh,g,"argument-error");const E=await r_(g,y,t);return uA(g,E)}return uA(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{oe(a.type==="signin",n,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;oe(l,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ma(n,c,"mfaSmsSignIn",async(y,E)=>{if(E.phoneSignInInfo.captchaResponse===ph){oe(t?.type===gh,y,"argument-error");const T=await r_(y,E,t);return fA(y,T)}return fA(y,E)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ma(n,a,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===ph){oe(t?.type===gh,m,"argument-error");const y=await r_(m,g,t);return lA(m,y)}return lA(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t?._reset()}}async function DV(n,e){const t=Ie(n);if(It(t.auth.app))return Promise.reject(_n(t.auth));await Dv(t,e)}async function r_(n,e,t){oe(t.type===gh,n,"argument-error");const r=await t.verify();oe(typeof r=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:c,clientType:d,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:c,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:r}),a}let Oo=class cm{constructor(e){this.providerId=cm.PROVIDER_ID,this.auth=Pt(e)}verifyPhoneNumber(e,t){return dp(this.auth,e,Ie(t))}static credential(e,t){return Ro._fromVerification(e,t)}static credentialFromResult(e){const t=e;return cm.credentialFromTaggedObject(t)}static credentialFromError(e){return cm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?Ro._fromTokenResponse(t,r):null}};Oo.PROVIDER_ID="phone";Oo.PHONE_SIGN_IN_METHOD="phone";function $o(n,e){return e?pr(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Fv extends Pc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ds(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kV(n){return wS(n.auth,new Fv(n),n.bypassAuthState)}function PV(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),ES(t,new Fv(n),n.bypassAuthState)}async function OV(n){const{auth:e,user:t}=n;return oe(t,e,"internal-error"),Dv(t,new Fv(n),n.bypassAuthState)}class OS{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kV;case"linkViaPopup":case"linkViaRedirect":return OV;case"reauthViaPopup":case"reauthViaRedirect":return PV;default:Cn(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const VV=new Jh(2e3,1e4);async function MV(n,e,t){if(It(n.app))return Promise.reject(un(n,"operation-not-supported-in-this-environment"));const r=Pt(n);kc(n,e,vs);const a=$o(r,t);return new us(r,"signInViaPopup",e,a).executeNotNull()}async function LV(n,e,t){const r=Ie(n);if(It(r.auth.app))return Promise.reject(un(r.auth,"operation-not-supported-in-this-environment"));kc(r.auth,e,vs);const a=$o(r.auth,t);return new us(r.auth,"reauthViaPopup",e,a,r).executeNotNull()}async function jV(n,e,t){const r=Ie(n);kc(r.auth,e,vs);const a=$o(r.auth,t);return new us(r.auth,"linkViaPopup",e,a,r).executeNotNull()}class us extends OS{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=rd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VV.get())};e()}}us.currentPopupAction=null;const UV="pendingRedirect",yh=new Map;class FV extends OS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const r=await zV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zV(n,e){const t=MS(e),r=VS(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}async function zv(n,e){return VS(n)._set(MS(e),"true")}function BV(){yh.clear()}function Bv(n,e){yh.set(n._key(),e)}function VS(n){return pr(n._redirectPersistence)}function MS(n){return xo(UV,n.config.apiKey,n.name)}function qV(n,e,t){return HV(n,e,t)}async function HV(n,e,t){if(It(n.app))return Promise.reject(_n(n));const r=Pt(n);kc(n,e,vs),await r._initializationPromise;const a=$o(r,t);return await zv(a,r),a._openRedirect(r,e,"signInViaRedirect")}function GV(n,e,t){return KV(n,e,t)}async function KV(n,e,t){const r=Ie(n);if(kc(r.auth,e,vs),It(r.auth.app))return Promise.reject(_n(r.auth));await r.auth._initializationPromise;const a=$o(r.auth,t);await zv(a,r.auth);const l=await LS(r);return a._openRedirect(r.auth,e,"reauthViaRedirect",l)}function $V(n,e,t){return QV(n,e,t)}async function QV(n,e,t){const r=Ie(n);kc(r.auth,e,vs),await r.auth._initializationPromise;const a=$o(r.auth,t);await op(!1,r,e.providerId),await zv(a,r.auth);const l=await LS(r);return a._openRedirect(r.auth,e,"linkViaRedirect",l)}async function WV(n,e){return await Pt(n)._initializationPromise,fp(n,e,!1)}async function fp(n,e,t=!1){if(It(n.app))return Promise.reject(_n(n));const r=Pt(n),a=$o(r,e),c=await new FV(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}async function LS(n){const e=rd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}const YV=600*1e3;class jS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!US(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(un(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YV&&this.cachedEventUids.clear(),this.cachedEventUids.has(mA(e))}saveEventToCache(e){this.cachedEventUids.add(mA(e)),this.lastProcessedEventTime=Date.now()}}function mA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function US({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function XV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return US(n);default:return!1}}async function FS(n,e={}){return jt(n,"GET","/v1/projects",e)}const JV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZV=/^https?/;async function e4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FS(n);for(const t of e)try{if(t4(t))return}catch{}Cn(n,"unauthorized-domain")}function t4(n){const e=kh(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!ZV.test(t))return!1;if(JV.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const n4=new Jh(3e4,6e4);function pA(){const n=rn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function r4(n){return new Promise((e,t)=>{function r(){pA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pA(),t(un(n,"network-request-failed"))},timeout:n4.get()})}if(rn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(rn().gapi?.load)r();else{const a=mS("iframefcb");return rn()[a]=()=>{gapi.load?r():t(un(n,"network-request-failed"))},Nv(`${XP()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw um=null,e})}let um=null;function i4(n){return um=um||r4(n),um}const s4=new Jh(5e3,15e3),a4="__/auth/iframe",o4="emulator/auth/iframe",l4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u4(n){const e=n.config;oe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cv(e,o4):`https://${n.config.authDomain}/${a4}`,r={apiKey:e.apiKey,appName:n.name,v:Na},a=c4.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Dc(r).slice(1)}`}async function h4(n){const e=await i4(n),t=rn().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:u4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:l4,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=un(n,"network-request-failed"),d=rn().setTimeout(()=>{l(c)},s4.get());function m(){rn().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}const d4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},f4=500,m4=600,p4="_blank",g4="http://localhost";class gA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function y4(n,e,t,r=f4,a=m4){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...d4,width:r.toString(),height:a.toString(),top:l,left:c},g=kt().toLowerCase();t&&(d=lS(g)?p4:t),aS(g)&&(e=e||g4,m.scrollbars="yes");const y=Object.entries(m).reduce((T,[k,R])=>`${T}${k}=${R},`,"");if(zP(g)&&d!=="_self")return _4(e||"",d),new gA(null);const E=window.open(e||"",d,y);oe(E,n,"popup-blocked");try{E.focus()}catch{}return new gA(E)}function _4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const v4="__/auth/handler",b4="emulator/auth/handler",E4=encodeURIComponent("fac");async function A_(n,e,t,r,a,l){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Na,eventId:a};if(e instanceof vs){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",QD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries(l||{}))c[y]=E}if(e instanceof Oc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),g=m?`#${E4}=${encodeURIComponent(m)}`:"";return`${w4(n)}?${Dc(d).slice(1)}${g}`}function w4({config:n}){return n.emulator?Cv(n,b4):`https://${n.authDomain}/${v4}`}const i_="webStorageSupport";class T4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Po,this._completeRedirectFn=fp,this._overrideRedirectResult=Bv}async _openPopup(e,t,r,a){ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await A_(e,t,r,kh(),a);return y4(e,l,rd())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await A_(e,t,r,kh(),a);return hV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ni(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await h4(e),r=new jS(e);return t.register("authEvent",a=>(oe(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i_,{type:i_},a=>{const l=a?.[0]?.[i_];l!==void 0&&t(!!l),Cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dS()||oS()||ed()}}const A4=T4;class I4{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return Pi("unexpected MultiFactorSessionType")}}}class qv extends I4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qv(e)}_finalizeEnroll(e,t,r){return iV(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return bV(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class zS{constructor(){}static assertion(e){return qv._fromCredential(e)}}zS.FACTOR_ID="phone";var yA="@firebase/auth",_A="1.12.0";class S4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function x4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(n){ms(new Vr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;oe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fS(n)},g=new $P(r,a,l,m);return oO(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ms(new Vr("auth-internal",e=>{const t=Pt(e.getProvider("auth").getImmediate());return(r=>new S4(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(yA,_A,x4(n)),yr(yA,_A,"esm2020")}const C4=300;MD("authIdTokenMaxAge");function N4(){return document.getElementsByTagName("head")?.[0]??document}QP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=un("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",N4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");function Vo(){return window}const D4=2e3;async function k4(n,e,t){const{BuildInfo:r}=Vo();ni(e.sessionId,"AuthEvent did not contain a session ID");const a=await L4(e.sessionId),l={};return ed()?l.ibi=r.packageName:Zh()?l.apn=r.packageName:Cn(n,"operation-not-supported-in-this-environment"),r.displayName&&(l.appDisplayName=r.displayName),l.sessionId=a,A_(n,t,e.type,void 0,e.eventId??void 0,l)}async function P4(n){const{BuildInfo:e}=Vo(),t={};ed()?t.iosBundleId=e.packageName:Zh()?t.androidPackageName=e.packageName:Cn(n,"operation-not-supported-in-this-environment"),await FS(n,t)}function O4(n){const{cordova:e}=Vo();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let a=null;r?e.plugins.browsertab.openUrl(n):a=e.InAppBrowser.open(n,FP()?"_blank":"_system","location=yes"),t(a)})})}async function V4(n,e,t){const{cordova:r}=Vo();let a=()=>{};try{await new Promise((l,c)=>{let d=null;function m(){l();const E=r.plugins.browsertab?.close;typeof E=="function"&&E(),typeof t?.close=="function"&&t.close()}function g(){d||(d=window.setTimeout(()=>{c(un(n,"redirect-cancelled-by-user"))},D4))}function y(){document?.visibilityState==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),Zh()&&document.addEventListener("visibilitychange",y,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",y,!1),d&&window.clearTimeout(d)}})}finally{a()}}function M4(n){const e=Vo();oe(typeof e?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof e?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe(typeof e?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function L4(n){const e=j4(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function j4(n){if(ni(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}const U4=20;class F4 extends jS{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function z4(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:H4(),postBody:null,tenantId:n.tenantId,error:un(n,"no-auth-event")}}function B4(n,e){return I_()._set(S_(n),e)}async function vA(n){const e=await I_()._get(S_(n));return e&&await I_()._remove(S_(n)),e}function q4(n,e){const t=K4(e);if(t.includes("/__/auth/callback")){const r=hm(t),l=(r.firebaseError?G4(decodeURIComponent(r.firebaseError)):null)?.code?.split("auth/")?.[1],c=l?un(l):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function H4(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<U4;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function I_(){return pr(Lv)}function S_(n){return xo("authEvent",n.config.apiKey,n.name)}function G4(n){try{return JSON.parse(n)}catch{return null}}function K4(n){const e=hm(n),t=e.link?decodeURIComponent(e.link):void 0,r=hm(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return hm(a).link||a||r||t||n}function hm(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return Zl(t.join("?"))}const $4=500;class Q4{constructor(){this._redirectPersistence=Po,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fp,this._overrideRedirectResult=Bv}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new F4(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Cn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,a){M4(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),BV(),await this._originValidation(e);const c=z4(e,r,a);await B4(e,c);const d=await k4(e,c,t),m=await O4(d);return V4(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=P4(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:a,BuildInfo:l}=Vo(),c=setTimeout(async()=>{await vA(e),t.onEvent(bA())},$4),d=async y=>{clearTimeout(c);const E=await vA(e);let T=null;E&&y?.url&&(T=q4(E,y.url)),t.onEvent(T||bA())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const m=a,g=`${l.packageName.toLowerCase()}://`;Vo().handleOpenURL=async y=>{if(y.toLowerCase().startsWith(g)&&d({url:y}),typeof m=="function")try{m(y)}catch(E){console.error(E)}}}}const W4=Q4;function bA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:un("no-auth-event")}}function Y4(n,e){Pt(n)._logFramework(e)}var X4="@firebase/auth-compat",J4="0.6.2";const Z4=1e3;function _h(){return self?.location?.protocol||null}function eM(){return _h()==="http:"||_h()==="https:"}function BS(n=kt()){return!!((_h()==="file:"||_h()==="ionic:"||_h()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function tM(){return bv()||np()}function nM(){return OI()&&document?.documentMode===11}function rM(n=kt()){return/Edge\/\d+/.test(n)}function iM(n=kt()){return nM()||rM(n)}function qS(){try{const n=self.localStorage,e=rd();if(n)return n.setItem(e,"1"),n.removeItem(e),iM()?Ch():!0}catch{return Hv()&&Ch()}return!1}function Hv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function s_(){return(eM()||PI()||BS())&&!tM()&&qS()&&!Hv()}function HS(){return BS()&&typeof document<"u"}async function sM(){return HS()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},Z4);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function aM(){return typeof window<"u"?window:null}const mr={LOCAL:"local",NONE:"none",SESSION:"session"},Xu=oe,GS="persistence";function oM(n,e){if(Xu(Object.values(mr).includes(e),n,"invalid-persistence-type"),bv()){Xu(e!==mr.SESSION,n,"unsupported-persistence-type");return}if(np()){Xu(e===mr.NONE,n,"unsupported-persistence-type");return}if(Hv()){Xu(e===mr.NONE||e===mr.LOCAL&&Ch(),n,"unsupported-persistence-type");return}Xu(e===mr.NONE||qS(),n,"unsupported-persistence-type")}async function x_(n){await n._initializationPromise;const e=KS(),t=xo(GS,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function lM(n,e){const t=KS();if(!t)return[];const r=xo(GS,n,e);switch(t.getItem(r)){case mr.NONE:return[lc];case mr.LOCAL:return[Vh,Po];case mr.SESSION:return[Po];default:return[]}}function KS(){try{return aM()?.sessionStorage||null}catch{return null}}const cM=oe;class ua{constructor(){this.browserResolver=pr(A4),this.cordovaResolver=pr(W4),this.underlyingResolver=null,this._redirectPersistence=Po,this._completeRedirectFn=fp,this._overrideRedirectResult=Bv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,a)}async _openRedirect(e,t,r,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return HS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return cM(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await sM();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function $S(n){return n.unwrap()}function uM(n){return n.wrapped()}function hM(n){return QS(n)}function dM(n,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const r=e;r.resolver=new fM(n,rV(n,e))}else if(t){const r=QS(e),a=e;r&&(a.credential=r,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function QS(n){const{_tokenResponse:e}=n instanceof yn?n.customData:n;if(!e)return null;if(!(n instanceof yn)&&"temporaryProof"in e&&"phoneNumber"in e)return Oo.credentialFromResult(n);const t=e.providerId;if(!t||t===Wu.PASSWORD)return null;let r;switch(t){case Wu.GOOGLE:r=Ci;break;case Wu.FACEBOOK:r=Ri;break;case Wu.GITHUB:r=Ni;break;case Wu.TWITTER:r=Di;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:c,pendingToken:d,nonce:m}=e;return!l&&!c&&!a&&!d?null:d?t.startsWith("saml.")?cc._create(t,d):Fi._fromParams({providerId:t,signInMethod:t,pendingToken:d,idToken:a,accessToken:l}):new nc(t).credential({idToken:a,accessToken:l,rawNonce:m})}return n instanceof yn?r.credentialFromError(n):r.credentialFromResult(n)}function Xn(n,e){return e.catch(t=>{throw t instanceof yn&&dM(n,t),t}).then(t=>{const r=t.operationType,a=t.user;return{operationType:r,credential:hM(t),additionalUserInfo:nV(t),user:mp.getOrCreate(a)}})}async function R_(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>Xn(n,t.confirm(r))}}class fM{constructor(e,t){this.resolver=t,this.auth=uM(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xn($S(this.auth),this.resolver.resolveSignIn(e))}}let mp=class oh{constructor(e){this._delegate=e,this.multiFactor=aV(e)}static getOrCreate(e){return oh.USER_MAP.has(e)||oh.USER_MAP.set(e,new oh(e)),oh.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xn(this.auth,TS(this._delegate,e))}async linkWithPhoneNumber(e,t){return R_(this.auth,CV(this._delegate,e,t))}async linkWithPopup(e){return Xn(this.auth,jV(this._delegate,e,ua))}async linkWithRedirect(e){return await x_(Pt(this.auth)),$V(this._delegate,e,ua)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xn(this.auth,AS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return R_(this.auth,NV(this._delegate,e,t))}reauthenticateWithPopup(e){return Xn(this.auth,LV(this._delegate,e,ua))}async reauthenticateWithRedirect(e){return await x_(Pt(this.auth)),GV(this._delegate,e,ua)}sendEmailVerification(e){return GO(this._delegate,e)}async unlink(e){return await DO(this._delegate,e),this}updateEmail(e){return WO(this._delegate,e)}updatePassword(e){return YO(this._delegate,e)}updatePhoneNumber(e){return DV(this._delegate,e)}updateProfile(e){return QO(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return KO(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};mp.USER_MAP=new WeakMap;const Ju=oe;class C_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ju(r,"invalid-api-key",{appName:e.name}),Ju(r,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?ua:void 0;this._delegate=t.initialize({options:{persistence:mM(r,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(bP),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){lO(this._delegate,e,t)}applyActionCode(e){return MO(this._delegate,e)}checkActionCode(e){return IS(this._delegate,e)}confirmPasswordReset(e,t){return VO(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Xn(this._delegate,jO(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return HO(this._delegate,e)}isSignInWithEmailLink(e){return zO(this._delegate,e)}async getRedirectResult(){Ju(s_(),this._delegate,"operation-not-supported-in-this-environment");const e=await WV(this._delegate,ua);return e?Xn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Y4(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:a,error:l,complete:c}=EA(e,t,r);return this._delegate.onAuthStateChanged(a,l,c)}onIdTokenChanged(e,t,r){const{next:a,error:l,complete:c}=EA(e,t,r);return this._delegate.onIdTokenChanged(a,l,c)}sendSignInLinkToEmail(e,t){return FO(this._delegate,e,t)}sendPasswordResetEmail(e,t){return OO(this._delegate,e,t||void 0)}async setPersistence(e){oM(this._delegate,e);let t;switch(e){case mr.SESSION:t=Po;break;case mr.LOCAL:t=await pr(Vh)._isAvailable()?Vh:Lv;break;case mr.NONE:t=lc;break;default:return Cn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xn(this._delegate,NO(this._delegate))}signInWithCredential(e){return Xn(this._delegate,lp(this._delegate,e))}signInWithCustomToken(e){return Xn(this._delegate,PO(this._delegate,e))}signInWithEmailAndPassword(e,t){return Xn(this._delegate,UO(this._delegate,e,t))}signInWithEmailLink(e,t){return Xn(this._delegate,BO(this._delegate,e,t))}signInWithPhoneNumber(e,t){return R_(this._delegate,RV(this._delegate,e,t))}async signInWithPopup(e){return Ju(s_(),this._delegate,"operation-not-supported-in-this-environment"),Xn(this._delegate,MV(this._delegate,e,ua))}async signInWithRedirect(e){return Ju(s_(),this._delegate,"operation-not-supported-in-this-environment"),await x_(this._delegate),qV(this._delegate,e,ua)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return LO(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}C_.Persistence=mr;function EA(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const a=r;return{next:c=>a(c&&mp.getOrCreate(c)),error:e,complete:t}}function mM(n,e){const t=lM(n,e);if(typeof self<"u"&&!t.includes(Vh)&&t.push(Vh),typeof window<"u")for(const r of[Lv,Po])t.includes(r)||t.push(r);return t.includes(lc)||t.push(lc),t}class Gv{static credential(e,t){return Oo.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Oo($S(xn.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Gv.PHONE_SIGN_IN_METHOD=Oo.PHONE_SIGN_IN_METHOD;Gv.PROVIDER_ID=Oo.PROVIDER_ID;const pM=oe;class gM{constructor(e,t,r=xn.app()){pM(r.options?.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new SV(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const yM="auth-compat";function _M(n){n.INTERNAL.registerComponent(new Vr(yM,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new C_(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zl.EMAIL_SIGNIN,PASSWORD_RESET:zl.PASSWORD_RESET,RECOVER_EMAIL:zl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:zl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:zl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:zl.VERIFY_EMAIL}},EmailAuthProvider:Da,FacebookAuthProvider:Ri,GithubAuthProvider:Ni,GoogleAuthProvider:Ci,OAuthProvider:nc,SAMLAuthProvider:Dm,PhoneAuthProvider:Gv,PhoneMultiFactorGenerator:zS,RecaptchaVerifier:gM,TwitterAuthProvider:Di,Auth:C_,AuthCredential:Pc,Error:yn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(X4,J4)}_M(xn);var wA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pa,WS;(function(){var n;function e(x,I){function N(){}N.prototype=I.prototype,x.F=I.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(O,C,M){for(var D=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)D[Ne-2]=arguments[Ne];return I.prototype[C].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,I,N){N||(N=0);const O=Array(16);if(typeof I=="string")for(var C=0;C<16;++C)O[C]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(C=0;C<16;++C)O[C]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=x.g[0],N=x.g[1],C=x.g[2];let M=x.g[3],D;D=I+(M^N&(C^M))+O[0]+3614090360&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(C^I&(N^C))+O[1]+3905402710&4294967295,M=I+(D<<12&4294967295|D>>>20),D=C+(N^M&(I^N))+O[2]+606105819&4294967295,C=M+(D<<17&4294967295|D>>>15),D=N+(I^C&(M^I))+O[3]+3250441966&4294967295,N=C+(D<<22&4294967295|D>>>10),D=I+(M^N&(C^M))+O[4]+4118548399&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(C^I&(N^C))+O[5]+1200080426&4294967295,M=I+(D<<12&4294967295|D>>>20),D=C+(N^M&(I^N))+O[6]+2821735955&4294967295,C=M+(D<<17&4294967295|D>>>15),D=N+(I^C&(M^I))+O[7]+4249261313&4294967295,N=C+(D<<22&4294967295|D>>>10),D=I+(M^N&(C^M))+O[8]+1770035416&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(C^I&(N^C))+O[9]+2336552879&4294967295,M=I+(D<<12&4294967295|D>>>20),D=C+(N^M&(I^N))+O[10]+4294925233&4294967295,C=M+(D<<17&4294967295|D>>>15),D=N+(I^C&(M^I))+O[11]+2304563134&4294967295,N=C+(D<<22&4294967295|D>>>10),D=I+(M^N&(C^M))+O[12]+1804603682&4294967295,I=N+(D<<7&4294967295|D>>>25),D=M+(C^I&(N^C))+O[13]+4254626195&4294967295,M=I+(D<<12&4294967295|D>>>20),D=C+(N^M&(I^N))+O[14]+2792965006&4294967295,C=M+(D<<17&4294967295|D>>>15),D=N+(I^C&(M^I))+O[15]+1236535329&4294967295,N=C+(D<<22&4294967295|D>>>10),D=I+(C^M&(N^C))+O[1]+4129170786&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^C&(I^N))+O[6]+3225465664&4294967295,M=I+(D<<9&4294967295|D>>>23),D=C+(I^N&(M^I))+O[11]+643717713&4294967295,C=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(C^M))+O[0]+3921069994&4294967295,N=C+(D<<20&4294967295|D>>>12),D=I+(C^M&(N^C))+O[5]+3593408605&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^C&(I^N))+O[10]+38016083&4294967295,M=I+(D<<9&4294967295|D>>>23),D=C+(I^N&(M^I))+O[15]+3634488961&4294967295,C=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(C^M))+O[4]+3889429448&4294967295,N=C+(D<<20&4294967295|D>>>12),D=I+(C^M&(N^C))+O[9]+568446438&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^C&(I^N))+O[14]+3275163606&4294967295,M=I+(D<<9&4294967295|D>>>23),D=C+(I^N&(M^I))+O[3]+4107603335&4294967295,C=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(C^M))+O[8]+1163531501&4294967295,N=C+(D<<20&4294967295|D>>>12),D=I+(C^M&(N^C))+O[13]+2850285829&4294967295,I=N+(D<<5&4294967295|D>>>27),D=M+(N^C&(I^N))+O[2]+4243563512&4294967295,M=I+(D<<9&4294967295|D>>>23),D=C+(I^N&(M^I))+O[7]+1735328473&4294967295,C=M+(D<<14&4294967295|D>>>18),D=N+(M^I&(C^M))+O[12]+2368359562&4294967295,N=C+(D<<20&4294967295|D>>>12),D=I+(N^C^M)+O[5]+4294588738&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^C)+O[8]+2272392833&4294967295,M=I+(D<<11&4294967295|D>>>21),D=C+(M^I^N)+O[11]+1839030562&4294967295,C=M+(D<<16&4294967295|D>>>16),D=N+(C^M^I)+O[14]+4259657740&4294967295,N=C+(D<<23&4294967295|D>>>9),D=I+(N^C^M)+O[1]+2763975236&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^C)+O[4]+1272893353&4294967295,M=I+(D<<11&4294967295|D>>>21),D=C+(M^I^N)+O[7]+4139469664&4294967295,C=M+(D<<16&4294967295|D>>>16),D=N+(C^M^I)+O[10]+3200236656&4294967295,N=C+(D<<23&4294967295|D>>>9),D=I+(N^C^M)+O[13]+681279174&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^C)+O[0]+3936430074&4294967295,M=I+(D<<11&4294967295|D>>>21),D=C+(M^I^N)+O[3]+3572445317&4294967295,C=M+(D<<16&4294967295|D>>>16),D=N+(C^M^I)+O[6]+76029189&4294967295,N=C+(D<<23&4294967295|D>>>9),D=I+(N^C^M)+O[9]+3654602809&4294967295,I=N+(D<<4&4294967295|D>>>28),D=M+(I^N^C)+O[12]+3873151461&4294967295,M=I+(D<<11&4294967295|D>>>21),D=C+(M^I^N)+O[15]+530742520&4294967295,C=M+(D<<16&4294967295|D>>>16),D=N+(C^M^I)+O[2]+3299628645&4294967295,N=C+(D<<23&4294967295|D>>>9),D=I+(C^(N|~M))+O[0]+4096336452&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~C))+O[7]+1126891415&4294967295,M=I+(D<<10&4294967295|D>>>22),D=C+(I^(M|~N))+O[14]+2878612391&4294967295,C=M+(D<<15&4294967295|D>>>17),D=N+(M^(C|~I))+O[5]+4237533241&4294967295,N=C+(D<<21&4294967295|D>>>11),D=I+(C^(N|~M))+O[12]+1700485571&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~C))+O[3]+2399980690&4294967295,M=I+(D<<10&4294967295|D>>>22),D=C+(I^(M|~N))+O[10]+4293915773&4294967295,C=M+(D<<15&4294967295|D>>>17),D=N+(M^(C|~I))+O[1]+2240044497&4294967295,N=C+(D<<21&4294967295|D>>>11),D=I+(C^(N|~M))+O[8]+1873313359&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~C))+O[15]+4264355552&4294967295,M=I+(D<<10&4294967295|D>>>22),D=C+(I^(M|~N))+O[6]+2734768916&4294967295,C=M+(D<<15&4294967295|D>>>17),D=N+(M^(C|~I))+O[13]+1309151649&4294967295,N=C+(D<<21&4294967295|D>>>11),D=I+(C^(N|~M))+O[4]+4149444226&4294967295,I=N+(D<<6&4294967295|D>>>26),D=M+(N^(I|~C))+O[11]+3174756917&4294967295,M=I+(D<<10&4294967295|D>>>22),D=C+(I^(M|~N))+O[2]+718787259&4294967295,C=M+(D<<15&4294967295|D>>>17),D=N+(M^(C|~I))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(C+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+M&4294967295}r.prototype.v=function(x,I){I===void 0&&(I=x.length);const N=I-this.blockSize,O=this.C;let C=this.h,M=0;for(;M<I;){if(C==0)for(;M<=N;)a(this,x,M),M+=this.blockSize;if(typeof x=="string"){for(;M<I;)if(O[C++]=x.charCodeAt(M++),C==this.blockSize){a(this,O),C=0;break}}else for(;M<I;)if(O[C++]=x[M++],C==this.blockSize){a(this,O),C=0;break}}this.h=C,this.o+=I},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,N=0;N<4;++N)for(let O=0;O<32;O+=8)x[I++]=this.g[N]>>>O&255;return x};function l(x,I){var N=d;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=I(x)}function c(x,I){this.h=I;const N=[];let O=!0;for(let C=x.length-1;C>=0;C--){const M=x[C]|0;O&&M==I||(N[C]=M,O=!1)}this.g=N}var d={};function m(x){return-128<=x&&x<128?l(x,function(I){return new c([I|0],I<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return U(g(-x));const I=[];let N=1;for(let O=0;x>=N;O++)I[O]=x/N|0,N*=4294967296;return new c(I,0)}function y(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return U(y(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(I,8));let O=E;for(let M=0;M<x.length;M+=8){var C=Math.min(8,x.length-M);const D=parseInt(x.substring(M,M+C),I);C<8?(C=g(Math.pow(I,C)),O=O.j(C).add(g(D))):(O=O.j(N),O=O.add(g(D)))}return O}var E=m(0),T=m(1),k=m(16777216);n=c.prototype,n.m=function(){if(j(this))return-U(this).m();let x=0,I=1;for(let N=0;N<this.g.length;N++){const O=this.i(N);x+=(O>=0?O:4294967296+O)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(R(this))return"0";if(j(this))return"-"+U(this).toString(x);const I=g(Math.pow(x,6));var N=this;let O="";for(;;){const C=_e(N,I).g;N=se(N,C.j(I));let M=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=C,R(N))return M+O;for(;M.length<6;)M="0"+M;O=M+O}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function R(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function j(x){return x.h==-1}n.l=function(x){return x=se(this,x),j(x)?-1:R(x)?0:1};function U(x){const I=x.g.length,N=[];for(let O=0;O<I;O++)N[O]=~x.g[O];return new c(N,~x.h).add(T)}n.abs=function(){return j(this)?U(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),N=[];let O=0;for(let C=0;C<=I;C++){let M=O+(this.i(C)&65535)+(x.i(C)&65535),D=(M>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);O=D>>>16,M&=65535,D&=65535,N[C]=D<<16|M}return new c(N,N[N.length-1]&-2147483648?-1:0)};function se(x,I){return x.add(U(I))}n.j=function(x){if(R(this)||R(x))return E;if(j(this))return j(x)?U(this).j(U(x)):U(U(this).j(x));if(j(x))return U(this.j(U(x)));if(this.l(k)<0&&x.l(k)<0)return g(this.m()*x.m());const I=this.g.length+x.g.length,N=[];for(var O=0;O<2*I;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(let C=0;C<x.g.length;C++){const M=this.i(O)>>>16,D=this.i(O)&65535,Ne=x.i(C)>>>16,rt=x.i(C)&65535;N[2*O+2*C]+=D*rt,le(N,2*O+2*C),N[2*O+2*C+1]+=M*rt,le(N,2*O+2*C+1),N[2*O+2*C+1]+=D*Ne,le(N,2*O+2*C+1),N[2*O+2*C+2]+=M*Ne,le(N,2*O+2*C+2)}for(x=0;x<I;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=I;x<2*I;x++)N[x]=0;return new c(N,0)};function le(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function te(x,I){this.g=x,this.h=I}function _e(x,I){if(R(I))throw Error("division by zero");if(R(x))return new te(E,E);if(j(x))return I=_e(U(x),I),new te(U(I.g),U(I.h));if(j(I))return I=_e(x,U(I)),new te(U(I.g),I.h);if(x.g.length>30){if(j(x)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var N=T,O=I;O.l(x)<=0;)N=ae(N),O=ae(O);var C=he(N,1),M=he(O,1);for(O=he(O,2),N=he(N,2);!R(O);){var D=M.add(O);D.l(x)<=0&&(C=C.add(N),M=D),O=he(O,1),N=he(N,1)}return I=se(x,C.j(I)),new te(C,I)}for(C=E;x.l(I)>=0;){for(N=Math.max(1,Math.floor(x.m()/I.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),M=g(N),D=M.j(I);j(D)||D.l(x)>0;)N-=O,M=g(N),D=M.j(I);R(M)&&(M=T),C=C.add(M),x=se(x,D)}return new te(C,x)}n.B=function(x){return _e(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)&x.i(O);return new c(N,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)|x.i(O);return new c(N,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),N=[];for(let O=0;O<I;O++)N[O]=this.i(O)^x.i(O);return new c(N,this.h^x.h)};function ae(x){const I=x.g.length+1,N=[];for(let O=0;O<I;O++)N[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(N,x.h)}function he(x,I){const N=I>>5;I%=32;const O=x.g.length-N,C=[];for(let M=0;M<O;M++)C[M]=I>0?x.i(M+N)>>>I|x.i(M+N+1)<<32-I:x.i(M+N);return new c(C,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,pa=c}).apply(typeof wA<"u"?wA:typeof self<"u"?self:typeof window<"u"?window:{});var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var YS,lh,XS,dm,N_,JS,ZS,ex;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof em=="object"&&em];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,v){if(v)e:{var w=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in w))break e;w=w[B]}h=h[h.length-1],S=w[h],v=v(S),v!=S&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var w=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&w.push([S,v[S]]);return w}});var l=l||{},c=this||self;function d(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,w){return h.call.apply(h.bind,arguments)}function g(h,v,w){return g=m,g.apply(null,arguments)}function y(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(S,B,Q){for(var ue=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ue[Me-2]=arguments[Me];return v.prototype[B].apply(S,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function k(h){const v=h.length;if(v>0){const w=Array(v);for(let S=0;S<v;S++)w[S]=h[S];return w}return[]}function R(h,v){for(let S=1;S<arguments.length;S++){const B=arguments[S];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=h.length||0;const Q=B.length||0;h.length=w+Q;for(let ue=0;ue<Q;ue++)h[w+ue]=B[ue]}else h.push(B)}}class j{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(h){c.setTimeout(()=>{throw h},0)}function se(){var h=x;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class le{constructor(){this.h=this.g=null}add(v,w){const S=te.get();S.set(v,w),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new j(()=>new _e,h=>h.reset());class _e{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,he=!1,x=new le,I=()=>{const h=Promise.resolve(void 0);ae=()=>{h.then(N)}};function N(){for(var h;h=se();){try{h.h.call(h.g)}catch(w){U(w)}var v=te;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}he=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,v),c.removeEventListener("test",w,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,v){C.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(Ne,C),Ne.prototype.init=function(h,v){const w=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),$=0;function X(h,v,w,S,B){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!S,this.ha=B,this.key=++$,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,v,w){for(const S in h)v.call(w,h[S],S,h)}function Ve(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function V(h){const v={};for(const w in h)v[w]=h[w];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,v){let w,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(w in S)h[w]=S[w];for(let Q=0;Q<Z.length;Q++)w=Z[Q],Object.prototype.hasOwnProperty.call(S,w)&&(h[w]=S[w])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,v,w,S,B){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const ue=Oe(h,v,S,B);return ue>-1?(v=h[ue],w||(v.fa=!1)):(v=new X(v,this.src,Q,!!S,B),v.fa=w,h.push(v)),v};function Se(h,v){const w=v.type;if(w in h.g){var S=h.g[w],B=Array.prototype.indexOf.call(S,v,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(S,B,1),Q&&(ce(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Oe(h,v,w,S){for(let B=0;B<h.length;++B){const Q=h[B];if(!Q.da&&Q.listener==v&&Q.capture==!!w&&Q.ha==S)return B}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ut={};function _t(h,v,w,S,B){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)_t(h,v[Q],w,S,B);return null}return w=on(w),h&&h[rt]?h.J(v,w,d(S)?!!S.capture:!1,B):qi(h,v,w,!1,S,B)}function qi(h,v,w,S,B,Q){if(!v)throw Error("Invalid event type");const ue=d(B)?!!B.capture:!!B;let Me=Ze(h);if(Me||(h[Ge]=Me=new me(h)),w=Me.add(v,w,S,ue,Q),w.proxy)return w;if(S=As(),w.proxy=S,S.src=h,S.listener=w,h.addEventListener)M||(B=ue),B===void 0&&(B=!1),h.addEventListener(v.toString(),S,B);else if(h.attachEvent)h.attachEvent(Re(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function As(){function h(w){return v.call(h.src,h.listener,w)}const v=Ye;return h}function Is(h,v,w,S,B){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Is(h,v[Q],w,S,B);else S=d(S)?!!S.capture:!!S,w=on(w),h&&h[rt]?(h=h.i,Q=String(v).toString(),Q in h.g&&(v=h.g[Q],w=Oe(v,w,S,B),w>-1&&(ce(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[Q],h.h--)))):h&&(h=Ze(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Oe(v,w,S,B)),(w=h>-1?v[h]:null)&&we(w))}function we(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[rt])Se(v.i,h);else{var w=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(w,S,h.capture):v.detachEvent?v.detachEvent(Re(w),S):v.addListener&&v.removeListener&&v.removeListener(S),(w=Ze(v))?(Se(w,h),w.h==0&&(w.src=null,v[Ge]=null)):ce(h)}}}function Re(h){return h in Ut?Ut[h]:Ut[h]="on"+h}function Ye(h,v){if(h.da)h=!0;else{v=new Ne(v,this);const w=h.listener,S=h.ha||h.src;h.fa&&we(h),h=w.call(S,v)}return h}function Ze(h){return h=h[Ge],h instanceof me?h:null}var an="__closure_events_fn_"+(Math.random()*1e9>>>0);function on(h){return typeof h=="function"?h:(h[an]||(h[an]=function(v){return h.handleEvent(v)}),h[an])}function Et(){O.call(this),this.i=new me(this),this.M=this,this.G=null}E(Et,O),Et.prototype[rt]=!0,Et.prototype.removeEventListener=function(h,v,w,S){Is(this,h,v,w,S)};function it(h,v){var w,S=h.G;if(S)for(w=[];S;S=S.G)w.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new C(v,h);else if(v instanceof C)v.target=v.target||h;else{var B=v;v=new C(S,h),de(v,B)}B=!0;let Q,ue;if(w)for(ue=w.length-1;ue>=0;ue--)Q=v.g=w[ue],B=Hi(Q,S,!0,v)&&B;if(Q=v.g=h,B=Hi(Q,S,!0,v)&&B,B=Hi(Q,S,!1,v)&&B,w)for(ue=0;ue<w.length;ue++)Q=v.g=w[ue],B=Hi(Q,S,!1,v)&&B}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let S=0;S<w.length;S++)ce(w[S]);delete h.g[v],h.h--}}this.G=null},Et.prototype.J=function(h,v,w,S){return this.i.add(String(h),v,!1,w,S)},Et.prototype.K=function(h,v,w,S){return this.i.add(String(h),v,!0,w,S)};function Hi(h,v,w,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let Q=0;Q<v.length;++Q){const ue=v[Q];if(ue&&!ue.da&&ue.capture==w){const Me=ue.listener,zt=ue.ha||ue.src;ue.fa&&Se(h.i,ue),B=Me.call(zt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Jo(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(h,v||0)}function Zo(h){h.g=Jo(()=>{h.g=null,h.i&&(h.i=!1,Zo(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ln extends O{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function La(h){O.call(this),this.h=h,this.g={}}E(La,O);var Kc=[];function $c(h){ke(h.g,function(v,w){this.g.hasOwnProperty(w)&&we(v)},h),h.g={}}La.prototype.N=function(){La.Z.N.call(this),$c(this)},La.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=c.JSON.stringify,Kp=c.JSON.parse,Ad=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Id(){}function Sd(){}var Lr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function vn(){C.call(this,"d")}E(vn,C);function vr(){C.call(this,"c")}E(vr,C);var Ft={},xd=null;function el(){return xd=xd||new Et}Ft.Ia="serverreachability";function Rd(h){C.call(this,Ft.Ia,h)}E(Rd,C);function ii(h){const v=el();it(v,new Rd(v))}Ft.STAT_EVENT="statevent";function ja(h,v){C.call(this,Ft.STAT_EVENT,h),this.stat=v}E(ja,C);function Qt(h){const v=el();it(v,new ja(v,h))}Ft.Ja="timingevent";function si(h,v){C.call(this,Ft.Ja,h),this.size=v}E(si,C);function ai(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function $p(h,v,w,S,B,Q){h.info(function(){if(h.g)if(Q){var ue="",Me=Q.split("&");for(let st=0;st<Me.length;st++){var zt=Me[st].split("=");if(zt.length>1){const St=zt[0];zt=zt[1];const Tr=St.split("_");ue=Tr.length>=2&&Tr[1]=="type"?ue+(St+"="+zt+"&"):ue+(St+"=redacted&")}}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+v+`
`+w+`
`+ue})}function Cd(h,v,w,S,B,Q,ue){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+v+`
`+w+`
`+Q+" "+ue})}function oi(h,v,w,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Qp(h,w)+(S?" "+S:"")})}function Ua(h,v){h.info(function(){return"TIMEOUT: "+v})}jr.prototype.info=function(){};function Qp(h,v){if(!h.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var w=Q[h];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ue=1;ue<S.length;ue++)S[ue]=""}}}}return Ss(Q)}catch{return v}}var Fa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wc;function za(){}E(za,Id),za.prototype.g=function(){return new XMLHttpRequest},Wc=new za;function Gi(h){return encodeURIComponent(String(h))}function Nd(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function Ur(h,v,w,S){this.j=h,this.i=v,this.l=w,this.S=S||1,this.V=new La(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fr}function Fr(){this.i=null,this.g="",this.h=!1}var Wt={},dn={};function li(h,v,w){h.M=1,h.A=Ba(Xt(v)),h.u=w,h.R=!0,tl(h,null)}function tl(h,v){h.F=Date.now(),ci(h),h.B=Xt(h.A);var w=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),sl(w.i,"t",S),h.C=0,w=h.j.L,h.h=new Fr,h.g=Gd(h.j,w?v:null,!h.u),h.P>0&&(h.O=new Ln(g(h.Y,h,h.g),h.P)),v=h.V,w=h.g,S=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(Kc[0]=B.toString()),B=Kc);for(let Q=0;Q<B.length;Q++){const ue=_t(w,B[Q],S||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ii(),$p(h.i,h.v,h.B,h.l,h.S,h.u)}Ur.prototype.ba=function(h){h=h.target;const v=this.O;v&&qr(h)==3?v.j():this.Y(h)},Ur.prototype.Y=function(h){try{if(h==this.g)e:{const Me=qr(this.g),zt=this.g.ya(),st=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||bn(this.g)))){this.K||Me!=4||zt==7||(zt==8||st<=0?ii(3):ii(2)),ui(this);var v=this.g.ca();this.X=v;var w=Wp(this);if(this.o=v==200,Cd(this.i,this.v,this.B,this.l,this.S,Me,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var Q=S;break t}}Q=null}if(h=Q)oi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hi(this,h);else{this.o=!1,this.m=3,Qt(12),ir(this),br(this);break e}}if(this.R){h=!0;let St;for(;!this.K&&this.C<w.length;)if(St=kd(this,w),St==dn){Me==4&&(this.m=4,Qt(14),h=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Wt){this.m=4,Qt(15),oi(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else oi(this.i,this.l,St,null),hi(this,St);if(Dd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||w.length!=0||this.h.h||(this.m=1,Qt(16),h=!1),this.o=this.o&&h,!h)oi(this.i,this.l,w,"[Invalid Chunked Response]"),ir(this),br(this);else if(w.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),uu(ue),ue.P=!0,Qt(11))}}else oi(this.i,this.l,w,null),hi(this,w);Me==4&&ir(this),this.o&&!this.K&&(Me==4?zd(this.j,this):(this.o=!1,ci(this)))}else $i(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),ir(this),br(this)}}}catch{}};function Wp(h){if(!Dd(h))return h.g.la();const v=bn(h.g);if(v==="")return"";let w="";const S=v.length,B=qr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ir(h),br(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<S;Q++)h.h.h=!0,w+=h.h.i.decode(v[Q],{stream:!(B&&Q==S-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function Dd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function kd(h,v){var w=h.C,S=v.indexOf(`
`,w);return S==-1?dn:(w=Number(v.substring(w,S)),isNaN(w)?Wt:(S+=1,S+w>v.length?dn:(v=v.slice(S,S+w),h.C=S+w,v)))}Ur.prototype.cancel=function(){this.K=!0,ir(this)};function ci(h){h.T=Date.now()+h.H,nl(h,h.H)}function nl(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ai(g(h.aa,h),v)}function ui(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ur.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ua(this.i,this.B),this.M!=2&&(ii(),Qt(17)),ir(this),this.m=2,br(this)):nl(this,this.T-h)};function br(h){h.j.I==0||h.K||zd(h.j,h)}function ir(h){ui(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,$c(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function hi(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||fi(w.h,h))){if(!h.L&&fi(w.h,h)&&w.I==3){try{var S=w.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)ul(w),Os(w);else break e;Wa(w),Qt(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=ai(g(w.Va,w),6e3));di(w.h)<=1&&w.ta&&(w.ta=void 0)}else vi(w,11)}else if((h.L||w.g==h)&&ul(w),!D(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let st=B[v];const St=st[0];if(!(St<=w.K))if(w.K=St,st=st[1],w.I==2)if(st[0]=="c"){w.M=st[1],w.ba=st[2];const Tr=st[3];Tr!=null&&(w.ka=Tr,w.j.info("VER="+w.ka));const bi=st[4];bi!=null&&(w.za=bi,w.j.info("SVER="+w.za));const Hr=st[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(S=1.5*Hr,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const Gr=h.g;if(Gr){const Ya=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var Q=S.h;Q.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Jc(Q,Q.h),Q.h=null))}if(S.G){const hl=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(S.wa=hl,lt(S.J,S.G,hl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var ue=h;if(S.na=Hd(S,S.L?S.ba:null,S.W),ue.L){Zc(S.h,ue);var Me=ue,zt=S.O;zt&&(Me.H=zt),Me.D&&(ui(Me),ci(Me)),S.g=ue}else Ud(S);w.i.length>0&&_i(w)}else st[0]!="stop"&&st[0]!="close"||vi(w,7);else w.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?vi(w,7):lu(w):st[0]!="noop"&&w.l&&w.l.qa(st),w.A=0)}}ii(4)}catch{}}var Yt=class{constructor(h,v){this.g=h,this.map=v}};function Yc(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function di(h){return h.h?1:h.g?h.g.size:0}function fi(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Jc(h,v){h.g?h.g.add(v):h.h=v}function Zc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Yc.prototype.cancel=function(){if(this.i=eu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function eu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return k(h.i)}var Pd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const S=h[w].indexOf("=");let B,Q=null;S>=0?(B=h[w].substring(0,S),Q=h[w].substring(S+1)):B=h[w],v(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function sr(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof sr?(this.l=h.l,fn(this,h.j),this.o=h.o,this.g=h.g,xs(this,h.u),this.h=h.h,tu(this,Ld(h.i)),this.m=h.m):h&&(v=String(h).match(Pd))?(this.l=!1,fn(this,v[1]||"",!0),this.o=mi(v[2]||""),this.g=mi(v[3]||"",!0),xs(this,v[4]),this.h=mi(v[5]||"",!0),tu(this,v[6]||"",!0),this.m=mi(v[7]||"")):(this.l=!1,this.i=new Cs(null,this.l))}sr.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(qa(v,il,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(qa(v,il,!0),"@"),h.push(Gi(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(qa(w,w.charAt(0)=="/"?nu:Od,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",qa(w,Vd)),h.join("")},sr.prototype.resolve=function(h){const v=Xt(this);let w=!!h.j;w?fn(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var S=h.h;if(w)xs(v,h.u);else if(w=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=v.h.lastIndexOf("/");B!=-1&&(S=v.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let ue=0;ue<B.length;){const Me=B[ue++];Me=="."?S&&ue==B.length&&Q.push(""):Me==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&ue==B.length&&Q.push("")):(Q.push(Me),S=!0)}S=Q.join("/")}else S=B}return w?v.h=S:w=h.i.toString()!=="",w?tu(v,Ld(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Xt(h){return new sr(h)}function fn(h,v,w){h.j=w?mi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function xs(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function tu(h,v,w){v instanceof Cs?(h.i=v,al(h.i,h.l)):(w||(v=qa(v,Rs)),h.i=new Cs(v,h.l))}function lt(h,v,w){h.i.set(v,w)}function Ba(h){return lt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function mi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function qa(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Hn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var il=/[#\/\?@]/g,Od=/[#\?:]/g,nu=/[#\?]/g,Rs=/[#\?@]/g,Vd=/#/g;function Cs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Gn(h){h.g||(h.g=new Map,h.h=0,h.i&&rl(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=Cs.prototype,n.add=function(h,v){Gn(this),this.i=null,h=Ns(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function Md(h,v){Gn(h),v=Ns(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function ru(h,v){return Gn(h),v=Ns(h,v),h.g.has(v)}n.forEach=function(h,v){Gn(this),this.g.forEach(function(w,S){w.forEach(function(B){h.call(v,B,S,this)},this)},this)};function iu(h,v){Gn(h);let w=[];if(typeof v=="string")ru(h,v)&&(w=w.concat(h.g.get(Ns(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}n.set=function(h,v){return Gn(this),this.i=null,h=Ns(this,h),ru(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=iu(this,h),h.length>0?String(h[0]):v):v};function sl(h,v,w){Md(h,v),w.length>0&&(h.i=null,h.g.set(Ns(h,v),k(w)),h.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var w=v[S];const B=Gi(w);w=iu(this,w);for(let Q=0;Q<w.length;Q++){let ue=B;w[Q]!==""&&(ue+="="+Gi(w[Q])),h.push(ue)}}return this.i=h.join("&")};function Ld(h){const v=new Cs;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ns(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function al(h,v){v&&!h.j&&(Gn(h),h.i=null,h.g.forEach(function(w,S){const B=S.toLowerCase();S!=B&&(Md(this,S),sl(this,B,w))},h)),h.j=v}function zr(h,v){const w=new jr;if(c.Image){const S=new Image;S.onload=y(Er,w,"TestLoadImage: loaded",!0,v,S),S.onerror=y(Er,w,"TestLoadImage: error",!1,v,S),S.onabort=y(Er,w,"TestLoadImage: abort",!1,v,S),S.ontimeout=y(Er,w,"TestLoadImage: timeout",!1,v,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function su(h,v){const w=new jr,S=new AbortController,B=setTimeout(()=>{S.abort(),Er(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(B),Q.ok?Er(w,"TestPingServer: ok",!0,v):Er(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Er(w,"TestPingServer: error",!1,v)})}function Er(h,v,w,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(w)}catch{}}function Ds(){this.g=new Ad}function pi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(pi,Id),pi.prototype.g=function(){return new Ha(this.i,this.h)};function Ha(h,v){Et.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ha,Et),n=Ha.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Br(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ks(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ks(this):Br(this),this.readyState==3&&ol(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,ks(this))},n.Na=function(h){this.g&&(this.response=h,ks(this))},n.ga=function(){this.g&&ks(this)};function ks(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Br(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Br(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function wr(h){let v="";return ke(h,function(w,S){v+=S,v+=":",v+=w,v+=`\r
`}),v}function Ga(h,v,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=wr(w),typeof h=="string"?w!=null&&Gi(w):lt(h,v,w))}function ft(h){Et.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ft,Et);var gi=/^https?$/i,au=["POST","PUT"];n=ft.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wc.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Q){Ka(this,Q);return}if(h=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)w.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())w.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(au,v,void 0)>=0)||S||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of w)this.g.setRequestHeader(Q,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Ka(this,Q)}};function Ka(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,ou(h),Ki(h)}function ou(h){h.A||(h.A=!0,it(h,"complete"),it(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,it(this,"complete"),it(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),ft.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$a(this):this.Xa())},n.Xa=function(){$a(this)};function $a(h){if(h.h&&typeof l<"u"){if(h.v&&qr(h)==4)setTimeout(h.Ca.bind(h),0);else if(it(h,"readystatechange"),qr(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var S;if(S=Q===0){let ue=String(h.D).match(Pd)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),S=!gi.test(ue?ue.toLowerCase():"")}w=S}if(w)it(h,"complete"),it(h,"success");else{h.o=6;try{var B=qr(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",ou(h)}}finally{Ki(h)}}}}function Ki(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||it(h,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function qr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Kp(v)}};function bn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(h){const v={};h=(h.g&&qr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(D(h[S]))continue;var w=Nd(h[S]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=v[B]||[];v[B]=Q,Q.push(w)}Ve(v,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yi(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Ps(h){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yi("baseRetryDelayMs",5e3,h),this.Za=yi("retryDelaySeedMs",1e4,h),this.Ta=yi("forwardChannelMaxRetries",2,h),this.va=yi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Yc(h&&h.concurrentRequestLimit),this.Ba=new Ds,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ps.prototype,n.ka=8,n.I=1,n.connect=function(h,v,w,S){Qt(0),this.W=h,this.H=v||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=Hd(this,null,this.W),_i(this)};function lu(h){if(ll(h),h.I==3){var v=h.V++,w=Xt(h.J);if(lt(w,"SID",h.M),lt(w,"RID",v),lt(w,"TYPE","terminate"),Qa(h,w),v=new Ur(h,h.j,v),v.M=2,v.A=Ba(Xt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=v.A,w=!0),w||(v.g=Gd(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ci(v)}qd(h)}function Os(h){h.g&&(uu(h),h.g.cancel(),h.g=null)}function ll(h){Os(h),h.v&&(c.clearTimeout(h.v),h.v=null),ul(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function _i(h){if(!Xc(h.h)&&!h.m){h.m=!0;var v=h.Ea;ae||I(),he||(ae(),he=!0),x.add(v,h),h.D=0}}function cl(h,v){return di(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ai(g(h.Ea,h,v),Bd(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Ur(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=V(Q),de(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=jd(this,B,v),w=Xt(this.J),lt(w,"RID",h),lt(w,"CVER",22),this.G&&lt(w,"X-HTTP-Session-Id",this.G),Qa(this,w),Q&&(this.R?v="headers="+Gi(wr(Q))+"&"+v:this.u&&Ga(w,this.u,Q)),Jc(this.h,B),this.Ra&&lt(w,"TYPE","init"),this.S?(lt(w,"$req",v),lt(w,"SID","null"),B.U=!0,li(B,w,null)):li(B,w,v),this.I=2}}else this.I==3&&(h?cu(this,h):this.i.length==0||Xc(this.h)||cu(this))};function cu(h,v){var w;v?w=v.l:w=h.V++;const S=Xt(h.J);lt(S,"SID",h.M),lt(S,"RID",w),lt(S,"AID",h.K),Qa(h,S),h.u&&h.o&&Ga(S,h.u,h.o),w=new Ur(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=jd(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Jc(h.h,w),li(w,S,v)}function Qa(h,v){h.H&&ke(h.H,function(w,S){lt(v,S,w)}),h.l&&ke({},function(w,S){lt(v,S,w)})}function jd(h,v,w){w=Math.min(h.i.length,w);const S=h.l?g(h.l.Ka,h.l,h):null;e:{var B=h.i;let Me=-1;for(;;){const zt=["count="+w];Me==-1?w>0?(Me=B[0].g,zt.push("ofs="+Me)):Me=0:zt.push("ofs="+Me);let st=!0;for(let St=0;St<w;St++){var Q=B[St].g;const Tr=B[St].map;if(Q-=Me,Q<0)Me=Math.max(0,B[St].g-100),st=!1;else try{Q="req"+Q+"_"||"";try{var ue=Tr instanceof Map?Tr:Object.entries(Tr);for(const[bi,Hr]of ue){let Gr=Hr;d(Hr)&&(Gr=Ss(Hr)),zt.push(Q+bi+"="+encodeURIComponent(Gr))}}catch(bi){throw zt.push(Q+"type="+encodeURIComponent("_badmap")),bi}}catch{S&&S(Tr)}}if(st){ue=zt.join("&");break e}}ue=void 0}return h=h.i.splice(0,w),v.G=h,ue}function Ud(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ae||I(),he||(ae(),he=!0),x.add(v,h),h.A=0}}function Wa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ai(g(h.Da,h),Bd(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Fd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ai(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Os(this),Fd(this))};function uu(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Fd(h){h.g=new Ur(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Xt(h.na);lt(v,"RID","rpc"),lt(v,"SID",h.M),lt(v,"AID",h.K),lt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&lt(v,"TO",h.ia),lt(v,"TYPE","xmlhttp"),Qa(h,v),h.u&&h.o&&Ga(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ba(Xt(v)),w.u=null,w.R=!0,tl(w,h)}n.Va=function(){this.C!=null&&(this.C=null,Os(this),Wa(this),Qt(19))};function ul(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function zd(h,v){var w=null;if(h.g==v){ul(h),uu(h),h.g=null;var S=2}else if(fi(h.h,v))w=v.G,Zc(h.h,v),S=1;else return;if(h.I!=0){if(v.o)if(S==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=h.D;S=el(),it(S,new si(S,w)),_i(h)}else Ud(h);else if(B=v.m,B==3||B==0&&v.X>0||!(S==1&&cl(h,v)||S==2&&Wa(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),B){case 1:vi(h,5);break;case 4:vi(h,10);break;case 3:vi(h,6);break;default:vi(h,2)}}}function Bd(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function vi(h,v){if(h.j.info("Error code "+v),v==2){var w=g(h.bb,h),S=h.Ua;const B=!S;S=new sr(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fn(S,"https"),Ba(S),B?zr(S.toString(),w):su(S.toString(),w)}else Qt(2);h.I=0,h.l&&h.l.pa(v),qd(h),ll(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function qd(h){if(h.I=0,h.ja=[],h.l){const v=eu(h.h);(v.length!=0||h.i.length!=0)&&(R(h.ja,v),R(h.ja,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.oa()}}function Hd(h,v,w){var S=w instanceof sr?Xt(w):new sr(w);if(S.g!="")v&&(S.g=v+"."+S.g),xs(S,S.u);else{var B=c.location;S=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const Q=new sr(null);S&&fn(Q,S),v&&(Q.g=v),B&&xs(Q,B),w&&(Q.h=w),S=Q}return w=h.G,v=h.wa,w&&v&&lt(S,w,v),lt(S,"VER",h.ka),Qa(h,S),S}function Gd(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new ft(new pi({ab:w})):new ft(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kd(){}n=Kd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Vs(){}Vs.prototype.g=function(h,v){return new jn(h,v)};function jn(h,v){Et.call(this),this.g=new Ps(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Qi(this)}E(jn,Et),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){lu(this.g)},jn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Ss(h),h=w);v.i.push(new Yt(v.Ya++,h)),v.I==3&&_i(v)},jn.prototype.N=function(){this.g.l=null,delete this.j,lu(this.g),delete this.g,jn.Z.N.call(this)};function $d(h){vn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E($d,vn);function Qd(){vr.call(this),this.status=1}E(Qd,vr);function Qi(h){this.g=h}E(Qi,Kd),Qi.prototype.ra=function(){it(this.g,"a")},Qi.prototype.qa=function(h){it(this.g,new $d(h))},Qi.prototype.pa=function(h){it(this.g,new Qd)},Qi.prototype.oa=function(){it(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,ex=function(){return new Vs},ZS=function(){return el()},JS=Ft,N_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fa.NO_ERROR=0,Fa.TIMEOUT=8,Fa.HTTP_ERROR=6,dm=Fa,Qc.COMPLETE="complete",XS=Qc,Sd.EventType=Lr,Lr.OPEN="a",Lr.CLOSE="b",Lr.ERROR="c",Lr.MESSAGE="d",Et.prototype.listen=Et.prototype.J,lh=Sd,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,YS=ft}).apply(typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{});const TA="@firebase/firestore",AA="4.9.3";class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");let Vc="12.7.0";const Ea=new rp("@firebase/firestore");function Ql(){return Ea.logLevel}function vM(n){Ea.setLogLevel(n)}function ie(n,...e){if(Ea.logLevel<=qe.DEBUG){const t=e.map(Kv);Ea.debug(`Firestore (${Vc}): ${n}`,...t)}}function Ht(n,...e){if(Ea.logLevel<=qe.ERROR){const t=e.map(Kv);Ea.error(`Firestore (${Vc}): ${n}`,...t)}}function zi(n,...e){if(Ea.logLevel<=qe.WARN){const t=e.map(Kv);Ea.warn(`Firestore (${Vc}): ${n}`,...t)}}function Kv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ye(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,tx(n,r,t)}function tx(n,e,t){let r=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ht(r),new Error(r)}function be(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||tx(e,a,r)}function bM(n,e){n||ye(57014,e)}function ge(n,e){return n}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class nx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class wM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TM{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){be(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rn,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rn)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new nx(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class AM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new AM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,It(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){be(this.o===void 0,3512);const r=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function xM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $v{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=xM(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function De(n,e){return n<e?-1:n>e?1:0}function D_(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return a_(a)===a_(l)?De(a,l):a_(a)?1:-1}return De(n.length,e.length)}const RM=55296,CM=57343;function a_(n){const e=n.charCodeAt(0);return e>=RM&&e<=CM}function uc(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}function rx(n){return n+"\0"}const SA="__name__";class Si{constructor(e,t,r){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ye(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Si.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const r=Si.isNumericId(e),a=Si.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Si.extractNumericId(e).compare(Si.extractNumericId(t)):D_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pa.fromString(e.substring(4,e.length-2))}}class He extends Si{construct(e,t,r){return new He(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new He(t)}static emptyPath(){return new He([])}}const NM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Si{construct(e,t,r){return new Ct(e,t,r)}static isValidIdentifier(e){return NM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===SA}static keyField(){return new Ct([SA])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(t)}static emptyPath(){return new Ct([])}}class fe{constructor(e){this.path=e}static fromPath(e){return new fe(He.fromString(e))}static fromName(e){return new fe(He.fromString(e).popFirst(5))}static empty(){return new fe(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new He(e.slice()))}}function Qv(n,e,t){if(!t)throw new re(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ix(n,e,t,r){if(e===!0&&r===!0)throw new re(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xA(n){if(!fe.isDocumentKey(n))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RA(n){if(fe.isDocumentKey(n))throw new re(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pp(n);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ax(n,e){if(e<=0)throw new re(K.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function sn(n,e){const t={typeString:n};return e&&(t.value=e),t}function sd(n,e){if(!sx(n))throw new re(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new re(K.INVALID_ARGUMENT,t);return!0}const CA=-62135596800,NA=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*NA);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<CA)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NA}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sd(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-CA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:sn("string",ot._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new ot(0,0))}static max(){return new Te(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hc=-1;class Vm{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function k_(n){return n.fields.find((e=>e.kind===2))}function po(n){return n.fields.filter((e=>e.kind!==2))}Vm.UNKNOWN_ID=-1;class fm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Mh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Mh(0,_r.min())}}function ox(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new _r(a,fe.empty(),e)}function lx(n){return new _r(n.readTime,n.key,hc)}class _r{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _r(Te.min(),fe.empty(),hc)}static max(){return new _r(Te.max(),fe.empty(),hc)}}function Wv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}const cx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ux{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ka(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==cx)throw n;ie("LocalStore","Unexpectedly lost primary lease")}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((a=>a?z.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++d,d===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new z(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}const fr="SimpleDb";class gp{static open(e,t,r,a){try{return new gp(t,e.transaction(a,r))}catch(l){throw new vh(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Rn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new vh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=Yv(r.target.error);this.S.reject(new vh(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ie(fr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kM(t)}}class Li{static delete(e){return ie(fr,"Removing database:",e),yo(pv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Ch())return!1;if(Li.F())return!0;const e=kt(),t=Li.M(e),r=0<t&&t<10,a=hx(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Li.M(kt())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ie(fr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{r(new vh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?r(new re(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new re(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new vh(e,c))},a.onupgradeneeded=l=>{ie(fr,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{ie(fr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=gp.open(this.db,e,l?"readonly":"readwrite",r),m=a(d).next((g=>(d.C(),g))).catch((g=>(d.abort(g),z.reject(g)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,g=m.name!=="FirebaseError"&&c<3;if(ie(fr,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class DM{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return yo(this.U.delete())}}class vh extends re{constructor(e,t){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(n){return n.name==="IndexedDbTransactionError"}class kM{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ie(fr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ie(fr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yo(r)}add(e){return ie(fr,"ADD",this.store.name,e,e),yo(this.store.add(e))}get(e){return yo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ie(fr,"GET",this.store.name,e,t),t)))}delete(e){return ie(fr,"DELETE",this.store.name,e),yo(this.store.delete(e))}count(){return ie(fr,"COUNT",this.store.name),yo(this.store.count())}J(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new z(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(r),c=[];return this.H(l,((d,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((a,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){ie(fr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const a=this.cursor(r);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.H(a,t)}te(e){const t=this.cursor({});return new z(((r,a)=>{t.onerror=l=>{const c=Yv(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():r()})):r()}}))}H(e,t){const r=[];return new z(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new DM(d),g=t(d.primaryKey,d.value,m);if(g instanceof z){const y=g.catch((E=>(m.done(),z.reject(E))));r.push(y)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function yo(n){return new z(((e,t)=>{n.onsuccess=r=>{const a=r.target.result;e(a)},n.onerror=r=>{const a=Yv(r.target.error);t(a)}}))}let DA=!1;function Yv(n){const e=Li.M(kt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DA||(DA=!0,setTimeout((()=>{throw r}),0)),r}}return n}const bh="IndexBackfiller";class PM{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ie(bh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ie(bh,`Documents written: ${t}`)}catch(t){Pa(t)?ie(bh,"Ignoring IndexedDB error during index backfill: ",t):await ka(t)}await this.re(6e4)}))}}class OM{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let a=t,l=!0;return z.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return ie(bh,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,r.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(ie(bh,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((a,l)=>{const c=lx(l);Wv(c,r)>0&&(r=c)})),new _r(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Jn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jn.ce=-1;const ga=-1;function ad(n){return n==null}function Lh(n){return n===0&&1/n==-1/0}function dx(n){return typeof n=="number"&&Number.isInteger(n)&&!Lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Mm="";function Vn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kA(e)),e=VM(n.get(t),e);return kA(e)}function VM(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Mm:t+="";break;default:t+=l}}return t}function kA(n){return n+Mm+""}function Oi(n){const e=n.length;if(be(e>=2,64408,{path:n}),e===2)return be(n.charAt(0)===Mm&&n.charAt(1)==="",56145,{path:n}),He.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const c=n.indexOf(Mm,l);switch((c<0||c>t)&&ye(50515,{path:n}),n.charAt(c+1)){case"":const d=n.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),r.push(m);break;case"":a+=n.substring(l,c),a+="\0";break;case"":a+=n.substring(l,c+1);break;default:ye(61167,{path:n})}l=c+2}return new He(r)}const go="remoteDocuments",od="owner",Bl="owner",jh="mutationQueues",MM="userId",Yr="mutations",PA="batchId",To="userMutationsIndex",OA=["userId","batchId"];function mm(n,e){return[n,Vn(e)]}function fx(n,e,t){return[n,Vn(e),t]}const LM={},dc="documentMutations",Lm="remoteDocumentsV14",jM=["prefixPath","collectionGroup","readTime","documentId"],pm="documentKeyIndex",UM=["prefixPath","collectionGroup","documentId"],mx="collectionGroupIndex",FM=["collectionGroup","readTime","prefixPath","documentId"],Uh="remoteDocumentGlobal",P_="remoteDocumentGlobalKey",fc="targets",px="queryTargetsIndex",zM=["canonicalId","targetId"],mc="targetDocuments",BM=["targetId","path"],Xv="documentTargetsIndex",qM=["path","targetId"],jm="targetGlobalKey",Co="targetGlobal",Fh="collectionParents",HM=["collectionId","parent"],pc="clientMetadata",GM="clientId",yp="bundles",KM="bundleId",_p="namedQueries",$M="name",Jv="indexConfiguration",QM="indexId",O_="collectionGroupIndex",WM="collectionGroup",Eh="indexState",YM=["indexId","uid"],gx="sequenceNumberIndex",XM=["uid","sequenceNumber"],wh="indexEntries",JM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yx="documentKeyIndex",ZM=["indexId","uid","orderedDocumentKey"],vp="documentOverlays",e5=["userId","collectionPath","documentId"],V_="collectionPathOverlayIndex",t5=["userId","collectionPath","largestBatchId"],_x="collectionGroupOverlayIndex",n5=["userId","collectionGroup","largestBatchId"],Zv="globals",r5="name",vx=[jh,Yr,dc,go,fc,od,Co,mc,pc,Uh,Fh,yp,_p],i5=[...vx,vp],bx=[jh,Yr,dc,Lm,fc,od,Co,mc,pc,Uh,Fh,yp,_p,vp],Ex=bx,eb=[...Ex,Jv,Eh,wh],s5=eb,wx=[...eb,Zv],a5=wx;class M_ extends ux{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(n,e){const t=ge(n);return Li.O(t.le,e)}function VA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Tx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class bt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tm(this.root,e,this.comparator,!0)}}class tm{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??In.RED,this.left=a??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new In(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MA(this.data.getIterator())}getIteratorFrom(e){return new MA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof dt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new dt(this.comparator);return t.data=e,t}}class MA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ql(n){return n.hasNext()?n.getNext():void 0}class Zn{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new dt(Ct.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function o5(){return typeof atob<"u"}class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ax("Invalid base64 string: "+l):l}})(e);return new Mt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const l5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(n){if(be(!!n,39018),typeof n=="string"){let e=0;const t=l5.exec(n);if(be(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ys(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}const Ix="server_timestamp",Sx="__type__",xx="__previous_value__",Rx="__local_write_time__";function bp(n){return(n?.mapValue?.fields||{})[Sx]?.stringValue===Ix}function Ep(n){const e=n.mapValue.fields[xx];return bp(e)?Ep(e):e}function zh(n){const e=gs(n.mapValue.fields[Rx].timestampValue);return new ot(e.seconds,e.nanos)}class c5{constructor(e,t,r,a,l,c,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const L_="(default)";class wa{constructor(e,t){this.projectId=e,this.database=t||L_}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===L_}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}const tb="__type__",Cx="__max__",ha={mapValue:{fields:{__type__:{stringValue:Cx}}}},nb="__vector__",gc="value",gm={nullValue:"NULL_VALUE"};function Ta(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:Nx(n)?9007199254740991:wp(n)?10:11:ye(28295,{value:n})}function Bi(n,e){if(n===e)return!0;const t=Ta(n);if(t!==Ta(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zh(n).isEqual(zh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=gs(a.timestampValue),d=gs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ys(a.bytesValue).isEqual(ys(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Rt(a.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(a.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Rt(a.integerValue)===Rt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Rt(a.doubleValue),d=Rt(l.doubleValue);return c===d?Lh(c)===Lh(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return uc(n.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(VA(c)!==VA(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Bi(c[m],d[m])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Bh(n,e){return(n.values||[]).find((t=>Bi(t,e)))!==void 0}function Aa(n,e){if(n===e)return 0;const t=Ta(n),r=Ta(e);if(t!==r)return De(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Rt(l.integerValue||l.doubleValue),m=Rt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return LA(n.timestampValue,e.timestampValue);case 4:return LA(zh(n),zh(e));case 5:return D_(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ys(l),m=ys(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=De(d[g],m[g]);if(y!==0)return y}return De(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=De(Rt(l.latitude),Rt(c.latitude));return d!==0?d:De(Rt(l.longitude),Rt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jA(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},g=d[gc]?.arrayValue,y=m[gc]?.arrayValue,E=De(g?.values?.length||0,y?.values?.length||0);return E!==0?E:jA(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ha.mapValue&&c===ha.mapValue)return 0;if(l===ha.mapValue)return 1;if(c===ha.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const T=D_(m[E],y[E]);if(T!==0)return T;const k=Aa(d[m[E]],g[y[E]]);if(k!==0)return k}return De(m.length,y.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function LA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=gs(n),r=gs(e),a=De(t.seconds,r.seconds);return a!==0?a:De(t.nanos,r.nanos)}function jA(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Aa(t[a],r[a]);if(l)return l}return De(t.length,r.length)}function yc(n){return j_(n)}function j_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=gs(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ys(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=j_(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${j_(t.fields[c])}`;return a+"}"})(n.mapValue):ye(61005,{value:n})}function ym(n){switch(Ta(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ep(n);return e?16+ym(e):16;case 5:return 2*n.stringValue.length;case 6:return ys(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+ym(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return Oa(r.fields,((l,c)=>{a+=l.length+ym(c)})),a})(n.mapValue);default:throw ye(13486,{value:n})}}function Mo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function U_(n){return!!n&&"integerValue"in n}function qh(n){return!!n&&"arrayValue"in n}function UA(n){return!!n&&"nullValue"in n}function FA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _m(n){return!!n&&"mapValue"in n}function wp(n){return(n?.mapValue?.fields||{})[tb]?.stringValue===nb}function Th(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Oa(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Th(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Th(n.arrayValue.values[t]);return e}return{...n}}function Nx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Cx}const Dx={mapValue:{fields:{[tb]:{stringValue:nb},[gc]:{arrayValue:{}}}}};function u5(n){return"nullValue"in n?gm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Mo(wa.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?wp(n)?Dx:{mapValue:{}}:ye(35942,{value:n})}function h5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Mo(wa.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Dx:"mapValue"in n?wp(n)?{mapValue:{}}:ha:ye(61959,{value:n})}function zA(n,e){const t=Aa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function BA(n,e){const t=Aa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_m(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}setAll(e){let t=Ct.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Th(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());_m(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];_m(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Oa(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Sn(Th(this.value))}}function kx(n){const e=[];return Oa(n.fields,((t,r)=>{const a=new Ct([t]);if(_m(r)){const l=kx(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Zn(e)}class At{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new At(e,0,Te.min(),Te.min(),Te.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,a){return new At(e,1,t,Te.min(),r,a,0)}static newNoDocument(e,t){return new At(e,2,t,Te.min(),Te.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Te.min(),Te.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,t){this.position=e,this.inclusive=t}}function qA(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=fe.comparator(fe.fromName(c.referenceValue),t.key):r=Aa(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function HA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bi(n.position[t],e.position[t]))return!1;return!0}class Hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function d5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Px{}class Qe extends Px{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new f5(e,t,r):t==="array-contains"?new g5(e,r):t==="in"?new Ux(e,r):t==="not-in"?new y5(e,r):t==="array-contains-any"?new _5(e,r):new Qe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new m5(e,r):new p5(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Aa(t,this.value)):t!==null&&Ta(this.value)===Ta(t)&&this.matchesComparison(Aa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends Px{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ht(e,t)}matches(e){return _c(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _c(n){return n.op==="and"}function F_(n){return n.op==="or"}function rb(n){return Ox(n)&&_c(n)}function Ox(n){for(const e of n.filters)if(e instanceof ht)return!1;return!0}function z_(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+yc(n.value);if(rb(n))return n.filters.map((e=>z_(e))).join(",");{const e=n.filters.map((t=>z_(t))).join(",");return`${n.op}(${e})`}}function Vx(n,e){return n instanceof Qe?(function(r,a){return a instanceof Qe&&r.op===a.op&&r.field.isEqual(a.field)&&Bi(r.value,a.value)})(n,e):n instanceof ht?(function(r,a){return a instanceof ht&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&Vx(c,a.filters[d])),!0):!1})(n,e):void ye(19439)}function Mx(n,e){const t=n.filters.concat(e);return ht.create(t,n.op)}function Lx(n){return n instanceof Qe?(function(t){return`${t.field.canonicalString()} ${t.op} ${yc(t.value)}`})(n):n instanceof ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(Lx).join(" ,")+"}"})(n):"Filter"}class f5 extends Qe{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class m5 extends Qe{constructor(e,t){super(e,"in",t),this.keys=jx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class p5 extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=jx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jx(n,e){return(e.arrayValue?.values||[]).map((t=>fe.fromName(t.referenceValue)))}class g5 extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qh(t)&&Bh(t.arrayValue,this.value)}}class Ux extends Qe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bh(this.value.arrayValue,t)}}class y5 extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bh(this.value.arrayValue,t)}}class _5 extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Bh(this.value.arrayValue,r)))}}class v5{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function B_(n,e=null,t=[],r=[],a=null,l=null,c=null){return new v5(n,e,t,r,a,l,c)}function Lo(n){const e=ge(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>z_(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>yc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>yc(r))).join(",")),e.Te=t}return e.Te}function ld(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Vx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HA(n.startAt,e.startAt)&&HA(n.endAt,e.endAt)}function Um(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Fm(n,e){return n.filters.filter((t=>t instanceof Qe&&t.field.isEqual(e)))}function GA(n,e,t){let r=gm,a=!0;for(const l of Fm(n,e)){let c=gm,d=!0;switch(l.op){case"<":case"<=":c=u5(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=gm}zA({value:r,inclusive:a},{value:c,inclusive:d})<0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];zA({value:r,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}function KA(n,e,t){let r=ha,a=!0;for(const l of Fm(n,e)){let c=ha,d=!0;switch(l.op){case">=":case">":c=h5(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=ha}BA({value:r,inclusive:a},{value:c,inclusive:d})>0&&(r=c,a=d)}if(t!==null){for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];BA({value:r,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(r=c,a=t.inclusive);break}}return{value:r,inclusive:a}}class bs{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Fx(n,e,t,r,a,l,c,d){return new bs(n,e,t,r,a,l,c,d)}function Mc(n){return new bs(n)}function $A(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ib(n){return n.collectionGroup!==null}function ic(n){const e=ge(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new dt(Ct.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Hh(l,r))})),t.has(Ct.keyField().canonicalString())||e.Ie.push(new Hh(Ct.keyField(),r))}return e.Ie}function Bn(n){const e=ge(n);return e.Ee||(e.Ee=b5(e,ic(n))),e.Ee}function b5(n,e){if(n.limitType==="F")return B_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Hh(a.field,l)}));const t=n.endAt?new Ia(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ia(n.startAt.position,n.startAt.inclusive):null;return B_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function q_(n,e){const t=n.filters.concat([e]);return new bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zm(n,e,t){return new bs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function cd(n,e){return ld(Bn(n),Bn(e))&&n.limitType===e.limitType}function zx(n){return`${Lo(Bn(n))}|lt:${n.limitType}`}function Wl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>Lx(a))).join(", ")}]`),ad(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>yc(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>yc(a))).join(",")),`Target(${r})`})(Bn(n))}; limitType=${n.limitType})`}function ud(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of ic(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const g=qA(c,d,m);return c.inclusive?g<=0:g<0})(r.startAt,ic(r),a)||r.endAt&&!(function(c,d,m){const g=qA(c,d,m);return c.inclusive?g>=0:g>0})(r.endAt,ic(r),a))})(n,e)}function Bx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qx(n){return(e,t)=>{let r=!1;for(const a of ic(n)){const l=E5(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function E5(n,e,t){const r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Aa(m,g):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:n.dir})}}class Es{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Oa(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return Tx(this.inner)}size(){return this.innerSize}}const w5=new bt(fe.comparator);function er(){return w5}const Hx=new bt(fe.comparator);function ch(...n){let e=Hx;for(const t of n)e=e.insert(t.key,t);return e}function Gx(n){let e=Hx;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Vi(){return Ah()}function Kx(){return Ah()}function Ah(){return new Es((n=>n.toString()),((n,e)=>n.isEqual(e)))}const T5=new bt(fe.comparator),A5=new dt(fe.comparator);function Ue(...n){let e=A5;for(const t of n)e=e.add(t);return e}const I5=new dt(De);function sb(){return I5}function ab(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function $x(n){return{integerValue:""+n}}function Qx(n,e){return dx(e)?$x(e):ab(n,e)}class Tp{constructor(){this._=void 0}}function S5(n,e,t){return n instanceof vc?(function(a,l){const c={fields:{[Sx]:{stringValue:Ix},[Rx]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&bp(l)&&(l=Ep(l)),l&&(c.fields[xx]=l),{mapValue:c}})(t,e):n instanceof jo?Yx(n,e):n instanceof Uo?Xx(n,e):(function(a,l){const c=Wx(a,l),d=QA(c)+QA(a.Ae);return U_(c)&&U_(a.Ae)?$x(d):ab(a.serializer,d)})(n,e)}function x5(n,e,t){return n instanceof jo?Yx(n,e):n instanceof Uo?Xx(n,e):t}function Wx(n,e){return n instanceof bc?(function(r){return U_(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class vc extends Tp{}class jo extends Tp{constructor(e){super(),this.elements=e}}function Yx(n,e){const t=Jx(e);for(const r of n.elements)t.some((a=>Bi(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Uo extends Tp{constructor(e){super(),this.elements=e}}function Xx(n,e){let t=Jx(e);for(const r of n.elements)t=t.filter((a=>!Bi(a,r)));return{arrayValue:{values:t}}}class bc extends Tp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function QA(n){return Rt(n.integerValue||n.doubleValue)}function Jx(n){return qh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hd{constructor(e,t){this.field=e,this.transform=t}}function R5(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof jo&&a instanceof jo||r instanceof Uo&&a instanceof Uo?uc(r.elements,a.elements,Bi):r instanceof bc&&a instanceof bc?Bi(r.Ae,a.Ae):r instanceof vc&&a instanceof vc})(n.transform,e.transform)}class C5{constructor(e,t){this.version=e,this.transformResults=t}}class Nt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ap{}function Zx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jc(n.key,Nt.none()):new Lc(n.key,n.data,Nt.none());{const t=n.data,r=Sn.empty();let a=new dt(Ct.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ws(n.key,r,new Zn(a.toArray()),Nt.none())}}function N5(n,e,t){n instanceof Lc?(function(a,l,c){const d=a.value.clone(),m=YA(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ws?(function(a,l,c){if(!vm(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=YA(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(eR(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ih(n,e,t,r){return n instanceof Lc?(function(l,c,d,m){if(!vm(l.precondition,c))return d;const g=l.value.clone(),y=XA(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,r):n instanceof ws?(function(l,c,d,m){if(!vm(l.precondition,c))return d;const g=XA(l.fieldTransforms,m,c),y=c.data;return y.setAll(eR(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(l,c,d){return vm(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function D5(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=Wx(r.transform,a||null);l!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,l))}return t||null}function WA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&uc(r,a,((l,c)=>R5(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lc extends Ap{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ws extends Ap{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function eR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function YA(n,e,t){const r=new Map;be(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,x5(c,d,t[a]))}return r}function XA(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,S5(l,c,e))}return r}class jc extends Ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ob extends Ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lb{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&N5(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ih(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Kx();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=Zx(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,((t,r)=>WA(t,r)))&&uc(this.baseMutations,e.baseMutations,((t,r)=>WA(t,r)))}}class cb{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){be(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return T5})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new cb(e,t,r,a)}}class ub{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class k5{constructor(e,t){this.count=e,this.unchangedNames=t}}var nn,Xe;function tR(n){switch(n){case K.OK:return ye(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function nR(n){if(n===void 0)return Ht("GRPC error has no .code"),K.UNKNOWN;switch(n){case nn.OK:return K.OK;case nn.CANCELLED:return K.CANCELLED;case nn.UNKNOWN:return K.UNKNOWN;case nn.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case nn.INTERNAL:return K.INTERNAL;case nn.UNAVAILABLE:return K.UNAVAILABLE;case nn.UNAUTHENTICATED:return K.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case nn.NOT_FOUND:return K.NOT_FOUND;case nn.ALREADY_EXISTS:return K.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return K.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case nn.ABORTED:return K.ABORTED;case nn.OUT_OF_RANGE:return K.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return K.UNIMPLEMENTED;case nn.DATA_LOSS:return K.DATA_LOSS;default:return ye(39323,{code:n})}}(Xe=nn||(nn={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function rR(){return new TextEncoder}const P5=new pa([4294967295,4294967295],0);function JA(n){const e=rR().encode(n),t=new WS;return t.update(e),new Uint8Array(t.digest())}function ZA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new pa([t,r],0),new pa([a,l],0)]}class hb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new uh(`Invalid padding: ${t}`);if(r<0)throw new uh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new uh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=pa.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(pa.fromNumber(r)));return a.compare(P5)===1&&(a=new pa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JA(e),[r,a]=ZA(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new hb(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=JA(e),[r,a]=ZA(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dd(Te.min(),a,new bt(De),er(),Ue())}}class fd{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new fd(r,t,Ue(),Ue(),Ue())}}class bm{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class iR{constructor(e,t){this.targetId=e,this.Ce=t}}class sR{constructor(e,t,r=Mt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class e1{constructor(){this.ve=0,this.Fe=t1(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ye(38017,{changeType:l})}})),new fd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=t1()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O5{constructor(e){this.Ge=e,this.ze=new Map,this.je=er(),this.Je=nm(),this.He=nm(),this.Ye=new bt(De)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Um(l))if(r===0){const c=new fe(l.path);this.et(t,c,At.newNoDocument(c,Te.min()))}else be(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ys(r).toUint8Array()}catch(m){if(m instanceof Ax)return zi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new hb(c,a,l)}catch(m){return zi(m instanceof uh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Um(d.target)){const m=new fe(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,At.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Ue();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new dd(e,t,this.Ye,this.je,r);return this.je=er(),this.Je=nm(),this.He=nm(),this.Ye=new bt(De),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new e1,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new dt(De),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new dt(De),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new e1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nm(){return new bt(fe.comparator)}function t1(){return new bt(fe.comparator)}const V5={asc:"ASCENDING",desc:"DESCENDING"},M5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L5={and:"AND",or:"OR"};class j5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function H_(n,e){return n.useProto3Json||ad(e)?e:{value:e}}function Ec(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function U5(n,e){return Ec(n,e.toTimestamp())}function Gt(n){return be(!!n,49232),Te.fromTimestamp((function(t){const r=gs(t);return new ot(r.seconds,r.nanos)})(n))}function db(n,e){return G_(n,e).canonicalString()}function G_(n,e){const t=(function(a){return new He(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function oR(n){const e=He.fromString(n);return be(yR(e),10190,{key:e.toString()}),e}function Gh(n,e){return db(n.databaseId,e.path)}function ji(n,e){const t=oR(e);if(t.get(1)!==n.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(uR(t))}function lR(n,e){return db(n.databaseId,e)}function cR(n){const e=oR(n);return e.length===4?He.emptyPath():uR(e)}function K_(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uR(n){return be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function n1(n,e,t){return{name:Gh(n,e),fields:t.value.mapValue.fields}}function hR(n,e,t){const r=ji(n,e.name),a=Gt(e.updateTime),l=e.createTime?Gt(e.createTime):Te.min(),c=new Sn({mapValue:{fields:e.fields}}),d=At.newFoundDocument(r,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function F5(n,e){return"found"in e?(function(r,a){be(!!a.found,43571),a.found.name,a.found.updateTime;const l=ji(r,a.found.name),c=Gt(a.found.updateTime),d=a.found.createTime?Gt(a.found.createTime):Te.min(),m=new Sn({mapValue:{fields:a.found.fields}});return At.newFoundDocument(l,c,d,m)})(n,e):"missing"in e?(function(r,a){be(!!a.missing,3894),be(!!a.readTime,22933);const l=ji(r,a.missing),c=Gt(a.readTime);return At.newNoDocument(l,c)})(n,e):ye(7234,{result:e})}function z5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ye(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(be(y===void 0||typeof y=="string",58123),Mt.fromBase64String(y||"")):(be(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Mt.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?K.UNKNOWN:nR(g.code);return new re(y,g.message||"")})(c);t=new sR(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=ji(n,r.document.name),l=Gt(r.document.updateTime),c=r.document.createTime?Gt(r.document.createTime):Te.min(),d=new Sn({mapValue:{fields:r.document.fields}}),m=At.newFoundDocument(a,l,c,d),g=r.targetIds||[],y=r.removedTargetIds||[];t=new bm(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=ji(n,r.document),l=r.readTime?Gt(r.readTime):Te.min(),c=At.newNoDocument(a,l),d=r.removedTargetIds||[];t=new bm([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=ji(n,r.document),l=r.removedTargetIds||[];t=new bm([],l,a,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new k5(a,l),d=r.targetId;t=new iR(d,c)}}return t}function Kh(n,e){let t;if(e instanceof Lc)t={update:n1(n,e.key,e.value)};else if(e instanceof jc)t={delete:Gh(n,e.key)};else if(e instanceof ws)t={update:n1(n,e.key,e.data),updateMask:$5(e.fieldMask)};else{if(!(e instanceof ob))return ye(16599,{Vt:e.type});t={verify:Gh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof vc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Uo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof bc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw ye(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:U5(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ye(27497)})(n,e.precondition)),t}function $_(n,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Nt.updateTime(Gt(l.updateTime)):l.exists!==void 0?Nt.exists(l.exists):Nt.none()})(e.currentDocument):Nt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)be(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new vc;else if("appendMissingElements"in d){const y=d.appendMissingElements.values||[];m=new jo(y)}else if("removeAllFromArray"in d){const y=d.removeAllFromArray.values||[];m=new Uo(y)}else"increment"in d?m=new bc(c,d.increment):ye(16584,{proto:d});const g=Ct.fromServerFormat(d.fieldPath);return new hd(g,m)})(n,a))):[];if(e.update){e.update.name;const a=ji(n,e.update.name),l=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const g=m.fieldPaths||[];return new Zn(g.map((y=>Ct.fromServerFormat(y))))})(e.updateMask);return new ws(a,l,c,t,r)}return new Lc(a,l,t,r)}if(e.delete){const a=ji(n,e.delete);return new jc(a,t)}if(e.verify){const a=ji(n,e.verify);return new ob(a,t)}return ye(1463,{proto:e})}function B5(n,e){return n&&n.length>0?(be(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Gt(a.updateTime):Gt(l);return c.isEqual(Te.min())&&(c=Gt(l)),new C5(c,a.transformResults||[])})(t,e)))):[]}function dR(n,e){return{documents:[lR(n,e.path)]}}function fR(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lR(n,a);const l=(function(g){if(g.length!==0)return gR(ht.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(T){return{field:Yl(T.field),direction:H5(T.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=H_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function mR(n){let e=cR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){be(r===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const T=pR(E);return T instanceof ht&&rb(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(R){return new Hh(Xl(R.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let T;return T=typeof E=="object"?E.value:E,ad(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(E){const T=!!E.before,k=E.values||[];return new Ia(k,T)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const T=!E.before,k=E.values||[];return new Ia(k,T)})(t.endAt)),Fx(e,a,c,l,d,"F",m,g)}function q5(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Xl(t.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Xl(t.unaryFilter.field);return Qe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Xl(t.unaryFilter.field);return Qe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Xl(t.unaryFilter.field);return Qe.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Qe.create(Xl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ht.create(t.compositeFilter.filters.map((r=>pR(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function H5(n){return V5[n]}function G5(n){return M5[n]}function K5(n){return L5[n]}function Yl(n){return{fieldPath:n.canonicalString()}}function Xl(n){return Ct.fromServerFormat(n.fieldPath)}function gR(n){return n instanceof Qe?(function(t){if(t.op==="=="){if(FA(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NAN"}};if(UA(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FA(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NAN"}};if(UA(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(t.field),op:G5(t.op),value:t.value}}})(n):n instanceof ht?(function(t){const r=t.getFilters().map((a=>gR(a)));return r.length===1?r[0]:{compositeFilter:{op:K5(t.op),filters:r}}})(n):ye(54877,{filter:n})}function $5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class hs{constructor(e,t,r,a,l=Te.min(),c=Te.min(),d=Mt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _R{constructor(e){this.yt=e}}function Q5(n,e){let t;if(e.document)t=hR(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),a=zo(e.noDocument.readTime);t=At.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const r=fe.fromSegments(e.unknownDocument.path),a=zo(e.unknownDocument.version);t=At.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new ot(a[0],a[1]);return Te.fromTimestamp(l)})(e.readTime)),t}function r1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,c){return{name:Gh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Ec(l,c.version.toTimestamp()),createTime:Ec(l,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fo(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Fo(e.version)}}return r}function Bm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fo(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zo(n){const e=new ot(n.seconds,n.nanoseconds);return Te.fromTimestamp(e)}function _o(n,e){const t=(e.baseMutations||[]).map((l=>$_(n.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>$_(n.yt,l))),a=ot.fromMillis(e.localWriteTimeMs);return new lb(e.batchId,a,t,r)}function hh(n){const e=zo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?zo(n.lastLimboFreeSnapshotVersion):Te.min();let r;return r=(function(l){return l.documents!==void 0})(n.query)?(function(l){const c=l.documents.length;return be(c===1,1966,{count:c}),Bn(Mc(cR(l.documents[0])))})(n.query):(function(l){return Bn(mR(l))})(n.query),new hs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Mt.fromBase64String(n.resumeToken))}function vR(n,e){const t=Fo(e.snapshotVersion),r=Fo(e.lastLimboFreeSnapshotVersion);let a;a=Um(e.target)?dR(n.yt,e.target):fR(n.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function fb(n){const e=mR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zm(e,e.limit,"L"):e}function o_(n,e){return new ub(e.largestBatchId,$_(n.yt,e.overlayMutation))}function i1(n,e){const t=e.path.lastSegment();return[n,Vn(e.path.popLast()),t]}function s1(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fo(r.readTime),documentKey:Vn(r.documentKey.path),largestBatchId:r.largestBatchId}}class W5{getBundleMetadata(e,t){return a1(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:zo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return a1(e).put((function(a){return{bundleId:a.id,createTime:Fo(Gt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return o1(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:fb(l.bundledQuery),readTime:zo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return o1(e).put((function(a){return{name:a.name,readTime:Fo(Gt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function a1(n){return hn(n,yp)}function o1(n){return hn(n,_p)}class Ip{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Ip(e,r)}getOverlay(e,t){return Zu(e).get(i1(this.userId,t)).next((r=>r?o_(this.serializer,r):null))}getOverlays(e,t){const r=Vi();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,c)=>{const d=new ub(t,c);a.push(this.St(e,d))})),z.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((c=>a.add(Vn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(Zu(e).Z(V_,d))})),z.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Vi(),l=Vn(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Zu(e).J(V_,c).next((d=>{for(const m of d){const g=o_(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Vi();let c;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zu(e).ee({index:_x,range:d},((m,g,y)=>{const E=o_(this.serializer,g);l.size()<a||E.largestBatchId===c?(l.set(E.getKey(),E),c=E.largestBatchId):y.done()})).next((()=>l))}St(e,t){return Zu(e).put((function(a,l,c){const[d,m,g]=i1(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Kh(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Zu(n){return hn(n,vp)}class Y5{bt(e){return hn(e,Zv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Mt.fromUint8Array(r):Mt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Rt(e.integerValue));else if("doubleValue"in e){const r=Rt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Lh(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=gs(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ys(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Nx(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):wp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const a of Object.keys(r))this.Ot(a,t),this.Ct(r[a],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const a=gc,l=r[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Rt(l)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const a of r)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}vo.Kt=new vo;const Hl=255;function X5(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function l1(n){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const c=X5(255&r[l]);if(a+=c,c!==8)break}return a})(n);return Math.ceil(e/8)}class J5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),r=l1(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),r=l1(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(Hl),this.sn(255)}_n(){this.an(Hl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Hl?(this.sn(Hl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Hl?(this.an(Hl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class Z5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class e6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class eh{constructor(){this.cn=new J5,this.ln=new Z5(this.cn),this.hn=new e6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class bo{constructor(e,t,r,a){this.Tn=e,this.In=t,this.En=r,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new bo(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Em(this.En),directionalValue:Em(this.dn),orderedDocumentKey:Em(t),documentKey:r.path.toArray()}}Vn(e,t,r){const a=this.Rn(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function sa(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=c1(n.En,e.En),t!==0?t:(t=c1(n.dn,e.dn),t!==0?t:fe.comparator(n.In,e.In)))}function c1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Em(n){return MI()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(n):n}function u1(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(n)}class h1{constructor(e){this.mn=new dt(((t,r)=>Ct.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(be(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=k_(e);if(t!==void 0&&!this.wn(t))return!1;const r=po(e);let a=new Set,l=0,c=0;for(;l<r.length&&this.wn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=r[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<r.length;++l){const d=r[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new dt(Ct.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fm(r.field,r.dir==="asc"?0:1)));return new Vm(Vm.UNKNOWN_ID,this.collectionId,t,Mh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function bR(n){if(be(n instanceof Qe||n instanceof ht,20012),n instanceof Qe){if(n instanceof Ux){const t=n.value.arrayValue?.values?.map((r=>Qe.create(n.field,"==",r)))||[];return ht.create(t,"or")}return n}const e=n.filters.map((t=>bR(t)));return ht.create(e,n.op)}function t6(n){if(n.getFilters().length===0)return[];const e=Y_(bR(n));return be(ER(e),7391),Q_(e)||W_(e)?[e]:e.getFilters()}function Q_(n){return n instanceof Qe}function W_(n){return n instanceof ht&&rb(n)}function ER(n){return Q_(n)||W_(n)||(function(t){if(t instanceof ht&&F_(t)){for(const r of t.getFilters())if(!Q_(r)&&!W_(r))return!1;return!0}return!1})(n)}function Y_(n){if(be(n instanceof Qe||n instanceof ht,34018),n instanceof Qe)return n;if(n.filters.length===1)return Y_(n.filters[0]);const e=n.filters.map((r=>Y_(r)));let t=ht.create(e,n.op);return t=qm(t),ER(t)?t:(be(t instanceof ht,64498),be(_c(t),40251),be(t.filters.length>1,57927),t.filters.reduce(((r,a)=>mb(r,a))))}function mb(n,e){let t;return be(n instanceof Qe||n instanceof ht,38388),be(e instanceof Qe||e instanceof ht,25473),t=n instanceof Qe?e instanceof Qe?(function(a,l){return ht.create([a,l],"and")})(n,e):d1(n,e):e instanceof Qe?d1(e,n):(function(a,l){if(be(a.filters.length>0&&l.filters.length>0,48005),_c(a)&&_c(l))return Mx(a,l.getFilters());const c=F_(a)?a:l,d=F_(a)?l:a,m=c.filters.map((g=>mb(g,d)));return ht.create(m,"or")})(n,e),qm(t)}function d1(n,e){if(_c(e))return Mx(e,n.getFilters());{const t=e.filters.map((r=>mb(n,r)));return ht.create(t,"or")}}function qm(n){if(be(n instanceof Qe||n instanceof ht,11850),n instanceof Qe)return n;const e=n.getFilters();if(e.length===1)return qm(e[0]);if(Ox(n))return n;const t=e.map((a=>qm(a))),r=[];return t.forEach((a=>{a instanceof Qe?r.push(a):a instanceof ht&&(a.op===n.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:ht.create(r,n.op)}class n6{constructor(){this.Cn=new pb}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(_r.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(_r.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class pb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new dt(He.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new dt(He.comparator)).toArray()}}const f1="IndexedDbIndexManager",rm=new Uint8Array(0);class r6{constructor(e,t){this.databaseId=t,this.vn=new pb,this.Fn=new Es((r=>Lo(r)),((r,a)=>ld(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Vn(a)};return m1(e).put(l)}return z.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[rx(t),""],!1,!0);return m1(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;r.push(Oi(c.parent))}return r}))}addFieldIndex(e,t){const r=th(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const c=Kl(e);return l.next((d=>{c.put(s1(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=th(e),a=Kl(e),l=Gl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=th(e),r=Gl(e),a=Kl(e);return t.Z().next((()=>r.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return z.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new h1(r).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Gl(e);let a=!0;const l=new Map;return z.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Ue();const d=[];return z.forEach(l,((m,g)=>{ie(f1,`Using index ${(function(te){return`id=${te.indexId}|cg=${te.collectionGroup}|f=${te.fields.map((_e=>`${_e.fieldPath}:${_e.kind}`)).join(",")}`})(m)} to execute ${Lo(t)}`);const y=(function(te,_e){const ae=k_(_e);if(ae===void 0)return null;for(const he of Fm(te,ae.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null})(g,m),E=(function(te,_e){const ae=new Map;for(const he of po(_e))for(const x of Fm(te,he.fieldPath))switch(x.op){case"==":case"in":ae.set(he.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ae.set(he.fieldPath.canonicalString(),x.value),Array.from(ae.values())}return null})(g,m),T=(function(te,_e){const ae=[];let he=!0;for(const x of po(_e)){const I=x.kind===0?GA(te,x.fieldPath,te.startAt):KA(te,x.fieldPath,te.startAt);ae.push(I.value),he&&(he=I.inclusive)}return new Ia(ae,he)})(g,m),k=(function(te,_e){const ae=[];let he=!0;for(const x of po(_e)){const I=x.kind===0?KA(te,x.fieldPath,te.endAt):GA(te,x.fieldPath,te.endAt);ae.push(I.value),he&&(he=I.inclusive)}return new Ia(ae,he)})(g,m),R=this.On(m,g,T),j=this.On(m,g,k),U=this.Nn(m,g,E),se=this.Bn(m.indexId,y,R,T.inclusive,j,k.inclusive,U);return z.forEach(se,(le=>r.Y(le,t.limit).next((te=>{te.forEach((_e=>{const ae=fe.fromSegments(_e.documentKey);c.has(ae)||(c=c.add(ae),d.push(ae))}))}))))})).next((()=>d))}return z.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=t6(ht.create(e.filters,"and")).map((r=>B_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),y=[];for(let E=0;E<m;++E){const T=t?this.Ln(t[E/g]):rm,k=this.kn(e,T,r[E%g],a),R=this.qn(e,T,l[E%g],c),j=d.map((U=>this.kn(e,T,U,!0)));y.push(...this.createRange(k,R,j))}return y}kn(e,t,r,a){const l=new bo(e,fe.empty(),t,r);return a?l:l.An()}qn(e,t,r,a){const l=new bo(e,fe.empty(),t,r);return a?l.An():l}xn(e,t){const r=new h1(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)r.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let r=2;const a=this.Mn(t);return z.forEach(a,(l=>this.xn(e,l).next((c=>{c?r!==0&&c.fields.length<(function(m){let g=new dt(Ct.comparator),y=!1;for(const E of m.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?y=!0:g=g.add(T.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(y?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&r===2?1:r))}Qn(e,t){const r=new eh;for(const a of po(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=r.Pn(a.kind);vo.Kt.Dt(l,c)}return r.un()}Ln(e){const t=new eh;return vo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new eh;return vo.Kt.Dt(Mo(this.databaseId,t),r.Pn((function(l){const c=po(l);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let a=[];a.push(new eh);let l=0;for(const c of po(e)){const d=r[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&qh(d))a=this.Kn(a,c,d);else{const g=m.Pn(c.kind);vo.Kt.Dt(d,g)}}return this.Wn(a)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const a=[...e],l=[];for(const c of r.arrayValue.values||[])for(const d of a){const m=new eh;m.seed(d.un()),vo.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((r=>r instanceof Qe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=th(e),a=Kl(e);return(t?r.J(O_,IDBKeyRange.bound(t,t)):r.J()).next((l=>{const c=[];return z.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(y,E){const T=E?new Mh(E.sequenceNumber,new _r(zo(E.readTime),new fe(Oi(E.documentKey)),E.largestBatchId)):Mh.empty(),k=y.fields.map((([R,j])=>new fm(Ct.fromServerFormat(R),j)));return new Vm(y.indexId,y.collectionGroup,k,T)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:De(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=th(e),l=Kl(e);return this.Gn(e).next((c=>a.J(O_,IDBKeyRange.bound(t,t)).next((d=>z.forEach(d,(m=>l.put(s1(m.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((a,l)=>{const c=r.get(a.collectionGroup);return(c?z.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(r.set(a.collectionGroup,d),z.forEach(d,(m=>this.zn(e,a,m).next((g=>{const y=this.jn(l,m);return g.isEqual(y)?z.resolve():this.Jn(e,l,m,g,y)})))))))}))}Hn(e,t,r,a){return Gl(e).put(a.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,a){return Gl(e).delete(a.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const a=Gl(e);let l=new dt(sa);return a.ee({index:yx,range:IDBKeyRange.only([r.indexId,this.uid,Em(this.$n(r,t))])},((c,d)=>{l=l.add(new bo(r.indexId,t,u1(d.arrayValue),u1(d.directionalValue)))})).next((()=>l))}jn(e,t){let r=new dt(sa);const a=this.Qn(t,e);if(a==null)return r;const l=k_(t);if(l!=null){const c=e.data.field(l.fieldPath);if(qh(c))for(const d of c.arrayValue.values||[])r=r.add(new bo(t.indexId,e.key,this.Ln(d),a))}else r=r.add(new bo(t.indexId,e.key,rm,a));return r}Jn(e,t,r,a,l){ie(f1,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,g,y,E,T){const k=m.getIterator(),R=g.getIterator();let j=ql(k),U=ql(R);for(;j||U;){let se=!1,le=!1;if(j&&U){const te=y(j,U);te<0?le=!0:te>0&&(se=!0)}else j!=null?le=!0:se=!0;se?(E(U),U=ql(R)):le?(T(j),j=ql(k)):(j=ql(k),U=ql(R))}})(a,l,sa,(d=>{c.push(this.Hn(e,t,r,d))}),(d=>{c.push(this.Yn(e,t,r,d))})),z.waitFor(c)}Gn(e){let t=1;return Kl(e).ee({index:gx,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,d)=>sa(c,d))).filter(((c,d,m)=>!d||sa(c,m[d-1])!==0));const a=[];a.push(e);for(const c of r){const d=sa(c,e),m=sa(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,rm,fe.empty()),m=a[c+1].Vn(this.uid,rm,fe.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return sa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(p1)}getMinOffset(e,t){return z.mapArray(this.Mn(t),(r=>this.xn(e,r).next((a=>a||ye(44426))))).next(p1)}}function m1(n){return hn(n,Fh)}function Gl(n){return hn(n,wh)}function th(n){return hn(n,Jv)}function Kl(n){return hn(n,Eh)}function p1(n){be(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const a=n[r].indexState.offset;Wv(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new _r(e.readTime,e.documentKey,t)}const g1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wR=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function TR(n,e,t){const r=n.store(Yr),a=n.store(dc),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=r.ee({range:c},((y,E,T)=>(d++,T.delete())));l.push(m.next((()=>{be(d===1,47070,{batchId:t.batchId})})));const g=[];for(const y of t.mutations){const E=fx(e,y.key.path,t.batchId);l.push(a.delete(E)),g.push(y.key)}return z.waitFor(l).next((()=>g))}function Hm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(wR,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);class Sp{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Xn={}}static wt(e,t,r,a){be(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Sp(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).ee({index:To,range:r},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Jl(e),c=aa(e);return c.add({}).next((d=>{be(typeof d=="number",49019);const m=new lb(d,t,r,a),g=(function(k,R,j){const U=j.baseMutations.map((le=>Kh(k.yt,le))),se=j.mutations.map((le=>Kh(k.yt,le)));return{userId:R,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:U,mutations:se}})(this.serializer,this.userId,m),y=[];let E=new dt(((T,k)=>De(T.canonicalString(),k.canonicalString())));for(const T of a){const k=fx(this.userId,T.key.path,d);E=E.add(T.key.path.popLast()),y.push(c.put(g)),y.push(l.put(k,LM))}return E.forEach((T=>{y.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Xn[d]=m.keys()})),z.waitFor(y).next((()=>m))}))}lookupMutationBatch(e,t){return aa(e).get(t).next((r=>r?(be(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),_o(this.serializer,r)):null))}er(e,t){return this.Xn[t]?z.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return aa(e).ee({index:To,range:a},((c,d,m)=>{d.userId===this.userId&&(be(d.batchId>=r,47524,{tr:r}),l=_o(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ga;return aa(e).ee({index:To,range:t,reverse:!0},((a,l,c)=>{r=l.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ga],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).J(To,t).next((r=>r.map((a=>_o(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=mm(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Jl(e).ee({range:a},((c,d,m)=>{const[g,y,E]=c,T=Oi(y);if(g===this.userId&&t.path.isEqual(T))return aa(e).get(E).next((k=>{if(!k)throw ye(61480,{nr:c,batchId:E});be(k.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:k.userId,batchId:E}),l.push(_o(this.serializer,k))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dt(De);const a=[];return t.forEach((l=>{const c=mm(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Jl(e).ee({range:d},((g,y,E)=>{const[T,k,R]=g,j=Oi(k);T===this.userId&&l.path.isEqual(j)?r=r.add(R):E.done()}));a.push(m)})),z.waitFor(a).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=mm(this.userId,r),c=IDBKeyRange.lowerBound(l);let d=new dt(De);return Jl(e).ee({range:c},((m,g,y)=>{const[E,T,k]=m,R=Oi(T);E===this.userId&&r.isPrefixOf(R)?R.length===a&&(d=d.add(k)):y.done()})).next((()=>this.rr(e,d)))}rr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(aa(e).get(l).next((c=>{if(c===null)throw ye(35274,{batchId:l});be(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),r.push(_o(this.serializer,c))})))})),z.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return TR(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),z.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Jl(e).ee({range:r},((l,c,d)=>{if(l[0]===this.userId){const m=Oi(l[1]);a.push(m)}else d.done()})).next((()=>{be(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return AR(e,this.userId,t)}_r(e){return IR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ga,lastStreamToken:""}))}}function AR(n,e,t){const r=mm(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Jl(n).ee({range:l,X:!0},((d,m,g)=>{const[y,E,T]=d;y===e&&E===a&&(c=!0),g.done()})).next((()=>c))}function aa(n){return hn(n,Yr)}function Jl(n){return hn(n,dc)}function IR(n){return hn(n,jh)}class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}class i6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Bo(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Te.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$l(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(be(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return $l(e).ee(((c,d)=>{const m=hh(d);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>z.waitFor(l))).next((()=>a))}forEachTarget(e,t){return $l(e).ee(((r,a)=>{const l=hh(a);t(l)}))}lr(e){return y1(e).get(jm).next((t=>(be(t!==null,2888),t)))}hr(e,t){return y1(e).put(jm,t)}Pr(e,t){return $l(e).put(vR(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Lo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return $l(e).ee({range:a,index:px},((c,d,m)=>{const g=hh(d);ld(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=ca(e);return t.forEach((c=>{const d=Vn(c.path);a.push(l.put({targetId:r,path:d})),a.push(this.referenceDelegate.addReference(e,r,c))})),z.waitFor(a)}removeMatchingKeys(e,t,r){const a=ca(e);return z.forEach(t,(l=>{const c=Vn(l.path);return z.waitFor([a.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=ca(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=ca(e);let l=Ue();return a.ee({range:r,X:!0},((c,d,m)=>{const g=Oi(c[1]),y=new fe(g);l=l.add(y)})).next((()=>l))}containsKey(e,t){const r=Vn(t.path),a=IDBKeyRange.bound([r],[rx(r)],!1,!0);let l=0;return ca(e).ee({index:Xv,X:!0,range:a},(([c,d],m,g)=>{c!==0&&(l++,g.done())})).next((()=>l>0))}At(e,t){return $l(e).get(t).next((r=>r?hh(r):null))}}function $l(n){return hn(n,fc)}function y1(n){return hn(n,Co)}function ca(n){return hn(n,mc)}const _1="LruGarbageCollector",s6=1048576;function v1([n,e],[t,r]){const a=De(n,t);return a===0?De(e,r):a}class a6{constructor(e){this.Ir=e,this.buffer=new dt(v1),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();v1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(_1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pa(t)?ie(_1,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Vr(3e5)}))}}class o6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Jn.ce);const r=new a6(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(g1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,d=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(g=Date.now(),Ql()<=qe.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function xR(n,e){return new o6(n,e)}class l6{constructor(e,t){this.db=e,this.garbageCollector=xR(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,a)=>t(a)))}addReference(e,t,r){return im(e,r)}removeReference(e,t,r){return im(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return im(e,t)}br(e,t){return(function(a,l){let c=!1;return IR(a).te((d=>AR(a,d,l).next((m=>(m&&(c=!0),z.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const m=this.br(e,c).next((g=>{if(!g)return l++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Te.min()),ca(e).delete((function(E){return[0,Vn(E.path)]})(c)))))}));a.push(m)}})).next((()=>z.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return im(e,t)}Sr(e,t){const r=ca(e);let a,l=Jn.ce;return r.ee({index:Xv},(([c,d],{path:m,sequenceNumber:g})=>{c===0?(l!==Jn.ce&&t(new fe(Oi(a)),l),l=g,a=m):l=Jn.ce})).next((()=>{l!==Jn.ce&&t(new fe(Oi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function im(n,e){return ca(n).put((function(r,a){return{targetId:0,path:Vn(r.path),sequenceNumber:a}})(e,n.currentSequenceNumber))}class RR{constructor(){this.changes=new Es((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class c6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fo(e).put(r)}removeEntry(e,t,r){return fo(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Bm(c),d[d.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=At.newInvalidDocument(t);return fo(e).ee({index:pm,range:IDBKeyRange.only(nh(t))},((a,l)=>{r=this.Cr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:At.newInvalidDocument(t)};return fo(e).ee({index:pm,range:IDBKeyRange.only(nh(t))},((a,l)=>{r={document:this.Cr(t,l),size:Hm(l)}})).next((()=>r))}getEntries(e,t){let r=er();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);r=r.insert(a,c)})).next((()=>r))}Mr(e,t){let r=er(),a=new bt(fe.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);r=r.insert(l,d),a=a.insert(l,Hm(c))})).next((()=>({documents:r,Or:a})))}Fr(e,t,r){if(t.isEmpty())return z.resolve();let a=new dt(w1);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(nh(a.first()),nh(a.last())),c=a.getIterator();let d=c.getNext();return fo(e).ee({index:pm,range:l},((m,g,y)=>{const E=fe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;d&&w1(d,E)<0;)r(d,null),d=c.getNext();d&&d.isEqual(E)&&(r(d,g),d=c.hasNext()?c.getNext():null),d?y.j(nh(d)):y.done()})).next((()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Bm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fo(e).J(IDBKeyRange.bound(d,m,!0)).next((g=>{l?.incrementDocumentReadCount(g.length);let y=er();for(const E of g){const T=this.Cr(fe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(ud(t,T)||a.has(T.key))&&(y=y.insert(T.key,T))}return y}))}getAllFromCollectionGroup(e,t,r,a){let l=er();const c=E1(t,r),d=E1(t,_r.max());return fo(e).ee({index:mx,range:IDBKeyRange.bound(c,d,!0)},((m,g,y)=>{const E=this.Cr(fe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(E.key,E),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(e){return new u6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return b1(e).get(P_).next((t=>(be(!!t,20021),t)))}Dr(e,t){return b1(e).put(P_,t)}Cr(e,t){if(t){const r=Q5(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Te.min())))return r}return At.newInvalidDocument(e)}}function CR(n){return new c6(n)}class u6 extends RR{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Es((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new dt(((l,c)=>De(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=r1(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=Hm(m);r+=g-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(r-=d.size,this.trackRemovals){const m=r1(this.Nr.serializer,c.convertToNoDocument(Te.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:r.get(l).readTime})})),r)))}}function b1(n){return hn(n,Uh)}function fo(n){return hn(n,Lm)}function nh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function E1(n,e){const t=e.documentKey.path.toArray();return[n,Bm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function w1(n,e){const t=n.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=De(t[l],r[l]),a)return a;return a=De(t.length,r.length),a||(a=De(t[t.length-2],r[r.length-2]),a||De(t[t.length-1],r[r.length-1]))}class h6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class NR{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Ih(r.mutation,a,Zn.empty(),ot.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ue()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ue()){const a=Vi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=ch();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Vi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ue())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=er();const c=Ah(),d=(function(){return Ah()})();return t.forEach(((m,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof ws)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),Ih(y.mutation,g,y.mutation.getFieldMask(),ot.now())):c.set(g.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new h6(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Ah();let a=new bt(((c,d)=>c-d)),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=r.get(m)||Zn.empty();y=d.applyToLocalView(g,y),r.set(m,y);const E=(a.get(d.batchId)||Ue()).add(m);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,E=Kx();y.forEach((T=>{if(!l.has(T)){const k=Zx(t.get(T),r.get(T));k!==null&&E.set(T,k),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return z.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return fe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ib(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):z.resolve(Vi());let d=hc,m=l;return c.next((g=>z.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?z.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{m=m.insert(y,T)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,Ue()))).next((y=>({batchId:d,changes:Gx(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((r=>{let a=ch();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=ch();return this.indexManager.getCollectionParents(e,l).next((d=>z.forEach(d,(m=>{const g=(function(E,T){return new bs(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((y=>{y.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,At.newInvalidDocument(y)))}));let d=ch();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&Ih(y.mutation,g,Zn.empty(),ot.now()),ud(t,g)&&(d=d.insert(m,g))})),d}))}}class d6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Gt(a.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:fb(a.bundledQuery),readTime:Gt(a.readTime)}})(t)),z.resolve()}}class f6{constructor(){this.overlays=new bt(fe.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vi();return z.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const a=Vi(),l=t.length+1,c=new fe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return z.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new bt(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=Vi(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=Vi(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=a)););return z.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new ub(t,r));let l=this.qr.get(t);l===void 0&&(l=Ue(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}class m6{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class gb{constructor(){this.Qr=new dt(pn.$r),this.Ur=new dt(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new pn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new fe(new He([])),r=new pn(t,e),a=new pn(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new fe(new He([])),r=new pn(t,e),a=new pn(t,e+1);let l=Ue();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new pn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||De(e.Yr,t.Yr)}static Kr(e,t){return De(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}}class p6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new dt(pn.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new lb(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new pn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return z.resolve(c)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ga:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pn(t,0),a=new pn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dt(De);return t.forEach((a=>{const l=new pn(a,0),c=new pn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{r=r.add(d.Yr)}))})),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;fe.isDocumentKey(l)||(l=l.child(""));const c=new pn(new fe(l),0);let d=new dt(De);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),z.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){be(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(t.mutations,(a=>{const l=new pn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new pn(t,0),a=this.Zr.firstAfterOrEqual(r);return z.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class g6{constructor(e){this.ri=e,this.docs=(function(){return new bt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let r=er();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():At.newInvalidDocument(a))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=er();const c=t.path,d=new fe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Wv(lx(y),r)<=0||(a.has(y.key)||ud(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return z.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ye(9500)}ii(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new y6(this)}getSize(e){return z.resolve(this.size)}}class y6 extends RR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class _6{constructor(e){this.persistence=e,this.si=new Es((t=>Lo(t)),ld),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new gb,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),z.waitFor(l).next((()=>a))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}}class yb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jn(0),this.li=!1,this.li=!0,this.hi=new m6,this.referenceDelegate=e(this),this.Pi=new _6(this),this.indexManager=new n6,this.remoteDocumentCache=(function(a){return new g6(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new _R(t),this.Ii=new d6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new f6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new p6(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);const a=new v6(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class v6 extends ux{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Ri=new gb,this.Vi=null}static mi(e){return new xp(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(r=>{const a=fe.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gm{constructor(e,t){this.persistence=e,this.pi=new Es((r=>Vn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=xR(this,t)}static mi(e,t){return new Gm(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return z.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?z.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,l.removeEntry(c,Te.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ym(e.data.value)),t}br(e,t,r){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return z.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class b6{constructor(e){this.serializer=e}k(e,t,r,a){const l=new gp("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(od)})(e),(function(m){m.createObjectStore(jh,{keyPath:MM}),m.createObjectStore(Yr,{keyPath:PA,autoIncrement:!0}).createIndex(To,OA,{unique:!0}),m.createObjectStore(dc)})(e),T1(e),(function(m){m.createObjectStore(go)})(e));let c=z.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(mc),m.deleteObjectStore(fc),m.deleteObjectStore(Co)})(e),T1(e)),c=c.next((()=>(function(m){const g=m.store(Co),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return g.put(jm,y)})(l)))),r<4&&a>=4&&(r!==0&&(c=c.next((()=>(function(m,g){return g.store(Yr).J().next((E=>{m.deleteObjectStore(Yr),m.createObjectStore(Yr,{keyPath:PA,autoIncrement:!0}).createIndex(To,OA,{unique:!0});const T=g.store(Yr),k=E.map((R=>T.put(R)));return z.waitFor(k)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(pc,{keyPath:GM})})(e)}))),r<5&&a>=5&&(c=c.next((()=>this.yi(l)))),r<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(Uh)})(e),this.wi(l))))),r<7&&a>=7&&(c=c.next((()=>this.Si(l)))),r<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),r<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(c=c.next((()=>this.Di(l)))),r<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(yp,{keyPath:KM})})(e),(function(m){m.createObjectStore(_p,{keyPath:$M})})(e)}))),r<12&&a>=12&&(c=c.next((()=>{(function(m){const g=m.createObjectStore(vp,{keyPath:e5});g.createIndex(V_,t5,{unique:!1}),g.createIndex(_x,n5,{unique:!1})})(e)}))),r<13&&a>=13&&(c=c.next((()=>(function(m){const g=m.createObjectStore(Lm,{keyPath:jM});g.createIndex(pm,UM),g.createIndex(mx,FM)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(go)))),r<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),r<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(Jv,{keyPath:QM,autoIncrement:!0}).createIndex(O_,WM,{unique:!1}),m.createObjectStore(Eh,{keyPath:YM}).createIndex(gx,XM,{unique:!1}),m.createObjectStore(wh,{keyPath:JM}).createIndex(yx,ZM,{unique:!1})})(e)))),r<16&&a>=16&&(c=c.next((()=>{t.objectStore(Eh).clear()})).next((()=>{t.objectStore(wh).clear()}))),r<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(Zv,{keyPath:r5})})(e)}))),r<18&&a>=18&&MI()&&(c=c.next((()=>{t.objectStore(Eh).clear()})).next((()=>{t.objectStore(wh).clear()}))),c}wi(e){let t=0;return e.store(go).ee(((r,a)=>{t+=Hm(a)})).next((()=>{const r={byteSize:t};return e.store(Uh).put(P_,r)}))}yi(e){const t=e.store(jh),r=e.store(Yr);return t.J().next((a=>z.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,ga],[l.userId,l.lastAcknowledgedBatchId]);return r.J(To,c).next((d=>z.forEach(d,(m=>{be(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=_o(this.serializer,m);return TR(e,l.userId,g).next((()=>{}))}))))}))))}Si(e){const t=e.store(mc),r=e.store(go);return e.store(Co).get(jm).next((a=>{const l=[];return r.ee(((c,d)=>{const m=new He(c),g=(function(E){return[0,Vn(E)]})(m);l.push(t.get(g).next((y=>y?z.resolve():(E=>t.put({targetId:0,path:Vn(E),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>z.waitFor(l)))}))}bi(e,t){e.createObjectStore(Fh,{keyPath:HM});const r=t.store(Fh),a=new pb,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return r.put({collectionId:d,parent:Vn(m)})}};return t.store(go).ee({X:!0},((c,d)=>{const m=new He(c);return l(m.popLast())})).next((()=>t.store(dc).ee({X:!0},(([c,d,m],g)=>{const y=Oi(d);return l(y.popLast())}))))}Di(e){const t=e.store(fc);return t.ee(((r,a)=>{const l=hh(a),c=vR(this.serializer,l);return t.put(c)}))}Ci(e,t){const r=t.store(go),a=[];return r.ee(((l,c)=>{const d=t.store(Lm),m=(function(E){return E.document?new fe(He.fromString(E.document.name).popFirst(5)):E.noDocument?fe.fromSegments(E.noDocument.path):E.unknownDocument?fe.fromSegments(E.unknownDocument.path):ye(36783)})(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(g))})).next((()=>z.waitFor(a)))}Fi(e,t){const r=t.store(Yr),a=CR(this.serializer),l=new yb(xp.mi,this.serializer.yt);return r.J().next((c=>{const d=new Map;return c.forEach((m=>{let g=d.get(m.userId)??Ue();_o(this.serializer,m).keys().forEach((y=>g=g.add(y))),d.set(m.userId,g)})),z.forEach(d,((m,g)=>{const y=new gn(g),E=Ip.wt(this.serializer,y),T=l.getIndexManager(y),k=Sp.wt(y,this.serializer,T,l.referenceDelegate);return new NR(a,k,E,T).recalculateAndSaveOverlaysForDocumentKeys(new M_(t,Jn.ce),m).next()}))}))}}function T1(n){n.createObjectStore(mc,{keyPath:BM}).createIndex(Xv,qM,{unique:!0}),n.createObjectStore(fc,{keyPath:"targetId"}).createIndex(px,zM,{unique:!0}),n.createObjectStore(Co)}const oa="IndexedDbPersistence",l_=18e5,c_=5e3,u_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DR="main";class _b{constructor(e,t,r,a,l,c,d,m,g,y,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=l,this.window=c,this.document=d,this.xi=g,this.Oi=y,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!_b.v())throw new re(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new l6(this,a),this.$i=t+DR,this.serializer=new _R(m),this.Ui=new Li(this.$i,this.Ni,new b6(this.serializer)),this.hi=new Y5,this.Pi=new i6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CR(this.serializer),this.Ii=new W5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,y===!1&&Ht(oa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(K.FAILED_PRECONDITION,u_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Jn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Pa(e))return ie(oa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie(oa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return rh(e).get(Bl).next((t=>z.resolve(this.es(t))))}ts(e){return sm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,l_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=hn(t,pc);return r.J().next((a=>{const l=this.ss(a,l_),c=a.filter((d=>l.indexOf(d)===-1));return z.forEach(c,(d=>r.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?z.resolve(!0):rh(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,c_)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new re(K.FAILED_PRECONDITION,u_);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).J().next((r=>this.ss(r,c_).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ie(oa,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[od,pc],(e=>{const t=new M_(e,Jn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>sm(e).J().next((t=>this.ss(t,l_).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Sp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new r6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ip.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){ie(oa,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?a5:m===17?wx:m===16?s5:m===15?eb:m===14?Ex:m===13?bx:m===12?i5:m===11?vx:void ye(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new M_(d,this.ci?this.ci.next():Jn.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new re(K.FAILED_PRECONDITION,cx);return r(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>r(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return rh(e).get(Bl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,c_)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(K.FAILED_PRECONDITION,u_)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rh(e).put(Bl,t)}static v(){return Li.v()}Zi(e){const t=rh(e);return t.get(Bl).next((r=>this.es(r)?(ie(oa,"Releasing primary lease."),t.delete(Bl)):z.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;VI()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return ie(oa,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Ht(oa,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rh(n){return hn(n,od)}function sm(n){return hn(n,pc)}function vb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bb{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new bb(e,t.fromCache,r,a)}}class E6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VI()?8:hx(kt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new E6;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(Ql()<=qe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(Ql()<=qe.DEBUG&&ie("QueryEngine","Query:",Wl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Ql()<=qe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(t))):z.resolve())}ys(e,t){if($A(t))return z.resolve(null);let r=Bn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=zm(t,null,"F"),r=Bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ue(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,zm(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,r,a){return $A(t)||a.isEqual(Te.min())?z.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?z.resolve(null):(Ql()<=qe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Wl(t)),this.vs(e,c,t,ox(a,hc)).next((d=>d)))}))}Ds(e,t){let r=new dt(qx(e));return t.forEach(((a,l)=>{ud(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Ql()<=qe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Wl(t)),this.ps.getDocumentsMatchingQuery(e,t,_r.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Eb="LocalStore",w6=3e8;class T6{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new bt(De),this.xs=new Es((l=>Lo(l)),ld),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function PR(n,e,t,r){return new T6(n,e,t,r)}async function OR(n,e){const t=ge(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=Ue();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function A6(n,e){const t=ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,y){const E=g.batch,T=E.keys();let k=z.resolve();return T.forEach((R=>{k=k.next((()=>y.getEntry(m,R))).next((j=>{const U=g.docVersions.get(R);be(U!==null,48541),j.version.compareTo(U)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))}))})),k.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function VR(n){const e=ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function I6(n,e){const t=ge(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((y,E)=>{const T=a.get(E);if(!T)return;d.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,E))));let k=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?k=k.withResumeToken(Mt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):y.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(y.resumeToken,r)),a=a.insert(E,k),(function(j,U,se){return j.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=w6?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(T,k,y)&&d.push(t.Pi.updateTargetData(l,k))}));let m=er(),g=Ue();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(MR(l,c,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!r.isEqual(Te.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(y)}return z.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function MR(n,e,t){let r=Ue(),a=Ue();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=er();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ie(Eb,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function S6(n,e){const t=ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ga),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function wc(n,e){const t=ge(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,z.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new hs(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Tc(n,e,t){const r=ge(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Pa(c))throw c;ie(Eb,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Km(n,e,t){const r=ge(n);let a=Te.min(),l=Ue();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const E=ge(m),T=E.xs.get(y);return T!==void 0?z.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,y)})(r,c,Bn(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:Ue()))).next((d=>(UR(r,Bx(e),d),{documents:d,Qs:l})))))}function LR(n,e){const t=ge(n),r=ge(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.At(l,e).next((c=>c?c.target:null))))}function jR(n,e){const t=ge(n),r=t.Os.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Ns.getAllFromCollectionGroup(a,e,ox(r,hc),Number.MAX_SAFE_INTEGER))).then((a=>(UR(t,e,a),a)))}function UR(n,e,t){let r=n.Os.get(e)||Te.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}async function x6(n,e,t,r){const a=ge(n);let l=Ue(),c=er();for(const g of t){const y=e.$s(g.metadata.name);g.document&&(l=l.add(y));const E=e.Us(g);E.setReadTime(e.Ks(g.metadata.readTime)),c=c.insert(y,E)}const d=a.Ns.newChangeBuffer({trackRemovals:!0}),m=await wc(a,(function(y){return Bn(Mc(He.fromString(`__bundle__/docs/${y}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>MR(g,d,c).next((y=>(d.apply(g),y))).next((y=>a.Pi.removeMatchingKeysForTargetId(g,m.targetId).next((()=>a.Pi.addMatchingKeys(g,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,y.ks,y.qs))).next((()=>y.ks))))))}async function R6(n,e,t=Ue()){const r=await wc(n,Bn(fb(e.bundledQuery))),a=ge(n);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const c=Gt(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return a.Ii.saveNamedQuery(l,e);const d=r.withResumeToken(Mt.EMPTY_BYTE_STRING,c);return a.Ms=a.Ms.insert(d.targetId,d),a.Pi.updateTargetData(l,d).next((()=>a.Pi.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.Pi.addMatchingKeys(l,t,r.targetId))).next((()=>a.Ii.saveNamedQuery(l,e)))}))}const FR="firestore_clients";function A1(n,e){return`${FR}_${n}_${e}`}const zR="firestore_mutations";function I1(n,e,t){let r=`${zR}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const BR="firestore_targets";function h_(n,e){return`${BR}_${n}_${e}`}const xi="SharedClientState";class $m{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ws(e,t,r){const a=JSON.parse(r);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new re(a.error.code,a.error.message))),c?new $m(e,t,a.state,l):(Ht(xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new re(r.error.code,r.error.message))),l?new Sh(e,r.state,a):(Ht(xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=sb();for(let c=0;a&&c<r.activeTargetIds.length;++c)a=dx(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return a?new Qm(e,l):(Ht(xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class wb{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new wb(t.clientId,t.onlineState):(Ht(xi,`Failed to parse online state: ${e}`),null)}}class X_{constructor(){this.activeTargetIds=sb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class d_{constructor(e,t,r,a,l){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new bt(De),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=A1(this.persistenceKey,this.Js),this.no=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new X_),this.ro=new RegExp(`^${FR}_${c}_([^_]*)$`),this.io=new RegExp(`^${zR}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${BR}_${c}_(\\d+)$`),this.oo=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this._o=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const a=this.getItem(A1(this.persistenceKey,r));if(a){const l=Qm.Ws(r,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(h_(this.persistenceKey,e));if(a){const l=Sh.Ws(e,a);l&&(r=l.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(h_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.Po(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ie(xi,"READ",e,t),t}setItem(e,t){ie(xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ie(xi,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ie(xi,"EVENT",t.key,t.newValue),t.key===this.eo)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(l){let c=Jn.ce;if(l!=null)try{const d=JSON.parse(l);be(typeof d=="number",30636,{So:l}),c=d}catch(d){Ht(xi,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);r!==Jn.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((a=>this.syncEngine.Do(a))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const a=new $m(this.currentUser,e,t,r),l=I1(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=I1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const a=h_(this.persistenceKey,e),l=new Sh(e,t,r);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Qm.Ws(r,t)}fo(e,t){const r=this.io.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return $m.Ws(new gn(l),a,t)}yo(e,t){const r=this.so.exec(e),a=Number(r[1]);return Sh.Ws(a,t)}uo(e){return wb.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ie(xi,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(r),c=[],d=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||d.push(m)})),this.syncEngine.Fo(c,d).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=sb();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class qR{constructor(){this.Mo=new X_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new X_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C6{Oo(e){}shutdown(){}}const S1="ConnectivityMonitor";class x1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(S1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(S1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let am=null;function J_(){return am===null?am=(function(){return 268435456+Math.round(2147483648*Math.random())})():am++,"0x"+am.toString(16)}const f_="RestConnection",N6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===L_?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=J_(),d=this.zo(e,t.toUriEncodedString());ie(f_,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),y=Ca(g);return this.Jo(e,d,m,r,y).then((E=>(ie(f_,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw zi(f_,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=N6[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class k6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Dn="WebChannelConnection";class P6 extends D6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=J_();return new Promise(((d,m)=>{const g=new YS;g.setWithCredentials(!0),g.listenOnce(XS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case dm.NO_ERROR:const E=g.getResponseJson();ie(Dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case dm.TIMEOUT:ie(Dn,`RPC '${e}' ${c} timed out`),m(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case dm.HTTP_ERROR:const T=g.getStatus();if(ie(Dn,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const R=k?.error;if(R&&R.status&&R.message){const j=(function(se){const le=se.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(le)>=0?le:K.UNKNOWN})(R.status);m(new re(j,R.message))}else m(new re(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new re(K.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ie(Dn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ie(Dn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,r,15)}))}T_(e,t,r){const a=J_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ex(),d=ZS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");ie(Dn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const E=c.createWebChannel(y,m);this.I_(E);let T=!1,k=!1;const R=new k6({Yo:U=>{k?ie(Dn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(T||(ie(Dn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),T=!0),ie(Dn,`RPC '${e}' stream ${a} sending:`,U),E.send(U))},Zo:()=>E.close()}),j=(U,se,le)=>{U.listen(se,(te=>{try{le(te)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return j(E,lh.EventType.OPEN,(()=>{k||(ie(Dn,`RPC '${e}' stream ${a} transport opened.`),R.o_())})),j(E,lh.EventType.CLOSE,(()=>{k||(k=!0,ie(Dn,`RPC '${e}' stream ${a} transport closed`),R.a_(),this.E_(E))})),j(E,lh.EventType.ERROR,(U=>{k||(k=!0,zi(Dn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),R.a_(new re(K.UNAVAILABLE,"The operation could not be completed")))})),j(E,lh.EventType.MESSAGE,(U=>{if(!k){const se=U.data[0];be(!!se,16349);const le=se,te=le?.error||le[0]?.error;if(te){ie(Dn,`RPC '${e}' stream ${a} received error:`,te);const _e=te.status;let ae=(function(I){const N=nn[I];if(N!==void 0)return nR(N)})(_e),he=te.message;ae===void 0&&(ae=K.INTERNAL,he="Unknown error status: "+_e+" with message "+te.message),k=!0,R.a_(new re(ae,he)),E.close()}else ie(Dn,`RPC '${e}' stream ${a} received:`,se),R.u_(se)}})),j(d,JS.STAT_EVENT,(U=>{U.stat===N_.PROXY?ie(Dn,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===N_.NOPROXY&&ie(Dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function HR(){return typeof window<"u"?window:null}function wm(){return typeof document<"u"?document:null}function md(n){return new j5(n,!0)}class Tb{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ie("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const R1="PersistentStream";class GR{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Tb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Ht(t.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new re(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(R1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ie(R1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class O6 extends GR{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=z5(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?Gt(c.readTime):Te.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=K_(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Um(m)?{documents:dR(l,m)}:{query:fR(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=aR(l,c.resumeToken);const g=H_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=Ec(l,c.snapshotVersion.toTimestamp());const g=H_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const r=q5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=K_(this.serializer),t.removeTarget=e,this.q_(t)}}class V6 extends GR{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=B5(e.writeResults,e.commitTime),r=Gt(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=K_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Kh(this.serializer,r)))};this.q_(t)}}class M6{}class L6 extends M6{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,G_(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(K.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,G_(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new re(K.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class j6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ht(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qo="RemoteStore";class U6{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Va(this)&&(ie(qo,"Restarting streams for network reachability change."),await(async function(m){const g=ge(m);g.Ea.add(4),await Uc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await pd(g)})(this))}))})),this.Ra=new j6(r,a)}}async function pd(n){if(Va(n))for(const e of n.da)await e(!0)}async function Uc(n){for(const e of n.da)await e(!1)}function Rp(n,e){const t=ge(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sb(t)?Ib(t):zc(t).O_()&&Ab(t,e))}function Ac(n,e){const t=ge(n),r=zc(t);t.Ia.delete(e),r.O_()&&KR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Va(t)&&t.Ra.set("Unknown"))}function Ab(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zc(n).Y_(e)}function KR(n,e){n.Va.Ue(e),zc(n).Z_(e)}function Ib(n){n.Va=new O5({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zc(n).start(),n.Ra.ua()}function Sb(n){return Va(n)&&!zc(n).x_()&&n.Ia.size>0}function Va(n){return ge(n).Ea.size===0}function $R(n){n.Va=void 0}async function F6(n){n.Ra.set("Online")}async function z6(n){n.Ia.forEach(((e,t)=>{Ab(n,e)}))}async function B6(n,e){$R(n),Sb(n)?(n.Ra.ha(e),Ib(n)):n.Ra.set("Unknown")}async function q6(n,e,t){if(n.Ra.set("Online"),e instanceof sR&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(r){ie(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wm(n,r)}else if(e instanceof bm?n.Va.Ze(e):e instanceof iR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Te.min()))try{const r=await VR(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Mt.EMPTY_BYTE_STRING,y.snapshotVersion)),KR(l,m);const E=new hs(y.target,m,g,y.sequenceNumber);Ab(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ie(qo,"Failed to raise snapshot:",r),await Wm(n,r)}}async function Wm(n,e,t){if(!Pa(e))throw e;n.Ea.add(1),await Uc(n),n.Ra.set("Offline"),t||(t=()=>VR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ie(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pd(n)}))}function QR(n,e){return e().catch((t=>Wm(n,t,e)))}async function Fc(n){const e=ge(n),t=Sa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ga;for(;H6(e);)try{const a=await S6(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,G6(e,a)}catch(a){await Wm(e,a)}WR(e)&&YR(e)}function H6(n){return Va(n)&&n.Ta.length<10}function G6(n,e){n.Ta.push(e);const t=Sa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function WR(n){return Va(n)&&!Sa(n).x_()&&n.Ta.length>0}function YR(n){Sa(n).start()}async function K6(n){Sa(n).ra()}async function $6(n){const e=Sa(n);for(const t of n.Ta)e.ea(t.mutations)}async function Q6(n,e,t){const r=n.Ta.shift(),a=cb.from(r,e,t);await QR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Fc(n)}async function W6(n,e){e&&Sa(n).X_&&await(async function(r,a){if((function(c){return tR(c)&&c!==K.ABORTED})(a.code)){const l=r.Ta.shift();Sa(r).B_(),await QR(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Fc(r)}})(n,e),WR(n)&&YR(n)}async function C1(n,e){const t=ge(n);t.asyncQueue.verifyOperationInProgress(),ie(qo,"RemoteStore received new credentials");const r=Va(t);t.Ea.add(3),await Uc(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pd(t)}async function Z_(n,e){const t=ge(n);e?(t.Ea.delete(2),await pd(t)):e||(t.Ea.add(2),await Uc(t),t.Ra.set("Unknown"))}function zc(n){return n.ma||(n.ma=(function(t,r,a){const l=ge(t);return l.sa(),new O6(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:F6.bind(null,n),t_:z6.bind(null,n),r_:B6.bind(null,n),H_:q6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Sb(n)?Ib(n):n.Ra.set("Unknown")):(await n.ma.stop(),$R(n))}))),n.ma}function Sa(n){return n.fa||(n.fa=(function(t,r,a){const l=ge(t);return l.sa(),new V6(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:K6.bind(null,n),r_:W6.bind(null,n),ta:$6.bind(null,n),na:Q6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Fc(n)):(await n.fa.stop(),n.Ta.length>0&&(ie(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class xb{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new xb(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bc(n,e){if(Ht("AsyncQueue",`${e}: ${n}`),Pa(n))return new re(K.UNAVAILABLE,`${e}: ${n}`);throw n}class sc{static emptySet(e){return new sc(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=ch(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new sc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class N1{constructor(){this.ga=new bt(fe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ic{constructor(e,t,r,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ic(e,t,sc.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}class Y6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class X6{constructor(){this.queries=D1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=ge(t),l=a.queries;a.queries=D1(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new re(K.ABORTED,"Firestore shutting down"))}}function D1(){return new Es((n=>zx(n)),cd)}async function Rb(n,e){const t=ge(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new Y6,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Bc(c,`Initialization of query '${Wl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Nb(t)}async function Cb(n,e){const t=ge(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function J6(n,e){const t=ge(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&Nb(t)}function Z6(n,e,t){const r=ge(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Nb(n){n.Ca.forEach((e=>{e.next()}))}var ev,k1;(k1=ev||(ev={})).Ma="default",k1.Cache="cache";class Db{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ev.Cache}}class eL{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class P1{constructor(e){this.serializer=e}$s(e){return ji(this.serializer,e)}Us(e){return e.metadata.exists?hR(this.serializer,e.document,!1):At.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Gt(e)}}class tL{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=XR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=He.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new P1(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.$s(a.metadata.name);for(const c of a.metadata.queries){const d=(t.get(c)||Ue()).add(l);t.set(c,d)}}return t}async ja(e){const t=await x6(e,new P1(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const a of this.Ka)await R6(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function XR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JR{constructor(e){this.key=e}}class ZR{constructor(e){this.key=e}}class eC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=qx(e),this.tu=new sc(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new N1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,E)=>{const T=a.get(y),k=ud(this.query,E)?E:null,R=!!T&&this.mutatedKeys.has(T.key),j=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let U=!1;T&&k?T.data.isEqual(k.data)?R!==j&&(r.track({type:3,doc:k}),U=!0):this.su(T,k)||(r.track({type:2,doc:k}),U=!0,(m&&this.eu(k,m)>0||g&&this.eu(k,g)<0)&&(d=!0)):!T&&k?(r.track({type:0,doc:k}),U=!0):T&&!k&&(r.track({type:1,doc:T}),U=!0,(m||g)&&(d=!0)),U&&(k?(c=c.add(k),l=j?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(k,R){const j=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:U})}};return j(k)-j(R)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Ic(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new ZR(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new JR(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ma="SyncEngine";class nL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rL{constructor(e){this.key=e,this.hu=!1}}class iL{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Es((d=>zx(d)),cd),this.Iu=new Map,this.Eu=new Set,this.du=new bt(fe.comparator),this.Au=new Map,this.Ru=new gb,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sL(n,e,t=!0){const r=Cp(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await tC(r,e,t,!0),a}async function aL(n,e){const t=Cp(n);await tC(t,e,!0,!1)}async function tC(n,e,t,r){const a=await wc(n.localStore,Bn(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await kb(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&Rp(n.remoteStore,a),d}async function kb(n,e,t,r,a){n.pu=(E,T,k)=>(async function(j,U,se,le){let te=U.view.ru(se);te.Cs&&(te=await Km(j.localStore,U.query,!1).then((({documents:x})=>U.view.ru(x,te))));const _e=le&&le.targetChanges.get(U.targetId),ae=le&&le.targetMismatches.get(U.targetId)!=null,he=U.view.applyChanges(te,j.isPrimaryClient,_e,ae);return tv(j,U.targetId,he.au),he.snapshot})(n,E,T,k);const l=await Km(n.localStore,e,!0),c=new eC(e,l.Qs),d=c.ru(l.documents),m=fd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);tv(n,t,g.au);const y=new nL(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function oL(n,e,t){const r=ge(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!cd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Tc(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Ac(r.remoteStore,a.targetId),Sc(r,a.targetId)})).catch(ka)):(Sc(r,a.targetId),await Tc(r.localStore,a.targetId,!0))}async function lL(n,e){const t=ge(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ac(t.remoteStore,r.targetId))}async function cL(n,e,t){const r=Mb(n);try{const a=await(function(c,d){const m=ge(c),g=ot.now(),y=d.reduce(((k,R)=>k.add(R.key)),Ue());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let R=er(),j=Ue();return m.Ns.getEntries(k,y).next((U=>{R=U,R.forEach(((se,le)=>{le.isValidDocument()||(j=j.add(se))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,R))).next((U=>{E=U;const se=[];for(const le of d){const te=D5(le,E.get(le.key).overlayedDocument);te!=null&&se.push(new ws(le.key,te,kx(te.value.mapValue),Nt.exists(!0)))}return m.mutationQueue.addMutationBatch(k,g,se,d)})).next((U=>{T=U;const se=U.applyToLocalDocumentSet(E,j);return m.documentOverlayCache.saveOverlays(k,U.batchId,se)}))})).then((()=>({batchId:T.batchId,changes:Gx(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new bt(De)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(r,a.batchId,t),await Ts(r,a.changes),await Fc(r.remoteStore)}catch(a){const l=Bc(a,"Failed to persist write");t.reject(l)}}async function nC(n,e){const t=ge(n);try{const r=await I6(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(be(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?be(c.hu,14607):a.removedDocuments.size>0&&(be(c.hu,42227),c.hu=!1))})),await Ts(t,r,e)}catch(r){await ka(r)}}function O1(n,e,t){const r=ge(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=ge(c);m.onlineState=d;let g=!1;m.queries.forEach(((y,E)=>{for(const T of E.Sa)T.va(d)&&(g=!0)})),g&&Nb(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uL(n,e,t){const r=ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new bt(fe.comparator);c=c.insert(l,At.newNoDocument(l,Te.min()));const d=Ue().add(l),m=new dd(Te.min(),new Map,new bt(De),c,d);await nC(r,m),r.du=r.du.remove(l),r.Au.delete(e),Vb(r)}else await Tc(r.localStore,e,!1).then((()=>Sc(r,e,t))).catch(ka)}async function hL(n,e){const t=ge(n),r=e.batch.batchId;try{const a=await A6(t.localStore,e);Ob(t,r,null),Pb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ts(t,a)}catch(a){await ka(a)}}async function dL(n,e,t){const r=ge(n);try{const a=await(function(c,d){const m=ge(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(be(E!==null,37113),y=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);Ob(r,e,t),Pb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ts(r,a)}catch(a){await ka(a)}}async function fL(n,e){const t=ge(n);Va(t.remoteStore)||ie(Ma,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(c){const d=ge(c);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===ga)return void e.resolve();const a=t.mu.get(r)||[];a.push(e),t.mu.set(r,a)}catch(r){const a=Bc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function Pb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ob(n,e,t){const r=ge(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function Sc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||rC(n,r)}))}function rC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ac(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Vb(n))}function tv(n,e,t){for(const r of t)r instanceof JR?(n.Ru.addReference(r.key,e),mL(n,r)):r instanceof ZR?(ie(Ma,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||rC(n,r.key)):ye(19791,{wu:r})}function mL(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ie(Ma,"New document in limbo: "+t),n.Eu.add(r),Vb(n))}function Vb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new fe(He.fromString(e)),r=n.fu.next();n.Au.set(r,new rL(t)),n.du=n.du.insert(t,r),Rp(n.remoteStore,new hs(Bn(Mc(t.path)),r,"TargetPurposeLimboResolution",Jn.ce))}}async function Ts(n,e,t){const r=ge(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((g=>{if((g||t)&&r.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=bb.As(m.targetId,g);l.push(y)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,g){const y=ge(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>z.forEach(g,(T=>z.forEach(T.Es,(k=>y.persistence.referenceDelegate.addReference(E,T.targetId,k))).next((()=>z.forEach(T.ds,(k=>y.persistence.referenceDelegate.removeReference(E,T.targetId,k)))))))))}catch(E){if(!Pa(E))throw E;ie(Eb,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const k=y.Ms.get(T),R=k.snapshotVersion,j=k.withLastLimboFreeSnapshotVersion(R);y.Ms=y.Ms.insert(T,j)}}})(r.localStore,l))}async function pL(n,e){const t=ge(n);if(!t.currentUser.isEqual(e)){ie(Ma,"User change. New user:",e.toKey());const r=await OR(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new re(K.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ts(t,r.Ls)}}function gL(n,e){const t=ge(n),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let a=Ue();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function yL(n,e){const t=ge(n),r=await Km(t.localStore,e.query,!0),a=e.view.cu(r);return t.isPrimaryClient&&tv(t,e.targetId,a.au),a}async function _L(n,e){const t=ge(n);return jR(t.localStore,e).then((r=>Ts(t,r)))}async function vL(n,e,t,r){const a=ge(n),l=await(function(d,m){const g=ge(d),y=ge(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(E=>y.er(E,m).next((T=>T?g.localDocuments.getDocuments(E,T):z.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await Fc(a.remoteStore):t==="acknowledged"||t==="rejected"?(Ob(a,e,r||null),Pb(a,e),(function(d,m){ge(ge(d).mutationQueue).ir(m)})(a.localStore,e)):ye(6720,"Unknown batchState",{Su:t}),await Ts(a,l)):ie(Ma,"Cannot apply mutation batch with id: "+e)}async function bL(n,e){const t=ge(n);if(Cp(t),Mb(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await V1(t,r.toArray());t.gu=!0,await Z_(t.remoteStore,!0);for(const l of a)Rp(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const r=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):a=a.then((()=>(Sc(t,c),Tc(t.localStore,c,!0)))),Ac(t.remoteStore,c)})),await a,await V1(t,r),(function(c){const d=ge(c);d.Au.forEach(((m,g)=>{Ac(d.remoteStore,g)})),d.Ru.Jr(),d.Au=new Map,d.du=new bt(fe.comparator)})(t),t.gu=!1,await Z_(t.remoteStore,!1)}}async function V1(n,e,t){const r=ge(n),a=[],l=[];for(const c of e){let d;const m=r.Iu.get(c);if(m&&m.length!==0){d=await wc(r.localStore,Bn(m[0]));for(const g of m){const y=r.Tu.get(g),E=await yL(r,y);E.snapshot&&l.push(E.snapshot)}}else{const g=await LR(r.localStore,c);d=await wc(r.localStore,g),await kb(r,iC(g),c,!1,d.resumeToken)}a.push(d)}return r.Pu.H_(l),a}function iC(n){return Fx(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function EL(n){return(function(t){return ge(ge(t).persistence).Ts()})(ge(n).localStore)}async function wL(n,e,t,r){const a=ge(n);if(a.gu)return void ie(Ma,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await jR(a.localStore,Bx(l[0])),d=dd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Mt.EMPTY_BYTE_STRING);await Ts(a,c,d);break}case"rejected":await Tc(a.localStore,e,!0),Sc(a,e,r);break;default:ye(64155,t)}}async function TL(n,e,t){const r=Cp(n);if(r.gu){for(const a of e){if(r.Iu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ie(Ma,"Adding an already active target "+a);continue}const l=await LR(r.localStore,a),c=await wc(r.localStore,l);await kb(r,iC(l),c.targetId,!1,c.resumeToken),Rp(r.remoteStore,c)}for(const a of t)r.Iu.has(a)&&await Tc(r.localStore,a,!1).then((()=>{Ac(r.remoteStore,a),Sc(r,a)})).catch(ka)}}function Cp(n){const e=ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uL.bind(null,e),e.Pu.H_=J6.bind(null,e.eventManager),e.Pu.yu=Z6.bind(null,e.eventManager),e}function Mb(n){const e=ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dL.bind(null,e),e}function AL(n,e,t){const r=ge(n);(async function(l,c,d){try{const m=await c.getMetadata();if(await(function(k,R){const j=ge(k),U=Gt(R.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",(se=>j.Ii.getBundleMetadata(se,R.id))).then((se=>!!se&&se.createTime.compareTo(U)>=0))})(l.localStore,m))return await c.close(),d._completeWith((function(k){return{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}})(m)),Promise.resolve(new Set);d._updateProgress(XR(m));const g=new tL(m,c.serializer);let y=await c.bu();for(;y;){const T=await g.Ga(y);T&&d._updateProgress(T),y=await c.bu()}const E=await g.ja(l.localStore);return await Ts(l,E.Ha,void 0),await(function(k,R){const j=ge(k);return j.persistence.runTransaction("Save bundle","readwrite",(U=>j.Ii.saveBundleMetadata(U,R)))})(l.localStore,m),d._completeWith(E.progress),Promise.resolve(E.Ja)}catch(m){return zi(Ma,`Loading bundle failed with ${m}`),d._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return PR(this.persistence,new kR,e.initialUser,this.serializer)}Cu(e){return new yb(xp.mi,this.serializer)}Du(e){return new qR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class IL extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){be(this.persistence.referenceDelegate instanceof Gm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new yb((r=>Gm.mi(r,t)),this.serializer)}}class sC extends $h{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Mb(this.xu.syncEngine),await Fc(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return PR(this.persistence,new kR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new SR(r,e.asyncQueue,t)}Mu(e,t){const r=new OM(t,this.persistence);return new PM(e.asyncQueue,r)}Cu(e){const t=vb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new _b(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HR(),wm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qR}}class SL extends sC{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof d_&&(this.sharedClientState.syncEngine={Co:vL.bind(null,t),vo:wL.bind(null,t),Fo:TL.bind(null,t),Ts:EL.bind(null,t),Do:_L.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await bL(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=HR();if(!d_.v(t))throw new re(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new d_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Qh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=pL.bind(null,this.syncEngine),await Z_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new X6})()}createDatastore(e){const t=md(e.databaseInfo.databaseId),r=(function(l){return new P6(l)})(e.databaseInfo);return(function(l,c,d,m){return new L6(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new U6(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>O1(this.syncEngine,t,0)),(function(){return x1.v()?new x1:new C6})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,y){const E=new iL(a,l,c,d,m,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ge(t);ie(qo,"RemoteStore shutting down."),r.Ea.add(5),await Uc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Qh.provider={build:()=>new Qh};function M1(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Np{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class xL{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Rn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const a=await this.$u(r);return new eL(JSON.parse(a),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class RL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const c=ge(a),d={documents:l.map((E=>Gh(c.serializer,E)))},m=await c.Ho("BatchGetDocuments",c.serializer.databaseId,He.emptyPath(),d,l.length),g=new Map;m.forEach((E=>{const T=F5(c.serializer,E);g.set(T.key.toString(),T)}));const y=[];return l.forEach((E=>{const T=g.get(E.toString());be(!!T,55234,{key:E}),y.push(T)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=fe.fromPath(r);this.mutations.push(new ob(a,this.precondition(a)))})),await(async function(r,a){const l=ge(r),c={writes:a.map((d=>Kh(l.serializer,d)))};await l.Go("Commit",l.serializer.databaseId,He.emptyPath(),c)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ye(50498,{Gu:e.constructor.name});t=Te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new re(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?Nt.exists(!1):Nt.updateTime(t):Nt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new re(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(t)}return Nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CL{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.zu=r.maxAttempts,this.M_=new Tb(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new RL(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Yu(a)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ad(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!tR(t)}return!1}}const xa="FirestoreClient";class NL{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=gn.UNAUTHENTICATED,this.clientId=$v.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ie(xa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ie(xa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Bc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function m_(n,e){n.asyncQueue.verifyOperationInProgress(),ie(xa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await OR(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function L1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Lb(n);ie(xa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>C1(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>C1(e.remoteStore,a))),n._onlineComponents=e}async function Lb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(xa,"Using user provided OfflineComponentProvider");try{await m_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;zi("Error using user provided cache. Falling back to memory cache: "+t),await m_(n,new $h)}}else ie(xa,"Using default OfflineComponentProvider"),await m_(n,new IL(void 0));return n._offlineComponents}async function Dp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(xa,"Using user provided OnlineComponentProvider"),await L1(n,n._uninitializedComponentsProvider._online)):(ie(xa,"Using default OnlineComponentProvider"),await L1(n,new Qh))),n._onlineComponents}function aC(n){return Lb(n).then((e=>e.persistence))}function jb(n){return Lb(n).then((e=>e.localStore))}function oC(n){return Dp(n).then((e=>e.remoteStore))}function Ub(n){return Dp(n).then((e=>e.syncEngine))}function DL(n){return Dp(n).then((e=>e.datastore))}async function xc(n){const e=await Dp(n),t=e.eventManager;return t.onListen=sL.bind(null,e.syncEngine),t.onUnlisten=oL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lL.bind(null,e.syncEngine),t}function kL(n){return n.asyncQueue.enqueue((async()=>{const e=await aC(n),t=await oC(n);return e.setNetworkEnabled(!0),(function(a){const l=ge(a);return l.Ea.delete(0),pd(l)})(t)}))}function PL(n){return n.asyncQueue.enqueue((async()=>{const e=await aC(n),t=await oC(n);return e.setNetworkEnabled(!1),(async function(a){const l=ge(a);l.Ea.add(0),await Uc(l),l.Ra.set("Offline")})(t)}))}function OL(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await(function(g,y){const E=ge(g);return E.persistence.runTransaction("read document","readonly",(T=>E.localDocuments.getDocument(T,y)))})(a,l);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new re(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const m=Bc(d,`Failed to get document '${l} from cache`);c.reject(m)}})(await jb(n),e,t))),t.promise}function lC(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new Np({next:T=>{y.Nu(),c.enqueueAndForget((()=>Cb(l,E)));const k=T.docs.has(d);!k&&T.fromCache?g.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&m&&m.source==="server"?g.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Db(Mc(d.path),y,{includeMetadataChanges:!0,qa:!0});return Rb(l,E)})(await xc(n),n.asyncQueue,e,t,r))),r.promise}function VL(n,e){const t=new Rn;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,l,c){try{const d=await Km(a,l,!0),m=new eC(l,d.Qs),g=m.ru(d.documents),y=m.applyChanges(g,!1);c.resolve(y.snapshot)}catch(d){const m=Bc(d,`Failed to execute query '${l} against cache`);c.reject(m)}})(await jb(n),e,t))),t.promise}function cC(n,e,t={}){const r=new Rn;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new Np({next:T=>{y.Nu(),c.enqueueAndForget((()=>Cb(l,E))),T.fromCache&&m.source==="server"?g.reject(new re(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Db(d,y,{includeMetadataChanges:!0,qa:!0});return Rb(l,E)})(await xc(n),n.asyncQueue,e,t,r))),r.promise}function ML(n,e){const t=new Np(e);return n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ge(a).Ca.add(l),l.next()})(await xc(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(a,l){ge(a).Ca.delete(l)})(await xc(n),t)))}}function LL(n,e,t,r){const a=(function(c,d){let m;return m=typeof c=="string"?rR().encode(c):c,(function(y,E){return new xL(y,E)})((function(y,E){if(y instanceof Uint8Array)return M1(y,E);if(y instanceof ArrayBuffer)return M1(new Uint8Array(y),E);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),d)})(t,md(e));n.asyncQueue.enqueueAndForget((async()=>{AL(await Ub(n),a,r)}))}function jL(n,e){return n.asyncQueue.enqueue((async()=>(function(r,a){const l=ge(r);return l.persistence.runTransaction("Get named query","readonly",(c=>l.Ii.getNamedQuery(c,a)))})(await jb(n),e)))}function uC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const j1=new Map;const hC="firestore.googleapis.com",U1=!0;class F1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hC,this.ssl=U1}else this.host=e.host,this.ssl=e.ssl??U1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<s6)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ix("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gd{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new EM;switch(r.type){case"firstParty":return new IM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=j1.get(t);r&&(ie("ComponentProvider","Removing Datastore"),j1.delete(t),r.terminate())})(this),Promise.resolve()}}function UL(n,e,t,r={}){n=nt(n,gd);const a=Ca(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(_v(`https://${d}`),vv("Firestore",!0)),l.host!==hC&&l.host!==d&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!_a(m,c)&&(n._setSettings(m),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=gn.MOCK_USER;else{g=jD(r.mockUserToken,n._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new gn(E)}n._authCredentials=new wM(new nx(g,y))}}let qn=class dC{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dC(this.firestore,e,this._query)}},vt=class dh{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dh(this.firestore,e,this._key)}toJSON(){return{type:dh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(sd(t,dh._jsonSchema))return new dh(e,r||null,new fe(He.fromString(t.referencePath)))}};vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:sn("string",vt._jsonSchemaVersion),referencePath:sn("string")};let ya=class fC extends qn{constructor(e,t,r){super(e,t,Mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new fe(e))}withConverter(e){return new fC(this.firestore,e,this._path)}};function mC(n,e,...t){if(n=Ie(n),Qv("collection","path",e),n instanceof gd){const r=He.fromString(e,...t);return RA(r),new ya(n,null,r)}{if(!(n instanceof vt||n instanceof ya))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(He.fromString(e,...t));return RA(r),new ya(n.firestore,null,r)}}function FL(n,e){if(n=nt(n,gd),Qv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new qn(n,null,(function(r){return new bs(He.emptyPath(),r)})(e))}function Ym(n,e,...t){if(n=Ie(n),arguments.length===1&&(e=$v.newId()),Qv("doc","path",e),n instanceof gd){const r=He.fromString(e,...t);return xA(r),new vt(n,null,new fe(r))}{if(!(n instanceof vt||n instanceof ya))throw new re(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(He.fromString(e,...t));return xA(r),new vt(n.firestore,n instanceof ya?n.converter:null,new fe(r))}}function pC(n,e){return n=Ie(n),e=Ie(e),(n instanceof vt||n instanceof ya)&&(e instanceof vt||e instanceof ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gC(n,e){return n=Ie(n),e=Ie(e),n instanceof qn&&e instanceof qn&&n.firestore===e.firestore&&cd(n._query,e._query)&&n.converter===e.converter}const z1="AsyncQueue";class B1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tb(this,"async_queue_retry"),this._c=()=>{const r=wm();r&&ie(z1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=wm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=wm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Rn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pa(e))throw e;ie(z1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",q1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=xb.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&ye(47125,{Pc:q1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function q1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function nv(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class zL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const BL=-1;let Kt=class extends gd{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new B1,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B1(e),this._firestoreClient=void 0,await e}}};function Mn(n){if(n._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yC(n),n._firestoreClient}function yC(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new c5(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uC(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}function qL(n,e){zi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return _C(n,Qh.provider,{build:r=>new sC(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function HL(n){zi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();_C(n,Qh.provider,{build:t=>new SL(t,e.cacheSizeBytes)})}function _C(n,e,t){if((n=nt(n,Kt))._firestoreClient||n._terminated)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new re(K.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},yC(n)}function GL(n){if(n._initialized&&!n._terminated)throw new re(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Li.v())return Promise.resolve();const a=r+DR;await Li.delete(a)})(vb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function KL(n){return(function(t){const r=new Rn;return t.asyncQueue.enqueueAndForget((async()=>fL(await Ub(t),r))),r.promise})(Mn(n=nt(n,Kt)))}function $L(n){return kL(Mn(n=nt(n,Kt)))}function QL(n){return PL(Mn(n=nt(n,Kt)))}function WL(n,e){const t=Mn(n=nt(n,Kt)),r=new zL;return LL(t,n._databaseId,e,r),r}function YL(n,e){return jL(Mn(n=nt(n,Kt)),e).then((t=>t?new qn(n,null,t.query):null))}class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(Mt.fromBase64String(e))}catch(t){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pn(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sd(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:sn("string",Pn._jsonSchemaVersion),bytes:sn("string")};let Ra=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};let Qo=class{constructor(e){this._methodName=e}};class ei{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ei._jsonSchemaVersion}}static fromJSON(e){if(sd(e,ei._jsonSchema))return new ei(e.latitude,e.longitude)}}ei._jsonSchemaVersion="firestore/geoPoint/1.0",ei._jsonSchema={type:sn("string",ei._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};class Ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sd(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ui(e.vectorValues);throw new re(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:sn("string",Ui._jsonSchemaVersion),vectorValues:sn("object")};const XL=/^__.*__$/;class JL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lc(e,this.data,t,this.fieldTransforms)}}class vC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ws(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class kp{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bC(this.Ac)&&XL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||md(e)}Cc(e,t,r,a=!1){return new kp({Ac:e,methodName:t,Dc:r,path:Ct.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wo(n){const e=n._freezeSettings(),t=md(n._databaseId);return new ZL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pp(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Kb("Data must be an object, but it was:",c,r);const d=TC(r,c);let m,g;if(l.merge)m=new Zn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const T=rv(e,E,t);if(!c.contains(T))throw new re(K.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);IC(y,T)||y.push(T)}m=new Zn(y),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new JL(new Sn(d),m,g)}class yd extends Qo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}function EC(n,e,t){return new kp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fb extends Qo{_toFieldTransform(e){return new hd(e.path,new vc)}isEqual(e){return e instanceof Fb}}class zb extends Qo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=EC(this,e,!0),r=this.vc.map((l=>Yo(l,t))),a=new jo(r);return new hd(e.path,a)}isEqual(e){return e instanceof zb&&_a(this.vc,e.vc)}}class Bb extends Qo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=EC(this,e,!0),r=this.vc.map((l=>Yo(l,t))),a=new Uo(r);return new hd(e.path,a)}isEqual(e){return e instanceof Bb&&_a(this.vc,e.vc)}}class qb extends Qo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new bc(e.serializer,Qx(e.serializer,this.Fc));return new hd(e.path,t)}isEqual(e){return e instanceof qb&&this.Fc===e.Fc}}function Hb(n,e,t,r){const a=n.Cc(1,e,t);Kb("Data must be an object, but it was:",a,r);const l=[],c=Sn.empty();Oa(r,((m,g)=>{const y=$b(e,m,t);g=Ie(g);const E=a.yc(y);if(g instanceof yd)l.push(y);else{const T=Yo(g,E);T!=null&&(l.push(y),c.set(y,T))}}));const d=new Zn(l);return new vC(c,d,a.fieldTransforms)}function Gb(n,e,t,r,a,l){const c=n.Cc(1,e,t),d=[rv(e,r,t)],m=[a];if(l.length%2!=0)throw new re(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(rv(e,l[T])),m.push(l[T+1]);const g=[],y=Sn.empty();for(let T=d.length-1;T>=0;--T)if(!IC(g,d[T])){const k=d[T];let R=m[T];R=Ie(R);const j=c.yc(k);if(R instanceof yd)g.push(k);else{const U=Yo(R,j);U!=null&&(g.push(k),y.set(k,U))}}const E=new Zn(g);return new vC(y,E,c.fieldTransforms)}function wC(n,e,t,r=!1){return Yo(t,n.Cc(r?4:3,e))}function Yo(n,e){if(AC(n=Ie(n)))return Kb("Unsupported field value:",e,n),TC(n,e);if(n instanceof Qo)return(function(r,a){if(!bC(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=Yo(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Qx(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ot.fromDate(r);return{timestampValue:Ec(a.serializer,l)}}if(r instanceof ot){const l=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ec(a.serializer,l)}}if(r instanceof ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:aR(a.serializer,r._byteString)};if(r instanceof vt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:db(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ui)return(function(c,d){return{mapValue:{fields:{[tb]:{stringValue:nb},[gc]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return ab(d.serializer,g)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${pp(r)}`)})(n,e)}function TC(n,e){const t={};return Tx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oa(n,((r,a)=>{const l=Yo(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function AC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof ei||n instanceof Pn||n instanceof vt||n instanceof Qo||n instanceof Ui)}function Kb(n,e,t){if(!AC(t)||!sx(t)){const r=pp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rv(n,e,t){if((e=Ie(e))instanceof Ra)return e._internalPath;if(typeof e=="string")return $b(n,e);throw Xm("Field path arguments must be of type string or ",n,!1,void 0,t)}const ej=new RegExp("[~\\*/\\[\\]]");function $b(n,e,t){if(e.search(ej)>=0)throw Xm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ra(...e.split("."))._internalPath}catch{throw Xm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xm(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new re(K.INVALID_ARGUMENT,d+n+m)}function IC(n,e){return n.some((t=>t.isEqual(e)))}class Wh{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Op("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tj extends Wh{data(){return super.data()}}function Op(n,e){return typeof e=="string"?$b(n,e):e instanceof Ra?e._internalPath:e._delegate._internalPath}function SC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qb{}class _d extends Qb{}function la(n,e,...t){let r=[];e instanceof Qb&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof Wb)).length,d=l.filter((m=>m instanceof Vp)).length;if(c>1||c>0&&d>0)throw new re(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Vp extends _d{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Vp(e,t,r)}_apply(e){const t=this._parse(e);return RC(e._query,t),new qn(e.firestore,e.converter,q_(e._query,t))}_parse(e){const t=Wo(e.firestore);return(function(l,c,d,m,g,y,E){let T;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new re(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){G1(E,y);const R=[];for(const j of E)R.push(H1(m,l,j));T={arrayValue:{values:R}}}else T=H1(m,l,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||G1(E,y),T=wC(d,c,E,y==="in"||y==="not-in");return Qe.create(g,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nj(n,e,t){const r=e,a=Op("where",n);return Vp._create(a,r,t)}class Wb extends Qb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wb(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)RC(c,m),c=q_(c,m)})(e._query,t),new qn(e.firestore,e.converter,q_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yb extends _d{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yb(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hh(l,c)})(e._query,this._field,this._direction);return new qn(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new bs(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function rj(n,e="asc"){const t=e,r=Op("orderBy",n);return Yb._create(r,t)}class Mp extends _d{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Mp(e,t,r)}_apply(e){return new qn(e.firestore,e.converter,zm(e._query,this._limit,this._limitType))}}function ij(n){return ax("limit",n),Mp._create("limit",n,"F")}function sj(n){return ax("limitToLast",n),Mp._create("limitToLast",n,"L")}class Lp extends _d{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lp(e,t,r)}_apply(e){const t=xC(e,this.type,this._docOrFields,this._inclusive);return new qn(e.firestore,e.converter,(function(a,l){return new bs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function aj(...n){return Lp._create("startAt",n,!0)}function oj(...n){return Lp._create("startAfter",n,!1)}class jp extends _d{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jp(e,t,r)}_apply(e){const t=xC(e,this.type,this._docOrFields,this._inclusive);return new qn(e.firestore,e.converter,(function(a,l){return new bs(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function lj(...n){return jp._create("endBefore",n,!1)}function cj(...n){return jp._create("endAt",n,!0)}function xC(n,e,t,r){if(t[0]=Ie(t[0]),t[0]instanceof Wh)return(function(l,c,d,m,g){if(!m)throw new re(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const y=[];for(const E of ic(l))if(E.field.isKeyField())y.push(Mo(c,m.key));else{const T=m.data.field(E.field);if(bp(T))throw new re(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(T===null){const k=E.field.canonicalString();throw new re(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ia(y,g)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const a=Wo(n.firestore);return(function(c,d,m,g,y,E){const T=c.explicitOrderBy;if(y.length>T.length)throw new re(K.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let R=0;R<y.length;R++){const j=y[R];if(T[R].field.isKeyField()){if(typeof j!="string")throw new re(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!ib(c)&&j.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const U=c.path.child(He.fromString(j));if(!fe.isDocumentKey(U))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const se=new fe(U);k.push(Mo(d,se))}else{const U=wC(m,g,j);k.push(U)}}return new Ia(k,E)})(n._query,n.firestore._databaseId,a,e,t,r)}}function H1(n,e,t){if(typeof(t=Ie(t))=="string"){if(t==="")throw new re(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ib(e)&&t.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(He.fromString(t));if(!fe.isDocumentKey(r))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mo(n,new fe(r))}if(t instanceof vt)return Mo(n,t._key);throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pp(t)}.`)}function G1(n,e){if(!Array.isArray(n)||n.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RC(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Xb{convertValue(e,t="none"){switch(Ta(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oa(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[gc].arrayValue?.values?.map((r=>Rt(r.doubleValue)));return new Ui(t)}convertGeoPoint(e){return new ei(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ep(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const t=gs(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=He.fromString(e);be(yR(r),9688,{name:e});const a=new wa(r.get(1),r.get(3)),l=new fe(r.popFirst(5));return a.isEqual(t)||Ht(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Up(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uj extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}class Ao{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Or=class CC extends Wh{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=CC._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Or._jsonSchemaVersion="firestore/documentSnapshot/1.0",Or._jsonSchema={type:sn("string",Or._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};let xh=class extends Or{data(e={}){return super.data(e)}},ti=class NC{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ao(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new xh(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new xh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ao(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new xh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Ao(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:hj(d.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=NC._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$v.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}function DC(n,e){return n instanceof Or&&e instanceof Or?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ti&&e instanceof ti&&n._firestore===e._firestore&&gC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dj(n){n=nt(n,vt);const e=nt(n.firestore,Kt);return lC(Mn(e),n._key).then((t=>Jb(e,n,t)))}ti._jsonSchemaVersion="firestore/querySnapshot/1.0",ti._jsonSchema={type:sn("string",ti._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};class Xo extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function fj(n){n=nt(n,vt);const e=nt(n.firestore,Kt),t=Mn(e),r=new Xo(e);return OL(t,n._key).then((a=>new Or(e,r,n._key,a,new Ao(a!==null&&a.hasLocalMutations,!0),n.converter)))}function mj(n){n=nt(n,vt);const e=nt(n.firestore,Kt);return lC(Mn(e),n._key,{source:"server"}).then((t=>Jb(e,n,t)))}function pj(n){n=nt(n,qn);const e=nt(n.firestore,Kt),t=Mn(e),r=new Xo(e);return SC(n._query),cC(t,n._query).then((a=>new ti(e,r,n,a)))}function gj(n){n=nt(n,qn);const e=nt(n.firestore,Kt),t=Mn(e),r=new Xo(e);return VL(t,n._query).then((a=>new ti(e,r,n,a)))}function yj(n){n=nt(n,qn);const e=nt(n.firestore,Kt),t=Mn(e),r=new Xo(e);return cC(t,n._query,{source:"server"}).then((a=>new ti(e,r,n,a)))}function K1(n,e,t){n=nt(n,vt);const r=nt(n.firestore,Kt),a=Up(n.converter,e,t);return vd(r,[Pp(Wo(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Nt.none())])}function $1(n,e,t,...r){n=nt(n,vt);const a=nt(n.firestore,Kt),l=Wo(a);let c;return c=typeof(e=Ie(e))=="string"||e instanceof Ra?Gb(l,"updateDoc",n._key,e,t,r):Hb(l,"updateDoc",n._key,e),vd(a,[c.toMutation(n._key,Nt.exists(!0))])}function _j(n){return vd(nt(n.firestore,Kt),[new jc(n._key,Nt.none())])}function vj(n,e){const t=nt(n.firestore,Kt),r=Ym(n),a=Up(n.converter,e);return vd(t,[Pp(Wo(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Nt.exists(!1))]).then((()=>r))}function kC(n,...e){n=Ie(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||nv(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(nv(e[r])){const m=e[r];e[r]=m.next?.bind(m),e[r+1]=m.error?.bind(m),e[r+2]=m.complete?.bind(m)}let l,c,d;if(n instanceof vt)c=nt(n.firestore,Kt),d=Mc(n._key.path),l={next:m=>{e[r]&&e[r](Jb(c,n,m))},error:e[r+1],complete:e[r+2]};else{const m=nt(n,qn);c=nt(m.firestore,Kt),d=m._query;const g=new Xo(c);l={next:y=>{e[r]&&e[r](new ti(c,g,m,y))},error:e[r+1],complete:e[r+2]},SC(n._query)}return(function(g,y,E,T){const k=new Np(T),R=new Db(y,k,E);return g.asyncQueue.enqueueAndForget((async()=>Rb(await xc(g),R))),()=>{k.Nu(),g.asyncQueue.enqueueAndForget((async()=>Cb(await xc(g),R)))}})(Mn(c),d,a,l)}function bj(n,e){return ML(Mn(n=nt(n,Kt)),nv(e)?e:{next:e})}function vd(n,e){return(function(r,a){const l=new Rn;return r.asyncQueue.enqueueAndForget((async()=>cL(await Ub(r),a,l))),l.promise})(Mn(n),e)}function Jb(n,e,t){const r=t.docs.get(e._key),a=new Xo(n);return new Or(n,a,e._key,r,new Ao(t.hasPendingWrites,t.fromCache),e.converter)}const Ej={maxAttempts:5};let wj=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wo(e)}set(e,t,r){this._verifyNotCommitted();const a=da(e,this._firestore),l=Up(a.converter,t,r),c=Pp(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(c.toMutation(a._key,Nt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=da(e,this._firestore);let c;return c=typeof(t=Ie(t))=="string"||t instanceof Ra?Gb(this._dataReader,"WriteBatch.update",l._key,t,r,a):Hb(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=da(e,this._firestore);return this._mutations=this._mutations.concat(new jc(t._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function da(n,e){if((n=Ie(n)).firestore!==e)throw new re(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tj{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wo(e)}get(e){const t=da(e,this._firestore),r=new uj(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return ye(24041);const l=a[0];if(l.isFoundDocument())return new Wh(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Wh(this._firestore,r,t._key,null,t.converter);throw ye(18433,{doc:l})}))}set(e,t,r){const a=da(e,this._firestore),l=Up(a.converter,t,r),c=Pp(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,c),this}update(e,t,r,...a){const l=da(e,this._firestore);let c;return c=typeof(t=Ie(t))=="string"||t instanceof Ra?Gb(this._dataReader,"Transaction.update",l._key,t,r,a):Hb(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=da(e,this._firestore);return this._transaction.delete(t._key),this}}let Aj=class extends Tj{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=da(e,this._firestore),r=new Xo(this._firestore);return super.get(e).then((a=>new Or(this._firestore,r,t._key,a._document,new Ao(!1,!1),t.converter)))}};function Ij(n,e,t){n=nt(n,Kt);const r={...Ej,...t};return(function(l){if(l.maxAttempts<1)throw new re(K.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,c,d){const m=new Rn;return l.asyncQueue.enqueueAndForget((async()=>{const g=await DL(l);new CL(l.asyncQueue,g,d,c,m).ju()})),m.promise})(Mn(n),(a=>e(new Aj(n,a))),r)}function Sj(){return new yd("deleteField")}function xj(){return new Fb("serverTimestamp")}function Rj(...n){return new zb("arrayUnion",n)}function Cj(...n){return new Bb("arrayRemove",n)}function Nj(n){return new qb("increment",n)}(function(e,t=!0){(function(a){Vc=a})(Na),ms(new Vr("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Kt(new TM(r.getProvider("auth-internal")),new SM(c,r.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),yr(TA,AA,e),yr(TA,AA,"esm2020")})();const Dj="@firebase/firestore-compat",kj="0.4.3";function Zb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Q1(){if(typeof Uint8Array>"u")throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function W1(){if(!o5())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}let PC=class iv{constructor(e){this._delegate=e}static fromBase64String(e){return W1(),new iv(Pn.fromBase64String(e))}static fromUint8Array(e){return Q1(),new iv(Pn.fromUint8Array(e))}toBase64(){return W1(),this._delegate.toBase64()}toUint8Array(){return Q1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function sv(n){return Pj(n,["next","error","complete"])}function Pj(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}class Oj{enableIndexedDbPersistence(e,t){return qL(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return HL(e._delegate)}clearIndexedDbPersistence(e){return GL(e._delegate)}}class OC{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&zi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){UL(this._delegate,e,t,r)}enableNetwork(){return $L(this._delegate)}disableNetwork(){return QL(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ix("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KL(this._delegate)}onSnapshotsInSync(e){return bj(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Rc(this,mC(this._delegate,e))}catch(t){throw zn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pr(this,Ym(this._delegate,e))}catch(t){throw zn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fn(this,FL(this._delegate,e))}catch(t){throw zn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Ij(this._delegate,t=>e(new VC(this,t)))}batch(){return Mn(this._delegate),new MC(new wj(this._delegate,e=>vd(this._delegate,e)))}loadBundle(e){return WL(this._delegate,e)}namedQuery(e){return YL(this._delegate,e).then(t=>t?new Fn(this,t):null)}}class Fp extends Xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new PC(new Pn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pr.forKey(t,this.firestore,null)}}function Vj(n){vM(n)}class VC{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}get(e){const t=Io(e);return this._delegate.get(t).then(r=>new Yh(this._firestore,new Or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const a=Io(e);return r?(Zb("Transaction.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Io(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Io(e);return this._delegate.delete(t),this}}class MC{constructor(e){this._delegate=e}set(e,t,r){const a=Io(e);return r?(Zb("WriteBatch.set",r),this._delegate.set(a,t,r)):this._delegate.set(a,t),this}update(e,t,r,...a){const l=Io(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,r,...a),this}delete(e){const t=Io(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ho{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xh(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ho.INSTANCES;let a=r.get(e);a||(a=new WeakMap,r.set(e,a));let l=a.get(t);return l||(l=new Ho(e,new Fp(e),t),a.set(t,l)),l}}Ho.INSTANCES=new WeakMap;class Pr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}static forPath(e,t,r){if(e.length%2!==0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pr(t,new vt(t._delegate,r,new fe(e)))}static forKey(e,t,r){return new Pr(t,new vt(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Rc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Rc(this.firestore,mC(this._delegate,e))}catch(t){throw zn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ie(e),e instanceof vt?pC(this._delegate,e):!1}set(e,t){t=Zb("DocumentReference.set",t);try{return t?K1(this._delegate,e,t):K1(this._delegate,e)}catch(r){throw zn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$1(this._delegate,e):$1(this._delegate,e,t,...r)}catch(a){throw zn(a,"updateDoc()","DocumentReference.update()")}}delete(){return _j(this._delegate)}onSnapshot(...e){const t=LC(e),r=jC(e,a=>new Yh(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return kC(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=fj(this._delegate):e?.source==="server"?t=mj(this._delegate):t=dj(this._delegate),t.then(r=>new Yh(this.firestore,new Or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pr(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zn(n,e,t){return n.message=n.message.replace(e,t),n}function LC(n){for(const e of n)if(typeof e=="object"&&!sv(e))return e;return{}}function jC(n,e){let t;return sv(n[0])?t=n[0]:sv(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:r=>{t.next&&t.next(e(r))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Yh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return DC(this._delegate,e._delegate)}}class Xh extends Yh{data(e){const t=this._delegate.data(e);return this._delegate._converter||bM(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Fn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fp(e)}where(e,t,r){try{return new Fn(this.firestore,la(this._delegate,nj(e,t,r)))}catch(a){throw zn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fn(this.firestore,la(this._delegate,rj(e,t)))}catch(r){throw zn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fn(this.firestore,la(this._delegate,ij(e)))}catch(t){throw zn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Fn(this.firestore,la(this._delegate,sj(e)))}catch(t){throw zn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Fn(this.firestore,la(this._delegate,aj(...e)))}catch(t){throw zn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Fn(this.firestore,la(this._delegate,oj(...e)))}catch(t){throw zn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Fn(this.firestore,la(this._delegate,lj(...e)))}catch(t){throw zn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Fn(this.firestore,la(this._delegate,cj(...e)))}catch(t){throw zn(t,"endAt()","Query.endAt()")}}isEqual(e){return gC(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=gj(this._delegate):e?.source==="server"?t=yj(this._delegate):t=pj(this._delegate),t.then(r=>new av(this.firestore,new ti(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=LC(e),r=jC(e,a=>new av(this.firestore,new ti(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return kC(this._delegate,t,r)}withConverter(e){return new Fn(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Mj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class av{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Mj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xh(this._firestore,r))})}isEqual(e){return DC(this._delegate,e._delegate)}}class Rc extends Fn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pr(this.firestore,e):null}doc(e){try{return e===void 0?new Pr(this.firestore,Ym(this._delegate)):new Pr(this.firestore,Ym(this._delegate,e))}catch(t){throw zn(t,"doc()","CollectionReference.doc()")}}add(e){return vj(this._delegate,e).then(t=>new Pr(this.firestore,t))}isEqual(e){return pC(this._delegate,e._delegate)}withConverter(e){return new Rc(this.firestore,e?this._delegate.withConverter(Ho.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Io(n){return nt(n,vt)}class eE{constructor(...e){this._delegate=new Ra(...e)}static documentId(){return new eE(Ct.keyField().canonicalString())}isEqual(e){return e=Ie(e),e instanceof Ra?this._delegate._internalPath.isEqual(e._internalPath):!1}}class Eo{static serverTimestamp(){const e=xj();return e._methodName="FieldValue.serverTimestamp",new Eo(e)}static delete(){const e=Sj();return e._methodName="FieldValue.delete",new Eo(e)}static arrayUnion(...e){const t=Rj(...e);return t._methodName="FieldValue.arrayUnion",new Eo(t)}static arrayRemove(...e){const t=Cj(...e);return t._methodName="FieldValue.arrayRemove",new Eo(t)}static increment(e){const t=Nj(e);return t._methodName="FieldValue.increment",new Eo(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Lj={Firestore:OC,GeoPoint:ei,Timestamp:ot,Blob:PC,Transaction:VC,WriteBatch:MC,DocumentReference:Pr,DocumentSnapshot:Yh,Query:Fn,QueryDocumentSnapshot:Xh,QuerySnapshot:av,CollectionReference:Rc,FieldPath:eE,FieldValue:Eo,setLogLevel:Vj,CACHE_SIZE_UNLIMITED:BL};function jj(n,e){n.INTERNAL.registerComponent(new Vr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(r,a)},"PUBLIC").setServiceProps({...Lj}))}function Uj(n){jj(n,(e,t)=>new OC(e,t,new Oj)),n.registerVersion(Dj,kj)}Uj(xn);const Fj="type.googleapis.com/google.protobuf.Int64Value",zj="type.googleapis.com/google.protobuf.UInt64Value";function UC(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Jm(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Jm(e));if(typeof n=="function"||typeof n=="object")return UC(n,e=>Jm(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Cc(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Fj:case zj:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Cc(e)):typeof n=="function"||typeof n=="object"?UC(n,e=>Cc(e)):n}const FC="functions";const Y1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tr extends yn{constructor(e,t,r){super(`${FC}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,tr.prototype)}}function Bj(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Zm(n,e){let t=Bj(n),r=t,a;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!Y1[c])return new tr("internal","internal");t=Y1[c],r=c}const d=l.message;typeof d=="string"&&(r=d),a=l.details,a!==void 0&&(a=Cc(a))}}catch{}return t==="ok"?null:new tr(t,r,a)}class qj{constructor(e,t,r,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,It(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||r.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:a}}}const X1="us-central1",Hj=/^data: (.*?)(?:\n|$)/;function Gj(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new tr("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let Kj=class{constructor(e,t,r,a,l=X1,c=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new qj(e,t,r,a),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(l);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=X1}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function $j(n,e,t){const r=Ca(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(_v(n.emulatorOrigin+"/backends"),vv("Functions",!0))}function Qj(n,e,t){const r=a=>Xj(n,e,a,t||{});return r.stream=(a,l)=>Jj(n,e,a,l),r}function Wj(n,e,t){const r=a=>qC(n,e,a,t||{});return r.stream=(a,l)=>HC(n,e,a,l||{}),r}function zC(n){return n.emulatorOrigin&&Ca(n.emulatorOrigin)?"include":void 0}async function Yj(n,e,t,r,a){t["Content-Type"]="application/json";let l;try{l=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:zC(a)})}catch{return{status:0,json:null}}let c=null;try{c=await l.json()}catch{}return{status:l.status,json:c}}async function BC(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function Xj(n,e,t,r){const a=n._url(e);return qC(n,a,t,r)}async function qC(n,e,t,r){t=Jm(t);const a={data:t},l=await BC(n,r),c=r.timeout||7e4,d=Gj(c),m=await Promise.race([Yj(e,a,l,n.fetchImpl,n),d.promise,n.cancelAllRequests]);if(d.cancel(),!m)throw new tr("cancelled","Firebase Functions instance was deleted.");const g=Zm(m.status,m.json);if(g)throw g;if(!m.json)throw new tr("internal","Response is not valid JSON object.");let y=m.json.data;if(typeof y>"u"&&(y=m.json.result),typeof y>"u")throw new tr("internal","Response is missing data field.");return{data:Cc(y)}}function Jj(n,e,t,r){const a=n._url(e);return HC(n,a,t,r||{})}async function HC(n,e,t,r){t=Jm(t);const a={data:t},l=await BC(n,r);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:l,signal:r?.signal,credentials:zC(n)})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const R=new tr("cancelled","Request was cancelled.");return{data:Promise.reject(R),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(R)}}}}}}const k=Zm(0,null);return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}let d,m;const g=new Promise((T,k)=>{d=T,m=k});r?.signal?.addEventListener("abort",()=>{const T=new tr("cancelled","Request was cancelled.");m(T)});const y=c.body.getReader(),E=Zj(y,d,m,r?.signal);return{stream:{[Symbol.asyncIterator](){const T=E.getReader();return{async next(){const{value:k,done:R}=await T.read();return{value:k,done:R}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:g}}function Zj(n,e,t,r){const a=(c,d)=>{const m=c.match(Hj);if(!m)return;const g=m[1];try{const y=JSON.parse(g);if("result"in y){e(Cc(y.result));return}if("message"in y){d.enqueue(Cc(y.message));return}if("error"in y){const E=Zm(0,y);d.error(E),t(E);return}}catch(y){if(y instanceof tr){d.error(y),t(y);return}}},l=new TextDecoder;return new ReadableStream({start(c){let d="";return m();async function m(){if(r?.aborted){const g=new tr("cancelled","Request was cancelled");return c.error(g),t(g),Promise.resolve()}try{const{value:g,done:y}=await n.read();if(y){d.trim()&&a(d.trim(),c),c.close();return}if(r?.aborted){const T=new tr("cancelled","Request was cancelled");c.error(T),t(T),await n.cancel();return}d+=l.decode(g,{stream:!0});const E=d.split(`
`);d=E.pop()||"";for(const T of E)T.trim()&&a(T.trim(),c);return m()}catch(g){const y=g instanceof tr?g:Zm(0,null);c.error(y),t(y)}}},cancel(){return n.cancel()}})}const J1="@firebase/functions",Z1="0.13.1";const e3="auth-internal",t3="app-check-internal",n3="messaging-internal";function r3(n){const e=(t,{instanceIdentifier:r})=>{const a=t.getProvider("app").getImmediate(),l=t.getProvider(e3),c=t.getProvider(n3),d=t.getProvider(t3);return new Kj(a,l,c,d,r)};ms(new Vr(FC,e,"PUBLIC").setMultipleInstances(!0)),yr(J1,Z1,n),yr(J1,Z1,"esm2020")}function eI(n,e,t){$j(Ie(n),e,t)}function i3(n,e,t){return Qj(Ie(n),e,t)}function s3(n,e,t){return Wj(Ie(n),e,t)}r3();const a3="@firebase/functions-compat",o3="0.4.1";class GC{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return i3(this._delegate,e,t)}httpsCallableFromURL(e,t){return s3(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new yn("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new yn("functions","Port missing in origin provided to useFunctionsEmulator()");return eI(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return eI(this._delegate,e,t)}}const l3="us-central1",c3=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??l3});return new GC(t,r)};function u3(){const n={Functions:GC};xn.INTERNAL.registerComponent(new Vr("functions-compat",c3,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}u3();xn.registerVersion(a3,o3);const h3={apiKey:"AIzaSyDTMRmV69xNNK7IFw9UV4OJ9cFTH4Ic5Wo",authDomain:"schoolbook-290b6.firebaseapp.com",projectId:"schoolbook-290b6",storageBucket:"schoolbook-290b6.firebasestorage.app",messagingSenderId:"657831894632",appId:"1:657831894632:web:5354da4b4a090785ee65dd",measurementId:"G-P90QZ00GG7"};xn.apps.length||xn.initializeApp(h3);const Dt=xn.firestore(),Wr=xn.auth(),Rh=xn.functions(),tI=window.location.hostname;(tI==="localhost"||tI==="127.0.0.1")&&(console.log("Using Firebase Emulators"),Dt.useEmulator("127.0.0.1",8088),Wr.useEmulator("http://127.0.0.1:9099",{disableWarnings:!0}),Rh.useEmulator("127.0.0.1",5001));const Jr=Object.freeze(Object.defineProperty({__proto__:null,auth:Wr,db:Dt,firebase:xn,functions:Rh},Symbol.toStringTag,{value:"Module"})),kr={onAuthStateChanged(n){return Wr.onAuthStateChanged(n)},async signUp(n,e){return Wr.createUserWithEmailAndPassword(n,e)},async login(n,e){return Wr.signInWithEmailAndPassword(n,e)},async logout(){return Wr.signOut()},async sendVerificationLink(n){const e={url:window.location.href,handleCodeInApp:!0};return Wr.sendSignInLinkToEmail(n,e)},isSignInWithEmailLink(n){return Wr.isSignInWithEmailLink(n)},async signInWithLink(n,e){return Wr.signInWithEmailLink(n,e)},async updateUserPassword(n){if(!Wr.currentUser)throw new Error("");return Wr.currentUser.updatePassword(n)},async completeProfile(n){return Rh.httpsCallable("completeProfile")(n)},onProfileSnapshot(n,e){return Dt.collection("users").doc(n).onSnapshot(e)},async getBindingCode(){return Rh.httpsCallable("generateBindingCode")()},async unbindLineAccount(){return Rh.httpsCallable("unbindLineAccount")()}};function KC(n,e){return function(){return n.apply(e,arguments)}}const{toString:d3}=Object.prototype,{getPrototypeOf:tE}=Object,{iterator:zp,toStringTag:$C}=Symbol,Bp=(n=>e=>{const t=d3.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ri=n=>(n=n.toLowerCase(),e=>Bp(e)===n),qp=n=>e=>typeof e===n,{isArray:qc}=Array,Nc=qp("undefined");function bd(n){return n!==null&&!Nc(n)&&n.constructor!==null&&!Nc(n.constructor)&&nr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const QC=ri("ArrayBuffer");function f3(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&QC(n.buffer),e}const m3=qp("string"),nr=qp("function"),WC=qp("number"),Ed=n=>n!==null&&typeof n=="object",p3=n=>n===!0||n===!1,Tm=n=>{if(Bp(n)!=="object")return!1;const e=tE(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($C in n)&&!(zp in n)},g3=n=>{if(!Ed(n)||bd(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},y3=ri("Date"),_3=ri("File"),v3=ri("Blob"),b3=ri("FileList"),E3=n=>Ed(n)&&nr(n.pipe),w3=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||nr(n.append)&&((e=Bp(n))==="formdata"||e==="object"&&nr(n.toString)&&n.toString()==="[object FormData]"))},T3=ri("URLSearchParams"),[A3,I3,S3,x3]=["ReadableStream","Request","Response","Headers"].map(ri),R3=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wd(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,a;if(typeof n!="object"&&(n=[n]),qc(n))for(r=0,a=n.length;r<a;r++)e.call(null,n[r],r,n);else{if(bd(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let d;for(r=0;r<c;r++)d=l[r],e.call(null,n[d],d,n)}}function YC(n,e){if(bd(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,a;for(;r-- >0;)if(a=t[r],e===a.toLowerCase())return a;return null}const So=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,XC=n=>!Nc(n)&&n!==So;function ov(){const{caseless:n,skipUndefined:e}=XC(this)&&this||{},t={},r=(a,l)=>{const c=n&&YC(t,l)||l;Tm(t[c])&&Tm(a)?t[c]=ov(t[c],a):Tm(a)?t[c]=ov({},a):qc(a)?t[c]=a.slice():(!e||!Nc(a))&&(t[c]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&wd(arguments[a],r);return t}const C3=(n,e,t,{allOwnKeys:r}={})=>(wd(e,(a,l)=>{t&&nr(a)?n[l]=KC(a,t):n[l]=a},{allOwnKeys:r}),n),N3=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),D3=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},k3=(n,e,t,r)=>{let a,l,c;const d={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),l=a.length;l-- >0;)c=a[l],(!r||r(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&tE(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},P3=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},O3=n=>{if(!n)return null;if(qc(n))return n;let e=n.length;if(!WC(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},V3=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&tE(Uint8Array)),M3=(n,e)=>{const r=(n&&n[zp]).call(n);let a;for(;(a=r.next())&&!a.done;){const l=a.value;e.call(n,l[0],l[1])}},L3=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},j3=ri("HTMLFormElement"),U3=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,a){return r.toUpperCase()+a}),nI=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),F3=ri("RegExp"),JC=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};wd(t,(a,l)=>{let c;(c=e(a,l,n))!==!1&&(r[l]=c||a)}),Object.defineProperties(n,r)},z3=n=>{JC(n,(e,t)=>{if(nr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(nr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},B3=(n,e)=>{const t={},r=a=>{a.forEach(l=>{t[l]=!0})};return qc(n)?r(n):r(String(n).split(e)),t},q3=()=>{},H3=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function G3(n){return!!(n&&nr(n.append)&&n[$C]==="FormData"&&n[zp])}const K3=n=>{const e=new Array(10),t=(r,a)=>{if(Ed(r)){if(e.indexOf(r)>=0)return;if(bd(r))return r;if(!("toJSON"in r)){e[a]=r;const l=qc(r)?[]:{};return wd(r,(c,d)=>{const m=t(c,a+1);!Nc(m)&&(l[d]=m)}),e[a]=void 0,l}}return r};return t(n,0)},$3=ri("AsyncFunction"),Q3=n=>n&&(Ed(n)||nr(n))&&nr(n.then)&&nr(n.catch),ZC=((n,e)=>n?setImmediate:e?((t,r)=>(So.addEventListener("message",({source:a,data:l})=>{a===So&&l===t&&r.length&&r.shift()()},!1),a=>{r.push(a),So.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",nr(So.postMessage)),W3=typeof queueMicrotask<"u"?queueMicrotask.bind(So):typeof process<"u"&&process.nextTick||ZC,Y3=n=>n!=null&&nr(n[zp]),W={isArray:qc,isArrayBuffer:QC,isBuffer:bd,isFormData:w3,isArrayBufferView:f3,isString:m3,isNumber:WC,isBoolean:p3,isObject:Ed,isPlainObject:Tm,isEmptyObject:g3,isReadableStream:A3,isRequest:I3,isResponse:S3,isHeaders:x3,isUndefined:Nc,isDate:y3,isFile:_3,isBlob:v3,isRegExp:F3,isFunction:nr,isStream:E3,isURLSearchParams:T3,isTypedArray:V3,isFileList:b3,forEach:wd,merge:ov,extend:C3,trim:R3,stripBOM:N3,inherits:D3,toFlatObject:k3,kindOf:Bp,kindOfTest:ri,endsWith:P3,toArray:O3,forEachEntry:M3,matchAll:L3,isHTMLForm:j3,hasOwnProperty:nI,hasOwnProp:nI,reduceDescriptors:JC,freezeMethods:z3,toObjectSet:B3,toCamelCase:U3,noop:q3,toFiniteNumber:H3,findKey:YC,global:So,isContextDefined:XC,isSpecCompliantForm:G3,toJSONObject:K3,isAsyncFn:$3,isThenable:Q3,setImmediate:ZC,asap:W3,isIterable:Y3};function je(n,e,t,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}W.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const e2=je.prototype,t2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{t2[n]={value:n}});Object.defineProperties(je,t2);Object.defineProperty(e2,"isAxiosError",{value:!0});je.from=(n,e,t,r,a,l)=>{const c=Object.create(e2);W.toFlatObject(n,c,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const d=n&&n.message?n.message:"Error",m=e==null&&n?n.code:e;return je.call(c,d,m,t,r,a),n&&c.cause==null&&Object.defineProperty(c,"cause",{value:n,configurable:!0}),c.name=n&&n.name||"Error",l&&Object.assign(c,l),c};const X3=null;function lv(n){return W.isPlainObject(n)||W.isArray(n)}function n2(n){return W.endsWith(n,"[]")?n.slice(0,-2):n}function rI(n,e,t){return n?n.concat(e).map(function(a,l){return a=n2(a),!t&&l?"["+a+"]":a}).join(t?".":""):e}function J3(n){return W.isArray(n)&&!n.some(lv)}const Z3=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function Hp(n,e,t){if(!W.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=W.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,U){return!W.isUndefined(U[j])});const r=t.metaTokens,a=t.visitor||y,l=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(a))throw new TypeError("visitor must be a function");function g(R){if(R===null)return"";if(W.isDate(R))return R.toISOString();if(W.isBoolean(R))return R.toString();if(!m&&W.isBlob(R))throw new je("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(R)||W.isTypedArray(R)?m&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function y(R,j,U){let se=R;if(R&&!U&&typeof R=="object"){if(W.endsWith(j,"{}"))j=r?j:j.slice(0,-2),R=JSON.stringify(R);else if(W.isArray(R)&&J3(R)||(W.isFileList(R)||W.endsWith(j,"[]"))&&(se=W.toArray(R)))return j=n2(j),se.forEach(function(te,_e){!(W.isUndefined(te)||te===null)&&e.append(c===!0?rI([j],_e,l):c===null?j:j+"[]",g(te))}),!1}return lv(R)?!0:(e.append(rI(U,j,l),g(R)),!1)}const E=[],T=Object.assign(Z3,{defaultVisitor:y,convertValue:g,isVisitable:lv});function k(R,j){if(!W.isUndefined(R)){if(E.indexOf(R)!==-1)throw Error("Circular reference detected in "+j.join("."));E.push(R),W.forEach(R,function(se,le){(!(W.isUndefined(se)||se===null)&&a.call(e,se,W.isString(le)?le.trim():le,j,T))===!0&&k(se,j?j.concat(le):[le])}),E.pop()}}if(!W.isObject(n))throw new TypeError("data must be an object");return k(n),e}function iI(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function nE(n,e){this._pairs=[],n&&Hp(n,this,e)}const r2=nE.prototype;r2.append=function(e,t){this._pairs.push([e,t])};r2.toString=function(e){const t=e?function(r){return e.call(this,r,iI)}:iI;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function eU(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function i2(n,e,t){if(!e)return n;const r=t&&t.encode||eU;W.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let l;if(a?l=a(e,t):l=W.isURLSearchParams(e)?e.toString():new nE(e,t).toString(r),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class sI{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(r){r!==null&&e(r)})}}const s2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tU=typeof URLSearchParams<"u"?URLSearchParams:nE,nU=typeof FormData<"u"?FormData:null,rU=typeof Blob<"u"?Blob:null,iU={isBrowser:!0,classes:{URLSearchParams:tU,FormData:nU,Blob:rU},protocols:["http","https","file","blob","url","data"]},rE=typeof window<"u"&&typeof document<"u",cv=typeof navigator=="object"&&navigator||void 0,sU=rE&&(!cv||["ReactNative","NativeScript","NS"].indexOf(cv.product)<0),aU=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oU=rE&&window.location.href||"http://localhost",lU=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rE,hasStandardBrowserEnv:sU,hasStandardBrowserWebWorkerEnv:aU,navigator:cv,origin:oU},Symbol.toStringTag,{value:"Module"})),On={...lU,...iU};function cU(n,e){return Hp(n,new On.classes.URLSearchParams,{visitor:function(t,r,a,l){return On.isNode&&W.isBuffer(t)?(this.append(r,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function uU(n){return W.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hU(n){const e={},t=Object.keys(n);let r;const a=t.length;let l;for(r=0;r<a;r++)l=t[r],e[l]=n[l];return e}function a2(n){function e(t,r,a,l){let c=t[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),m=l>=t.length;return c=!c&&W.isArray(a)?a.length:c,m?(W.hasOwnProp(a,c)?a[c]=[a[c],r]:a[c]=r,!d):((!a[c]||!W.isObject(a[c]))&&(a[c]=[]),e(t,r,a[c],l)&&W.isArray(a[c])&&(a[c]=hU(a[c])),!d)}if(W.isFormData(n)&&W.isFunction(n.entries)){const t={};return W.forEachEntry(n,(r,a)=>{e(uU(r),a,t,0)}),t}return null}function dU(n,e,t){if(W.isString(n))try{return(e||JSON.parse)(n),W.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Td={transitional:s2,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",a=r.indexOf("application/json")>-1,l=W.isObject(e);if(l&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return a?JSON.stringify(a2(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return cU(e,this.formSerializer).toString();if((d=W.isFileList(e))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Hp(d?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||a?(t.setContentType("application/json",!1),dU(e)):e}],transformResponse:[function(e){const t=this.transitional||Td.transitional,r=t&&t.forcedJSONParsing,a=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(r&&!this.responseType||a)){const c=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(d){if(c)throw d.name==="SyntaxError"?je.from(d,je.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:On.classes.FormData,Blob:On.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],n=>{Td.headers[n]={}});const fU=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),mU=n=>{const e={};let t,r,a;return n&&n.split(`
`).forEach(function(c){a=c.indexOf(":"),t=c.substring(0,a).trim().toLowerCase(),r=c.substring(a+1).trim(),!(!t||e[t]&&fU[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},aI=Symbol("internals");function ih(n){return n&&String(n).trim().toLowerCase()}function Am(n){return n===!1||n==null?n:W.isArray(n)?n.map(Am):String(n)}function pU(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const gU=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function p_(n,e,t,r,a){if(W.isFunction(r))return r.call(this,e,t);if(a&&(e=t),!!W.isString(e)){if(W.isString(r))return e.indexOf(r)!==-1;if(W.isRegExp(r))return r.test(e)}}function yU(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function _U(n,e){const t=W.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(a,l,c){return this[r].call(this,e,a,l,c)},configurable:!0})})}let rr=class{constructor(e){e&&this.set(e)}set(e,t,r){const a=this;function l(d,m,g){const y=ih(m);if(!y)throw new Error("header name must be a non-empty string");const E=W.findKey(a,y);(!E||a[E]===void 0||g===!0||g===void 0&&a[E]!==!1)&&(a[E||m]=Am(d))}const c=(d,m)=>W.forEach(d,(g,y)=>l(g,y,m));if(W.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(W.isString(e)&&(e=e.trim())&&!gU(e))c(mU(e),t);else if(W.isObject(e)&&W.isIterable(e)){let d={},m,g;for(const y of e){if(!W.isArray(y))throw TypeError("Object iterator must return a key-value pair");d[g=y[0]]=(m=d[g])?W.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}c(d,t)}else e!=null&&l(t,e,r);return this}get(e,t){if(e=ih(e),e){const r=W.findKey(this,e);if(r){const a=this[r];if(!t)return a;if(t===!0)return pU(a);if(W.isFunction(t))return t.call(this,a,r);if(W.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ih(e),e){const r=W.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||p_(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let a=!1;function l(c){if(c=ih(c),c){const d=W.findKey(r,c);d&&(!t||p_(r,r[d],d,t))&&(delete r[d],a=!0)}}return W.isArray(e)?e.forEach(l):l(e),a}clear(e){const t=Object.keys(this);let r=t.length,a=!1;for(;r--;){const l=t[r];(!e||p_(this,this[l],l,e,!0))&&(delete this[l],a=!0)}return a}normalize(e){const t=this,r={};return W.forEach(this,(a,l)=>{const c=W.findKey(r,l);if(c){t[c]=Am(a),delete t[l];return}const d=e?yU(l):String(l).trim();d!==l&&delete t[l],t[d]=Am(a),r[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(r,a)=>{r!=null&&r!==!1&&(t[a]=e&&W.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(a=>r.set(a)),r}static accessor(e){const r=(this[aI]=this[aI]={accessors:{}}).accessors,a=this.prototype;function l(c){const d=ih(c);r[d]||(_U(a,c),r[d]=!0)}return W.isArray(e)?e.forEach(l):l(e),this}};rr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(rr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});W.freezeMethods(rr);function g_(n,e){const t=this||Td,r=e||t,a=rr.from(r.headers);let l=r.data;return W.forEach(n,function(d){l=d.call(t,l,a.normalize(),e?e.status:void 0)}),a.normalize(),l}function o2(n){return!!(n&&n.__CANCEL__)}function Hc(n,e,t){je.call(this,n??"canceled",je.ERR_CANCELED,e,t),this.name="CanceledError"}W.inherits(Hc,je,{__CANCEL__:!0});function l2(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new je("Request failed with status code "+t.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function vU(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function bU(n,e){n=n||10;const t=new Array(n),r=new Array(n);let a=0,l=0,c;return e=e!==void 0?e:1e3,function(m){const g=Date.now(),y=r[l];c||(c=g),t[a]=m,r[a]=g;let E=l,T=0;for(;E!==a;)T+=t[E++],E=E%n;if(a=(a+1)%n,a===l&&(l=(l+1)%n),g-c<e)return;const k=y&&g-y;return k?Math.round(T*1e3/k):void 0}}function EU(n,e){let t=0,r=1e3/e,a,l;const c=(g,y=Date.now())=>{t=y,a=null,l&&(clearTimeout(l),l=null),n(...g)};return[(...g)=>{const y=Date.now(),E=y-t;E>=r?c(g,y):(a=g,l||(l=setTimeout(()=>{l=null,c(a)},r-E)))},()=>a&&c(a)]}const ep=(n,e,t=3)=>{let r=0;const a=bU(50,250);return EU(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,m=c-r,g=a(m),y=c<=d;r=c;const E={loaded:c,total:d,progress:d?c/d:void 0,bytes:m,rate:g||void 0,estimated:g&&d&&y?(d-c)/g:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},oI=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},lI=n=>(...e)=>W.asap(()=>n(...e)),wU=On.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,On.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(On.origin),On.navigator&&/(msie|trident)/i.test(On.navigator.userAgent)):()=>!0,TU=On.hasStandardBrowserEnv?{write(n,e,t,r,a,l,c){if(typeof document>"u")return;const d=[`${n}=${encodeURIComponent(e)}`];W.isNumber(t)&&d.push(`expires=${new Date(t).toUTCString()}`),W.isString(r)&&d.push(`path=${r}`),W.isString(a)&&d.push(`domain=${a}`),l===!0&&d.push("secure"),W.isString(c)&&d.push(`SameSite=${c}`),document.cookie=d.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function AU(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function IU(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function c2(n,e,t){let r=!AU(e);return n&&(r||t==!1)?IU(n,e):e}const cI=n=>n instanceof rr?{...n}:n;function Go(n,e){e=e||{};const t={};function r(g,y,E,T){return W.isPlainObject(g)&&W.isPlainObject(y)?W.merge.call({caseless:T},g,y):W.isPlainObject(y)?W.merge({},y):W.isArray(y)?y.slice():y}function a(g,y,E,T){if(W.isUndefined(y)){if(!W.isUndefined(g))return r(void 0,g,E,T)}else return r(g,y,E,T)}function l(g,y){if(!W.isUndefined(y))return r(void 0,y)}function c(g,y){if(W.isUndefined(y)){if(!W.isUndefined(g))return r(void 0,g)}else return r(void 0,y)}function d(g,y,E){if(E in e)return r(g,y);if(E in n)return r(void 0,g)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(g,y,E)=>a(cI(g),cI(y),E,!0)};return W.forEach(Object.keys({...n,...e}),function(y){const E=m[y]||a,T=E(n[y],e[y],y);W.isUndefined(T)&&E!==d||(t[y]=T)}),t}const u2=n=>{const e=Go({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:c,auth:d}=e;if(e.headers=c=rr.from(c),e.url=i2(c2(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),W.isFormData(t)){if(On.hasStandardBrowserEnv||On.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(W.isFunction(t.getHeaders)){const m=t.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,E])=>{g.includes(y.toLowerCase())&&c.set(y,E)})}}if(On.hasStandardBrowserEnv&&(r&&W.isFunction(r)&&(r=r(e)),r||r!==!1&&wU(e.url))){const m=a&&l&&TU.read(l);m&&c.set(a,m)}return e},SU=typeof XMLHttpRequest<"u",xU=SU&&function(n){return new Promise(function(t,r){const a=u2(n);let l=a.data;const c=rr.from(a.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:g}=a,y,E,T,k,R;function j(){k&&k(),R&&R(),a.cancelToken&&a.cancelToken.unsubscribe(y),a.signal&&a.signal.removeEventListener("abort",y)}let U=new XMLHttpRequest;U.open(a.method.toUpperCase(),a.url,!0),U.timeout=a.timeout;function se(){if(!U)return;const te=rr.from("getAllResponseHeaders"in U&&U.getAllResponseHeaders()),ae={data:!d||d==="text"||d==="json"?U.responseText:U.response,status:U.status,statusText:U.statusText,headers:te,config:n,request:U};l2(function(x){t(x),j()},function(x){r(x),j()},ae),U=null}"onloadend"in U?U.onloadend=se:U.onreadystatechange=function(){!U||U.readyState!==4||U.status===0&&!(U.responseURL&&U.responseURL.indexOf("file:")===0)||setTimeout(se)},U.onabort=function(){U&&(r(new je("Request aborted",je.ECONNABORTED,n,U)),U=null)},U.onerror=function(_e){const ae=_e&&_e.message?_e.message:"Network Error",he=new je(ae,je.ERR_NETWORK,n,U);he.event=_e||null,r(he),U=null},U.ontimeout=function(){let _e=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const ae=a.transitional||s2;a.timeoutErrorMessage&&(_e=a.timeoutErrorMessage),r(new je(_e,ae.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,n,U)),U=null},l===void 0&&c.setContentType(null),"setRequestHeader"in U&&W.forEach(c.toJSON(),function(_e,ae){U.setRequestHeader(ae,_e)}),W.isUndefined(a.withCredentials)||(U.withCredentials=!!a.withCredentials),d&&d!=="json"&&(U.responseType=a.responseType),g&&([T,R]=ep(g,!0),U.addEventListener("progress",T)),m&&U.upload&&([E,k]=ep(m),U.upload.addEventListener("progress",E),U.upload.addEventListener("loadend",k)),(a.cancelToken||a.signal)&&(y=te=>{U&&(r(!te||te.type?new Hc(null,n,U):te),U.abort(),U=null)},a.cancelToken&&a.cancelToken.subscribe(y),a.signal&&(a.signal.aborted?y():a.signal.addEventListener("abort",y)));const le=vU(a.url);if(le&&On.protocols.indexOf(le)===-1){r(new je("Unsupported protocol "+le+":",je.ERR_BAD_REQUEST,n));return}U.send(l||null)})},RU=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,a;const l=function(g){if(!a){a=!0,d();const y=g instanceof Error?g:this.reason;r.abort(y instanceof je?y:new Hc(y instanceof Error?y.message:y))}};let c=e&&setTimeout(()=>{c=null,l(new je(`timeout ${e} of ms exceeded`,je.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),n=null)};n.forEach(g=>g.addEventListener("abort",l));const{signal:m}=r;return m.unsubscribe=()=>W.asap(d),m}},CU=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,a;for(;r<t;)a=r+e,yield n.slice(r,a),r=a},NU=async function*(n,e){for await(const t of DU(n))yield*CU(t,e)},DU=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},uI=(n,e,t,r)=>{const a=NU(n,e);let l=0,c,d=m=>{c||(c=!0,r&&r(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await a.next();if(g){d(),m.close();return}let E=y.byteLength;if(t){let T=l+=E;t(T)}m.enqueue(new Uint8Array(y))}catch(g){throw d(g),g}},cancel(m){return d(m),a.return()}},{highWaterMark:2})},hI=64*1024,{isFunction:om}=W,kU=(({Request:n,Response:e})=>({Request:n,Response:e}))(W.global),{ReadableStream:dI,TextEncoder:fI}=W.global,mI=(n,...e)=>{try{return!!n(...e)}catch{return!1}},PU=n=>{n=W.merge.call({skipUndefined:!0},kU,n);const{fetch:e,Request:t,Response:r}=n,a=e?om(e):typeof fetch=="function",l=om(t),c=om(r);if(!a)return!1;const d=a&&om(dI),m=a&&(typeof fI=="function"?(R=>j=>R.encode(j))(new fI):async R=>new Uint8Array(await new t(R).arrayBuffer())),g=l&&d&&mI(()=>{let R=!1;const j=new t(On.origin,{body:new dI,method:"POST",get duplex(){return R=!0,"half"}}).headers.has("Content-Type");return R&&!j}),y=c&&d&&mI(()=>W.isReadableStream(new r("").body)),E={stream:y&&(R=>R.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(R=>{!E[R]&&(E[R]=(j,U)=>{let se=j&&j[R];if(se)return se.call(j);throw new je(`Response type '${R}' is not supported`,je.ERR_NOT_SUPPORT,U)})});const T=async R=>{if(R==null)return 0;if(W.isBlob(R))return R.size;if(W.isSpecCompliantForm(R))return(await new t(On.origin,{method:"POST",body:R}).arrayBuffer()).byteLength;if(W.isArrayBufferView(R)||W.isArrayBuffer(R))return R.byteLength;if(W.isURLSearchParams(R)&&(R=R+""),W.isString(R))return(await m(R)).byteLength},k=async(R,j)=>{const U=W.toFiniteNumber(R.getContentLength());return U??T(j)};return async R=>{let{url:j,method:U,data:se,signal:le,cancelToken:te,timeout:_e,onDownloadProgress:ae,onUploadProgress:he,responseType:x,headers:I,withCredentials:N="same-origin",fetchOptions:O}=u2(R),C=e||fetch;x=x?(x+"").toLowerCase():"text";let M=RU([le,te&&te.toAbortSignal()],_e),D=null;const Ne=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let rt;try{if(he&&g&&U!=="get"&&U!=="head"&&(rt=await k(I,se))!==0){let V=new t(j,{method:"POST",body:se,duplex:"half"}),Z;if(W.isFormData(se)&&(Z=V.headers.get("content-type"))&&I.setContentType(Z),V.body){const[de,me]=oI(rt,ep(lI(he)));se=uI(V.body,hI,de,me)}}W.isString(N)||(N=N?"include":"omit");const $=l&&"credentials"in t.prototype,X={...O,signal:M,method:U.toUpperCase(),headers:I.normalize().toJSON(),body:se,duplex:"half",credentials:$?N:void 0};D=l&&new t(j,X);let ce=await(l?C(D,O):C(j,X));const ke=y&&(x==="stream"||x==="response");if(y&&(ae||ke&&Ne)){const V={};["status","statusText","headers"].forEach(Se=>{V[Se]=ce[Se]});const Z=W.toFiniteNumber(ce.headers.get("content-length")),[de,me]=ae&&oI(Z,ep(lI(ae),!0))||[];ce=new r(uI(ce.body,hI,de,()=>{me&&me(),Ne&&Ne()}),V)}x=x||"text";let Ve=await E[W.findKey(E,x)||"text"](ce,R);return!ke&&Ne&&Ne(),await new Promise((V,Z)=>{l2(V,Z,{data:Ve,headers:rr.from(ce.headers),status:ce.status,statusText:ce.statusText,config:R,request:D})})}catch($){throw Ne&&Ne(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,R,D),{cause:$.cause||$}):je.from($,$&&$.code,R,D)}}},OU=new Map,h2=n=>{let e=n&&n.env||{};const{fetch:t,Request:r,Response:a}=e,l=[r,a,t];let c=l.length,d=c,m,g,y=OU;for(;d--;)m=l[d],g=y.get(m),g===void 0&&y.set(m,g=d?new Map:PU(e)),y=g;return g};h2();const iE={http:X3,xhr:xU,fetch:{get:h2}};W.forEach(iE,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const pI=n=>`- ${n}`,VU=n=>W.isFunction(n)||n===null||n===!1;function MU(n,e){n=W.isArray(n)?n:[n];const{length:t}=n;let r,a;const l={};for(let c=0;c<t;c++){r=n[c];let d;if(a=r,!VU(r)&&(a=iE[(d=String(r)).toLowerCase()],a===void 0))throw new je(`Unknown adapter '${d}'`);if(a&&(W.isFunction(a)||(a=a.get(e))))break;l[d||"#"+c]=a}if(!a){const c=Object.entries(l).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=t?c.length>1?`since :
`+c.map(pI).join(`
`):" "+pI(c[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a}const d2={getAdapter:MU,adapters:iE};function y_(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Hc(null,n)}function gI(n){return y_(n),n.headers=rr.from(n.headers),n.data=g_.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),d2.getAdapter(n.adapter||Td.adapter,n)(n).then(function(r){return y_(n),r.data=g_.call(n,n.transformResponse,r),r.headers=rr.from(r.headers),r},function(r){return o2(r)||(y_(n),r&&r.response&&(r.response.data=g_.call(n,n.transformResponse,r.response),r.response.headers=rr.from(r.response.headers))),Promise.reject(r)})}const f2="1.13.2",Gp={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Gp[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const yI={};Gp.transitional=function(e,t,r){function a(l,c){return"[Axios v"+f2+"] Transitional option '"+l+"'"+c+(r?". "+r:"")}return(l,c,d)=>{if(e===!1)throw new je(a(c," has been removed"+(t?" in "+t:"")),je.ERR_DEPRECATED);return t&&!yI[c]&&(yI[c]=!0,console.warn(a(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,d):!0}};Gp.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function LU(n,e,t){if(typeof n!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let a=r.length;for(;a-- >0;){const l=r[a],c=e[l];if(c){const d=n[l],m=d===void 0||c(d,l,n);if(m!==!0)throw new je("option "+l+" must be "+m,je.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new je("Unknown option "+l,je.ERR_BAD_OPTION)}}const Im={assertOptions:LU,validators:Gp},Ii=Im.validators;let No=class{constructor(e){this.defaults=e||{},this.interceptors={request:new sI,response:new sI}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Go(this.defaults,t);const{transitional:r,paramsSerializer:a,headers:l}=t;r!==void 0&&Im.assertOptions(r,{silentJSONParsing:Ii.transitional(Ii.boolean),forcedJSONParsing:Ii.transitional(Ii.boolean),clarifyTimeoutError:Ii.transitional(Ii.boolean)},!1),a!=null&&(W.isFunction(a)?t.paramsSerializer={serialize:a}:Im.assertOptions(a,{encode:Ii.function,serialize:Ii.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Im.assertOptions(t,{baseUrl:Ii.spelling("baseURL"),withXsrfToken:Ii.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&W.merge(l.common,l[t.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],R=>{delete l[R]}),t.headers=rr.concat(c,l);const d=[];let m=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(m=m&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const g=[];this.interceptors.response.forEach(function(j){g.push(j.fulfilled,j.rejected)});let y,E=0,T;if(!m){const R=[gI.bind(this),void 0];for(R.unshift(...d),R.push(...g),T=R.length,y=Promise.resolve(t);E<T;)y=y.then(R[E++],R[E++]);return y}T=d.length;let k=t;for(;E<T;){const R=d[E++],j=d[E++];try{k=R(k)}catch(U){j.call(this,U);break}}try{y=gI.call(this,k)}catch(R){return Promise.reject(R)}for(E=0,T=g.length;E<T;)y=y.then(g[E++],g[E++]);return y}getUri(e){e=Go(this.defaults,e);const t=c2(e.baseURL,e.url,e.allowAbsoluteUrls);return i2(t,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){No.prototype[e]=function(t,r){return this.request(Go(r||{},{method:e,url:t,data:(r||{}).data}))}});W.forEach(["post","put","patch"],function(e){function t(r){return function(l,c,d){return this.request(Go(d||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}No.prototype[e]=t(),No.prototype[e+"Form"]=t(!0)});let jU=class m2{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const c=new Promise(d=>{r.subscribe(d),l=d}).then(a);return c.cancel=function(){r.unsubscribe(l)},c},e(function(l,c,d){r.reason||(r.reason=new Hc(l,c,d),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new m2(function(a){e=a}),cancel:e}}};function UU(n){return function(t){return n.apply(null,t)}}function FU(n){return W.isObject(n)&&n.isAxiosError===!0}const uv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(uv).forEach(([n,e])=>{uv[e]=n});function p2(n){const e=new No(n),t=KC(No.prototype.request,e);return W.extend(t,No.prototype,e,{allOwnKeys:!0}),W.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return p2(Go(n,a))},t}const $t=p2(Td);$t.Axios=No;$t.CanceledError=Hc;$t.CancelToken=jU;$t.isCancel=o2;$t.VERSION=f2;$t.toFormData=Hp;$t.AxiosError=je;$t.Cancel=$t.CanceledError;$t.all=function(e){return Promise.all(e)};$t.spread=UU;$t.isAxiosError=FU;$t.mergeConfig=Go;$t.AxiosHeaders=rr;$t.formToJSON=n=>a2(W.isHTMLForm(n)?new FormData(n):n);$t.getAdapter=d2.getAdapter;$t.HttpStatusCode=uv;$t.default=$t;const{Axios:g9,AxiosError:y9,CanceledError:_9,isCancel:v9,CancelToken:b9,VERSION:E9,all:w9,Cancel:T9,isAxiosError:A9,spread:I9,toFormData:S9,AxiosHeaders:x9,HttpStatusCode:R9,formToJSON:C9,getAdapter:N9,mergeConfig:D9}=$t,cn={onBooksSnapshot(n,e){return Dt.collection("books").orderBy("timestamp","desc").onSnapshot(t=>{const r=t.docs.map(a=>({id:a.id,...a.data()}));n(r)},t=>{console.error("Books snapshot error:",t),e&&e(t)})},getMyBooks(n,e){return Dt.collection("books").where("sellerId","==",n).orderBy("timestamp","desc").onSnapshot(t=>{const r=t.docs.map(a=>({id:a.id,...a.data()}));e(r)})},async createBook(n){return Dt.collection("books").add({...n,status:"Available",views:0})},async incrementBookView(n){return Dt.collection("books").doc(n).update({views:xn.firestore.FieldValue.increment(1)})},async deleteBook(n){const{functions:e}=await Xr(async()=>{const{functions:r}=await Promise.resolve().then(()=>Jr);return{functions:r}},void 0);return e.httpsCallable("deleteBook")({bookId:n})},async reserveBook(n,e,t,r){try{return(await $t.post("https://us-central1-schoolbook-290b6.cloudfunctions.net/handleBookTransaction",{bookId:n,buyerId:e,agreedPrice:Number(t),meetingTime:r})).data}catch(a){throw a}},async startTransaction(n,e,t){if(!e)return alert("");if(e.uid===n.sellerId)return alert("");try{const r=Dt.collection("transactions"),l=await r.where("bookId","==",n.id).where("buyerId","==",e.uid).get();if(!l.empty)t(l.docs[0].id);else{const c=await r.add({bookId:n.id,bookTitle:n.title,sellerId:n.sellerId,buyerId:e.uid,price:n.price,agreedPrice:n.price,status:"Pending",timestamp:new Date});await this.addNotification({userId:n.sellerId,content:`${n.title}~`,type:"inquiry"}),t(c.id)}}catch(r){console.error(r),alert(": "+r.message)}},async confirmTransactionTime(n){const{functions:e}=await Xr(async()=>{const{functions:r}=await Promise.resolve().then(()=>Jr);return{functions:r}},void 0);return e.httpsCallable("confirmTransactionTime")({transactionId:n})},getUserTransactions(n,e){return Dt.collection("transactions").where("buyerId","==",n).onSnapshot(e)},getSellerTransactions(n,e){return Dt.collection("transactions").where("sellerId","==",n).onSnapshot(e)},async updateTransactionStatus(n,e){const{functions:t}=await Xr(async()=>{const{functions:a}=await Promise.resolve().then(()=>Jr);return{functions:a}},void 0);return t.httpsCallable("updateTransactionStatus")({transactionId:n,newStatus:e})},async requestReschedule(n,e,t){const{functions:r}=await Xr(async()=>{const{functions:l}=await Promise.resolve().then(()=>Jr);return{functions:l}},void 0);return r.httpsCallable("requestReschedule")({transactionId:n,newTime:e,reason:t})},async respondToReschedule(n,e){const{functions:t}=await Xr(async()=>{const{functions:a}=await Promise.resolve().then(()=>Jr);return{functions:a}},void 0);return t.httpsCallable("respondToReschedule")({transactionId:n,response:e})},onWishesSnapshot(n){return Dt.collection("wishes").orderBy("timestamp","desc").onSnapshot(e=>{const t=e.docs.map(r=>({id:r.id,...r.data()}));n(t)})},async addWish({content:n,user:e,avatarId:t,image:r}){return Dt.collection("wishes").add({uid:xn.auth().currentUser?.uid||"anonymous",user:e||"",avatarId:t||"default",content:n,image:r||null,timestamp:new Date})},async deleteWish(n){return Dt.collection("wishes").doc(n).delete()},async addBook(n){return Dt.collection("books").add({...n,status:"Available",timestamp:new Date})},async deleteTransaction(n){return Dt.collection("transactions").doc(n).delete()},async markAsRead(n,e){return Dt.collection("transactions").doc(n).update({unreadBy:xn.firestore.FieldValue.arrayRemove(e)})},subscribeToNotifications(n,e){return Dt.collection("notifications").where("userId","==",n).orderBy("timestamp","desc").limit(20).onSnapshot(t=>{const r=t.docs.map(a=>({id:a.id,...a.data()}));e(r)})},async markNotificationAsRead(n){return Dt.collection("notifications").doc(n).update({isRead:!0})},async markAllNotificationsAsRead(n){const e=Dt.batch(),t=await Dt.collection("notifications").where("userId","==",n).where("isRead","==",!1).get();if(!t.empty)return t.forEach(r=>{e.update(r.ref,{isRead:!0})}),e.commit()},async addNotification({userId:n,content:e,type:t="system"}){return Dt.collection("notifications").add({userId:n,content:e,type:t,isRead:!1,timestamp:new Date})},recordCheckIn(){localStorage.setItem("lastCheckIn",new Date().toDateString())},hasCheckedInToday(){return localStorage.getItem("lastCheckIn")===new Date().toDateString()}},_I={async sendMessage(n,e,t,r,a=null,l=null){if(!(!r?.trim()&&!a))try{const c=Dt.collection("transactions").doc(n),d=c.collection("messages"),m=await c.get();if(m.exists){const g=m.data(),y=e===g.buyerId?g.sellerId:g.buyerId;await d.add({senderId:e,senderName:t,content:r?.trim()||"",image:a,timestamp:new Date});const E={lastMessage:r?.trim()||(a?"[]":""),lastTimestamp:new Date,unreadBy:xn.firestore.FieldValue.arrayUnion(y)};l&&(E.meetingTime=l.meetingTime||"",E.meetingLocation=l.meetingLocation||"",E.invoiceSentAt=l.invoiceSentAt||new Date,E.status="Invoiced"),await c.update(E)}}catch(c){throw console.error("Error sending message:",c),c}},subscribeToMessages(n,e){return Dt.collection("transactions").doc(n).collection("messages").orderBy("timestamp","asc").onSnapshot(r=>{const a=r.docs.map(l=>({id:l.id,...l.data()}));e(a)},r=>{console.error("Error subscribing to messages:",r)})}},Do={fontFamily:'"Noto Sans TC", "PMingLiU", sans-serif'},xe={whiteBucks:"#E8E3DF",fossilGray:"#C9C3B6",brushwood:"#9E9081",chocolateBubble:"#A58976",brownWindmill:"#756256",bgLight:"#F9F7F5"},zU=["","","","",""],vI=[{id:"all",name:""},{id:"chi",name:""},{id:"eng",name:""},{id:"math",name:""},{id:"sci",name:""},{id:"soc",name:""},{id:"extra",name:""}],bI=({title:n,avatars:e,onPurchase:t,onEquip:r,currentAvatarId:a,myAvatars:l,coins:c})=>_.jsxs("div",{className:"mb-8",children:[_.jsxs("h4",{className:"font-bold text-[#756256] mb-4 flex items-center gap-2 px-1 text-sm md:text-base",children:[_.jsx("span",{className:"w-1.5 h-5 bg-[#A58976] rounded-full"}),n]}),_.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar",children:e.map(d=>{const m=l.includes(d.id)||d.id==="classic-1",g=a===d.id,y=c>=d.price;return _.jsxs("div",{className:"min-w-[110px] bg-white border rounded-2xl p-3 flex flex-col items-center shadow-sm",style:{borderColor:"#E8E3DF"},children:[_.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden mb-3 bg-gray-50 border p-1",children:_.jsx("img",{src:Gc(d.src),alt:d.name,className:"w-full h-full object-cover rounded-full"})}),_.jsx("div",{className:"font-bold text-xs text-[#5D4037] mb-3 truncate w-full text-center",children:d.name}),_.jsx("button",{onClick:()=>m?r(d.id):t(d.id,d.price),disabled:!m&&!y,className:`w-full py-1.5 rounded-full text-[10px] font-bold flex items-center justify-center gap-1 transition-colors ${m?g?"bg-gray-100 text-gray-400":"bg-[#756256] text-white hover:bg-[#5D4E44]":"bg-yellow-500 text-white hover:bg-yellow-600"} ${!m&&!y?"opacity-50 cursor-not-allowed":""}`,children:m?g?"":"":_.jsxs(_.Fragment,{children:["NT$ ",d.price]})})]},d.id)})})]}),Mi=[{id:"classic-1",name:"",price:0,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cat&backgroundColor=FFD700"},{id:"pony-gift",name:"",price:0,src:"/avatars/pony.jpg"},{id:"special1",name:"",price:100,src:"/avatars/rabbit.jpg"},{id:"special2",name:"",price:100,src:"/avatars/pig.jpg"},{id:"special3",name:"",price:100,src:"/avatars/dog.jpg"},{id:"special4",name:"",price:100,src:"/avatars/cow.jpg"},{id:"special5",name:"",price:100,src:"/avatars/sheep.jpg"},{id:"classic-2",name:"",price:50,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=glasses&backgroundColor=4ADE80"},{id:"classic-3",name:"",price:50,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=cool&backgroundColor=A58976"},{id:"classic-4",name:"",price:50,src:"https://api.dicebear.com/7.x/miniavs/svg?seed=artist&backgroundColor=FFB6C1"},{id:"classic-5",name:"",price:50,src:"https://api.dicebear.com/7.x/bottts/svg?seed=robot&backgroundColor=E0E0E0"}],BU=[],qU={uid:"guest",email:"guest@example.com",nickname:"",isGuest:!0,photoURL:null,coins:0,myAvatars:[],currentAvatarId:"classic-1"},sE=n=>{if(!n)return"";const e=n.toDate?n.toDate():new Date(n),r=Math.floor((new Date-e)/1e3);return r<60?"":r<3600?`${Math.floor(r/60)}`:r<86400?`${Math.floor(r/3600)}`:r<2592e3?`${Math.floor(r/86400)}`:e.toLocaleDateString()},Gc=(n,e=150,t=60)=>!n||n.startsWith("data:")?n:n.includes("postimg.cc")||n.includes("api.dicebear.com")||n.includes("googleusercontent")?`https://images.weserv.nl/?url=${encodeURIComponent(n)}&w=${e}&q=${t}&output=webp`:n,HU=n=>{if(!n)return"";const e=/(\d{1,2})\/(\d{1,2})\s+(\d{1,2}):(\d{1,2})/,t=n.match(e);if(t){const[r,a,l,c,d]=t;return`${a.padStart(2,"0")}/${l.padStart(2,"0")} ${c.padStart(2,"0")}:${d.padStart(2,"0")}`}return n},aE=({type:n,price:e,originalPrice:t,large:r=!1})=>n==="exchange"?_.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:xe.brushwood},children:[_.jsx(SI,{size:r?20:14}),_.jsx("span",{children:""})]}):n==="gift"||e===0?_.jsxs("div",{className:`flex items-center gap-1 font-bold ${r?"text-2xl":"text-sm"}`,style:{color:xe.chocolateBubble},children:[_.jsx(II,{size:r?20:14}),_.jsx("span",{children:""})]}):_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("div",{className:`font-bold ${r?"text-3xl":"text-lg"}`,style:{color:xe.brownWindmill},children:["NT$ ",e]}),t&&_.jsxs("span",{className:"text-xs line-through",style:{color:xe.fossilGray},children:[" $",t]})]}),g2=({score:n=100,size:e=14})=>{const t=Math.max(0,Math.min(5,Math.round(n/10)/2));return _.jsxs("div",{className:"flex items-center gap-0.5",title:`: ${n}`,children:[[1,2,3,4,5].map(r=>t>=r?_.jsx(FT,{size:e,fill:"#fbbf24",className:"text-yellow-400"},r):t>=r-.5?_.jsx(SD,{size:e,fill:"#fbbf24",className:"text-yellow-400"},r):_.jsx(FT,{size:e,className:"text-gray-200"},r)),_.jsx("span",{className:"ml-1 text-xs font-bold text-gray-500",children:t.toFixed(1)})]})},oE=(n,e=800,t=800,r=.6)=>new Promise(a=>{const l=new Image;l.src=n,l.onload=()=>{const c=document.createElement("canvas");let d=l.width,m=l.height;d>m?d>e&&(m*=e/d,d=e):m>t&&(d*=t/m,m=t),c.width=d,c.height=m,c.getContext("2d").drawImage(l,0,0,d,m),a(c.toDataURL("image/jpeg",r))}}),GU=({items:n,onNavigate:e,currentUser:t})=>{const[r,a]=pe.useState(0),l=(n||[]).slice(0,5),[c,d]=pe.useState([]);if(pe.useEffect(()=>{if(l.length===0)return;const g=setInterval(()=>{a(y=>(y+1)%l.length)},4e3);return()=>clearInterval(g)},[l.length]),pe.useEffect(()=>{const g=[];t&&g.push(""),[...n||[]].sort((E,T)=>{const k=E.timestamp?.toDate?E.timestamp.toDate():new Date(E.timestamp||0);return(T.timestamp?.toDate?T.timestamp.toDate():new Date(T.timestamp||0))-k}).slice(0,8).forEach(E=>{const T=sE(E.timestamp),k=E.seller?.nickname||"";g.push(`${T} ${k} ${E.title}`)}),d(g)},[n,t]),l.length===0)return null;const m=l[r];return _.jsxs("div",{className:"h-full",children:[_.jsx("div",{className:"flex items-center justify-between mb-3",children:_.jsxs("div",{className:"flex items-center gap-2 w-full",children:[_.jsx("span",{className:"bg-orange-500 text-white p-1 rounded-full animate-pulse flex-shrink-0",children:_.jsx(yD,{size:16,fill:"currentColor"})}),_.jsx("h2",{className:"text-lg font-bold tracking-wide flex-shrink-0",style:{color:xe.brownWindmill},children:""}),c.length>0&&_.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 ml-2 overflow-hidden flex-1 max-w-[500px]",children:[_.jsx(CI,{size:14,className:"text-red-500 flex-shrink-0",fill:"currentColor"}),_.jsx("div",{className:"flex-1 overflow-hidden relative h-5",children:_.jsxs("div",{className:"whitespace-nowrap absolute animate-marquee font-medium flex items-center h-full",children:[c.map((g,y)=>_.jsx("span",{className:"mr-12 inline-block",children:g},y)),c.map((g,y)=>_.jsx("span",{className:"mr-12 inline-block",children:g},`dup-${y}`))]})})]})]})}),_.jsxs("div",{className:"relative w-full h-48 bg-white rounded-2xl shadow-md overflow-hidden border cursor-pointer group",style:{borderColor:xe.whiteBucks},onClick:()=>e("product",m),children:[_.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-xl opacity-30 animate-pulse-slow transition-all duration-1000 transform scale-110",style:{backgroundImage:`url(${m.cover||m.imageBase64})`}},m.id+"-bg"),_.jsxs("div",{className:"absolute inset-0 flex items-center p-4 z-10",children:[_.jsx("div",{className:"w-28 h-36 flex-shrink-0 rounded-lg overflow-hidden shadow-lg border border-white transform transition-transform duration-500 hover:scale-105 animate-fade-in-up",children:_.jsx("img",{src:m.cover||m.imageBase64,alt:m.title,className:"w-full h-full object-cover"})},m.id+"-img"),_.jsxs("div",{className:"flex-1 ml-4 flex flex-col justify-center h-full animate-fade-in-right",children:[_.jsxs("div",{className:"flex items-start justify-between mb-1",children:[_.jsx("span",{className:"text-xs font-bold text-orange-500 bg-orange-50 px-2 py-0.5 rounded-md",children:"HOT"}),_.jsxs("span",{className:"text-xs text-gray-400",children:[r+1," / ",l.length]})]}),_.jsx("h3",{className:"font-bold text-lg text-[#5D4037] line-clamp-2 leading-tight mb-2",children:m.title}),_.jsxs("div",{className:"mt-auto",children:[_.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#F9F7F5] text-[#9E9081]",children:m.grade||""}),_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#F9F7F5] text-[#9E9081]",children:m.subject}),_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#F9F7F5] text-[#9E9081]",children:m.conditionLevel})]}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx(aE,{type:m.type,price:m.price,originalPrice:m.originalPrice}),_.jsx("div",{className:"w-8 h-8 rounded-full bg-[#756256] text-white flex items-center justify-center shadow-md transform translate-x-16 group-hover:translate-x-0 transition-all duration-300 opacity-0 group-hover:opacity-100",children:_.jsx(tp,{size:16})})]})]})]},m.id+"-text")]}),_.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 z-20",children:l.map((g,y)=>_.jsx("div",{className:`h-1 rounded-full overflow-hidden transition-all duration-300 ${y===r?"w-6 bg-gray-200":"w-1.5 bg-gray-300"}`,children:y===r&&_.jsx("div",{className:"h-full bg-[#756256] animate-progress-fill",style:{width:"100%"}})},y))})]}),_.jsx("style",{children:`
        @keyframes progress-fill {
          from { width: 0%; }
          to { width: 100%; }
        }
        .animate-progress-fill {
          animation: progress-fill 4s linear;
        }
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.5s ease-out forwards;
        }
        @keyframes fade-in-right {
          from { opacity: 0; transform: translateX(10px); }
          to { opacity: 1; transform: translateX(0); }
        }
        .animate-fade-in-right {
          animation: fade-in-right 0.5s ease-out forwards;
        }
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); } 
        }
        .animate-marquee {
          animation: marquee 30s linear infinite;
        }
      `})]})},KU=({examCountdown:n})=>{const[e,t]=pe.useState(0),r=n?.exams||[],a=r.length>0&&r[e]?r[e]:{title:r.length===0&&n?"...":"",daysLeft:0};return _.jsxs("div",{className:"h-full",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[_.jsx("span",{className:"bg-red-500 text-white p-1 rounded-full",children:_.jsx(dD,{size:16})}),_.jsx("h2",{className:"text-lg font-bold tracking-wide",style:{color:xe.brownWindmill},children:""})]}),_.jsxs("div",{className:"bg-white p-3 rounded-2xl border flex flex-col justify-between h-48 relative overflow-hidden shadow-md",style:{borderColor:xe.whiteBucks},children:[_.jsx("a",{href:"https://calendar.google.com/calendar/embed?src=shsh.ylc.edu.tw_fcpdcjkto9mpulh1gg2eetr4s4%40group.calendar.google.com&ctz=Asia%2FTaipei",target:"_blank",rel:"noopener noreferrer",className:"absolute top-0 right-0 w-12 h-12 bg-red-50 rounded-bl-2xl z-20 flex items-center justify-center text-red-400 hover:text-red-500 hover:bg-red-100 transition-colors cursor-pointer",children:_.jsx(pD,{size:18})}),_.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-center items-center",children:[_.jsxs("div",{className:"relative mb-2",children:[_.jsxs("div",{className:"text-base text-gray-500 font-bold truncate flex items-center justify-center gap-1 cursor-pointer hover:text-gray-700 transition-colors",children:[" ",a.title," ",_.jsx(fD,{size:14})]}),r.length>1&&_.jsx("select",{className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",value:e,onChange:l=>t(Number(l.target.value)),children:r.map((l,c)=>_.jsxs("option",{value:c,children:[l.title," (",l.displayDate||`${l.date.substring(4,6)}/${l.date.substring(6,8)}`,")"]},c))}),_.jsx("div",{className:"text-xs text-gray-400 mt-1 text-center",children:a.displayDate||a.date})]}),_.jsxs("div",{className:"flex items-baseline gap-1",children:[_.jsx("span",{className:"text-7xl font-bold text-[#756256]",children:a.daysLeft}),_.jsx("span",{className:"text-lg text-[#756256]",children:""})]})]})]})]})},$U=({wishes:n,onAddWish:e,onDeleteWish:t,currentUser:r,currentAvatar:a})=>{const[l,c]=pe.useState(!1),[d,m]=pe.useState(""),[g,y]=pe.useState(null),[E,T]=pe.useState(null),[k,R]=pe.useState(null),j=pe.useRef(null),[U,se]=pe.useState(1),le=5,te=Math.ceil(n.length/le),_e=n.slice((U-1)*le,U*le),ae=x=>{const I=x.target.files[0];if(I){const N=new FileReader;N.onloadend=async()=>{const O=await oE(N.result,400,400,.5);y(O)},N.readAsDataURL(I)}},he=()=>{!d.trim()&&!g||(e(d,g),m(""),y(null),c(!1),se(1))};return _.jsxs("div",{className:"mb-8 px-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"bg-yellow-400 text-white p-1 rounded-full",children:_.jsx(xI,{size:16,fill:"currentColor"})}),_.jsx("h2",{className:"text-lg font-bold tracking-wide",style:{color:xe.brownWindmill},children:""})]}),te>1&&_.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_.jsx("button",{onClick:()=>se(x=>Math.max(1,x-1)),disabled:U===1,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30 disabled:hover:bg-transparent text-gray-500",children:_.jsx(dv,{size:18})}),_.jsxs("span",{className:"text-gray-500 font-bold px-1",children:[U," / ",te]}),_.jsx("button",{onClick:()=>se(x=>Math.min(te,x+1)),disabled:U===te,className:"p-1 rounded hover:bg-gray-100 disabled:opacity-30 disabled:hover:bg-transparent text-gray-500",children:_.jsx(TI,{size:18})})]})]}),_.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 space-y-3",style:{borderColor:xe.whiteBucks},children:[_e.map(x=>{const I=Mi.find(C=>C.id===x.avatarId)||Mi[0],N=x.uid===r?.uid,O=k===x.id;return _.jsxs("div",{className:"flex gap-3 border-b last:border-0 pb-3 last:pb-0",style:{borderColor:xe.bgLight},children:[_.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 overflow-hidden cursor-pointer transition-all duration-300 ${O?"bg-red-500 scale-90":"bg-gray-100"}`,onClick:()=>{N&&(O?(t(x.id),R(null)):R(x.id))},children:O?_.jsx(ki,{size:20,className:"text-white animate-bounce-short"}):_.jsx("img",{src:Gc(I.src,100,60),alt:"avatar",className:"w-full h-full object-cover"})}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex justify-between items-center mb-1",children:[_.jsx("span",{className:"text-sm font-bold text-[#756256]",children:x.user}),_.jsx("span",{className:"text-xs font-normal text-gray-400",children:sE(x.timestamp)})]}),_.jsx("p",{className:"text-sm text-[#9E9081]",children:x.content}),x.image&&_.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-gray-100 h-24 inline-block bg-gray-50",children:_.jsx("img",{src:x.image,alt:"wish thumbnail",onClick:()=>T(x.image),className:"h-full w-auto object-contain cursor-zoom-in hover:opacity-90 transition-opacity"})})]})]},x.id)}),_.jsxs("button",{onClick:()=>{if(r?.isGuest){alert("");return}c(!0)},className:"w-full py-2 mt-2 text-xs font-bold text-[#9E9081] border border-dashed hover:bg-[#F9F7F5] rounded-lg transition-colors flex items-center justify-center gap-1",style:{borderColor:xe.fossilGray},children:[_.jsx(ED,{size:14})," "]})]}),E&&_.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4 animate-fade-in",onClick:()=>T(null),children:[_.jsx("button",{className:"absolute top-6 right-6 text-white hover:text-gray-300 transition-colors z-10 p-2",onClick:x=>{x.stopPropagation(),T(null)},children:_.jsx(ki,{size:32})}),_.jsx("img",{src:E,alt:"full preview",className:"max-w-full max-h-full object-contain rounded animate-scale-up",onClick:x=>x.stopPropagation()})]}),l&&_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl overflow-hidden shadow-2xl animate-scale-up flex flex-col max-h-[90vh]",children:[_.jsxs("div",{className:"flex justify-between items-center p-3 border-b",style:{borderColor:xe.whiteBucks},children:[_.jsx("button",{onClick:()=>c(!1),className:"p-1",children:_.jsx(ki,{size:24,className:"text-gray-600"})}),_.jsx("span",{className:"font-bold text-[#756256] text-lg",children:""}),_.jsx("button",{onClick:he,className:"text-blue-500 font-bold text-sm px-2 py-1 rounded hover:bg-blue-50 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!d.trim()&&!g,children:""})]}),_.jsxs("div",{className:"p-4 flex flex-col flex-1 overflow-y-auto",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 overflow-hidden border border-gray-100",children:_.jsx("img",{src:a.src,alt:"avatar",className:"w-full h-full object-cover"})}),_.jsx("span",{className:"font-bold text-[#5D4037]",children:r.nickname||r.email})]}),_.jsx("textarea",{className:"w-full resize-none outline-none text-[#5D4037] placeholder-gray-400 text-lg leading-relaxed min-h-[100px]",placeholder:"...",value:d,onChange:x=>m(x.target.value),autoFocus:!0}),g&&_.jsxs("div",{className:"relative mt-2 rounded-lg overflow-hidden border border-gray-100 group",children:[_.jsx("img",{src:g,alt:"preview",className:"w-full h-auto"}),_.jsx("button",{onClick:()=>y(null),className:"absolute top-2 right-2 p-1 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors",children:_.jsx(ki,{size:16})})]})]}),_.jsxs("div",{className:"p-3 border-t bg-gray-50 flex gap-4 text-gray-400",children:[_.jsx("input",{type:"file",ref:j,className:"hidden",accept:"image/*",onChange:ae}),_.jsx("button",{onClick:()=>j.current.click(),className:"p-1 hover:text-[#756256] transition-colors",children:_.jsx(wI,{size:20})})]})]})})]})},QU=({onLogin:n,onGuestLogin:e})=>{const[t,r]=pe.useState("login"),[a,l]=pe.useState(null),[c,d]=pe.useState(""),[m,g]=pe.useState(""),[y,E]=pe.useState(""),[T,k]=pe.useState(""),[R,j]=pe.useState(!1),[U,se]=pe.useState(!1),[le,te]=pe.useState(!1),_e=pe.useRef(!1);pe.useEffect(()=>{(async()=>{if(!_e.current&&kr.isSignInWithEmailLink(window.location.href)){_e.current=!0;let N=window.localStorage.getItem("emailForSignIn");N||(N=window.prompt(" Email "));try{te(!0),await kr.signInWithLink(N,window.location.href),window.history.replaceState({},document.title,window.location.pathname),window.localStorage.removeItem("emailForSignIn");const O=JSON.parse(window.localStorage.getItem("registrationForm"))||{};O.role&&l(O.role),O.realName&&E(O.realName),O.studentId&&k(O.studentId),d(N),r("register-form"),se(!0),alert("")}catch(O){console.error(O),alert(""),_e.current=!1}finally{te(!1)}}})()},[]);const ae=async()=>{if(a==="teacher"){if(!c.endsWith("@shsh.ylc.edu.tw"))return alert(" @shsh.ylc.edu.tw ");if(!y)return alert("")}else{if(!c.endsWith("@shsh.tw"))return alert(" @shsh.tw ");if(!y)return alert("");const I=c.split("@")[0];if(!(/^stu\d+$/.test(I)||/^u\d+$/.test(I)))return alert(" ( stu/u )");const O=I.startsWith("stu")?I.substring(3):I.substring(1);k(O);try{te(!0),await kr.sendVerificationLink(c),window.localStorage.setItem("emailForSignIn",c),window.localStorage.setItem("registrationForm",JSON.stringify({role:a,realName:y,studentId:O})),j(!0),setTimeout(()=>{alert(` ${c}:`)},100)}catch(C){alert(": "+C.message)}finally{te(!1)}return}try{te(!0),await kr.sendVerificationLink(c),window.localStorage.setItem("emailForSignIn",c),window.localStorage.setItem("registrationForm",JSON.stringify({role:a,realName:y})),j(!0),alert(` ${c}:`)}catch(I){alert(": "+I.message)}finally{te(!1)}},he=async()=>{if(!m||m.length<6)return alert(" 6 ");try{if(te(!0),await kr.updateUserPassword(m),!y||a!=="teacher"&&!T){alert(""),se(!1);return}const I=(y.trim()[0]||"")+(a==="teacher"?"":"");await kr.completeProfile({realName:y,studentId:T,nickname:I}),window.localStorage.removeItem("registrationForm"),alert("")}catch(I){console.error(I);const N=I.details?`
: ${typeof I.details=="object"?JSON.stringify(I.details):I.details}`:"";alert(": "+I.message+N)}finally{te(!1)}},x=async I=>{I.preventDefault();try{te(!0),await kr.login(c,m)}catch(N){N.code==="auth/wrong-password"?alert(""):N.code==="auth/user-not-found"||N.code==="auth/invalid-email"?alert(""):alert(": "+N.message)}finally{te(!1)}};return t==="register-role"?_.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Do,backgroundColor:xe.bgLight},children:_.jsxs("div",{className:"max-w-2xl w-full",children:[_.jsx("h2",{className:"text-3xl font-bold text-center mb-8",style:{color:xe.brownWindmill},children:""}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[_.jsxs("button",{onClick:()=>{l("teacher"),r("register-form")},className:"bg-white p-8 rounded-2xl shadow-lg border-2 border-transparent hover:border-[#A58976] transition-all flex flex-col items-center gap-4 group",children:[_.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),_.jsx("h3",{className:"text-xl font-bold text-[#5D4037]",children:""}),_.jsx("p",{className:"text-gray-500 text-sm",children:" @shsh.ylc.edu.tw "})]}),_.jsxs("button",{onClick:()=>{l("student"),r("register-form")},className:"bg-white p-8 rounded-2xl shadow-lg border-2 border-transparent hover:border-[#A58976] transition-all flex flex-col items-center gap-4 group",children:[_.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-4xl group-hover:scale-110 transition-transform",children:""}),_.jsx("h3",{className:"text-xl font-bold text-[#5D4037]",children:""}),_.jsx("p",{className:"text-gray-500 text-sm",children:" @shsh.tw "})]})]}),_.jsx("button",{onClick:()=>r("login"),className:"block mx-auto mt-8 text-gray-500 hover:underline",children:""})]})}):t==="register-form"?_.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Do,backgroundColor:xe.bgLight},children:_.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 border",style:{borderColor:xe.whiteBucks},children:[_.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",style:{color:xe.brownWindmill},children:a==="teacher"?"":""}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold ml-1 mb-1 text-[#756256]",children:""}),_.jsx("input",{type:"text",value:y,onChange:I=>E(I.target.value),disabled:U,className:"w-full p-3 border rounded-xl bg-gray-50",placeholder:a==="teacher"?"":""}),_.jsxs("p",{className:"text-xs text-gray-400 mt-1 ml-1",children:["",y?y[0]:"",a==="teacher"?"":""]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold ml-1 mb-1 text-[#756256]",children:""}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("input",{type:"email",value:c,onChange:I=>d(I.target.value),disabled:U||R,className:"flex-1 p-3 border rounded-xl bg-gray-50",placeholder:a==="teacher"?"xxx@shsh.ylc.edu.tw":"u/stu + @shsh.tw"}),U?_.jsx("div",{className:"flex items-center justify-center px-3 bg-green-100 text-green-600 rounded-xl",children:_.jsx(AI,{size:20})}):_.jsx("button",{onClick:ae,disabled:R||le,className:`px-4 rounded-xl font-bold text-sm whitespace-nowrap transition-colors ${R?"bg-gray-200 text-gray-500":"bg-[#756256] text-white hover:bg-[#5D4E44]"}`,children:R?"":""})]})]}),!U&&_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold ml-1 mb-1 text-gray-400",children:""}),_.jsx("input",{type:"text",disabled:!0,className:"w-full p-3 border rounded-xl bg-gray-100 text-gray-400 cursor-not-allowed",placeholder:""})]}),U&&_.jsxs("div",{className:"animate-fade-in-up",children:[_.jsx("label",{className:"block text-sm font-bold ml-1 mb-1 text-[#756256]",children:""}),_.jsx("input",{type:"password",value:m,onChange:I=>g(I.target.value),className:"w-full p-3 border rounded-xl bg-white focus:ring-2 ring-[#A58976]",placeholder:" 6 "}),_.jsx("button",{onClick:he,disabled:le,className:"w-full mt-6 py-3 rounded-xl bg-[#A58976] text-white font-bold hover:bg-[#8D7362] shadow-md transition-transform active:scale-95",children:le?"...":""})]}),!U&&_.jsx("button",{onClick:()=>r("register-role"),className:"w-full mt-4 text-gray-400 text-sm hover:underline",children:""})]})]})}):_.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",style:{...Do,backgroundColor:xe.bgLight,color:xe.brownWindmill},children:_.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border",style:{borderColor:xe.whiteBucks},children:[_.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:xe.brownWindmill},children:""}),_.jsx("p",{className:"text-sm mb-6",style:{color:xe.brushwood},children:""}),_.jsxs("form",{onSubmit:x,className:"space-y-3 mb-6",children:[_.jsx("input",{type:"email",value:c,onChange:I=>d(I.target.value),placeholder:"Email",className:"w-full p-3 border rounded-xl",required:!0}),_.jsx("input",{type:"password",value:m,onChange:I=>g(I.target.value),placeholder:"Password",className:"w-full p-3 border rounded-xl",required:!0}),_.jsx("button",{type:"submit",disabled:le,className:"w-full py-3 rounded-xl border-2 font-bold hover:bg-gray-50 flex items-center justify-center gap-2",style:{borderColor:xe.whiteBucks,color:xe.brownWindmill},children:le?"...":""})]}),_.jsxs("div",{className:"border-t pt-4",style:{borderColor:xe.whiteBucks},children:[_.jsx("p",{className:"text-sm text-gray-400 mb-3",children:""}),_.jsx("button",{onClick:()=>r("register-role"),className:"w-full py-3 rounded-xl bg-[#756256] text-white font-bold hover:bg-[#5D4E44] shadow-md transition-transform active:scale-95 mb-3",children:""}),_.jsxs("button",{onClick:e,className:"w-full py-2 rounded-xl text-[#9E9081] font-bold hover:bg-gray-50 text-sm transition-colors flex items-center justify-center gap-1",children:[_.jsx("span",{className:"opacity-70",children:""})," ",_.jsx(tp,{size:14})]})]})]})})},WU=({product:n,onBack:e,onContact:t,currentUser:r})=>{if(!n)return null;const a=r?.uid&&n.sellerId&&String(r.uid)===String(n.sellerId)||r?.studentId&&n.seller?.studentId&&r.studentId===n.seller.studentId,[l,c]=pe.useState(null);return pe.useEffect(()=>{n?.sellerId&&(async()=>{try{const{db:m}=await Xr(async()=>{const{db:y}=await Promise.resolve().then(()=>Jr);return{db:y}},void 0),g=await m.collection("users").doc(n.sellerId).get();g.exists&&c(g.data())}catch(m){console.error("Failed to fetch seller profile",m)}})()},[n?.sellerId]),pe.useEffect(()=>{window.scrollTo(0,0)},[]),_.jsxs("div",{className:"min-h-screen pb-24 bg-white",style:Do,children:[_.jsx("nav",{className:"fixed top-0 w-full z-50 flex justify-between items-center px-4 py-3 bg-white/80 backdrop-blur-md border-b",style:{borderColor:xe.whiteBucks},children:_.jsx("button",{onClick:e,className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200",children:_.jsx(dv,{size:20,color:xe.brownWindmill})})}),_.jsxs("div",{className:"pt-16 pb-6 md:pt-20 md:pb-12 md:px-8 max-w-6xl mx-auto md:flex md:gap-10 md:items-start",children:[_.jsxs("div",{className:"aspect-[4/3] bg-gray-100 relative md:w-1/2 md:aspect-square md:rounded-2xl md:overflow-hidden md:shadow-sm md:sticky md:top-24",children:[_.jsx("img",{src:n.cover||n.imageBase64||"https://dummyimage.com/600x400/eee/aaa",alt:n.title,className:"w-full h-full object-contain bg-[#F9F7F5]"}),(n.status==="Reserved"||n.status==="Sold")&&_.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:_.jsx("div",{className:"w-32 h-32 bg-black/70 rounded-full flex items-center justify-center border-2 border-white/50 text-white font-bold tracking-widest text-xl transform -rotate-12 backdrop-blur-sm",children:""})})]}),_.jsxs("div",{className:"px-5 mt-6 md:w-1/2 md:px-0 md:mt-0",children:[_.jsxs("div",{className:"flex gap-2 mb-2",children:[_.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.grade}),_.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded bg-[#F9F7F5] text-[#9E9081]",children:n.subject})]}),_.jsx("h1",{className:"text-2xl md:text-3xl font-bold mt-4 mb-2 leading-tight",style:{color:xe.brownWindmill},children:n.title}),_.jsx("div",{className:"flex items-end gap-3 mb-6 pb-6 border-b",style:{borderColor:xe.whiteBucks},children:_.jsx(aE,{type:n.type,price:n.price,originalPrice:n.originalPrice,large:!0})}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsx("h3",{className:"text-sm font-bold text-[#9E9081]",children:""}),_.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2",children:[_.jsxs("span",{children:[n.views||0," "]}),_.jsx("span",{children:""}),_.jsxs("span",{className:"whitespace-nowrap",children:["",(()=>{const d=n.timestamp?.toDate?n.timestamp.toDate():new Date(n.timestamp||0),m=d.getFullYear(),g=String(d.getMonth()+1).padStart(2,"0"),y=String(d.getDate()).padStart(2,"0"),E=String(d.getHours()).padStart(2,"0"),T=String(d.getMinutes()).padStart(2,"0");return`${m}-${g}-${y} ${E}:${T}`})()]})]})]}),_.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg inline-block border border-gray-100",children:n.conditionLevel})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),_.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:n.description||""})]}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-sm font-bold text-[#9E9081] mb-2",children:""}),_.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-[#F9F7F5] border border-stone-100",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white shadow-sm overflow-hidden",children:(()=>{const d=l?.currentAvatarId||n.seller?.currentAvatarId||n.seller?.avatar,m=Mi.find(g=>g.id===d)?.src||Mi[0].src;return _.jsx("img",{src:Gc(m),className:"w-full h-full object-cover",alt:"Seller"})})()}),_.jsxs("div",{children:[_.jsx("div",{className:"font-bold text-[#756256] text-lg",children:l?.nickname||n.seller?.nickname||n.seller?.name}),_.jsx("div",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:_.jsx(g2,{score:l?.creditScore||n.seller?.score||100})})]})]})]}),!a&&_.jsx("div",{className:"hidden md:block pt-4",children:n.status==="Reserved"||n.status==="Sold"?_.jsx("button",{disabled:!0,className:"w-full py-4 bg-gray-300 text-white rounded-xl font-bold shadow-none cursor-not-allowed flex items-center justify-center gap-2 text-lg",children:""}):_.jsxs("button",{onClick:()=>{if(r?.isGuest){alert("");return}t()},className:`w-full py-4 ${r?.isGuest?"bg-gray-400 hover:bg-gray-500":"bg-[#756256] hover:bg-[#5D4E44]"} text-white rounded-xl font-bold shadow-lg transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2 text-lg`,children:[_.jsx(ko,{size:20})," ",r?.isGuest?"":" / "]})})]})]})]}),!a&&_.jsx("div",{className:"fixed bottom-0 left-0 w-full p-4 bg-white border-t safe-area-bottom flex gap-3 md:hidden z-40",style:{borderColor:xe.whiteBucks},children:n.status==="Reserved"||n.status==="Sold"?_.jsx("button",{disabled:!0,className:"flex-1 py-3 bg-gray-300 text-white rounded-xl font-bold shadow-none cursor-not-allowed flex items-center justify-center gap-2",children:""}):_.jsxs("button",{onClick:()=>{if(r?.isGuest){alert("");return}t()},className:"flex-1 py-3 bg-[#756256] text-white rounded-xl font-bold shadow-lg hover:bg-[#5D4E44] transition-colors flex items-center justify-center gap-2",children:[_.jsx(ko,{size:18})," ",r?.isGuest?"":""]})})]})},YU=({onNavigate:n,user:e,currentAvatarId:t,coins:r,wishes:a,onAddWish:l,onDeleteWish:c,books:d,isLoading:m,examCountdown:g,onToggleNotifications:y,hasUnreadNotifications:E,onLogout:T})=>{const[k,R]=pe.useState(""),[j,U]=pe.useState("all"),[se,le]=pe.useState("all"),[te,_e]=pe.useState("all"),[ae,he]=pe.useState("all"),[x,I]=pe.useState(1),N=20,O=()=>{le("all"),_e("all"),he("all"),R(""),U("all"),I(1),window.scrollTo({top:0,behavior:"smooth"})};pe.useEffect(()=>{I(1)},[k,j]);const C=d.filter(X=>{const ce=k.toLowerCase(),ke=!ce.trim()||X.title.toLowerCase().includes(ce)||X.author&&X.author.toLowerCase().includes(ce);let Ve=!0;if(j!=="all")if(j==="extra")Ve=X.subject===""||X.publisher==="";else if(j==="sci")Ve=["","","","",""].includes(X.subject);else if(j==="soc")Ve=["","","",""].includes(X.subject);else{const V=vI.find(Z=>Z.id===j)?.name;Ve=X.subject===V}return ke&&Ve}).sort((X,ce)=>{const ke=X.timestamp?.toDate?X.timestamp.toDate():new Date(X.timestamp||0);return(ce.timestamp?.toDate?ce.timestamp.toDate():new Date(ce.timestamp||0))-ke}),M=Math.ceil(C.length/N),D=C.slice((x-1)*N,x*N),Ne=Mi.find(X=>X.id===t)||Mi[0],rt=pe.useRef(null),$=()=>{if(rt.current){const ce=rt.current.getBoundingClientRect().top+window.pageYOffset+-80;window.scrollTo({top:ce,behavior:"smooth"})}};return _.jsxs("div",{className:"min-h-screen pb-20",style:{...Do,backgroundColor:xe.bgLight,color:xe.brownWindmill},children:[_.jsx("div",{className:"pt-6 pb-12 px-4 rounded-b-[2rem] shadow-lg",style:{background:`linear-gradient(135deg, ${xe.chocolateBubble}, ${xe.brownWindmill})`,color:xe.bgLight},children:_.jsxs("div",{className:"max-w-6xl mx-auto",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("img",{src:"/og-image.jpg",alt:"Logo",className:"w-10 h-10 rounded-full object-cover border-2 border-white/20 shadow-sm"}),_.jsx("span",{className:"text-xl font-bold tracking-widest",children:""})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:O,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:_.jsx(UT,{size:20})}),_.jsxs("button",{onClick:y,className:"relative p-2 hover:bg-white/10 rounded-full transition-colors",children:[_.jsx(__,{size:20}),E&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),e.isGuest?_.jsx("button",{onClick:T,className:"px-4 py-1.5 rounded-full bg-white text-[#756256] text-sm font-bold shadow-sm hover:bg-gray-100 transition-colors",children:" / "}):_.jsxs("button",{onClick:()=>n("profile"),className:"flex items-center gap-2 hover:bg-white/20 pl-1 pr-3 py-1 rounded-full transition-all border border-white/20",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:[_.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center overflow-hidden bg-white/20",children:_.jsx("img",{src:Gc(Ne.src,100,50),alt:"avatar",className:"w-full h-full object-cover"})}),_.jsx("span",{className:"hidden sm:inline text-sm font-medium tracking-wide",children:e.nickname||e.email})]})]})]}),_.jsxs("div",{className:"max-w-3xl mx-auto mt-2",children:[_.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 tracking-widest text-center",children:""}),_.jsx("div",{className:"bg-[#FDFBF7] rounded-xl shadow-xl overflow-hidden p-2",children:_.jsxs("div",{className:"flex items-center border-b px-2",style:{borderColor:xe.whiteBucks},children:[_.jsx(wD,{className:"text-[#9E9081]",size:20}),_.jsx("input",{type:"text",value:k,onChange:X=>R(X.target.value),placeholder:"...",className:"w-full py-3 px-4 bg-transparent text-[#756256] placeholder-[#C9C3B6] outline-none"}),k&&_.jsx("button",{onClick:()=>R(""),className:"text-[#9E9081]",children:_.jsx(ki,{size:16})})]})})]})]})}),_.jsxs("div",{className:"max-w-6xl mx-auto px-4 -mt-6",children:[_.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar mb-4",children:vI.map(X=>_.jsx("button",{onClick:()=>U(X.id),className:`whitespace-nowrap px-5 py-2 rounded-full text-sm tracking-wide shadow-sm transition-all border ${j===X.id?"bg-[#756256] text-white border-[#756256]":"bg-[#F9F7F5] text-[#756256] border-[#E8E3DF]"}`,children:X.name},X.id))}),!k&&j==="all"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[_.jsx("div",{className:"flex-1 min-w-0",children:_.jsx(GU,{items:d,onNavigate:n,currentUser:e})}),_.jsx("div",{className:"w-full md:w-[320px] flex-shrink-0",children:_.jsx(KU,{examCountdown:g})})]}),_.jsx($U,{wishes:a,onAddWish:l,onDeleteWish:c,currentUser:e,currentAvatar:Ne})]}),_.jsxs("div",{className:"pb-8",children:[_.jsx("div",{ref:rt,className:"flex justify-between items-end mb-4 px-1 border-b pb-2",style:{borderColor:xe.whiteBucks},children:_.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 tracking-wide",style:{color:xe.brownWindmill},children:[_.jsx(hD,{size:20,style:{color:xe.chocolateBubble}}),k||j!=="all"?"":""]})}),m?_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 animate-fade-in",children:Array.from({length:10}).map((X,ce)=>_.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-sm border border-gray-100 flex flex-col h-full",children:[_.jsx("div",{className:"aspect-square bg-gray-100 animate-pulse"}),_.jsxs("div",{className:"p-3 space-y-2 flex-1",children:[_.jsx("div",{className:"h-4 bg-gray-100 rounded w-3/4 animate-pulse"}),_.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2 animate-pulse"}),_.jsxs("div",{className:"mt-auto pt-2 border-t border-gray-50 flex justify-between",children:[_.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/3 animate-pulse"}),_.jsx("div",{className:"h-4 bg-gray-100 rounded w-1/4 animate-pulse"})]})]})]},ce))}):D.length>0?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 animate-fade-in",children:D.map(X=>_.jsxs("div",{onClick:()=>n("product",X),className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-all cursor-pointer border flex flex-col h-full group",style:{borderColor:xe.whiteBucks},children:[_.jsxs("div",{className:"relative aspect-square bg-[#F9F7F5] overflow-hidden",children:[_.jsx("img",{src:X.cover||X.imageBase64||"https://dummyimage.com/400x400/eee/aaa",alt:X.title,className:"w-full h-full object-contain group-hover:scale-105 transition-transform duration-500"}),(X.status==="Reserved"||X.status==="Sold")&&_.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-20",children:_.jsx("div",{className:"w-20 h-20 bg-black/70 rounded-full flex items-center justify-center border border-white/50 text-white font-bold tracking-widest text-sm transform -rotate-12 backdrop-blur-sm",children:""})}),_.jsx("div",{className:"absolute top-0 right-0 px-3 py-1.5 text-xs font-bold shadow-sm rounded-bl-lg z-10",style:{backgroundColor:X.type==="gift"||X.price===0?"#E6DBC6":xe.brownWindmill,color:X.type==="gift"||X.price===0?"#756256":"#FFFFFF"},children:X.type==="gift"||X.price===0?"":""})]}),_.jsxs("div",{className:"p-3 flex flex-col flex-1",children:[_.jsx("h3",{className:"font-bold text-[#756256] text-base leading-tight mb-2 line-clamp-2 min-h-[2.5em]",children:X.title}),_.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#F9F7F5] text-[#9E9081]",children:X.subject}),X.grade&&X.grade!==""&&_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[#F9F7F5] text-[#9E9081]",children:X.grade})]}),_.jsxs("div",{className:"mt-auto flex items-end justify-between border-t pt-2 border-[#E8E3DF]",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("span",{className:"text-[10px] text-gray-400 mb-1",children:["",X.seller?.nickname||""]}),_.jsx(aE,{type:X.type,price:X.price})]}),_.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 scale-90",children:[_.jsx(gD,{size:12,className:"text-gray-400"}),_.jsx("span",{className:"font-bold",children:X.views||0})]})]})]})]},X.id))}),M>1&&_.jsxs("div",{className:"mt-8 flex justify-center items-center gap-2",children:[_.jsx("button",{onClick:()=>{I(X=>Math.max(1,X-1)),$()},disabled:x===1,className:"p-2 rounded-lg bg-white border border-gray-200 text-[#756256] disabled:opacity-30 hover:bg-gray-50 transition-colors shadow-sm",children:_.jsx(dv,{size:20})}),_.jsx("div",{className:"flex items-center gap-1 overflow-x-auto no-scrollbar max-w-[200px] sm:max-w-none px-2",children:Array.from({length:M}).map((X,ce)=>_.jsx("button",{onClick:()=>{I(ce+1),$()},className:`w-10 h-10 rounded-lg font-bold flex-shrink-0 transition-all shadow-sm ${x===ce+1?"bg-[#756256] text-white":"bg-white text-[#756256] border border-gray-100 hover:bg-gray-50"}`,children:ce+1},ce))}),_.jsx("button",{onClick:()=>{I(X=>Math.min(M,X+1)),$()},disabled:x===M,className:"p-2 rounded-lg bg-white border border-gray-200 text-[#756256] disabled:opacity-30 hover:bg-gray-50 transition-colors shadow-sm",children:_.jsx(TI,{size:20})})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 w-full animate-fade-in text-center col-span-full",children:[_.jsx("p",{className:"text-gray-500 text-lg font-medium mb-6",children:""}),_.jsxs("button",{onClick:O,className:"px-8 py-3 rounded-xl bg-[#756256] text-white font-bold hover:bg-[#5D4E44] transition-all transform hover:-translate-y-1 shadow-md flex items-center gap-2",children:[_.jsx(UT,{size:18})," "]})]})]})]})]})},XU=({onBack:n,user:e,onJoin:t})=>{const r=[{title:"",icon:_.jsx(ID,{className:"w-6 h-6 text-green-500"}),content:_.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-2",children:[_.jsx("li",{children:""}),_.jsx("li",{children:""}),_.jsxs("li",{children:["",_.jsx("strong",{children:""}),""]}),_.jsxs("li",{children:["",_.jsx("strong",{children:""}),"",_.jsx("strong",{children:""}),""]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"10 "}),""]})]})},{title:"",icon:_.jsx(RI,{className:"w-6 h-6 text-orange-500"}),content:_.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-2",children:[_.jsxs("li",{children:["",_.jsx("strong",{children:""}),"",_.jsx("strong",{children:""}),""]}),_.jsx("li",{children:""}),_.jsx("li",{children:""}),_.jsxs("li",{children:["",_.jsx("strong",{children:""})," LINE "]}),_.jsx("li",{children:""})]})},{title:"",icon:_.jsx(fv,{className:"w-6 h-6 text-yellow-500"}),content:_.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-2",children:[_.jsxs("li",{children:[_.jsx("strong",{children:""})," (+5) (+10)"]}),_.jsxs("li",{children:[_.jsx("strong",{children:""}),""]}),_.jsx("li",{children:""})]})},{title:"LINE ",icon:_.jsx(ko,{className:"w-6 h-6 text-blue-500"}),content:_.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-2",children:[_.jsx("li",{children:" LINE "}),_.jsxs("li",{children:["",_.jsx("strong",{children:" LINE"}),""]}),_.jsx("li",{children:" 6  LINE "})]})}];return _.jsxs("div",{className:"min-h-screen bg-[#F9F7F5] pb-20",style:Do,children:[_.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:_.jsx("div",{className:"max-w-2xl mx-auto px-4 h-16 flex items-center justify-between",children:_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:_.jsx(tp,{size:20,className:"rotate-180 text-[#9E9081]"})}),_.jsx("div",{className:"font-bold text-lg text-[#756256] tracking-wide",children:""})]})})}),_.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-8 space-y-6",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsxs("h1",{className:"text-2xl font-bold text-[#756256] mb-2",children:["",_.jsx("br",{}),"SchoolBook Exchange"]}),_.jsx("p",{className:"text-[#9E9081]",children:""})]}),r.map((a,l)=>_.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-[#E8E3DF] animate-fade-in",style:{animationDelay:`${l*100}ms`},children:[_.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[_.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:a.icon}),_.jsx("h3",{className:"text-lg font-bold text-[#756256]",children:a.title})]}),a.content]},l)),_.jsxs("div",{className:"bg-[#756256] text-white rounded-2xl p-6 text-center shadow-lg mt-8",children:[_.jsx("h3",{className:"font-bold text-lg mb-2",children:""}),_.jsx("p",{className:"text-sm opacity-90 mb-4",children:""}),_.jsx("button",{onClick:e?.isGuest?t:n,className:"px-8 py-3 bg-white text-[#756256] rounded-xl font-bold hover:bg-gray-100 transition-colors shadow-sm",children:e?.isGuest?"":""})]})]})]})},JU=({onBack:n,onNavigate:e,user:t,onLogout:r,coins:a,myAvatars:l,currentAvatarId:c,onPurchase:d,onEquip:m})=>{const[g,y]=pe.useState("shelf"),E=[],[T,k]=pe.useState(E),[R,j]=pe.useState({title:"",bookType:"textbook",gradeLevel:"",subject:"",transactionType:"sell",price:"",conditionLevel:"",description:"",coverImagePreview:null}),[U,se]=pe.useState(!1),[le,te]=pe.useState(null);pe.useEffect(()=>{if(t?.uid){const C=cn.getMyBooks(t.uid,M=>{k(M)});return()=>C()}},[t?.uid]);const _e=C=>{const M=C.target.files[0];if(M){const D=new FileReader;D.onloadend=async()=>{const Ne=await oE(D.result,600,600,.5);j({...R,coverImagePreview:Ne})},D.readAsDataURL(M)}},ae=async()=>{if(!R.coverImagePreview){alert("");return}if(!R.title){alert("");return}if(R.transactionType==="sell"&&!R.price){alert("");return}if(R.bookType==="textbook"){if(!R.gradeLevel){alert("");return}if(!R.subject){alert("");return}}se(!0);try{const C={title:R.title,author:"",publisher:R.bookType==="textbook"?"":"",subject:R.bookType==="textbook"?R.subject:"",grade:R.bookType==="textbook"?R.gradeLevel:"",price:R.transactionType==="gift"?0:Number(R.price),type:R.transactionType==="gift"?"gift":"sell",conditionLevel:R.conditionLevel,description:R.description,sellerId:t.uid,seller:{nickname:t.nickname||t.email,studentId:t.studentId||"",score:t.creditScore||5},cover:R.coverImagePreview,timestamp:new Date};await cn.addBook(C),alert(""),y("shelf"),j({title:"",bookType:"textbook",gradeLevel:"",subject:"",transactionType:"sell",price:"",conditionLevel:"",description:"",coverImagePreview:null})}catch(C){console.error(":",C),alert(": "+C.message)}finally{se(!1)}},he=(C,M)=>{M.stopPropagation(),te(C)},x=async()=>{if(!le)return;const C=le;try{await cn.deleteBook(C),te(null)}catch(M){console.error("Deletion failed:",M),alert(": "+M.message)}},I=async()=>{try{const M=(await kr.getBindingCode()).data.code;alert(` 6  LINE 

${M}

( 10 )`)}catch(C){console.error(C),alert(": "+C.message)}},N=async()=>{if(window.confirm(` LINE 
`))try{await kr.unbindLineAccount(),alert("")}catch(C){console.error(C),alert(": "+C.message)}},O=Mi.find(C=>C.id===c)||Mi[0];return _.jsxs("div",{className:"min-h-screen pb-20",style:{...Do,backgroundColor:xe.bgLight,color:xe.brownWindmill},children:[_.jsx("nav",{className:"backdrop-blur-md shadow-sm border-b sticky top-0 z-50",style:{backgroundColor:"rgba(255,255,255,0.8)",borderColor:xe.whiteBucks},children:_.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100",children:_.jsx(tp,{size:20,className:"rotate-180 text-[#9E9081]"})}),_.jsx("div",{className:"font-bold text-lg tracking-wide",children:""})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("button",{onClick:()=>e("tutorial"),className:"hidden sm:flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold bg-white text-[#756256] border border-[#E8E3DF] hover:bg-gray-50 shadow-sm transition-colors",children:[_.jsx(mD,{size:14})," "]}),t.isLineNotifyEnabled?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("div",{className:"hidden sm:flex items-center gap-1 px-2 py-1 bg-green-50 text-green-600 text-xs font-bold rounded-md border border-green-200 cursor-default",children:[_.jsx(AI,{size:12})," "]}),_.jsx("button",{onClick:N,className:"px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-gray-100 text-gray-500 border border-gray-200 transition-colors",children:""})]}):_.jsxs("button",{onClick:I,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold bg-[#06C755] hover:bg-[#05b34c] text-white shadow-sm transition-colors",children:[_.jsx(ko,{size:14}),"  LINE"]}),_.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-bold hover:bg-red-50 text-red-700 border border-red-200",children:[_.jsx(vD,{size:14})," "]})]})]})}),_.jsxs("main",{className:"max-w-2xl mx-auto px-4 py-8 space-y-8",children:[_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>y("store"),children:[_.jsx("div",{className:"w-24 h-24 rounded-full border-4 shadow-md overflow-hidden bg-white",style:{borderColor:xe.bgLight},children:_.jsx("img",{src:Gc(O.src,200,70),className:"w-full h-full object-cover",alt:"User"})}),_.jsx("div",{className:"absolute bottom-0 right-0 text-white p-1.5 rounded-full border-2 border-white shadow-sm flex items-center justify-center",style:{backgroundColor:xe.chocolateBubble,width:28,height:28},children:_.jsx(bD,{size:14})})]}),_.jsx("h2",{className:"mt-4 text-xl font-bold tracking-widest",style:{color:xe.brownWindmill},children:t.nickname||t.email}),_.jsx("div",{className:"flex items-center justify-center mt-1 mb-2",children:_.jsx(g2,{score:t.creditScore||100,size:16})}),_.jsx("p",{className:"text-sm text-[#9E9081] mb-2",children:t.email})]}),_.jsxs("div",{className:"flex border rounded-lg overflow-hidden bg-white p-1",style:{borderColor:xe.whiteBucks},children:[_.jsx("button",{onClick:()=>y("shelf"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-colors ${g==="shelf"?"bg-[#F9F7F5] text-[#756256]":"text-gray-400 hover:text-gray-600"}`,children:""}),!t.isGuest&&_.jsx("button",{onClick:()=>y("upload"),className:"flex-1 py-2 text-sm font-bold rounded-md transition-all bg-[#A58976] text-white shadow-sm ring-1 ring-white/20",children:""}),_.jsx("button",{onClick:()=>y("store"),className:`flex-1 py-2 text-sm font-bold rounded-md transition-colors ${g==="store"?"bg-[#F9F7F5] text-[#756256]":"text-gray-400 hover:text-gray-600"}`,children:""})]}),g==="upload"?_.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 space-y-4 animate-fade-in",style:{borderColor:xe.whiteBucks},children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:" *"}),_.jsx("input",{type:"file",id:"cover-upload",accept:"image/*",onChange:_e,className:"hidden"}),_.jsx("label",{htmlFor:"cover-upload",className:"block text-center p-8 border-2 border-dashed rounded-lg bg-[#F9F7F5] cursor-pointer hover:bg-[#E6DBC6] transition-colors",style:{borderColor:xe.fossilGray},children:R.coverImagePreview?_.jsx("img",{src:R.coverImagePreview,alt:"",className:"max-h-48 mx-auto rounded"}):_.jsxs(_.Fragment,{children:[_.jsx(_D,{className:"mx-auto text-[#9E9081] mb-2",size:32}),_.jsx("span",{className:"text-sm text-[#756256]",children:""})]})})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:" *"}),_.jsx("input",{type:"text",value:R.title,onChange:C=>j({...R,title:C.target.value}),className:"w-full p-3 border rounded-lg bg-gray-50 text-sm",placeholder:"",required:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:" *"}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{type:"button",onClick:()=>j({...R,bookType:"textbook"}),className:`py-1.5 px-4 rounded-lg font-bold transition-colors ${R.bookType==="textbook"?"bg-[#756256] text-white":"bg-[#F2F0EE] text-[#9E9081] hover:bg-[#E8E3DF]"}`,children:""}),_.jsx("button",{type:"button",onClick:()=>j({...R,bookType:"extracurricular"}),className:`py-1.5 px-4 rounded-lg font-bold transition-colors ${R.bookType==="extracurricular"?"bg-[#756256] text-white":"bg-[#F2F0EE] text-[#9E9081] hover:bg-[#E8E3DF]"}`,children:""})]})]}),R.bookType==="textbook"&&_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:""}),_.jsxs("select",{value:R.gradeLevel,onChange:C=>j({...R,gradeLevel:C.target.value}),className:"w-full p-3 border rounded-lg bg-gray-50 text-sm",children:[_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:""}),_.jsxs("select",{value:R.subject,onChange:C=>j({...R,subject:C.target.value}),className:"w-full p-3 border rounded-lg bg-gray-50 text-sm",children:[_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:" *"}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{type:"button",onClick:()=>j({...R,transactionType:"sell"}),className:`py-1.5 px-4 rounded-lg font-bold transition-colors ${R.transactionType==="sell"?"bg-[#756256] text-white":"bg-[#F2F0EE] text-[#9E9081] hover:bg-[#E8E3DF]"}`,children:""}),_.jsx("button",{type:"button",onClick:()=>j({...R,transactionType:"gift",price:"0"}),className:`py-1.5 px-4 rounded-lg font-bold transition-colors ${R.transactionType==="gift"?"bg-[#756256] text-white":"bg-[#F2F0EE] text-[#9E9081] hover:bg-[#E8E3DF]"}`,children:""})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:[" (NT$) ",R.transactionType==="sell"&&"*"]}),_.jsx("input",{type:"number",value:R.price,onChange:C=>{const M=C.target.value;Number(M)<0||(Number(M)===0&&M!==""?j({...R,price:0,transactionType:"gift"}):j({...R,price:M}))},className:"w-full p-3 border rounded-lg bg-gray-50 text-sm",placeholder:"100",disabled:R.transactionType==="gift",required:R.transactionType==="sell"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:""}),_.jsx("select",{value:R.conditionLevel,onChange:C=>j({...R,conditionLevel:C.target.value}),className:"w-full p-3 border rounded-lg bg-gray-50 text-sm",children:zU.map(C=>_.jsx("option",{value:C,children:C},C))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-[#9E9081] mb-2",children:" ()"}),_.jsx("textarea",{value:R.description,onChange:C=>j({...R,description:C.target.value}),className:"w-full p-3 border rounded-lg bg-gray-50 text-sm h-24 resize-none",placeholder:"..."})]}),_.jsx("button",{onClick:ae,disabled:U,className:"w-full py-3 bg-[#756256] text-white rounded-xl font-bold shadow-md hover:bg-[#5D4E44] transition-colors disabled:opacity-50",children:U?"...":""})]}):g==="store"?_.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 animate-fade-in",style:{borderColor:xe.whiteBucks},children:[_.jsxs("div",{className:"flex items-center justify-between mb-6",children:[_.jsxs("h3",{className:"font-bold text-[#756256] flex items-center gap-2 text-lg",children:[_.jsx(RI,{size:22})," "]}),_.jsxs("div",{className:"flex items-center gap-1 bg-yellow-100 px-3 py-1 rounded-full text-xs font-bold text-yellow-700 shadow-sm border border-yellow-200",children:[_.jsx(fv,{size:14,fill:"currentColor"})," ",a," "]})]}),_.jsx(bI,{title:"",avatars:Mi.filter(C=>C.id.startsWith("special")||C.id==="pony-gift"),onPurchase:d,onEquip:m,currentAvatarId:c,myAvatars:l,coins:a}),_.jsx(bI,{title:"",avatars:Mi.filter(C=>!["pony-gift"].includes(C.id)&&!C.id.startsWith("special")),onPurchase:d,onEquip:m,currentAvatarId:c,myAvatars:l,coins:a})]}):_.jsx("div",{className:"space-y-4 animate-fade-in",children:T.length===0?_.jsx("div",{className:"text-center py-10 text-gray-400",children:""}):T.map(C=>_.jsxs("div",{onClick:()=>e("product",C),className:"bg-white rounded-xl shadow-sm border p-3 flex gap-4 items-center cursor-pointer hover:shadow-md transition-shadow",style:{borderColor:xe.whiteBucks},children:[_.jsx("div",{className:"w-16 h-20 bg-gray-200 rounded flex-shrink-0 overflow-hidden",children:_.jsx("img",{src:C.cover,className:"w-full h-full object-cover",alt:C.title})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex justify-between items-center mb-1",children:[_.jsx("h3",{className:"font-bold text-[#756256] truncate",children:C.title}),C.status==="Reserved"&&_.jsx("span",{className:"flex-shrink-0 text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full font-bold whitespace-nowrap ml-2",children:""}),C.status==="Sold"&&_.jsx("span",{className:"flex-shrink-0 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-bold whitespace-nowrap ml-2",children:""})]}),_.jsx("div",{className:"text-sm text-[#9E9081] font-medium",children:C.price===0||C.type==="gift"?"":`NT$ ${C.price}`}),_.jsxs("div",{className:"text-xs text-gray-400 mt-1 flex items-center gap-2",children:[_.jsxs("span",{children:[C.views||0," "]}),"  ",_.jsx("span",{children:C.date})]})]}),_.jsx("button",{onClick:M=>he(C.id,M),className:"p-2 text-red-400 hover:bg-red-50 rounded-full",children:_.jsx(xD,{size:18})})]},C.id))})]}),le&&_.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 animate-fade-in",onClick:()=>te(null),children:_.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm text-center shadow-xl transform transition-all scale-100",onClick:C=>C.stopPropagation(),children:[_.jsx("h3",{className:"text-xl font-bold text-[#756256] mb-4",children:""}),_.jsx("p",{className:"text-gray-500 mb-6 text-sm",children:""}),_.jsxs("div",{className:"flex gap-3",children:[_.jsx("button",{onClick:()=>te(null),className:"flex-1 py-2.5 rounded-xl border border-gray-200 font-bold text-gray-500 hover:bg-gray-50 transition-colors",type:"button",children:""}),_.jsx("button",{onClick:x,className:"flex-1 py-2.5 rounded-xl bg-red-500 text-white font-bold hover:bg-red-600 transition-colors shadow-md",type:"button",children:""})]})]})})]})},ZU=({transaction:n,currentUser:e,onClose:t,onBackToList:r})=>{const{id:a,sellerId:l,bookTitle:c,price:d}=n,[m,g]=pe.useState([]),[y,E]=pe.useState(""),[T,k]=pe.useState(null),R=pe.useRef(null),j=pe.useRef(null),U=pe.useRef(null);pe.useEffect(()=>{if(!a)return;const ae=_I.subscribeToMessages(a,he=>{g(he),cn.markAsRead(a,e.uid),setTimeout(()=>R.current?.scrollIntoView({behavior:"smooth"}),100)});return cn.markAsRead(a,e.uid),()=>ae&&ae()},[a,e.uid]),pe.useEffect(()=>{j.current&&(j.current.style.height="auto",j.current.style.height=`${Math.min(j.current.scrollHeight,120)}px`)},[y]);const se=ae=>{const he=ae.target.files[0];if(he){const x=new FileReader;x.onloadend=async()=>{const I=await oE(x.result,800,800,.7);k(I)},x.readAsDataURL(he)}},le=async()=>{if(!(!y.trim()&&!T))try{let ae=null;if(y.includes("")){const he=y.match(/(?:\*\*|)?[\s\S]*?[:]\s*([^\n\r]*)/),x=y.match(/(?:\*\*|)?[\s\S]*?[:]\s*([^\n\r]*)/);if(he||x){const I=HU(he?.[1]?.trim());let N=null;if(I){const D=I.match(/(\d{1,2})\/(\d{1,2})\s+(\d{1,2}):(\d{1,2})/);if(D){const Ne=new Date;let rt=Ne.getFullYear();const $=parseInt(D[1])-1;Ne.getMonth()===11&&$===0&&(rt+=1),N=new Date(rt,$,parseInt(D[2]),parseInt(D[3]),parseInt(D[4]))}}if(N&&N<new Date){alert("");return}ae={meetingTime:N,meetingLocation:x?.[1]?.trim(),invoiceSentAt:new Date};const O=ae.meetingTime&&!isNaN(N.getTime())&&ae.meetingTime.toString()!=="Invalid Date",C=["","","","**"],M=ae.meetingLocation&&!C.some(D=>ae.meetingLocation.includes(D));if(!O){alert(" (: 1/5 8:20)");return}if(!M){alert(" ()");return}}else{alert("");return}}await _I.sendMessage(a,e.uid,e.name||e.nickname||"",y,T,ae),E(""),k(null)}catch(ae){console.error(ae),alert(": "+ae.message)}},te=()=>{const ae=`
LINE
----------------
(ex.1/5 15:20)

${c}
NT$ ${d}`;E(ae)},_e=(ae,he)=>_.jsxs("div",{className:"flex flex-col gap-2",children:[he&&_.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100 mb-1",children:_.jsx("img",{src:he,alt:"chat",className:"max-w-full h-auto object-contain cursor-pointer",onClick:()=>window.open(he,"_blank")})}),ae&&ae.split(/(\*\*.*?\*\*)/g).map((x,I)=>x.startsWith("**")&&x.endsWith("**")?_.jsx("strong",{children:x.slice(2,-2)},x+I):_.jsx("span",{className:"whitespace-pre-wrap",children:x},x+I))]});return _.jsxs("div",{className:"fixed bottom-4 right-4 w-80 h-[450px] bg-white rounded-t-xl rounded-bl-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[_.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center shadow-md",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:r,className:"hover:bg-white/20 p-1.5 rounded-lg transition-all active:scale-95 group",title:"",children:_.jsx(ko,{size:18,className:"group-hover:animate-pulse"})}),_.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:c||""})]}),_.jsx("button",{onClick:t,className:"hover:bg-white/20 rounded-full p-1 transition-colors",children:_.jsx(ki,{size:16})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 bg-[#F9F7F5]",children:[_.jsx("div",{className:"text-center text-xs text-gray-400 mt-4 mb-4 space-y-2",children:_.jsxs("div",{className:"opacity-80",children:["",_.jsx("br",{}),""]})}),m.map((ae,he)=>{const x=ae.senderId===e.uid,I=ae.timestamp?.toDate?ae.timestamp.toDate():new Date(ae.timestamp);let N=!1,O="";if(he===0)N=!0;else{const D=m[he-1],Ne=D.timestamp?.toDate?D.timestamp.toDate():new Date(D.timestamp);I.toLocaleDateString()!==Ne.toLocaleDateString()&&(N=!0)}N&&(O=`${I.getMonth()+1}/${I.getDate()}`);const M=(D=>D?(D.toDate?D.toDate():new Date(D)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}):"")(ae.timestamp);return _.jsxs(XN.Fragment,{children:[N&&_.jsx("div",{className:"flex items-center justify-center my-4",children:_.jsx("div",{className:"bg-gray-200/50 text-gray-500 text-[10px] px-3 py-1 rounded-full font-bold",children:O})}),_.jsxs("div",{className:`flex items-end gap-1.5 ${x?"justify-end":"justify-start"}`,children:[x&&_.jsx("span",{className:"text-[10px] text-gray-400 mb-1 flex-shrink-0",children:M}),_.jsx("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm shadow-sm break-words ${x?"bg-[#756256] text-white rounded-tr-none":"bg-white text-gray-700 rounded-tl-none"}`,children:_e(ae.content,ae.image)}),!x&&_.jsx("span",{className:"text-[10px] text-gray-400 mb-1 flex-shrink-0",children:M})]})]},ae.id)}),_.jsx("div",{ref:R})]}),_.jsxs("div",{className:"px-3 py-1.5 bg-[#F9F7F5] flex items-center justify-start gap-2 border-t border-stone-100",children:[_.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:U,onChange:se}),_.jsx("button",{onClick:()=>U.current?.click(),className:"p-1.5 text-gray-400 hover:text-[#756256] transition-colors rounded-lg hover:bg-white flex-shrink-0 border border-stone-200 bg-white shadow-sm",title:"",children:_.jsx(wI,{size:18})}),e.uid===l&&_.jsx("button",{onClick:te,className:"text-[10px] w-fit font-bold text-[#756256] border border-[#756256] rounded-md px-3 py-1 transform hover:translate-y-[-1px] transition-all bg-white flex items-center gap-1 shadow-sm active:translate-y-0",children:""})]}),T&&_.jsxs("div",{className:"px-3 py-2 bg-gray-50 border-t flex items-center gap-2",children:[_.jsxs("div",{className:"relative w-12 h-12 rounded-md overflow-hidden border border-gray-200",children:[_.jsx("img",{src:T,alt:"preview",className:"w-full h-full object-cover"}),_.jsx("button",{onClick:()=>k(null),className:"absolute top-0 right-0 bg-black/50 text-white rounded-full p-0.5",children:_.jsx(ki,{size:10})})]}),_.jsx("span",{className:"text-[10px] text-gray-500",children:"..."})]}),_.jsxs("div",{className:"p-3 bg-white border-t flex items-end gap-2",children:[_.jsx("textarea",{ref:j,rows:"1",value:y,onChange:ae=>E(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&!ae.shiftKey&&(ae.preventDefault(),le())},placeholder:"...",className:"w-full bg-[#F9F7F5] border-none rounded-2xl px-4 py-2 text-sm focus:ring-1 focus:ring-[#756256] outline-none resize-none transition-all scrollbar-hide py-2"}),_.jsx("button",{onClick:le,disabled:!y.trim()&&!T,className:"p-2 bg-[#756256] text-white rounded-full hover:bg-[#5D4E44] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md flex-shrink-0",children:_.jsx(TD,{size:18})})]})]})},e9=({currentUser:n,onSelectChat:e,onClose:t,books:r})=>{const[a,l]=pe.useState([]),c={Pending:{label:"",className:"bg-gray-100 text-gray-600"},Invoiced:{label:"",className:"bg-blue-50 text-blue-600"},Completed:{label:"",className:"bg-green-100 text-green-700"},Success:{label:"",className:"bg-green-100 text-green-700"},Failed:{label:"",className:"bg-red-50 text-red-600"}};pe.useEffect(()=>{if(!n)return;const m=new Map,g=T=>{T.forEach(k=>{m.set(k.id,{id:k.id,...k.data()})}),l(Array.from(m.values()).sort((k,R)=>{const j=k.timestamp?.toDate?k.timestamp.toDate():new Date(k.timestamp);return(R.timestamp?.toDate?R.timestamp.toDate():new Date(R.timestamp))-j}))},y=cn.getUserTransactions(n.uid,g),E=cn.getSellerTransactions(n.uid,g);return()=>{y(),E()}},[n]);const d=async(m,g)=>{if(m.stopPropagation(),window.confirm(""))try{await cn.deleteTransaction(g),l(y=>y.filter(E=>E.id!==g))}catch(y){console.error("Delete chat failed",y)}};return _.jsxs("div",{className:"fixed bottom-24 right-4 w-80 max-h-96 bg-white rounded-xl shadow-2xl flex flex-col z-50 animate-slide-up border border-stone-200 overflow-hidden",children:[_.jsxs("div",{className:"bg-[#756256] text-white p-3 flex justify-between items-center",children:[_.jsx("span",{className:"font-bold",children:""}),_.jsx("button",{onClick:t,className:"hover:bg-white/20 rounded-full p-1",children:_.jsx(ki,{size:16})})]}),_.jsxs("div",{className:"overflow-y-auto p-2 space-y-2 bg-[#F9F7F5] flex-1",children:[a.length===0&&_.jsx("div",{className:"text-center text-gray-400 py-4 text-sm",children:""}),a.map(m=>{const g=r.some(y=>y.id===m.bookId);return _.jsxs("div",{onClick:g?()=>e(m):y=>d(y,m.id),className:`p-3 rounded-lg cursor-pointer transition-colors shadow-sm border border-gray-100 relative ${g?"bg-white hover:bg-gray-50":"bg-gray-100 grayscale hover:bg-gray-200"}`,children:[m.unreadBy?.includes(n.uid)&&_.jsx("div",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white shadow-sm z-10"}),_.jsx("div",{className:"font-bold text-[#756256] text-sm truncate pr-4",children:m.bookTitle}),_.jsx("div",{className:"text-xs text-gray-500 flex justify-between items-center mt-1",children:g?_.jsxs(_.Fragment,{children:[_.jsx("span",{children:m.buyerId===n.uid?"":""}),_.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c[m.status]?.className||"bg-gray-100 text-gray-400"}`,children:c[m.status]?.label||m.status})]}):_.jsx("span",{className:"text-gray-500 font-bold w-full text-center",children:"()"})})]},m.id)})]})]})},t9=({notifications:n,onClose:e,onMarkAsRead:t,onClearAll:r})=>_.jsxs("div",{className:"fixed top-16 right-4 sm:right-20 w-80 max-h-[400px] bg-white rounded-2xl shadow-2xl flex flex-col z-[60] animate-slide-up border border-stone-100 overflow-hidden",children:[_.jsxs("div",{className:"bg-white p-4 border-b flex justify-between items-center",children:[_.jsxs("h3",{className:"font-bold text-[#756256] flex items-center gap-2",children:[_.jsx(__,{size:18,className:"text-[#A58976]"}),""]}),_.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:_.jsx(ki,{size:18})})]}),_.jsx("div",{className:"overflow-y-auto flex-1 bg-[#F9F7F5] p-2 space-y-2",children:n.length===0?_.jsxs("div",{className:"py-12 text-center text-gray-400 text-sm flex flex-col items-center gap-2",children:[_.jsx(__,{size:32,className:"opacity-20"}),""]}):n.map(a=>_.jsxs("div",{onClick:()=>!a.isRead&&t(a.id),className:`p-3 rounded-xl transition-all cursor-pointer border relative ${a.isRead?"bg-white/50 border-transparent grayscale-[0.3]":"bg-white border-blue-50 shadow-sm font-medium"}`,children:[!a.isRead&&_.jsx("div",{className:"absolute top-3 left-1.5 w-1.5 h-1.5 bg-blue-500 rounded-full"}),_.jsx("div",{className:"text-xs text-[#756256] mb-1 leading-relaxed pl-2",children:a.content}),_.jsx("div",{className:"text-[12px] text-gray-400 pl-2",children:sE(a.timestamp)})]},a.id))}),n.length>0&&_.jsx("div",{className:"p-3 bg-white border-t text-center",children:_.jsx("button",{onClick:r,className:"text-[12px] font-bold text-[#A58976] hover:underline",children:""})})]}),n9=()=>{const[n,e]=pe.useState("login"),[t,r]=pe.useState(null),[a,l]=pe.useState(null),[c,d]=pe.useState(null),[m,g]=pe.useState(!1),[y,E]=pe.useState(!1),[T,k]=pe.useState([]),R=T.some(we=>!we.isRead),[j,U]=pe.useState([]),se=j.some(we=>we.unreadBy?.includes(t?.uid));pe.useEffect(()=>{if(!t?.uid)return;const we=Ze=>{const an=Ze.docs.map(on=>({id:on.id,...on.data()}));U(on=>{const Et=new Map(on.map(it=>[it.id,it]));return an.forEach(it=>Et.set(it.id,it)),Array.from(Et.values())})},Re=cn.getUserTransactions(t.uid,we),Ye=cn.getSellerTransactions(t.uid,we);return()=>{Re(),Ye()}},[t?.uid]);const[le,te]=pe.useState([]),[_e,ae]=pe.useState(!0),[he,x]=pe.useState({exams:[]});pe.useEffect(()=>{(async()=>{try{const{functions:Re}=await Xr(async()=>{const{functions:an}=await Promise.resolve().then(()=>Jr);return{functions:an}},void 0),Ze=await Re.httpsCallable("getExamCountdown")();Ze.data&&Ze.data.exams?x(Ze.data):x({exams:[]})}catch(Re){console.error("Failed to fetch countdown:",Re),x({exams:[]})}})()},[]);const[I,N]=pe.useState(0),[O,C]=pe.useState(!1),[M,D]=pe.useState(!1),Ne=pe.useRef(!1),[rt,$]=pe.useState(BU),[X,ce]=pe.useState(["classic-1"]),[ke,Ve]=pe.useState("classic-1");pe.useEffect(()=>{let we=null,Re=null;const Ye=kr.onAuthStateChanged(Ze=>{Ze?(r({uid:Ze.uid,email:Ze.email,...Ze,nickname:Ze.email.split("@")[0]}),we=kr.onProfileSnapshot(Ze.uid,an=>{if(an.exists){const on=an.data();r(it=>({...it,...on,uid:Ze.uid})),N(on.coins||0),ce(on.myAvatars||["classic-1"]),Ve(on.currentAvatarId||"classic-1"),on.isProfileCompleted?e("home"):e("login"),on.isProfileCompleted&&!on.ponyGiftClaimed&&D(!0);const Et=async()=>{if(!Ne.current)try{const{functions:it}=await Xr(async()=>{const{functions:Zo}=await Promise.resolve().then(()=>Jr);return{functions:Zo}},void 0),Jo=await it.httpsCallable("dailyCheckIn")();Ne.current=!0,Jo.data.success&&(C(!0),N(Jo.data.newBalance))}catch(it){console.error("Check-in failed",it)}};on.isProfileCompleted&&Et()}}),Re=cn.subscribeToNotifications(Ze.uid,an=>{k(an)})):(r(null),e("login"),k([]),we&&we(),Re&&Re())});return()=>{Ye(),we&&we(),Re&&Re()}},[]),pe.useEffect(()=>{const we=cn.onBooksSnapshot(Ye=>{te(Ye),ae(!1)},Ye=>{console.error("Global books fetch failed:",Ye),ae(!1)}),Re=cn.onWishesSnapshot(Ye=>{$(Ye)});return()=>{we&&we(),Re&&Re()}},[]);const V=()=>_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:_.jsxs("div",{className:"bg-white rounded-[2rem] p-8 w-full max-w-sm text-center relative shadow-2xl transform transition-all animate-scale-up",onClick:we=>we.stopPropagation(),children:[_.jsx("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2",children:_.jsx("div",{className:"bg-gradient-to-br from-yellow-300 to-orange-400 p-4 rounded-full shadow-lg border-4 border-white",children:_.jsx(xI,{size:40,className:"text-white animate-pulse"})})}),_.jsxs("div",{className:"mt-8",children:[_.jsx("h3",{className:"text-2xl font-black text-[#756256] mb-4",children:""}),_.jsxs("p",{className:"text-gray-500 mb-8 leading-relaxed",children:["",_.jsx("br",{})," ",_.jsx("span",{className:"text-orange-500 font-bold",children:""})," "]}),_.jsxs("div",{className:"flex flex-col items-center mb-8",children:[_.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-orange-100 p-1 bg-white shadow-inner mb-3",children:_.jsx("img",{src:Gc("https://i.postimg.cc/9fW28Bc0/niu.jpg",200,70),alt:"Pony Gift",className:"w-full h-full object-cover rounded-full"})}),_.jsx("span",{className:"text-xs font-bold text-gray-400",children:""})]}),_.jsx("button",{onClick:Z,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-[#A58976] to-[#756256] text-white font-bold hover:shadow-xl transition-all active:scale-95 text-lg",children:""})]})]})}),Z=async()=>{try{const{db:we,firebase:Re}=await Xr(async()=>{const{db:Ye,firebase:Ze}=await Promise.resolve().then(()=>Jr);return{db:Ye,firebase:Ze}},void 0);await we.collection("users").doc(t.uid).update({myAvatars:Re.firestore.FieldValue.arrayUnion("pony-gift"),ponyGiftClaimed:!0}),D(!1),alert(" ")}catch(we){console.error(we),alert("")}},de=()=>_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-fade-in",onClick:()=>C(!1),children:_.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-sm text-center relative shadow-xl transform transition-all scale-100",onClick:we=>we.stopPropagation(),children:[_.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2",children:_.jsx("div",{className:"bg-yellow-400 p-3 rounded-full shadow-lg border-4 border-white",children:_.jsx(II,{size:32,className:"text-white"})})}),_.jsxs("div",{className:"mt-6",children:[_.jsx("h3",{className:"text-xl font-bold text-[#756256] mb-2",children:""}),_.jsx("p",{className:"text-gray-500 mb-6",children:" 5 "}),_.jsxs("div",{className:"flex items-center justify-center gap-2 text-2xl font-bold text-yellow-600 mb-6 bg-yellow-50 py-3 rounded-xl border border-yellow-100",children:[_.jsx(fv,{size:28,fill:"currentColor"})," +5"]}),_.jsx("button",{onClick:()=>C(!1),className:"w-full py-3 rounded-xl bg-[#A58976] text-white font-bold hover:bg-[#8D735F] transition-colors",children:""})]})]})}),me=(we,Re)=>{we==="product"&&(l(Re),Re&&Re.id&&cn.incrementBookView(Re.id)),e(we)},Se=async()=>{if(t?.isGuest){r(null),e("login"),k([]);return}await kr.logout()},Oe=async(we,Re)=>{try{await cn.addWish({content:we,image:Re,user:t.nickname||t.realName||t.email,avatarId:ke})}catch(Ye){console.error("Failed to add wish:",Ye),alert("")}},Ge=async we=>{try{window.confirm("")&&await cn.deleteWish(we)}catch(Re){console.error("Failed to delete wish:",Re),alert("")}},Ut=async(we,Re)=>{if(I<Re){alert("");return}if(window.confirm(` ${Re} `)){if(t?.isGuest){const Ye=JSON.parse(localStorage.getItem("guestAvatarData")||"{}"),Ze=Ye.myAvatars||["classic-1"],an=I-Re;Ze.includes(we)||Ze.push(we),Ye.myAvatars=Ze,Ye.coins=an,localStorage.setItem("guestAvatarData",JSON.stringify(Ye)),ce(Ze),N(an),alert("");return}try{const{functions:Ye}=await Xr(async()=>{const{functions:an}=await Promise.resolve().then(()=>Jr);return{functions:an}},void 0);await Ye.httpsCallable("purchaseItem")({itemId:we,price:Re,type:"avatar"}),alert("")}catch(Ye){console.error(Ye),alert(": "+Ye.message)}}},_t=async we=>{if(Ve(we),t?.isGuest){try{const Re=JSON.parse(localStorage.getItem("guestAvatarData")||"{}");Re.currentAvatarId=we,localStorage.setItem("guestAvatarData",JSON.stringify(Re))}catch(Re){console.error("Failed to save guest avatar:",Re)}return}try{const{db:Re}=await Xr(async()=>{const{db:Ye}=await Promise.resolve().then(()=>Jr);return{db:Ye}},void 0);await Re.collection("users").doc(t.uid).update({currentAvatarId:we})}catch(Re){console.error("Failed to save avatar:",Re),alert("")}},qi=async()=>{if(t)try{await cn.markAllNotificationsAsRead(t.uid)}catch(we){console.error("Clear all failed",we)}},As=()=>{const we=JSON.parse(localStorage.getItem("guestAvatarData")||"{}"),Re=we.currentAvatarId||"classic-1",Ye=we.myAvatars||["classic-1"],Ze=we.coins||0;r(qU),e("home"),N(Ze),ce(Ye),Ve(Re),k([])};if(!t&&n!=="login")return null;const Is=()=>{switch(n){case"login":return _.jsx(QU,{onLogin:null,onGuestLogin:As});case"home":return _.jsx(YU,{onNavigate:me,user:t,coins:I,wishes:rt,onAddWish:Oe,onDeleteWish:Ge,books:le,isLoading:_e,currentAvatarId:ke,unreadCount:0,examCountdown:he,onToggleNotifications:()=>E(!y),hasUnreadNotifications:R,onLogout:Se});case"product":return _.jsx(WU,{product:a,currentUser:t,onBack:()=>me("home"),onContact:async()=>{try{await cn.startTransaction(a,t,we=>{d({id:we,bookId:a.id,bookTitle:a.title,sellerId:a.sellerId,price:a.price})})}catch(we){console.error(we),alert("")}}});case"profile":return _.jsx(JU,{user:t,onBack:()=>me("home"),onNavigate:me,onLogout:Se,coins:I,myAvatars:X,currentAvatarId:ke,onPurchase:Ut,onEquip:_t});case"tutorial":return _.jsx(XU,{onBack:()=>me(t?.isGuest?"home":"profile"),user:t,onJoin:Se});default:return _.jsx("div",{children:"404"})}};return _.jsxs("div",{className:"min-h-screen flex flex-col bg-[#F9F7F5]",children:[_.jsx("div",{className:"flex-1",children:Is()}),n!=="login"&&_.jsx(r9,{onNavigate:me}),O&&_.jsx(de,{}),M&&_.jsx(V,{}),c&&_.jsx(ZU,{transaction:c,currentUser:t,onClose:()=>d(null),onBackToList:()=>{d(null),g(!0)}}),y&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-[55] bg-transparent",onClick:()=>E(!1)}),_.jsx(t9,{notifications:T,onClose:()=>E(!1),onMarkAsRead:async we=>{await cn.markNotificationAsRead(we)},onClearAll:qi})]}),t&&n!=="login"&&!c&&_.jsxs(_.Fragment,{children:[_.jsxs("button",{onClick:()=>g(!m),className:"fixed bottom-6 right-6 w-14 h-14 bg-[#756256] text-white rounded-full shadow-lg flex items-center justify-center hover:bg-[#5D4E44] transition-all transform hover:scale-105 z-40 border-2 border-white",children:[m?_.jsx(ki,{size:24}):_.jsx(ko,{size:24}),!m&&se&&_.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 bg-red-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]}),m&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"fixed inset-0 z-[45] bg-transparent",onClick:()=>g(!1)}),_.jsx(e9,{currentUser:t,books:le,onSelectChat:we=>{d(we),g(!1)},onClose:()=>g(!1)})]})]})]})},r9=({onNavigate:n})=>_.jsx("footer",{className:"bg-[#756256] text-[#E8E3DF] py-12 px-6 mt-12 border-t border-white/10",children:_.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between gap-8 text-center md:text-left",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center gap-2 justify-center md:justify-start",children:[_.jsx(uD,{size:24,className:"text-[#A58976]"}),_.jsx("span",{className:"text-xl font-black tracking-tight text-white",children:"SchoolBook Exchange"})]}),_.jsxs("p",{className:"text-xs opacity-70 leading-relaxed font-medium",children:["",_.jsx("br",{}),""]})]}),_.jsxs("div",{className:"flex flex-col gap-3 justify-start md:mt-0",children:[_.jsx("div",{className:"text-sm font-bold text-white mb-2 underline underline-offset-4 decoration-[#A58976]",children:""}),_.jsxs("div",{className:"text-xs opacity-80 flex items-center gap-2 justify-center md:justify-start hover:opacity-100 transition-opacity cursor-default",children:[_.jsx(AD,{size:14})," "]}),_.jsxs("div",{className:"text-xs opacity-80 flex items-center gap-2 justify-center md:justify-start hover:opacity-100 transition-opacity cursor-default",children:[_.jsx(CI,{size:14})," "]}),_.jsxs("div",{className:"text-xs opacity-80 flex items-center gap-2 justify-center md:justify-start hover:opacity-100 transition-opacity cursor-default",children:[_.jsx(SI,{size:14})," "]})]}),_.jsxs("div",{className:"flex flex-col gap-3 justify-start md:mt-0",children:[_.jsx("div",{className:"text-sm font-bold text-white mb-2 underline underline-offset-4 decoration-[#A58976]",children:" / "}),_.jsxs("button",{onClick:()=>n&&n("tutorial"),className:"text-xs opacity-80 hover:opacity-100 transition-opacity flex items-center gap-2 justify-center md:justify-start hover:text-white text-left",children:[_.jsx("span",{className:"w-1 h-1 bg-[#A58976] rounded-full"})," "]}),_.jsxs("button",{onClick:()=>n&&n("tutorial"),className:"text-xs opacity-80 hover:opacity-100 transition-opacity flex items-center gap-2 justify-center md:justify-start hover:text-white text-left",children:[_.jsx("span",{className:"w-1 h-1 bg-[#A58976] rounded-full"})," "]}),_.jsxs("button",{onClick:()=>n&&n("tutorial"),className:"text-xs opacity-80 hover:opacity-100 transition-opacity flex items-center gap-2 justify-center md:justify-start hover:text-white text-left",children:[_.jsx("span",{className:"w-1 h-1 bg-[#A58976] rounded-full"})," LINE "]})]}),_.jsxs("div",{className:"flex flex-col gap-3 justify-start md:mt-0",children:[_.jsx("div",{className:"text-sm font-bold text-white mb-2 underline underline-offset-4 decoration-[#A58976]",children:""}),_.jsxs("div",{className:"text-xs opacity-80 hover:opacity-100 transition-opacity flex items-center gap-2 justify-center md:justify-start",children:[_.jsx(ko,{size:14})," LINE ID : @649fkijr"]}),_.jsx("div",{className:"text-[10px] opacity-50 mt-4 font-mono",children:" 2025 SchoolBook Exchange. All rights reserved."})]})]})});iD.createRoot(document.getElementById("root")).render(_.jsx(pe.StrictMode,{children:_.jsx(n9,{})}));
